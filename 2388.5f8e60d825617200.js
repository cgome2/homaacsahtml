"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[2388],{62388:(R,b,s)=>{s.r(b),s.d(b,{RendimientosModule:()=>Le});var a=s(69808),r=s(93075),M=s(61264),T=s(4940),O=s(7057),_=s(72467),P=s(3299),o=s(70655),l=s(14499),f=s(88914),Z=s(37425),I=s(86087),A=s(84847),v=s(32075),E=s(48966),F=s(96831),L=s(92198),w=s(96166),W=s(12983),B=s.n(W),e=s(5e3),G=s(59410),U=s(33344),g=s(53580),h=s(30277),p=s(36551),u=s(47423),y=s(25245),J=s(19165),z=s(94927);function ee(n,c){if(1&n&&(e.TgZ(0,"th",16),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.name)}}function te(n,c){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=c.$implicit,i=e.oxw(2).$implicit,d=e.oxw();e.xp6(1),e.Oqu(d.getLabel(i.name,t[i.property]))}}function ne(n,c){if(1&n&&(e.ynx(0,13),e.YNc(1,ee,2,1,"th",14),e.YNc(2,te,2,1,"td",15),e.BQk()),2&n){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function oe(n,c){if(1&n&&(e.ynx(0),e.YNc(1,ne,3,1,"ng-container",12),e.BQk()),2&n){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty)}}function ae(n,c){1&n&&e._UZ(0,"tr",18)}function ie(n,c){1&n&&e._UZ(0,"tr",19)}let q=(()=>{class n{constructor(t,i,d){this.data=t,this._exporterService=i,this._tokenStorageService=d,this.subject$=new F.t(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Id transacci\xf3n",property:"transaction_id",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Id veh\xedculo",property:"mean_id",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Veh\xedculo",property:"mean_name",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Litros",property:"quantity",visible:!0,isModelProperty:!0,displayFn:!0},{name:"PPV",property:"ppv",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Fecha",property:"timestamp",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Factor de VCT",property:"transaction_sg",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Id flota",property:"fleet_id",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Remote transaction Id",property:"id",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Id estaci\xf3n",property:"site_code",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Producto",property:"product_name",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Precio",property:"total_price",visible:!0,isModelProperty:!0,displayFn:!0},{name:"VTC",property:"transaction_vtc",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Od\xf3metro",property:"odometer",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Hor\xf3metro",property:"engine_hours",visible:!0,isModelProperty:!0,displayFn:!0}],this.pageSize=200}getLabel(t,i){if(null!=t)return i}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}ngOnInit(){this.dataSource=new v.by,this.transactions=this.data.transactions,this.dataSource=new v.by(this.transactions),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.data$.pipe((0,L.h)(t=>!!t)).subscribe(t=>{this.transactions=t,this.dataSource.data=t})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onFilterChange(t){!this.dataSource||(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}round(t){return(Math.round(100*t)/100).toFixed(2)}pdfMe(){var t=[],i=[],d=[],C=[];this.columns.forEach(x=>{x.visible&&(i.push({title:x.name,dataKey:x.property}),d.push(x.property),C.push(x.name))});var S=0;this.dataSource.filteredData.forEach(x=>{t[S]={},d.forEach(N=>{t[S][N]=""+x[N]}),S++});var m=new w.jsPDF({orientation:"landscape",unit:"mm",format:"letter"});m.setFillColor("#152235"),m.roundedRect(10,15,260,30,2,2,"DF"),m.setFontSize(11),m.setTextColor("white"),m.text(this.data.parameters.report_title,15,38),m.setFontSize(9),m.text("Periodo de "+this.data.parameters.from_date+" a "+this.data.parameters.to_date,15,43),m.addImage("../../../../../assets/img/maacsa.png","PNG",15,20,62,10.3),m.addImage("../../../../../assets/img/logo-grupo-mexico.png","PNG",200,20,63.4,17.6),m.setFontSize(8),m.text("Generado por "+this._tokenStorageService.getUser().user+"("+this._tokenStorageService.getUser().name+") el "+this.datetime,180,43),B()(m,{body:t,columns:i,startY:50,headStyles:{fontStyle:"bold",fillColor:"#152235",halign:"center"}}),m.save("transacciones-rendimientos.pdf")}excelMe(){var t=[],i=[],d=[],C=[];this.columns.forEach(m=>{m.visible&&(i.push({title:m.name,dataKey:m.property}),d.push(m.property),C.push(m.name))});var S=0;this.dataSource.filteredData.forEach(m=>{t[S]={},d.forEach(x=>{t[S][x]=""+m[x]}),S++}),this._exporterService.exportToExcel(t,"transacciones-rendimientos")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.WI),e.Y36(G.M),e.Y36(U.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["transacciones-rendimientos-modal-table"]],viewQuery:function(t,i){if(1&t&&(e.Gf(I.NW,7),e.Gf(A.YE,7)),2&t){let d;e.iGM(d=e.CRH())&&(i.paginator=d.first),e.iGM(d=e.CRH())&&(i.sort=d.first)}},inputs:{columns:"columns"},decls:18,vars:10,consts:[["fxLayout","row","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end",1,"buttons-set"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["svgIcon","excel"],[1,"page-modal"],["name","Transacciones",3,"columns","filterChange"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["class","route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"route-animations-elements"]],template:function(t,i){1&t&&(e.TgZ(0,"fury-page-layout-header"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"fury-title"),e._uU(4),e.qZA(),e.TgZ(5,"fury-title"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",2),e.TgZ(8,"button",3),e.NdJ("click",function(){return i.excelMe()}),e._UZ(9,"mat-icon",4),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"fury-page-layout-content",5),e.TgZ(11,"fury-list",6),e.NdJ("filterChange",function(C){return i.onFilterChange(C)}),e.TgZ(12,"table",7),e._uU(13,"--\x3e "),e.YNc(14,oe,2,1,"ng-container",8),e.YNc(15,ae,1,0,"tr",9),e.YNc(16,ie,1,0,"tr",10),e.qZA(),e._UZ(17,"mat-paginator",11),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij("Detalle de transacciones para ",i.data.parameters.mean,""),e.xp6(2),e.AsE("Periodo de ",i.data.parameters.from_date," a ",i.data.to_date,""),e.xp6(4),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",i.columns),e.xp6(1),e.Q6J("dataSource",i.dataSource),e.xp6(2),e.Q6J("ngForOf",i.columns),e.xp6(1),e.Q6J("matHeaderRowDef",i.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.visibleColumns),e.xp6(1),e.Q6J("pageSize",i.pageSize))},directives:[g.U,h.xw,h.SQ,p.M,h.Wh,u.lW,y.Hw,J.d,z.n,v.BZ,A.YE,a.sg,v.as,v.nj,I.NW,a.O5,v.w1,v.fO,v.Dz,v.ge,A.nU,v.ev,v.XQ,v.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}.title[_ngcontent-%COMP%]{color:#000}.page-modal[_ngcontent-%COMP%]{overflow:scroll;max-height:350px;margin:24px;padding:2px;box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f}.page-modal[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.page-modal[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.page-modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.page-modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.page-modal[_ngcontent-%COMP%]   .information-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:100%}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:410px}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;width:245px}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:0;width:245px}.page-modal[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.page-modal[_ngcontent-%COMP%]   .indented-right[_ngcontent-%COMP%]{margin-left:40px}.page-modal[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}.numerical[_ngcontent-%COMP%]{text-align:end}.fury-title[_ngcontent-%COMP%]{color:#f5f5f5}.buttons-set[_ngcontent-%COMP%]{margin-left:60px}.buttons-set[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{text-align:center;width:70px;height:70px}.buttons-set[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:40px;height:40px}"],data:{animation:[f.M,l.X]}}),n})();var re=s(2728),K=s(15702),k=s(92181);function se(n,c){if(1&n&&(e.TgZ(0,"th",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function le(n,c){if(1&n&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&n){const t=c.$implicit,i=e.oxw(2).$implicit,d=e.oxw();e.xp6(1),e.Oqu(d.getLabel(i.name,t[i.property]))}}function de(n,c){if(1&n&&(e.ynx(0,17),e.YNc(1,se,2,1,"th",18),e.YNc(2,le,2,1,"td",19),e.BQk()),2&n){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function ce(n,c){if(1&n&&(e.TgZ(0,"th",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.name)}}function pe(n,c){if(1&n&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&n){const t=c.$implicit,i=e.oxw(2).$implicit,d=e.oxw();e.xp6(1),e.Oqu(d.getLabel(i.name,t[i.property]))}}function me(n,c){if(1&n&&(e.ynx(0,17),e.YNc(1,ce,2,1,"th",18),e.YNc(2,pe,2,1,"td",19),e.BQk()),2&n){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function ge(n,c){if(1&n&&(e.ynx(0),e.YNc(1,de,3,1,"ng-container",16),e.YNc(2,me,3,1,"ng-container",16),e.BQk()),2&n){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty&&!t.displayFn),e.xp6(1),e.Q6J("ngIf",t.isModelProperty&&t.displayFn)}}function ue(n,c){1&n&&e._UZ(0,"th",22)}function _e(n,c){if(1&n&&(e.TgZ(0,"td",23),e.TgZ(1,"button",24),e.NdJ("click",function(i){return i.stopPropagation()}),e.TgZ(2,"mat-icon"),e._uU(3,"more_horiz"),e.qZA(),e.qZA(),e._UZ(4,"mat-menu",25,26),e.qZA()),2&n){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function he(n,c){1&n&&e._UZ(0,"tr",27)}function fe(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr",28),e.NdJ("click",function(){const C=e.CHM(t).$implicit;return e.oxw().details(C)}),e.qZA()}}let $=(()=>{class n{constructor(t,i,d,C,S,m){this.data=t,this.dialog=i,this._exporterService=d,this._tokenStorageService=C,this._transactionsService=S,this._meansService=m,this.subject$=new F.t(1),this.data$=this.subject$.asObservable(),this.bloqueable=!0,this.columns=[{name:"Id veh\xedculo",property:"mean_id",visible:!1,isModelProperty:!0,displayFn:!0},{name:"Veh\xedculo",property:"mean",visible:!0,isModelProperty:!0,displayFn:!0},{name:"\xc1rea",property:"area",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Path",property:"area_path",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Proceso",property:"process_id",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Horas motor",property:"engine_hours",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Kilometraje",property:"mileage",visible:!0,isModelProperty:!0,displayFn:!0},{name:"N\xfamero de despachos",property:"number_of_transactions",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Litros",property:"liters",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Rendimiento te\xf3rico",property:"theoretical_performance",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Rendimiento real",property:"real_performance",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Tipo de control",property:"type_of_control",visible:!0,isModelProperty:!0,displayFn:!0}],this.pageSize=200}getLabel(t,i){if(null!=t)return"Id veh\xedculo"===t||"Veh\xedculo"===t||"\xc1rea"===t||"Path"===t||"Proceso"===t||"Tipo de control"===t?i:this.round(isNaN(i)?0:i)}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){this.means_efficiencies=this.data.means_efficiencies,this.dataSource=new v.by(this.means_efficiencies),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnInit(){console.log(this.data);var t="2"===this.data.filter.type_of_control?"mileage":"engine_hours";this.columns.forEach((i,d)=>{i.property===t&&this.columns.splice(d,1)}),console.log(this.columns),this.pageSize=this.data.parameters.page_size,this.dataSource=new v.by,this._transactionsService.getServerTimestamp().subscribe(i=>{this.datetime=i.message}),this.getData(),this.data$.pipe((0,L.h)(i=>!!i)).subscribe(i=>{this.means_efficiencies=i,this.dataSource.data=i})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onFilterChange(t){!this.dataSource||(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}round(t){return(Math.round(100*t)/100).toFixed(2)}pdfMe(){var t=[],i=[],d=[],C=[];this.columns.forEach(x=>{x.visible&&(i.push({title:x.name,dataKey:x.property}),d.push(x.property),C.push(x.name))});var S=0;this.dataSource.filteredData.forEach(x=>{t[S]={},d.forEach(N=>{t[S][N]=""+x[N]}),S++});var m=new w.jsPDF({orientation:"landscape",unit:"mm",format:"letter"});m.setFillColor("#152235"),m.roundedRect(10,15,260,30,2,2,"DF"),m.setFontSize(11),m.setTextColor("white"),m.text(this.data.parameters.report_title,15,38),m.setFontSize(9),m.text("Periodo de "+this.data.filter.from_date+" a "+this.data.filter.to_date,15,43),m.addImage("../../../../../assets/img/maacsa.png","PNG",15,20,62,10.3),m.addImage("../../../../../assets/img/logo-grupo-mexico.png","PNG",200,20,63.4,17.6),m.setFontSize(8),m.text("Generado por "+this._tokenStorageService.getUser().user+"("+this._tokenStorageService.getUser().name+") el "+this.datetime,180,43),B()(m,{body:t,columns:i,startY:50,headStyles:{fontStyle:"bold",fillColor:"#152235",halign:"center"}}),m.save("rendimientos.pdf")}excelMe(){var t=[],i=[],d=[],C=[];this.columns.forEach(m=>{m.visible&&(i.push({title:m.name,dataKey:m.property}),d.push(m.property),C.push(m.name))});var S=0;this.dataSource.filteredData.forEach(m=>{t[S]={},d.forEach(x=>{t[S][x]=""+m[x]}),S++}),this._exporterService.exportToExcel(t,"rendimientos")}details(t){return(0,o.mG)(this,void 0,void 0,function*(){var i={mean_id:t.mean_id,mean:t.mean,from_date:this.data.filter.from_date,to_date:this.data.filter.to_date,number_of_transactions:t.number_of_transactions,type_of_control:this.data.filter.type_of_control};this._meansService.getEfficienciesFromId(t.mean_id,i).subscribe(d=>{this.dialog.open(q,{data:{transactions:d,parameters:i}}).afterClosed().subscribe(C=>{C&&console.log("Cerrada la tabla de detalles"+C)})})})}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.WI),e.Y36(E.uw),e.Y36(G.M),e.Y36(U.i),e.Y36(re.v),e.Y36(K._))},n.\u0275cmp=e.Xpm({type:n,selectors:[["rendimientos-modal-table"]],viewQuery:function(t,i){if(1&t&&(e.Gf(I.NW,7),e.Gf(A.YE,7)),2&t){let d;e.iGM(d=e.CRH())&&(i.paginator=d.first),e.iGM(d=e.CRH())&&(i.sort=d.first)}},inputs:{columns:"columns"},decls:22,vars:10,consts:[["fxLayout","row","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end",1,"buttons-set"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["svgIcon","excel"],["svgIcon","pdf"],[1,"page-modal"],["name","Rendimientos",3,"columns","filterChange"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"fury-page-layout-header"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"fury-title"),e._uU(4),e.qZA(),e.TgZ(5,"fury-title"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",2),e.TgZ(8,"button",3),e.NdJ("click",function(){return i.excelMe()}),e._UZ(9,"mat-icon",4),e.qZA(),e.TgZ(10,"button",3),e.NdJ("click",function(){return i.pdfMe()}),e._UZ(11,"mat-icon",5),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"fury-page-layout-content",6),e.TgZ(13,"fury-list",7),e.NdJ("filterChange",function(C){return i.onFilterChange(C)}),e.TgZ(14,"table",8),e.YNc(15,ge,3,2,"ng-container",9),e.ynx(16,10),e.YNc(17,ue,1,0,"th",11),e.YNc(18,_e,6,1,"td",12),e.BQk(),e.YNc(19,he,1,0,"tr",13),e.YNc(20,fe,1,0,"tr",14),e.qZA(),e._UZ(21,"mat-paginator",15),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(i.data.parameters.report_title),e.xp6(2),e.AsE("Periodo de ",i.data.filter.from_date," a ",i.data.filter.to_date,""),e.xp6(6),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",i.columns),e.xp6(1),e.Q6J("dataSource",i.dataSource),e.xp6(1),e.Q6J("ngForOf",i.columns),e.xp6(4),e.Q6J("matHeaderRowDef",i.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.visibleColumns),e.xp6(1),e.Q6J("pageSize",i.pageSize))},directives:[g.U,h.xw,h.SQ,p.M,h.Wh,u.lW,y.Hw,J.d,z.n,v.BZ,A.YE,a.sg,v.w1,v.fO,v.Dz,v.as,v.nj,I.NW,a.O5,v.ge,A.nU,v.ev,k.p6,k.VK,v.XQ,v.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}.title[_ngcontent-%COMP%]{color:#000}.page-modal[_ngcontent-%COMP%]{overflow:scroll;max-height:600px;margin:24px;padding:2px;box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f}.page-modal[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.page-modal[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.page-modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.page-modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.page-modal[_ngcontent-%COMP%]   .information-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:100%}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:410px}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;width:245px}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:0;width:245px}.page-modal[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.page-modal[_ngcontent-%COMP%]   .indented-right[_ngcontent-%COMP%]{margin-left:40px}.page-modal[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}.numerical[_ngcontent-%COMP%]{text-align:end}.fury-title[_ngcontent-%COMP%]{color:#f5f5f5}.buttons-set[_ngcontent-%COMP%]{margin-left:60px}.buttons-set[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{text-align:center;width:70px;height:70px}.buttons-set[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:40px;height:40px}"],data:{animation:[f.M,l.X]}}),n})();var ve=s(58527),Me=s(82593),Ce=s(17846),xe=s(39762),Te=s(38932),Q=s(67322),H=s(77531),D=s(86856),j=s(79814),Se=s(74107),V=s(79207),ye=s(90508);function Pe(n,c){if(1&n&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.NAME)}}function Oe(n,c){if(1&n&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.NAME)}}function be(n,c){if(1&n&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.NAME)}}function Ae(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"form",5),e.TgZ(1,"div",6),e.TgZ(2,"mat-form-field",7),e.TgZ(3,"mat-label"),e._uU(4,"T\xedtulo de reporte:"),e.qZA(),e._UZ(5,"input",8),e.qZA(),e.TgZ(6,"mat-form-field",7),e.TgZ(7,"mat-label"),e._uU(8,"Registros por p\xe1gina:"),e.qZA(),e._UZ(9,"input",9),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"mat-form-field",7),e.TgZ(12,"mat-label"),e._uU(13,"Desde Fecha:"),e.qZA(),e._UZ(14,"input",10),e.TgZ(15,"mat-datepicker-toggle",11),e.TgZ(16,"mat-icon",12),e._uU(17,"date_range"),e.qZA(),e.qZA(),e._UZ(18,"mat-datepicker",13,14),e.qZA(),e.TgZ(20,"mat-form-field",7),e.TgZ(21,"mat-label"),e._uU(22,"Hasta fecha:"),e.qZA(),e._UZ(23,"input",15),e.TgZ(24,"mat-datepicker-toggle",11),e.TgZ(25,"mat-icon",12),e._uU(26,"date_range"),e.qZA(),e.qZA(),e._UZ(27,"mat-datepicker",13,16),e.qZA(),e.qZA(),e.TgZ(29,"div",6),e.TgZ(30,"div",17),e.TgZ(31,"mat-label",18),e._uU(32,"Tipo de control:*"),e.qZA(),e.TgZ(33,"mat-radio-group",19),e.TgZ(34,"mat-radio-button",20),e._uU(35,"Od\xf3metro"),e.qZA(),e.TgZ(36,"mat-radio-button",21),e._uU(37,"Hor\xf3metro"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"mat-form-field",22),e.TgZ(39,"mat-label"),e._uU(40,"Flotas:"),e.qZA(),e.TgZ(41,"mat-select",23),e.NdJ("selectionChange",function(d){return e.CHM(t),e.oxw().onChangeFleet(d.value)}),e.YNc(42,Pe,2,2,"mat-option",24),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"div",6),e.TgZ(44,"div",25),e._UZ(45,"ngx-mat-tree-select-input",26),e.TgZ(46,"mat-label",27),e._uU(47,"\xc1reas:"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",6),e.TgZ(49,"mat-form-field",7),e.TgZ(50,"mat-label"),e._uU(51,"Modelos:"),e.qZA(),e.TgZ(52,"mat-select",28),e.NdJ("focus",function(){return e.CHM(t),e.oxw().onFocusModels()})("selectionChange",function(d){return e.CHM(t),e.oxw().onChangeModel(d)}),e.YNc(53,Oe,2,2,"mat-option",24),e.qZA(),e.qZA(),e.TgZ(54,"mat-form-field",7),e.TgZ(55,"mat-label"),e._uU(56,"Dispositivos:"),e.qZA(),e.TgZ(57,"mat-select",29),e.NdJ("focus",function(){return e.CHM(t),e.oxw().onFocusMeans()}),e.YNc(58,be,2,2,"mat-option",24),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",30),e.TgZ(60,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._uU(61,"CONSULTAR"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(19),i=e.MAs(28),d=e.oxw();e.Q6J("formGroup",d.filterFormGroup),e.xp6(14),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(8),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i),e.xp6(18),e.Q6J("ngForOf",d.fleets),e.xp6(3),e.Q6J("multiple",!0)("options",d.areas)("placeholder",d.areasnamesfilter.toString())("controlName","areas")("canSelectParentNode",!0),e.xp6(8),e.Q6J("ngForOf",d.models),e.xp6(5),e.Q6J("ngForOf",d.means),e.xp6(2),e.Q6J("disabled",d.filterFormGroup.invalid)}}const Ee=function(){return["Tables"]},Ze=[{path:"",component:(()=>{class n{constructor(t,i,d,C,S){this.dialog=t,this._areasService=i,this._fleetsService=d,this._meansService=C,this._modelsService=S,this.areas=[],this.areasfilter=[],this.modelsfilter=[],this.areasnamesfilter=[],this.currentArea={name:"Seleccione \xe1rea",id:"",children:[]},this.fleets=[],this.means=[],this.models=[],this.means_efficiencies=[],this.filter={fleets:"",areas:"",models:"",means:"",fleets_names:"",areas_names:"",models_names:"",means_names:"",from_date:"",to_date:""},this.disabled=!1,this.showSpinners=!0,this.showSeconds=!1,this.touchUi=!1,this.enableMeridian=!1,this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.color="primary",this.filterFormGroup=new r.cw({page_size:new r.NI(100,[r.kI.required]),report_title:new r.NI("Reporte de rendimientos"),from_date:new r.NI(new Date),to_date:new r.NI(new Date),fleets:new r.NI([]),areas:new r.NI([]),models:new r.NI([]),means:new r.NI([]),type_of_control:new r.NI("1",[r.kI.required])}),this.dateControl=new r.NI(new Date(2021,9,4,5,6,7)),this.dateControlMinMax=new r.NI(new Date)}fillFilterAreas(t){return t.map(i=>{this.areasfilter.push(i.value),this.areasnamesfilter.push(i.name),i.children.length>0&&this.fillFilterAreas(i.children)})}ngOnInit(){return(0,o.mG)(this,void 0,void 0,function*(){this.fleets=yield this.getFleets(),this.areas=this.fleets.length>=0?this.constructTreeData(yield this.getAreas()):[],this.models=yield this.getModels(),this.means=yield this.getMeans(),this.filterFormGroup.get("areas").valueChanges.subscribe(t=>{this.areasfilter=[],this.areasnamesfilter=[],this.filterFormGroup.controls.means.setValue([]),this.filterFormGroup.controls.models.setValue([]),this.fillFilterAreas(t),this.filter.areas=this.areasfilter.toString()})})}getFleets(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._fleetsService.getAll().toPromise()})}getAreas(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._areasService.getAll(this.filter).toPromise()})}getModels(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._modelsService.getAllModelsByAreas(this.filter).toPromise()})}getMeans(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._meansService.getFiltered(this.filter).toPromise()})}getMeansEfficiencies(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._meansService.getEfficiencies(this.filter).toPromise()})}submit(){return(0,o.mG)(this,void 0,void 0,function*(){var t=[];this.filterFormGroup.controls.models.value.forEach(d=>{t.push(this.models.find(C=>C.id===d).NAME)}),this.filter={},this.filter={from_date:this.getMysqlDate(this.filterFormGroup.controls.from_date.value),to_date:this.getMysqlDate(this.filterFormGroup.controls.to_date.value),fleets:this.filterFormGroup.controls.fleets.value.toString(),areas:this.areasfilter.toString(),means:this.filterFormGroup.controls.means.value.toString(),models:this.filterFormGroup.controls.models.value.toString(),models_names:t.toString(),type_of_control:this.filterFormGroup.controls.type_of_control.value},this.means_efficiencies=yield this.getMeansEfficiencies(),this.dialog.open($,{data:{parameters:{report_title:this.filterFormGroup.controls.report_title.value,page_size:this.filterFormGroup.controls.page_size.value},filter:this.filter,means_efficiencies:this.means_efficiencies}}).afterClosed().subscribe(d=>{d&&console.log("Cerrada la tabla reporte"+d)})})}onChangeFleet(){return(0,o.mG)(this,void 0,void 0,function*(){this.filter.fleets=this.filterFormGroup.controls.fleets.value.toString(),this.filter.areas="",this.filter.models="",this.filter.means="",this.areas=[],this.areas=this.constructTreeData(yield this.getAreas()),this.models=[],this.models=yield this.getModels(),this.means=[],this.means=yield this.getMeans()})}constructTreeData(t){return t.map(i=>({name:i.name,value:i.id,children:i.children.length?this.constructTreeData(i.children):[]}))}getMysqlDate(t){return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}onFocusMeans(){return(0,o.mG)(this,void 0,void 0,function*(){this.means=[],this.means=yield this.getMeans()})}onFocusModels(){return(0,o.mG)(this,void 0,void 0,function*(){this.models=[],this.models=yield this.getModels()})}onChangeModel(t){return(0,o.mG)(this,void 0,void 0,function*(){this.filter.models=this.filterFormGroup.controls.models.value.toString(),this.means=[],this.means=yield this.getMeans()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.uw),e.Y36(ve.E),e.Y36(Me.V),e.Y36(K._),e.Y36(Ce.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["rendimientos"]],decls:7,vars:5,consts:[["mode","card"],["current","Reporte de rendimientos",3,"crumbs"],[1,"card"],[1,"heading"],["class","filter-form",3,"formGroup",4,"ngIf"],[1,"filter-form",3,"formGroup"],["fxLayout","row","fxLayoutGap","8px",1,"content"],["appearance","outline","fxFlex","auto",1,"field"],["formControlName","report_title","required","","matInput",""],["type","number","formControlName","page_size","required","","matInput",""],["matInput","","formControlName","from_date","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["color","primary"],["fromDate",""],["matInput","","formControlName","to_date","required","",3,"matDatepicker"],["toDate",""],[1,"radio"],[1,"label-radio"],["color","primary","fxLayout","row","required","","formControlName","type_of_control"],["value","1"],["value","2"],["appearance","outline",1,"field"],["formControlName","fleets","multiple","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"div-area"],[1,"tree-filter",3,"multiple","options","placeholder","controlName","canSelectParentNode"],[1,"label-area"],["formControlName","models","multiple","",3,"focus","selectionChange"],["formControlName","means","multiple","",3,"focus"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","",3,"disabled","click"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-header"),e._UZ(2,"fury-breadcrumbs",1),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._uU(5,"Configurar reporte:"),e.qZA(),e.YNc(6,Ae,62,14,"form",4),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@fadeInRight",void 0)("crumbs",e.DdM(4,Ee)),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(3),e.Q6J("ngIf",i.filterFormGroup))},directives:[xe.N,g.U,Te.n,a.O5,r._Y,r.JL,r.sg,h.xw,h.SQ,Q.KE,h.yH,Q.hX,r.Fj,H.Nt,r.JJ,r.u,r.Q7,r.wV,D.hl,D.nW,Q.R9,y.Hw,D.Q0,D.Mq,j.VQ,j.U0,Se.gD,a.sg,V.bl,h.Wh,u.lW,ye.ey],styles:[".title[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:scroll;padding:20px;box-shadow:0 6px 6px -3px #0003,0 10px 14px 1px #00000024,0 4px 18px 3px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:3px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{max-width:50%;min-width:50%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{padding:8px;width:50%}.card[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{margin-top:24px;padding:10px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:0;padding:0 8px}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}.label-area[_ngcontent-%COMP%]{position:relative;font-size:11px;font-family:Roboto;font-weight:400;top:10px;color:#0009;background:white;z-index:1;width:35px;margin:-92px 10px 0!important;height:15px;padding-left:5px}.label-radio[_ngcontent-%COMP%]{position:relative;font-size:11px;font-family:Roboto;font-weight:400;top:10px;color:#0009;background:white;z-index:1;width:90px;margin:-20px 10px 0!important;height:10px;padding-left:5px}.radio[_ngcontent-%COMP%]{display:inline-grid;width:100%;height:52px;border-style:solid;border-width:1px;border-radius:6px;border-color:#e0e0e0;margin-top:4px;min-width:50%}.tree-filter[_ngcontent-%COMP%]{display:inline-grid;width:100%;padding:0}.tree-filter[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{border:none}.tree-filter[_ngcontent-%COMP%]   .mat-select-placeholder[_ngcontent-%COMP%]{color:#000;margin-bottom:15px}.tree-filter[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{display:none}.tree-filter[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{text-align:left}.div-area[_ngcontent-%COMP%]{display:inline-grid;margin-right:0;min-width:100.65%;max-width:100%}"],data:{animation:[f.M,l.X,Z.K]}}),n})()}];let Ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[P.Bz.forChild(Ze)],P.Bz]}),n})();var X=s(61620);const Re=[{path:"",component:$}];let De=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[P.Bz.forChild(Re)],P.Bz]}),n})();const Ne=[{path:"",component:q}];let Fe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[P.Bz.forChild(Ne)],P.Bz]}),n})(),we=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.ez,r.u5,r.UX,O.q,X.o9,E.Is,H.c,u.ot,y.Ps,Fe,_.Z,T.p]]}),n})(),Ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.ez,r.u5,r.UX,O.q,X.o9,E.Is,H.c,u.ot,y.Ps,De,we,_.Z,T.p]]}),n})();var Y=s(70024);let Le=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.ez,Ie,r.u5,r.UX,M.J,T.p,O.q,_.Z,Ue,Y.EC,Y.Yy,Y.K,D.FA,V.rU]]}),n})()},58527:(R,b,s)=>{s.d(b,{E:()=>O});var a=s(40520),r=s(98545),M=s(5e3),T=s(33344);let O=(()=>{class _{constructor(o,l){this.http=o,this.tokenStorage=l}getHeaders(){var o=new a.WM,l=this.tokenStorage.getToken();return o.set("token",l||"{}")}getAll(o){var l=this.getHeaders();const f=(new a.LE).appendAll(o);return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.AREAS,{params:f,headers:l})}getArea(o){var l=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.AREAS+"/"+o,{headers:l})}createArea(o){var l=this.getHeaders();return this.http.post(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.AREAS,o,{headers:l})}updateArea(o){var l=this.getHeaders();return this.http.put(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.AREAS+"/"+o.id,o,{headers:l})}deleteArea(o){var l=this.getHeaders();return this.http.delete(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.AREAS+"/"+o.id,{headers:l})}getCostCenters(o){var l=this.getHeaders();const f=(new a.LE).appendAll(o);return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.COST_CENTERS,{params:f,headers:l})}}return _.\u0275fac=function(o){return new(o||_)(M.LFG(a.eN),M.LFG(T.i))},_.\u0275prov=M.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},82593:(R,b,s)=>{s.d(b,{V:()=>O});var a=s(40520),r=s(98545),M=s(5e3),T=s(33344);let O=(()=>{class _{constructor(o,l){this.http=o,this.tokenStorage=l,this.baseendpoint=r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.FLEETS}getHeaders(){var o=new a.WM,l=this.tokenStorage.getToken();return o.set("token",l||"{}")}getAll(){var o=this.getHeaders();return this.http.get(this.baseendpoint,{headers:o})}getFiltered(o){var l=this.getHeaders();const f=(new a.LE).appendAll(o);return this.http.get(this.baseendpoint,{headers:l,params:f})}create(o){var l=this.getHeaders();return this.http.post(this.baseendpoint,o,{headers:l})}update(o){var l=this.getHeaders();return this.http.put(this.baseendpoint+"/"+o.id,o,{headers:l})}updateCvConfiguration(o){var l=this.getHeaders();return this.http.post(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.CV_CONFIGURATIONS,o,{headers:l})}}return _.\u0275fac=function(o){return new(o||_)(M.LFG(a.eN),M.LFG(T.i))},_.\u0275prov=M.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},15702:(R,b,s)=>{s.d(b,{_:()=>O});var a=s(40520),r=s(98545),M=s(5e3),T=s(33344);let O=(()=>{class _{constructor(o,l){this.http=o,this.tokenStorage=l}getHeaders(){var o=new a.WM,l=this.tokenStorage.getToken();return o.set("token",l||"{}")}getFromId(o){var l=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS+"/"+o,{headers:l})}getFiltered(o){var l=this.getHeaders();const f=(new a.LE).appendAll(o);return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS,{params:f,headers:l})}getAll(){var o=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS,{headers:o})}getEfficiencies(o){var l=this.getHeaders();const f=(new a.LE).appendAll(o);return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS_EFFICIENCIES,{params:f,headers:l})}getEfficienciesFromId(o,l){var f=this.getHeaders();const Z=(new a.LE).appendAll(l);return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS_EFFICIENCIES+"/"+o,{params:Z,headers:f})}create(o){var l=this.getHeaders();return this.http.post(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS,o,{headers:l})}update(o){var l=this.getHeaders();return this.http.put(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS+"/"+o.id,o,{headers:l})}}return _.\u0275fac=function(o){return new(o||_)(M.LFG(a.eN),M.LFG(T.i))},_.\u0275prov=M.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},17846:(R,b,s)=>{s.d(b,{c:()=>O});var a=s(40520),r=s(98545),M=s(5e3),T=s(33344);let O=(()=>{class _{constructor(o,l){this.http=o,this.tokenStorage=l}getHeaders(){var o=new a.WM,l=this.tokenStorage.getToken();return o.set("token",l||"{}")}getAllModels(){var o=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MODELS,{headers:o})}getAllModelsByCompanyId(o){var l=this.getHeaders();const f=(new a.LE).appendAll({company_id:o});return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MODELS,{params:f,headers:l})}getAllModelsByAreas(o){var l=this.getHeaders();const f=(new a.LE).appendAll(o);return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MODELS,{params:f,headers:l})}getModel(o){var l=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MODELS+"/"+o,{headers:l})}createModel(o){var l=this.getHeaders();return this.http.post(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MODELS,o,{headers:l})}updateModel(o){var l=this.getHeaders();return this.http.put(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MODELS+"/"+o.id,o,{headers:l})}getAllCompanies(){var o=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.COMPANIES,{headers:o})}createCompany(o){var l=this.getHeaders();return this.http.post(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.COMPANIES,o,{headers:l})}updateCompany(o){var l=this.getHeaders();return this.http.put(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.COMPANIES+"/"+o.id,o,{headers:l})}getAllEquipmentClasses(){var o=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.EQUIPMENT_CLASSES,{headers:o})}createEquipmentClass(o){var l=this.getHeaders();return this.http.post(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.EQUIPMENT_CLASSES,o,{headers:l})}updateEquipmentClass(o){var l=this.getHeaders();return this.http.put(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.EQUIPMENT_CLASSES+"/"+o.id,o,{headers:l})}}return _.\u0275fac=function(o){return new(o||_)(M.LFG(a.eN),M.LFG(T.i))},_.\u0275prov=M.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},79207:(R,b,s)=>{s.d(b,{bl:()=>e,rU:()=>U});var a=s(5e3),r=s(28258),M=s(93075),T=s(90149),O=s(21086),_=s(67322),P=s(74107),o=s(90508),l=s(47423),f=s(25245),Z=s(69808),I=s(77531);function A(g,h){if(1&g&&(a.TgZ(0,"mat-tree-node",5),a.TgZ(1,"mat-option",6),a.TgZ(2,"p",7),a._uU(3),a.qZA(),a.qZA(),a.qZA()),2&g){const p=h.$implicit;a.xp6(1),a.Q6J("title",p.name)("value",p),a.xp6(2),a.hij(" ",p.name," ")}}function v(g,h){if(1&g&&(a.TgZ(0,"p",14),a._uU(1),a.qZA()),2&g){const p=a.oxw().$implicit,u=a.oxw();a.xp6(1),a.hij(" ",u.heading+" "+p.name,"")}}function E(g,h){if(1&g&&(a.TgZ(0,"mat-nested-tree-node"),a.TgZ(1,"div",8),a.TgZ(2,"button",9),a.TgZ(3,"mat-icon",10),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"mat-option",11),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"ul"),a.YNc(8,v,2,1,"p",12),a.GkF(9,13),a.qZA(),a.qZA()),2&g){const p=h.$implicit,u=a.oxw();a.xp6(2),a.uIk("aria-label","toggle "+p.name),a.xp6(2),a.hij(" ",u.nestedTreeControl.isExpanded(p)?"expand_more":"chevron_right"," "),a.xp6(1),a.Q6J("title",p.name)("disabled",!u.canSelectParentNode)("value",p),a.xp6(1),a.hij(" ",p.name," "),a.xp6(1),a.ekj("example-tree-invisible",!u.nestedTreeControl.isExpanded(p)),a.xp6(1),a.Q6J("ngIf",""!==u.heading)}}const F=["*"];let e=(()=>{class g{constructor(){this.controlName={},this.options=[],this.placeholder="",this.multiple=!1,this.heading="",this.canSelectParentNode=!0,this._getChildren=p=>(0,O.of)(p.children),this.hasNestedChild=(p,u)=>{var y;return(null===(y=u.children)||void 0===y?void 0:y.length)>0},this.nestedTreeControl=new r.VY(this._getChildren),this.nestedDataSource=new T.WX}ngOnInit(){this.nestedDataSource.data=this.options}ngOnChanges(p){var u,y;(null===(u=p.options)||void 0===u?void 0:u.currentValue)!==(null===(y=p.options)||void 0===y?void 0:y.previousValue)&&(this.nestedDataSource.data=this.options)}}return g.\u0275fac=function(p){return new(p||g)},g.\u0275cmp=a.Xpm({type:g,selectors:[["ngx-mat-tree-select-input"]],inputs:{controlName:"controlName",options:"options",placeholder:"placeholder",multiple:"multiple",heading:"heading",canSelectParentNode:"canSelectParentNode"},features:[a._Bn([],[{provide:M.gN,useExisting:M.sg}]),a.TTD],ngContentSelectors:F,decls:6,vars:7,consts:[["appearance","outline"],[3,"id","placeholder","multiple","formControlName"],[1,"example-tree","mat-tree-position",3,"dataSource","treeControl"],["class","mat-tree-node",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"mat-tree-node"],[3,"title","value"],[1,"tree_text",2,"margin-left","35px"],[2,"display","flex"],["mat-icon-button","","matTreeNodeToggle","",1,"tree-toggle"],[1,"mat-icon-rtl-mirror"],[1,"mat-tree-node",2,"display","flex",3,"title","disabled","value"],["class","title",4,"ngIf"],["matTreeNodeOutlet",""],[1,"title"]],template:function(p,u){1&p&&(a.F$t(),a.TgZ(0,"mat-form-field",0),a.TgZ(1,"mat-select",1),a.Hsn(2),a.TgZ(3,"mat-tree",2),a.YNc(4,A,4,3,"mat-tree-node",3),a.YNc(5,E,10,9,"mat-nested-tree-node",4),a.qZA(),a.qZA(),a.qZA()),2&p&&(a.xp6(1),a.Q6J("id",u.controlName)("placeholder",u.placeholder)("multiple",u.multiple)("formControlName",u.controlName),a.xp6(2),a.Q6J("dataSource",u.nestedDataSource)("treeControl",u.nestedTreeControl),a.xp6(2),a.Q6J("matTreeNodeDefWhen",u.hasNestedChild))},directives:[_.KE,P.gD,M.JJ,M.u,T.gi,T.fQ,T.uo,o.ey,T.GZ,l.lW,T.eu,f.Hw,Z.O5,T.Ar],styles:[".example-tree-invisible[_ngcontent-%COMP%] {\n    display: none;\n}\n.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n    margin-top: 0;\n    margin-bottom: 0;\n    list-style-type: none;\n}\n.mat-tree[_ngcontent-%COMP%] {\n    width: 100%;\n    margin-top: 15px;\n    box-sizing: border-box;\n}\n.mat-tree[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    height: 33px;\n    width: 33px;\n    line-height: 33px;\n    color: #777;\n    margin-left: 0px;\n    margin-right: 0px;\n}\n.mattreenodetoggle[_ngcontent-%COMP%] {\n    color: #777;\n}\n.mat-tree-node[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    min-height: 0;\n    position: relative;\n}\n[_nghost-%COMP%]     .mat-option-text {\n    display: flex !important;\n    align-items: center;\n    font-size: 12px;\n    min-height: 0;\n    position: relative;\n}\n.actions[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n    margin-left: 30px;\n}\n.tree-toggle[_ngcontent-%COMP%] {\n    position: relative;\n}\n.title[_ngcontent-%COMP%] {\n    margin-right: auto;\n    margin-bottom: 0;\n    font-weight: 500;\n    color: #777;\n    align-self: flex-end;\n    font-size: 12px;\n    margin-left: 20px;\n    padding-top: 10px;\n}\n.tree_text[_ngcontent-%COMP%] {\n    margin-bottom: 0;\n    width: 100px;\n    line-height: normal;\n}\nul[_ngcontent-%COMP%] {\n    padding: 0px;\n    margin-bottom: 10px !important;\n    margin-left: 51px;\n}\nmat-tree-node[_ngcontent-%COMP%] {\n    position: relative;\n}\nmat-tree-node[_ngcontent-%COMP%]::after {\n    content: '';\n    position: absolute;\n    left: 0;\n    height: 1px;\n    width: 40px;\n}"]}),g})(),U=(()=>{class g{}return g.\u0275fac=function(p){return new(p||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({imports:[[I.c,_.lN,P.LD,T.dp,f.Ps,Z.ez,M.UX,M.u5,l.ot]]}),g})()}}]);