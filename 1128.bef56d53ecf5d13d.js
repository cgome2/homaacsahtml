"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[1128],{88914:(x,v,s)=>{s.d(v,{M:()=>c});var o=s(41777);const c=(0,o.X$)("fadeInRight",[(0,o.eR)(":enter",[(0,o.oB)({transform:"translateX(-2vw)",opacity:0}),(0,o.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,o.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(x,v,s)=>{s.d(v,{X:()=>c});var o=s(41777);const c=(0,o.X$)("fadeInUp",[(0,o.eR)(":enter",[(0,o.oB)({transform:"translateY(3vh)",opacity:0}),(0,o.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,o.oB)({transform:"translateY(0)",opacity:1}))])])},38932:(x,v,s)=>{s.d(v,{n:()=>u});var o=s(5e3),c=s(30277),i=s(3299),p=s(69808),P=s(25245);function _(m,d){if(1&m&&(o.TgZ(0,"div",7),o.TgZ(1,"mat-icon",5),o._uU(2,"chevron_right"),o.qZA(),o.TgZ(3,"div",6),o._uU(4),o.qZA(),o.qZA()),2&m){const h=d.$implicit;o.xp6(4),o.Oqu(h)}}const T=function(){return["/"]};let u=(()=>{class m{constructor(){this.crumbs=[]}ngOnInit(){}}return m.\u0275fac=function(h){return new(h||m)},m.\u0275cmp=o.Xpm({type:m,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(h,S){1&h&&(o.TgZ(0,"div",0),o._uU(1),o.qZA(),o.TgZ(2,"div",1),o.TgZ(3,"a",2),o._uU(4,"Home"),o.qZA(),o.YNc(5,_,5,1,"div",3),o.TgZ(6,"div",4),o.TgZ(7,"mat-icon",5),o._uU(8,"chevron_right"),o.qZA(),o.TgZ(9,"div",6),o._uU(10),o.qZA(),o.qZA(),o.qZA()),2&h&&(o.xp6(1),o.Oqu(S.current),o.xp6(2),o.Q6J("routerLink",o.DdM(4,T)),o.xp6(2),o.Q6J("ngForOf",S.crumbs),o.xp6(5),o.Oqu(S.current))},directives:[c.xw,c.Wh,i.yS,p.sg,P.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),m})()},94927:(x,v,s)=>{s.d(v,{n:()=>J});var o=s(5e3),c=s(23753),i=s(75778),p=s(80013),P=s(69808),_=s(92181),T=s(30277),u=s(25245),m=s(47423),d=s(77446),h=s(93075);const S=["filter"];function U(E,O){if(1&E&&(o.TgZ(0,"div",5),o.TgZ(1,"div",6),o._uU(2),o.qZA(),o.TgZ(3,"div",7),o.TgZ(4,"mat-icon",8),o._uU(5,"search"),o.qZA(),o._UZ(6,"input",9,10),o.qZA(),o.TgZ(8,"button",11),o.TgZ(9,"mat-icon"),o._uU(10,"filter_list"),o.qZA(),o.qZA(),o.Hsn(11,1),o.qZA()),2&E){const A=o.oxw(),M=o.MAs(3);o.xp6(2),o.Oqu(A.name),o.xp6(6),o.Q6J("matMenuTriggerFor",M)}}function N(E,O){if(1&E){const A=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(b){const D=o.CHM(A).$implicit;return o.oxw().toggleColumnVisibility(D,b)}),o.TgZ(1,"mat-checkbox",13,14),o.NdJ("ngModelChange",function(b){return o.CHM(A).$implicit.visible=b})("click",function(b){return b.stopPropagation()}),o._uU(3),o.qZA(),o.qZA()}if(2&E){const A=O.$implicit;o.xp6(1),o.Q6J("ngModel",A.visible),o.xp6(2),o.hij(" ",A.name," ")}}const B=["*",[["",8,"actions"]]],I=["*",".actions"];let J=(()=>{class E{constructor(){this.filterChange=new o.vpe}ngAfterViewInit(){this.hideHeader||(0,c.R)(this.filter.nativeElement,"keyup").pipe((0,i.x)(),(0,p.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(A,M){M.stopPropagation(),M.stopImmediatePropagation(),A.visible=!A.visible}}return E.\u0275fac=function(A){return new(A||E)},E.\u0275cmp=o.Xpm({type:E,selectors:[["fury-list"]],viewQuery:function(A,M){if(1&A&&o.Gf(S,5),2&A){let b;o.iGM(b=o.CRH())&&(M.filter=b.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:I,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(A,M){1&A&&(o.F$t(B),o.TgZ(0,"div",0),o.YNc(1,U,12,2,"div",1),o.TgZ(2,"mat-menu",2,3),o.YNc(4,N,4,2,"button",4),o.qZA(),o.Hsn(5),o.qZA()),2&A&&(o.xp6(1),o.Q6J("ngIf",!M.hideHeader),o.xp6(3),o.Q6J("ngForOf",M.columns))},directives:[P.O5,_.VK,P.sg,T.xw,T.Wh,T.SQ,T.yH,u.Hw,m.lW,_.p6,d.oG,h.JJ,h.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),E})()},4940:(x,v,s)=>{s.d(v,{p:()=>P});var o=s(69808),c=s(93075),i=s(7057),p=s(5e3);let P=(()=>{class _{}return _.\u0275fac=function(u){return new(u||_)},_.\u0275mod=p.oAB({type:_}),_.\u0275inj=p.cJS({imports:[[o.ez,i.q,c.u5]]}),_})()},19165:(x,v,s)=>{s.d(v,{d:()=>c});var o=s(5e3);let c=(()=>{class i{constructor(){}}return i.\u0275fac=function(P){return new(P||i)},i.\u0275dir=o.lG2({type:i,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),i})()},53580:(x,v,s)=>{s.d(v,{U:()=>c});var o=s(5e3);let c=(()=>{class i{constructor(){}}return i.\u0275fac=function(P){return new(P||i)},i.\u0275dir=o.lG2({type:i,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),i})()},39762:(x,v,s)=>{s.d(v,{N:()=>c});var o=s(5e3);let c=(()=>{class i{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return i.\u0275fac=function(P){return new(P||i)},i.\u0275dir=o.lG2({type:i,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(P,_){2&P&&o.ekj("fury-page-layout-card",_.isCard)("fury-page-layout-simple",_.isSimple)},inputs:{mode:"mode"}}),i})()},59968:(x,v,s)=>{s.d(v,{i:()=>c});var o=s(5e3);let c=(()=>{class i{constructor(){}}return i.\u0275fac=function(P){return new(P||i)},i.\u0275dir=o.lG2({type:i,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),i})()},93861:(x,v,s)=>{s.d(v,{e:()=>o});class o{constructor(i){this.id=i&&i.id||null,this.station_name=i&&i.station_name||"",this.status=i&&i.status||0,this.orcudomain=i&&i.orcudomain||"",this.port=i&&i.port||0,this.site_code=i&&i.site_code||0,this.ho_role=i&&i.ho_role||0,this.userws=i&&i.userws||"",this.passwordws=i&&i.passwordws||"",this.sync_every_x_minutes=i&&i.sync_every_x_minutes||0,this.first_sync=i&&i.first_sync||"",this.last_sync=i&&i.last_sync||"",this.userhocommunicator=i&&i.userhocommunicator||"",this.passhocommunicator=i&&i.passhocommunicator||"",this.geolocation=i&&i.geolocation||"",this.sync_status=i&&i.sync_status||0,this.last_fail_update=i&&i.last_fail_update||"",this.max_sync_attempts=i&&i.max_sync_attempts||0,this.current_failed_attempts=i&&i.current_failed_attempts||0,this.map_of_products_done=i&&i.map_of_products_done||0,this.type=i&&i.type||0,this.pump_status_every_x_seconds=i&&i.pump_status_every_x_seconds||0,this.mobile_delivery_mean_id=i&&i.mobile_delivery_mean_id||0,this.mobile_calibration_mean_id=i&&i.mobile_calibration_mean_id||0,this.mobile_initial_inventory=i&&i.mobile_initial_inventory||0,this.mobile_initial_inventory_timestamp=i&&i.mobile_initial_inventory_timestamp||0,this.mobile_unique_product_id=i&&i.mobile_unique_product_id||0,this.accountant_name=i&&i.accountant_name||"",this.accountant_email=i&&i.accountant_email||"",this.weighing_machine=i&&i.weighing_machine||0,this.chemical_analysis_machine=i&&i.chemical_analysis_machine||0,this.delivery_pumps=i&&i.delivery_pumps||[],this.cv_configuration_id=i&&i.cv_configuration_id||0,this.controller_type=i&&i.controller_type||0}}},71128:(x,v,s)=>{s.r(v),s.d(v,{ProfilesTableModule:()=>et});var o=s(69808),c=s(93075),i=s(61264),p=s(4940),P=s(7057),_=s(72467),T=s(3299),u=s(70655),m=s(86087),d=s(84847),h=s(32075),S=s(96831),U=s(92198),N=s(88914),B=s(14499),I=s(48966),J=s(37425),E=s(54822),O=s(10463),A=s(74204);class M{constructor(a){this.id=a&&a.id||null,this.name=a&&a.name||null,this.observations=a&&a.observations||null,this.status=a&&a.status||null,this.sidenav_items=a&&a.sidenav_items||[],this.fleets=a&&a.fleets||[],this.ccs=a&&a.ccs||[],this.cv_configurations=a&&a.cv_configurations||[],this.stations=a&&a.stations||[]}}class b{constructor(a){this.id=a&&a.id||null,this.name=a&&a.name||null,this.position=a&&a.position||null,this.type=a&&a.type||null,this.custom_class=a&&a.custom_class||null,this.icon=a&&a.icon||null,this.parent=a&&a.parent||null,this.route_or_function=a&&a.route_or_function||null,this.badge=a&&a.badge||null,this.badge_color=a&&a.badge_color||null,this.level=a&&a.level||null,this.assignable=a&&a.assignable||null,this.status=a&&a.status||null}}var k=s(20449),D=s(28258),Z=s(90149),se=s(591),ie=s(93861),e=s(5e3),ne=s(57261),re=s(58527),ae=s(31405),le=s(82593),j=s(92660),ce=s(52190),de=s(59968),ue=s(36551),W=s(25245),H=s(30277),Q=s(67322),X=s(77531),he=s(4834),q=s(74107),G=s(47423),pe=s(90508),me=s(77446);const _e=["allSelected"],ge=["allCCs"],fe=["allCVs"],ve=["allOSs"],Ce=["profilesModalForm"];function Pe(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",25,26),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleAllSelection()}),e._uU(2,"Todas"),e.qZA()}2&r&&e.Q6J("value",0)}function Se(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.tosslePerOne(l.allSelected.viewValue)}),e._uU(1),e.qZA()}if(2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.NAME)}}function Ae(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",25,27),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleAllSelectionCC()}),e._uU(2,"Todos"),e.qZA()}2&r&&e.Q6J("value",0)}function Te(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.tosslePerOneCC(l.allCCs.viewValue)}),e._uU(1),e.qZA()}if(2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.fleet_name,"-",t.name,"")}}function ye(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",25,28),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleAllSelectionCV()}),e._uU(2,"Todos"),e.qZA()}2&r&&e.Q6J("value",0)}function Me(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.tosslePerOneCV(l.allCVs.viewValue)}),e._uU(1),e.qZA()}if(2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.num_permiso,"",t.num_contrato_o_asignacion,"")}}function xe(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",25,29),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleAllSelectionOS()}),e._uU(2,"Todas"),e.qZA()}2&r&&e.Q6J("value",0)}function Ee(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.togglePerOneOS(l.allOSs.viewValue)}),e._uU(1),e.qZA()}if(2&r){const t=a.$implicit;e.Q6J("value",t.site_code),e.xp6(1),e.Oqu(t.station_name)}}function be(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-tree-node",30),e._UZ(1,"button",31),e.TgZ(2,"mat-checkbox",32),e.NdJ("change",function(){const g=e.CHM(t).$implicit;return e.oxw().todoLeafItemSelectionToggle(g)}),e._uU(3),e.qZA(),e.qZA()}if(2&r){const t=a.$implicit,n=e.oxw();e.xp6(2),e.Q6J("checked",n.checklistSelection.isSelected(t)),e.xp6(1),e.Oqu(t.name)}}function Ze(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-tree-node",33),e.TgZ(1,"button",34),e.TgZ(2,"mat-icon",35),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"mat-checkbox",36),e.NdJ("change",function(){const g=e.CHM(t).$implicit;return e.oxw().todoItemSelectionToggle(g)}),e._uU(5),e.qZA(),e.qZA()}if(2&r){const t=a.$implicit,n=e.oxw();e.xp6(1),e.uIk("aria-label","Toggle "+t.item),e.xp6(2),e.Oqu(n.treeControl.isExpanded(t)?"expand_more":"chevron_right"),e.xp6(1),e.Q6J("checked",n.descendantsAllSelected(t))("indeterminate",n.descendantsPartiallySelected(t)),e.xp6(1),e.Oqu(t.name)}}class Oe{}let ee=(()=>{class r{constructor(){this.dataChange=new se.X([]),this.initialize()}get data(){return this.dataChange.value}initialize(){this.dataChange.next([])}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})(),K=(()=>{class r{constructor(t,n,l,g,C,f,w,F,Y){this.data=t,this._database=n,this.dialogRef=l,this.snackbar=g,this._areasService=C,this._cvConfigurationsService=f,this._fleetsService=w,this._profilesService=F,this._stationsService=Y,this.title="Perfiles",this.mode="create",this.profile=new M,this.fleets=[],this.ccs=[],this.assignedFleets="",this.assignedCVCs="",this.assignedOSs="",this.cv_configurations=[],this.other_stations=[],this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.checklistSelection=new k.Ov(!0),this.getLevel=y=>y.level,this.getId=y=>y.id,this.isExpandable=y=>y.expandable,this.getChildren=y=>y.children,this.hasChild=(y,R)=>R.expandable,this.hasNoContent=(y,R)=>""===R.name,this.transformer=(y,R)=>{var z;const $=this.nestedNodeMap.get(y),L=$&&$.name===y.name?$:new Oe;return L.name=y.name,L.id=y.id,L.level=R,L.expandable=!!(null===(z=y.children)||void 0===z?void 0:z.length),this.flatNodeMap.set(L,y),this.nestedNodeMap.set(y,L),L},this.treeFlattener=new Z.JZ(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new D.C2(this.getLevel,this.isExpandable),this.dataSource=new Z.kc(this.treeControl,this.treeFlattener),n.dataChange.subscribe(y=>{this.dataSource.data=y}),l.disableClose=!0,this.profilesModalForm=new c.cw({id:new c.NI,name:new c.NI("",[c.kI.required]),observations:new c.NI(""),status:new c.NI(!0,[c.kI.required]),fleets:new c.NI([],[c.kI.required]),ccs:new c.NI([],[c.kI.required]),cv_configurations:new c.NI([],[c.kI.required]),other_stations:new c.NI([],[c.kI.required])})}ngOnInit(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.dataSource.data=this.data.sidenav_items,this.fleets=yield this.getFleets(),this.cv_configurations=yield this.getCVConfigurations(),this.other_stations=yield this.getOtherStations(),this.data.profile){this.profile=this.data.profile;var t=[];this.profile.fleets.forEach(C=>{t.push(+C.id)}),this.profile.fleets.length===this.fleets.length&&t.push(0),this.assignedFleets=t.toString(),this.ccs=yield this.getCCs();let n=[];this.profile.ccs.forEach(C=>{n.push(+C.id)}),this.profile.ccs.length===this.ccs.length&&n.push(0);let l=[];this.profile.cv_configurations.forEach(C=>{l.push(+C.id)}),this.assignedCVCs=l.toString();let g=[];this.profile.stations.forEach(C=>{g.push(+C.site_code)}),this.assignedOSs=g.toString(),this.mode="update",this.profile=this.data.profile,this.profilesModalForm.setValue({id:this.profile.id,name:this.profile.name,observations:this.profile.observations,status:2==this.profile.status,fleets:t,ccs:n,cv_configurations:l,other_stations:g}),this.treeControl.dataNodes.forEach(C=>{void 0!==this.profile.sidenav_items.find(f=>+f.id==+C.id)&&this.checklistSelection.select(C)})}})}getFleets(){return(0,u.mG)(this,void 0,void 0,function*(){return yield this._fleetsService.getAll().toPromise()})}getCCs(){return(0,u.mG)(this,void 0,void 0,function*(){return yield this._areasService.getCostCenters({fleets:this.assignedFleets}).toPromise()})}getCVConfigurations(){return(0,u.mG)(this,void 0,void 0,function*(){return yield this._cvConfigurationsService.getAll().toPromise()})}getOtherStations(){return(0,u.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getAllWithoutCV().toPromise()})}descendantsAllSelected(t){const n=this.treeControl.getDescendants(t);return n.length>0&&n.every(g=>this.checklistSelection.isSelected(g))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(g=>this.checklistSelection.isSelected(g))&&!this.descendantsAllSelected(t)}todoItemSelectionToggle(t){this.checklistSelection.toggle(t);const n=this.treeControl.getDescendants(t);this.checklistSelection.isSelected(t)?this.checklistSelection.select(...n):this.checklistSelection.deselect(...n),n.forEach(l=>this.checklistSelection.isSelected(l)),this.checkAllParentsSelection(t)}todoLeafItemSelectionToggle(t){this.checklistSelection.toggle(t),this.checkAllParentsSelection(t)}checkAllParentsSelection(t){let n=this.getParentNode(t);for(;n;)this.checkRootNodeSelection(n),n=this.getParentNode(n)}checkRootNodeSelection(t){const n=this.checklistSelection.isSelected(t),l=this.treeControl.getDescendants(t),g=l.length>0&&l.every(C=>this.checklistSelection.isSelected(C));n&&!g?this.checklistSelection.deselect(t):!n&&g&&this.checklistSelection.select(t)}getParentNode(t){const n=this.getLevel(t);if(n<1)return null;for(let g=this.treeControl.dataNodes.indexOf(t)-1;g>=0;g--){const C=this.treeControl.dataNodes[g];if(this.getLevel(C)<n)return C}return null}getAllParents(t){let n=t,l=[];for(;this.getParentNode(n);)n=this.getParentNode(n),void 0!==n&&l.push(n);return l}submit(){this.profile.id=this.profilesModalForm.controls.id.value,this.profile.name=this.profilesModalForm.controls.name.value,this.profile.observations=this.profilesModalForm.controls.observations.value,this.profile.status=this.profilesModalForm.controls.status.value?2:1,this.profile.sidenav_items=[];var n=[];this.profilesModalForm.controls.fleets.value.forEach(f=>{0!=f&&n.push(new A.i({id:f}))}),this.profile.fleets=n;var l=[];this.profilesModalForm.controls.ccs.value.forEach(f=>{0!=f&&l.push(new E.t({id:f,fleet_id:this.ccs.find(w=>w.id==f).fleet_id}))}),this.profile.ccs=l;var g=[];this.profilesModalForm.controls.cv_configurations.value.forEach(f=>{0!=f&&g.push(new O.q({id:f}))}),this.profile.cv_configurations=g;let C=[];this.profilesModalForm.controls.other_stations.value.forEach(f=>{f>0&&C.push(new ie.e({site_code:f}))}),this.profile.stations=C,this.checklistSelection.selected.forEach(f=>{this.profile.sidenav_items.push(new b({id:f.id,name:f.name})),this.getAllParents(f).forEach(F=>{void 0===this.profile.sidenav_items.find(Y=>Y.id===F.id)&&this.profile.sidenav_items.push(new b({id:F.id,name:F.name}))})}),console.log(this.profile),"create"===this.mode?this.createProfile():this.updateProfile()}createProfile(){this._profilesService.createProfile(this.profile).subscribe(t=>{this.snackbar.open(t.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"create",data:this.profile})},t=>{this.snackbar.open(t.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateProfile(){this._profilesService.updateProfile(this.profile).subscribe(t=>{this.snackbar.open(t.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"update",data:this.profile})},t=>{this.snackbar.open(t.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}close(){this.dialogRef.close({action:"cancel",data:this.profile})}onFocusCCs(){return(0,u.mG)(this,void 0,void 0,function*(){this.assignedFleets=this.profilesModalForm.controls.fleets.value.length>0?this.profilesModalForm.controls.fleets.value.toString():"-1",this.ccs=yield this.getCCs()})}onChangeFleet(){return(0,u.mG)(this,void 0,void 0,function*(){this.profilesModalForm.controls.ccs.setValue([])})}tosslePerOne(t){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.profilesModalForm.controls.fleets.value.length==this.fleets.length&&this.allSelected.select()}toggleAllSelection(){this.profilesModalForm.controls.fleets.patchValue(this.allSelected.selected?[...this.fleets.map(t=>t.id),0]:[])}tosslePerOneCC(t){if(this.allCCs.selected)return this.allCCs.deselect(),!1;this.profilesModalForm.controls.ccs.value.length==this.ccs.length&&this.allCCs.select()}toggleAllSelectionCC(){this.profilesModalForm.controls.ccs.patchValue(this.allCCs.selected?[...this.ccs.map(t=>t.id),0]:[])}tosslePerOneCV(t){if(this.allCVs.selected)return this.allCVs.deselect(),!1;this.profilesModalForm.controls.cv_configurations.value.length==this.cv_configurations.length&&this.allCVs.select()}toggleAllSelectionCV(){this.profilesModalForm.controls.cv_configurations.patchValue(this.allCVs.selected?[...this.cv_configurations.map(t=>t.id),0]:[])}togglePerOneOS(t){if(this.allOSs.selected)return this.allOSs.deselect(),!1;this.profilesModalForm.controls.other_stations.value.length==this.other_stations.length&&this.allOSs.select()}toggleAllSelectionOS(){this.profilesModalForm.controls.other_stations.patchValue(this.allOSs.selected?[...this.other_stations.map(t=>t.site_code),0]:[])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(I.WI),e.Y36(ee),e.Y36(I.so),e.Y36(ne.ux),e.Y36(re.E),e.Y36(ae.N),e.Y36(le.V),e.Y36(j.L),e.Y36(ce.w))},r.\u0275cmp=e.Xpm({type:r,selectors:[["fury-form-wizard"]],viewQuery:function(t,n){if(1&t&&(e.Gf(_e,5),e.Gf(ge,5),e.Gf(fe,5),e.Gf(ve,5),e.Gf(Ce,5)),2&t){let l;e.iGM(l=e.CRH())&&(n.allSelected=l.first),e.iGM(l=e.CRH())&&(n.allCCs=l.first),e.iGM(l=e.CRH())&&(n.allCVs=l.first),e.iGM(l=e.CRH())&&(n.allOSs=l.first),e.iGM(l=e.CRH())&&(n._focusMe=l.first)}},features:[e._Bn([ee])],decls:69,vars:15,consts:[[1,"small_modal"],[1,"title"],["svgIcon","profile"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[3,"formGroup"],[1,"subheading"],["fxLayout","column","fxLayoutGap","8px",1,"content",2,"margin-top","20px"],["fxFlex","auto","appearance","outline"],["formControlName","name","matInput","","required",""],["appearance","outline","fxFlex","auto"],["formControlName","observations","matInput",""],[1,"subheading",2,"margin-top","20px"],["appearance","outline",1,"field"],["formControlName","fleets","multiple","",3,"selectionChange"],[3,"value","click",4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","ccs","multiple","",3,"focus"],["formControlName","cv_configurations","multiple",""],["formControlName","other_stations","multiple",""],[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"],[3,"value","click"],["allSelected",""],["allCCs",""],["allCVs",""],["allOSs",""],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"]],template:function(t,n){1&t&&(e.TgZ(0,"fury-page",0),e.TgZ(1,"fury-title",1),e._UZ(2,"mat-icon",2),e.TgZ(3,"span"),e._uU(4,"Perfiles"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"form",5),e.TgZ(8,"div",6),e._uU(9,"Indicar propiedades del perfil."),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"mat-form-field",8),e.TgZ(12,"mat-label"),e._uU(13,"Nombre:"),e.qZA(),e._UZ(14,"input",9),e.TgZ(15,"mat-hint"),e._uU(16,"Se\xf1alar nombre de perfil"),e.qZA(),e.qZA(),e.TgZ(17,"mat-form-field",10),e.TgZ(18,"mat-label"),e._uU(19,"Observaciones:"),e.qZA(),e._UZ(20,"input",11),e.TgZ(21,"mat-hint"),e._uU(22,"Indicar observaciones descriptivas del perfil"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",7),e._UZ(24,"mat-divider"),e.qZA(),e.TgZ(25,"div",12),e._uU(26,"Flotas."),e.qZA(),e.TgZ(27,"div",7),e.TgZ(28,"mat-form-field",13),e.TgZ(29,"mat-label"),e._uU(30,"Flotas:"),e.qZA(),e.TgZ(31,"mat-select",14),e.NdJ("selectionChange",function(){return n.onChangeFleet()}),e.YNc(32,Pe,3,1,"mat-option",15),e.YNc(33,Se,2,2,"mat-option",16),e.qZA(),e.qZA(),e.TgZ(34,"mat-form-field",13),e.TgZ(35,"mat-label"),e._uU(36,"Centros de cobro:"),e.qZA(),e.TgZ(37,"mat-select",17),e.NdJ("focus",function(){return n.onFocusCCs()}),e.YNc(38,Ae,3,1,"mat-option",15),e.YNc(39,Te,2,3,"mat-option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",7),e._UZ(41,"mat-divider"),e.qZA(),e.TgZ(42,"div",12),e._uU(43,"Permisos de controles volum\xe9tricos."),e.qZA(),e.TgZ(44,"div",7),e.TgZ(45,"mat-form-field",13),e.TgZ(46,"mat-label"),e._uU(47,"Permisos CV:"),e.qZA(),e.TgZ(48,"mat-select",18),e.YNc(49,ye,3,1,"mat-option",15),e.YNc(50,Me,2,3,"mat-option",16),e.qZA(),e.qZA(),e.TgZ(51,"mat-form-field",13),e.TgZ(52,"mat-label"),e._uU(53,"Estaciones No vinculantes:"),e.qZA(),e.TgZ(54,"mat-select",19),e.YNc(55,xe,3,1,"mat-option",15),e.YNc(56,Ee,2,2,"mat-option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",7),e._UZ(58,"mat-divider"),e.qZA(),e.TgZ(59,"div",12),e._uU(60,"Permisos del perfil."),e.qZA(),e.TgZ(61,"mat-tree",20),e.YNc(62,be,4,2,"mat-tree-node",21),e.YNc(63,Ze,6,5,"mat-tree-node",22),e.qZA(),e.TgZ(64,"div",23),e.TgZ(65,"button",24),e.NdJ("click",function(){return n.close()}),e._uU(66,"CANCELAR"),e.qZA(),e.TgZ(67,"button",24),e.NdJ("click",function(){return n.submit()}),e._uU(68,"GUARDAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(3),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("formGroup",n.profilesModalForm),e.xp6(25),e.Q6J("ngIf",n.fleets.length>0),e.xp6(1),e.Q6J("ngForOf",n.fleets),e.xp6(5),e.Q6J("ngIf",n.ccs.length>0),e.xp6(1),e.Q6J("ngForOf",n.ccs),e.xp6(10),e.Q6J("ngIf",n.cv_configurations.length>0),e.xp6(1),e.Q6J("ngForOf",n.cv_configurations),e.xp6(5),e.Q6J("ngIf",n.other_stations.length>0),e.xp6(1),e.Q6J("ngForOf",n.other_stations),e.xp6(5),e.Q6J("dataSource",n.dataSource)("treeControl",n.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",n.hasChild))},directives:[de.i,ue.M,W.Hw,H.xw,H.Wh,c._Y,c.JL,c.sg,H.SQ,Q.KE,H.yH,Q.hX,c.Fj,X.Nt,c.JJ,c.u,c.Q7,Q.bx,he.d,q.gD,o.O5,o.sg,Z.gi,Z.fQ,G.lW,pe.ey,Z.uo,Z.eu,Z.ah,me.oG],styles:[".fury-card-header-heading[_ngcontent-%COMP%]{font-weight:700!important}.small_modal[_ngcontent-%COMP%]{width:500px;padding:5px}.small_modal[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{overflow:scroll;margin:5px;width:490px;max-height:450px;border-radius:8px;padding:24px}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:14px;padding:24px 8px 0}.example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:40px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:40px}"],data:{animation:[B.X,N.M,J.K]}}),r})();var te=s(40520),oe=s(98545),Le=s(33344);let Ie=(()=>{class r{constructor(t,n){this.http=t,this.tokenStorage=n}getHeaders(){var t=new te.WM,n=this.tokenStorage.getToken();return t.set("token",n||"{}")}getAll(){var t=this.getHeaders();return this.http.get(oe._.settings.apiServer.API_URL_BASE+oe._.settings.apiServer.SIDENAV_ITEMS,{headers:t})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(te.eN),e.LFG(Le.i))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Ue=s(39762),De=s(53580),Fe=s(38932),Re=s(19165),Ne=s(94927),V=s(92181);function Be(r,a){if(1&r&&(e.TgZ(0,"th",17),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function He(r,a){if(1&r&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&r){const t=a.$implicit,n=e.oxw(2).$implicit,l=e.oxw();e.xp6(1),e.hij(" ",l.getLabel(n.name,t[n.property]).length>40?l.getLabel(n.name,t[n.property]).slice(0,40)+"...":l.getLabel(n.name,t[n.property])," ")}}function we(r,a){if(1&r&&(e.ynx(0,14),e.YNc(1,Be,2,1,"th",15),e.YNc(2,He,2,1,"td",16),e.BQk()),2&r){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function Je(r,a){if(1&r&&(e.ynx(0),e.YNc(1,we,3,1,"ng-container",13),e.BQk()),2&r){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty)}}function ke(r,a){1&r&&e._UZ(0,"th",19)}function We(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"td",20),e.TgZ(1,"button",21),e.NdJ("click",function(l){return l.stopPropagation()}),e.TgZ(2,"mat-icon"),e._uU(3,"more_horiz"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",22,23),e.TgZ(6,"button",24),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().updateProfile(g)}),e.TgZ(7,"span"),e._uU(8,"Editar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function Qe(r,a){1&r&&e._UZ(0,"tr",25)}function Ge(r,a){1&r&&e._UZ(0,"tr",26)}const Ke=function(){return["Tables"]},Ve=[{path:"",component:(()=>{class r{constructor(t,n,l){this.dialog=t,this._sidenavItemsService=n,this._profilesService=l,this.subject$=new S.t(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Id",property:"id",visible:!1,isModelProperty:!0},{name:"Nombre",property:"name",visible:!0,isModelProperty:!0},{name:"Estatus",property:"status",visible:!0,isModelProperty:!0},{name:"Observaciones",property:"observations",visible:!0,isModelProperty:!0},{name:"Permisos CV",property:"cv_configurations",visible:!0,isModelProperty:!0},{name:"Items",property:"sidenav_items",visible:!1,isModelProperty:!0},{name:"Flotas",property:"fleets",visible:!0,isModelProperty:!0},{name:"Centros de cobro",property:"ccs",visible:!0,isModelProperty:!0},{name:"Acciones",property:"actions",visible:!0}],this.pageSize=10}getLabel(t,n){var l="",g="",C="";if(null!=t)return"Estatus"===t?2==n?"Activo":"Inactivo":"Flotas"===t?(n.forEach(f=>{g=g.length>0?g+", "+f.NAME:f.NAME}),g):"Centros de cobro"===t?(n.forEach(f=>{null!==f.name&&(l=""!==l?l+","+f.name:f.name)}),l):"Permisos CV"===t?(n.forEach(f=>{null!==f.num_permiso&&(C=""!==C?C+","+f.num_permiso:f.num_permiso)}),C):n}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){this._profilesService.getAll().subscribe(t=>{this.profiles=t,this.dataSource=new h.by(this.profiles),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},t=>{console.log(t)})}ngOnInit(){return(0,u.mG)(this,void 0,void 0,function*(){this.dataSource=new h.by,this.getData(),this.data$.pipe((0,U.h)(t=>!!t)).subscribe(t=>{this.profiles=t,this.dataSource.data=t})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getSidenavItemsTree(){return(0,u.mG)(this,void 0,void 0,function*(){return yield this._sidenavItemsService.getAll().toPromise()})}createProfile(){return(0,u.mG)(this,void 0,void 0,function*(){const t=yield this.getSidenavItemsTree();this.dialog.open(K,{data:{sidenav_items:t}}).afterClosed().subscribe(()=>{this.ngOnInit()})})}updateProfile(t){return(0,u.mG)(this,void 0,void 0,function*(){const n=yield this.getSidenavItemsTree();this.dialog.open(K,{data:{sidenav_items:n,profile:t}}).afterClosed().subscribe(()=>{this.ngOnInit()})})}onFilterChange(t){!this.dataSource||(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(I.uw),e.Y36(Ie),e.Y36(j.L))},r.\u0275cmp=e.Xpm({type:r,selectors:[["profiles-table"]],viewQuery:function(t,n){if(1&t&&(e.Gf(m.NW,7),e.Gf(d.YE,7)),2&t){let l;e.iGM(l=e.CRH())&&(n.paginator=l.first),e.iGM(l=e.CRH())&&(n.sort=l.first)}},inputs:{columns:"columns"},decls:17,vars:10,consts:[["mode","card"],["current","Perfiles",3,"crumbs"],["name","Perfiles",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-header"),e._UZ(2,"fury-breadcrumbs",1),e.qZA(),e.TgZ(3,"fury-page-layout-content"),e.TgZ(4,"fury-list",2),e.NdJ("filterChange",function(g){return n.onFilterChange(g)}),e.TgZ(5,"div",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.createProfile()}),e.TgZ(7,"mat-icon"),e._uU(8,"add"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"table",5),e.YNc(10,Je,2,1,"ng-container",6),e.ynx(11,7),e.YNc(12,ke,1,0,"th",8),e.YNc(13,We,9,1,"td",9),e.BQk(),e.YNc(14,Qe,1,0,"tr",10),e.YNc(15,Ge,1,0,"tr",11),e.qZA(),e._UZ(16,"mat-paginator",12),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@fadeInRight",void 0)("crumbs",e.DdM(9,Ke)),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",n.columns),e.xp6(5),e.Q6J("dataSource",n.dataSource),e.xp6(1),e.Q6J("ngForOf",n.columns),e.xp6(4),e.Q6J("matHeaderRowDef",n.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.visibleColumns),e.xp6(1),e.Q6J("pageSize",n.pageSize))},directives:[Ue.N,De.U,Fe.n,Re.d,Ne.n,G.lW,W.Hw,h.BZ,d.YE,o.sg,h.w1,h.fO,h.Dz,h.as,h.nj,m.NW,o.O5,h.ge,d.nU,h.ev,V.p6,V.VK,V.OP,h.XQ,h.Gk],encapsulation:2,data:{animation:[N.M,B.X]}}),r})()}];let Ye=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[T.Bz.forChild(Ve)],T.Bz]}),r})();var ze=s(61620),$e=s(74519);const je=[{path:"",component:K}];let Xe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[T.Bz.forChild(je)],T.Bz]}),r})(),qe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[o.ez,ze.o9,c.u5,c.UX,$e.O,_.Z,p.p,G.ot,I.Is,P.q,W.Ps,X.c,q.LD,Z.dp,Xe]]}),r})(),et=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[o.ez,Ye,c.u5,P.q,_.Z,qe,p.p,i.J]]}),r})()},58527:(x,v,s)=>{s.d(v,{E:()=>P});var o=s(40520),c=s(98545),i=s(5e3),p=s(33344);let P=(()=>{class _{constructor(u,m){this.http=u,this.tokenStorage=m}getHeaders(){var u=new o.WM,m=this.tokenStorage.getToken();return u.set("token",m||"{}")}getAll(u){var m=this.getHeaders();const d=(new o.LE).appendAll(u);return this.http.get(c._.settings.apiServer.API_URL_BASE+c._.settings.apiServer.AREAS,{params:d,headers:m})}getArea(u){var m=this.getHeaders();return this.http.get(c._.settings.apiServer.API_URL_BASE+c._.settings.apiServer.AREAS+"/"+u,{headers:m})}createArea(u){var m=this.getHeaders();return this.http.post(c._.settings.apiServer.API_URL_BASE+c._.settings.apiServer.AREAS,u,{headers:m})}updateArea(u){var m=this.getHeaders();return this.http.put(c._.settings.apiServer.API_URL_BASE+c._.settings.apiServer.AREAS+"/"+u.id,u,{headers:m})}deleteArea(u){var m=this.getHeaders();return this.http.delete(c._.settings.apiServer.API_URL_BASE+c._.settings.apiServer.AREAS+"/"+u.id,{headers:m})}getCostCenters(u){var m=this.getHeaders();const d=(new o.LE).appendAll(u);return this.http.get(c._.settings.apiServer.API_URL_BASE+c._.settings.apiServer.COST_CENTERS,{params:d,headers:m})}}return _.\u0275fac=function(u){return new(u||_)(i.LFG(o.eN),i.LFG(p.i))},_.\u0275prov=i.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},82593:(x,v,s)=>{s.d(v,{V:()=>P});var o=s(40520),c=s(98545),i=s(5e3),p=s(33344);let P=(()=>{class _{constructor(u,m){this.http=u,this.tokenStorage=m,this.baseendpoint=c._.settings.apiServer.API_URL_BASE+c._.settings.apiServer.FLEETS}getHeaders(){var u=new o.WM,m=this.tokenStorage.getToken();return u.set("token",m||"{}")}getAll(){var u=this.getHeaders();return this.http.get(this.baseendpoint,{headers:u})}getFiltered(u){var m=this.getHeaders();const d=(new o.LE).appendAll(u);return this.http.get(this.baseendpoint,{headers:m,params:d})}create(u){var m=this.getHeaders();return this.http.post(this.baseendpoint,u,{headers:m})}update(u){var m=this.getHeaders();return this.http.put(this.baseendpoint+"/"+u.id,u,{headers:m})}updateCvConfiguration(u){var m=this.getHeaders();return this.http.post(c._.settings.apiServer.API_URL_BASE+c._.settings.apiServer.CV_CONFIGURATIONS,u,{headers:m})}}return _.\u0275fac=function(u){return new(u||_)(i.LFG(o.eN),i.LFG(p.i))},_.\u0275prov=i.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},52190:(x,v,s)=>{s.d(v,{w:()=>T});var o=s(40520),c=s(46227),i=s(27221),p=s(98545),P=s(5e3),_=s(33344);let T=(()=>{class u{constructor(d,h){this.http=d,this.tokenStorage=h}getHeaders(){var d=new o.WM,h=this.tokenStorage.getToken();return d.set("token",h||"{}")}getAll(d){var h=this.getHeaders();const S=(new o.LE).appendAll(d?{type:d}:{});return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS,{params:S,headers:h})}getAllWithoutCV(){let d=this.getHeaders();const h=(new o.LE).appendAll({withcv:0});return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS,{params:h,headers:d})}create(d){var h=this.getHeaders();return this.http.post(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS,d,{headers:h}).pipe((0,c.V)(1e4),(0,i.K)(S=>{throw"Error de conexi\xf3n. Detalles: "+S}))}update(d){var h=this.getHeaders();return this.http.put(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS+"/"+d.site_code,d,{headers:h}).pipe((0,c.V)(1e4),(0,i.K)(S=>{throw"Error de conexi\xf3n. Detalles: "+S}))}delete(d){var h=this.getHeaders();return this.http.delete(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS+"/"+d.site_code,{headers:h})}getRemoteProducts(d){var h=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.REMOTE_PRODUCTS+"/"+d.site_code,{headers:h}).pipe((0,c.V)(1e4),(0,i.K)(S=>{throw"Error de conexi\xf3n. Detalles: "+S}))}getRemoteTanks(d){var h=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+"/remoteTanks/"+d.site_code,{headers:h}).pipe((0,c.V)(1e4),(0,i.K)(S=>{throw"Error de conexi\xf3n. Detalles: "+S}))}getMapOfProducts(d){var h=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.PRODUCTS_MAPS+"/"+d.site_code,{headers:h})}setMapOfProducts(d,h){var S=this.getHeaders();return this.http.post(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.PRODUCTS_MAPS+"/"+h,d,{headers:S})}setTanksT(d){var h=this.getHeaders();return console.log(typeof d),this.http.post(p._.settings.apiServer.API_URL_BASE+"/remoteTanks",d,{headers:h})}getDevicesStatus(d){var h=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.DEVICES_STATUS+"?site_code="+d,{headers:h})}getAllTanksStatus(){var d=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATUS_TANKS,{headers:d})}getTanksStatus(d){var h=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATUS_TANKS+"/"+d,{headers:h})}getPumpsStatus(d){var h=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATUS_PUMPS+"/"+d,{headers:h})}getPumps(d){var h=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.PUMPS+"/"+d,{headers:h})}syncSingle(d,h){var S=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.SYNC+"?site_code="+d+"&stub="+h,{headers:S}).pipe((0,c.V)(6e5),(0,i.K)(U=>{throw"Error de conexi\xf3n. Detalles: "+U}))}getMarimbas(){var d=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.MARIMBAS,{headers:d})}updateIndexes(d){var h=this.getHeaders();return console.log(h),this.http.put(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.INDEXES,d,{headers:h})}}return u.\u0275fac=function(d){return new(d||u)(P.LFG(o.eN),P.LFG(_.i))},u.\u0275prov=P.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);