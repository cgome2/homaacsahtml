"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[6734],{88914:(x,_,r)=>{r.d(_,{M:()=>s});var t=r(41777);const s=(0,t.X$)("fadeInRight",[(0,t.eR)(":enter",[(0,t.oB)({transform:"translateX(-2vw)",opacity:0}),(0,t.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,t.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(x,_,r)=>{r.d(_,{X:()=>s});var t=r(41777);const s=(0,t.X$)("fadeInUp",[(0,t.eR)(":enter",[(0,t.oB)({transform:"translateY(3vh)",opacity:0}),(0,t.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,t.oB)({transform:"translateY(0)",opacity:1}))])])},37425:(x,_,r)=>{r.d(_,{K:()=>s});var t=r(41777);const s=(0,t.X$)("scaleIn",[(0,t.eR)(":enter",[(0,t.oB)({transform:"scale(0)"}),(0,t.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,t.oB)({transform:"scale(1)"}))])])},38932:(x,_,r)=>{r.d(_,{n:()=>c});var t=r(5e3),s=r(30277),m=r(3299),h=r(69808),f=r(25245);function u(d,p){if(1&d&&(t.TgZ(0,"div",7),t.TgZ(1,"mat-icon",5),t._uU(2,"chevron_right"),t.qZA(),t.TgZ(3,"div",6),t._uU(4),t.qZA(),t.qZA()),2&d){const M=p.$implicit;t.xp6(4),t.Oqu(M)}}const P=function(){return["/"]};let c=(()=>{class d{constructor(){this.crumbs=[]}ngOnInit(){}}return d.\u0275fac=function(M){return new(M||d)},d.\u0275cmp=t.Xpm({type:d,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(M,T){1&M&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"a",2),t._uU(4,"Home"),t.qZA(),t.YNc(5,u,5,1,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"mat-icon",5),t._uU(8,"chevron_right"),t.qZA(),t.TgZ(9,"div",6),t._uU(10),t.qZA(),t.qZA(),t.qZA()),2&M&&(t.xp6(1),t.Oqu(T.current),t.xp6(2),t.Q6J("routerLink",t.DdM(4,P)),t.xp6(2),t.Q6J("ngForOf",T.crumbs),t.xp6(5),t.Oqu(T.current))},directives:[s.xw,s.Wh,m.yS,h.sg,f.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),d})()},94927:(x,_,r)=>{r.d(_,{n:()=>U});var t=r(5e3),s=r(23753),m=r(75778),h=r(80013),f=r(69808),u=r(92181),P=r(30277),c=r(25245),d=r(47423),p=r(77446),M=r(93075);const T=["filter"];function F(C,e){if(1&C&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7),t.TgZ(4,"mat-icon",8),t._uU(5,"search"),t.qZA(),t._UZ(6,"input",9,10),t.qZA(),t.TgZ(8,"button",11),t.TgZ(9,"mat-icon"),t._uU(10,"filter_list"),t.qZA(),t.qZA(),t.Hsn(11,1),t.qZA()),2&C){const g=t.oxw(),v=t.MAs(3);t.xp6(2),t.Oqu(g.name),t.xp6(6),t.Q6J("matMenuTriggerFor",v)}}function L(C,e){if(1&C){const g=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(b){const Z=t.CHM(g).$implicit;return t.oxw().toggleColumnVisibility(Z,b)}),t.TgZ(1,"mat-checkbox",13,14),t.NdJ("ngModelChange",function(b){return t.CHM(g).$implicit.visible=b})("click",function(b){return b.stopPropagation()}),t._uU(3),t.qZA(),t.qZA()}if(2&C){const g=e.$implicit;t.xp6(1),t.Q6J("ngModel",g.visible),t.xp6(2),t.hij(" ",g.name," ")}}const E=["*",[["",8,"actions"]]],A=["*",".actions"];let U=(()=>{class C{constructor(){this.filterChange=new t.vpe}ngAfterViewInit(){this.hideHeader||(0,s.R)(this.filter.nativeElement,"keyup").pipe((0,m.x)(),(0,h.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(g,v){v.stopPropagation(),v.stopImmediatePropagation(),g.visible=!g.visible}}return C.\u0275fac=function(g){return new(g||C)},C.\u0275cmp=t.Xpm({type:C,selectors:[["fury-list"]],viewQuery:function(g,v){if(1&g&&t.Gf(T,5),2&g){let b;t.iGM(b=t.CRH())&&(v.filter=b.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:A,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(g,v){1&g&&(t.F$t(E),t.TgZ(0,"div",0),t.YNc(1,F,12,2,"div",1),t.TgZ(2,"mat-menu",2,3),t.YNc(4,L,4,2,"button",4),t.qZA(),t.Hsn(5),t.qZA()),2&g&&(t.xp6(1),t.Q6J("ngIf",!v.hideHeader),t.xp6(3),t.Q6J("ngForOf",v.columns))},directives:[f.O5,u.VK,f.sg,P.xw,P.Wh,P.SQ,P.yH,c.Hw,d.lW,u.p6,p.oG,M.JJ,M.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),C})()},4940:(x,_,r)=>{r.d(_,{p:()=>f});var t=r(69808),s=r(93075),m=r(7057),h=r(5e3);let f=(()=>{class u{}return u.\u0275fac=function(c){return new(c||u)},u.\u0275mod=h.oAB({type:u}),u.\u0275inj=h.cJS({imports:[[t.ez,m.q,s.u5]]}),u})()},19165:(x,_,r)=>{r.d(_,{d:()=>s});var t=r(5e3);let s=(()=>{class m{constructor(){}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275dir=t.lG2({type:m,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),m})()},53580:(x,_,r)=>{r.d(_,{U:()=>s});var t=r(5e3);let s=(()=>{class m{constructor(){}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275dir=t.lG2({type:m,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),m})()},39762:(x,_,r)=>{r.d(_,{N:()=>s});var t=r(5e3);let s=(()=>{class m{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275dir=t.lG2({type:m,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(f,u){2&f&&t.ekj("fury-page-layout-card",u.isCard)("fury-page-layout-simple",u.isSimple)},inputs:{mode:"mode"}}),m})()},59968:(x,_,r)=>{r.d(_,{i:()=>s});var t=r(5e3);let s=(()=>{class m{constructor(){}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275dir=t.lG2({type:m,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),m})()},96734:(x,_,r)=>{r.r(_),r.d(_,{CrePermissionsTableModule:()=>Ce});var t=r(69808),s=r(93075),m=r(61264),h=r(4940),f=r(7057),u=r(3299),P=r(70655),c=r(86087),d=r(84847),p=r(32075),M=r(96831),T=r(92198),F=r(88914),L=r(14499);class E{constructor(n){this.permission_id=n&&n.permission_id||null,this.provider_name=n&&n.provider_name||null,this.rfc=n&&n.rfc||null,this.permission=n&&n.permission||null,this.documentation_tracking_type=n&&n.documentation_tracking_type||null,this.default_currency=n&&n.default_currency||null,this.default_volume_unit_of_measure=n&&n.default_volume_unit_of_measure||null,this.cre_permission_type=n&&n.cre_permission_type||null,this.timestamp=n&&n.timestamp||null,this.status=n&&n.status||null,this.terminal_alm_y_dist=n&&n.terminal_alm_y_dist||null,this.extranjero=n&&n.extranjero||null,this.permiso_importacion_o_exportacion=n&&n.permiso_importacion_o_exportacion||null}}var A=r(48966),U=r(37425),e=r(5e3),g=r(57261),v=r(95288),b=r(59968),D=r(36551),Z=r(25245),O=r(30277),I=r(67322),w=r(77531),B=r(74107),Q=r(32368),j=r(4834),S=r(47423),H=r(90508);const k=["crePermissionsModalForm"];function G(o,n){if(1&o&&(e.TgZ(0,"loading"),e._uU(1),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.hij("",i.isLoading," Conectando...")}}function W(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const i=e.oxw(2);e.xp6(1),e.Oqu(i.crePermissionsModalForm.get("rfc").errors.invalidPattern)}}function K(o,n){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const i=n.$implicit;e.Q6J("value",i.id),e.xp6(1),e.Oqu(i.cre_permission_type)}}function Y(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const i=e.oxw(2);e.xp6(1),e.Oqu(i.crePermissionsModalForm.get("permission").errors.invalidPattern)}}function $(o,n){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const i=n.$implicit;e.Q6J("value",i.id),e.xp6(1),e.Oqu(i.value)}}function z(o,n){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const i=n.$implicit;e.Q6J("value",i.id),e.xp6(1),e.Oqu(i.currency)}}function V(o,n){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const i=n.$implicit;e.Q6J("value",i.id),e.xp6(1),e.Oqu(i.unit_of_measure)}}function X(o,n){if(1&o){const i=e.EpF();e.TgZ(0,"form",6),e.TgZ(1,"div",7),e._uU(2,"Generales"),e.qZA(),e.TgZ(3,"div",8),e.TgZ(4,"div",9),e.TgZ(5,"mat-form-field",10),e.TgZ(6,"mat-label"),e._uU(7,"Raz\xf3n social:"),e.qZA(),e._UZ(8,"input",11),e.qZA(),e.TgZ(9,"mat-form-field",10),e.TgZ(10,"mat-label"),e._uU(11,"RFC:"),e.qZA(),e._UZ(12,"input",12),e.YNc(13,W,2,1,"mat-error",2),e.qZA(),e.qZA(),e.TgZ(14,"div",9),e.TgZ(15,"mat-form-field",10),e.TgZ(16,"mat-label"),e._uU(17,"Tipo de permiso:"),e.qZA(),e.TgZ(18,"mat-select",13),e.NdJ("selectionChange",function(l){return e.CHM(i),e.oxw().crePermissionTypeChange(l.value)}),e.YNc(19,K,2,2,"mat-option",14),e.qZA(),e.TgZ(20,"mat-hint"),e._uU(21,"Seleccionar el tipo de permiso."),e.qZA(),e.qZA(),e.TgZ(22,"mat-form-field",10),e.TgZ(23,"mat-label"),e._uU(24,"Permiso"),e.qZA(),e._UZ(25,"input",15),e.YNc(26,Y,2,1,"mat-error",2),e.qZA(),e.qZA(),e.TgZ(27,"div",9),e.TgZ(28,"mat-form-field",10),e.TgZ(29,"mat-label"),e._uU(30,"Terminal de Almacenamiento y distribuci\xf3n:"),e.qZA(),e._UZ(31,"input",16),e.qZA(),e.qZA(),e.TgZ(32,"div",17),e.TgZ(33,"div",18),e.TgZ(34,"mat-label",19),e._uU(35,"Origen proveedor:*"),e.qZA(),e.TgZ(36,"mat-slide-toggle",20),e.NdJ("change",function(l){return e.CHM(i),e.oxw().extranjeroChange(l)}),e._uU(37),e.qZA(),e.qZA(),e.TgZ(38,"mat-form-field",10),e.TgZ(39,"mat-label"),e._uU(40,"Permiso de importaci\xf3n o exportaci\xf3n:"),e.qZA(),e._UZ(41,"input",21),e.qZA(),e.qZA(),e.TgZ(42,"div",17),e.TgZ(43,"div",18),e.TgZ(44,"mat-label",19),e._uU(45,"Estatus:*"),e.qZA(),e.TgZ(46,"mat-slide-toggle",22),e.NdJ("change",function(l){return e.CHM(i),e.oxw().setActiveCrePermission(l)}),e._uU(47),e.qZA(),e.qZA(),e.TgZ(48,"mat-form-field",10),e.TgZ(49,"mat-label"),e._uU(50,"Documentos para rastreo de entregas de combustible:"),e.qZA(),e.TgZ(51,"mat-select",23),e.YNc(52,$,2,2,"mat-option",14),e.qZA(),e.TgZ(53,"mat-hint"),e._uU(54,"Seleccionar tipos de documentos utilizados para comprobar entregas de proveedor."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"div",9),e.TgZ(56,"mat-form-field",10),e.TgZ(57,"mat-label"),e._uU(58,"Moneda:"),e.qZA(),e.TgZ(59,"mat-select",24),e.YNc(60,z,2,2,"mat-option",14),e.qZA(),e.qZA(),e.TgZ(61,"mat-form-field",10),e.TgZ(62,"mat-label"),e._uU(63,"Unidad de medida:"),e.qZA(),e.TgZ(64,"mat-select",25),e.YNc(65,V,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",8),e._UZ(67,"mat-divider"),e.qZA(),e.TgZ(68,"div",26),e.TgZ(69,"button",27),e.NdJ("click",function(){return e.CHM(i),e.oxw().close()}),e._uU(70,"CANCELAR"),e.qZA(),e.TgZ(71,"button",28),e.NdJ("click",function(){return e.CHM(i),e.oxw().submit()}),e._uU(72,"GUARDAR"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const i=e.oxw();e.Q6J("formGroup",i.crePermissionsModalForm),e.xp6(13),e.Q6J("ngIf",i.crePermissionsModalForm.get("rfc").errors),e.xp6(6),e.Q6J("ngForOf",i.cre_permission_types),e.xp6(7),e.Q6J("ngIf",i.crePermissionsModalForm.get("permission").errors),e.xp6(11),e.Oqu(i.extranjero_label),e.xp6(10),e.Oqu(i.active_label),e.xp6(5),e.Q6J("ngForOf",i.documentation_tracking_types),e.xp6(8),e.Q6J("ngForOf",i.currencies),e.xp6(5),e.Q6J("ngForOf",i.units_of_measure),e.xp6(6),e.Q6J("disabled",i.crePermissionsModalForm.invalid)}}let R=(()=>{class o{constructor(i,a,l,y){this.data=i,this.dialogRef=a,this.snackbar=l,this._crePermissionsService=y,this.title="Permisos CRE",this.status=!1,this.crePermission=new E,this.isLoading=!1,this.currencies=[],this.units_of_measure=[],this.active_label="Activo",this.extranjero_label="Nacional",this.cre_permission_types=[],this.documentation_tracking_types=[{id:1,value:"Factura y remisi\xf3n"},{id:2,value:"Solo factura"},{id:3,value:"Solo remisi\xf3n"}],this.hide=!0,this.isLoading=!0,a.disableClose=!0,this.crePermissionsModalForm=new s.cw({permission_id:new s.NI,provider_name:new s.NI("",[s.kI.required]),rfc:new s.NI("",[s.kI.required,s.kI.pattern("^([A-Z\xd1]|&){3,4}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}$")]),permission:new s.NI("",[s.kI.required,s.kI.pattern("^((H|PL|PQ|G|P|GN|LP)/[0-9]{5}(/P)?/[A-Z]{2,5}(/[A-Z]{2,3}){0,2}/[0-9]{4}|(SENER)-(REF|TP|CPG)-[0-9]{3}-[0-9]{4})$")]),documentation_tracking_type:new s.NI(1,[s.kI.required]),default_currency:new s.NI(1,[s.kI.required]),default_volume_unit_of_measure:new s.NI(1,[s.kI.required]),cre_permission_type:new s.NI("",[s.kI.required]),terminal_alm_y_dist:new s.NI(""),extranjero:new s.NI(!1),permiso_importacion_o_exportacion:new s.NI(""),status:new s.NI(2)},function C(){return o=>{const n=o.controls.rfc,i=o.controls.permission;let a=new RegExp(/^([A-Z\xd1]|\&){3,4}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}$/),l=new RegExp(/^((H|PL|PQ|G|P|GN|LP)\/[0-9]{5}(\/P)?\/[A-Z]{2,5}(\/[A-Z]{2,3}){0,2}\/[0-9]{4}|(SENER)-(REF|TP|CPG)-[0-9]{3}-[0-9]{4})$/);!a.test(n.value)&&n.value.length>0?n.setErrors({invalidPattern:"Formato de RFC inv\xe1lido"}):n.setErrors(null),!l.test(i.value)&&i.value.length>0?i.setErrors({invalidPattern:"Formato de permiso inv\xe1lido"}):i.setErrors(null)}}())}ngOnInit(){return(0,P.mG)(this,void 0,void 0,function*(){this.currencies=yield this.getCurrencies(),this.units_of_measure=yield this.getUnitsOfMeasure(),this.cre_permission_types=yield this.getCrePermissionTypes(),console.log(this.data),this.data?(this.crePermission=this.data,this.crePermissionsModalForm.patchValue({permission_id:this.crePermission.permission_id,provider_name:this.crePermission.provider_name,rfc:this.crePermission.rfc,permission:this.crePermission.permission,documentation_tracking_type:this.crePermission.documentation_tracking_type,default_currency:this.crePermission.default_currency,default_volume_unit_of_measure:this.crePermission.default_volume_unit_of_measure,cre_permission_type:this.crePermission.cre_permission_type,terminal_alm_y_dist:this.crePermission.terminal_alm_y_dist,extranjero:1===this.crePermission.extranjero,permiso_importacion_o_exportacion:this.crePermission.permiso_importacion_o_exportacion,status:2===this.crePermission.status}),this.status=2===this.crePermission.status,this.active_label=this.status?"Activo":"Inactivo",1===this.crePermission.extranjero?(this.crePermissionsModalForm.controls.rfc.setValue(""),this.crePermissionsModalForm.controls.permission.setValue(""),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValue(""),this.crePermissionsModalForm.controls.rfc.disable(),this.crePermissionsModalForm.controls.permission.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.enable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.setValidators([s.kI.required]),this.extranjero_label="Extranjero"):(this.crePermissionsModalForm.controls.rfc.enable(),this.crePermissionsModalForm.controls.permission.enable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.setValue(""),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.disable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.clearValidators(),this.extranjero_label="Nacional",1===this.crePermission.cre_permission_type||2===this.crePermission.cre_permission_type?(this.crePermissionsModalForm.controls.terminal_alm_y_dist.enable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValidators([s.kI.required])):(this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators()))):(this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators()),this.isLoading=!1})}getCurrencies(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCurrencies().toPromise()})}getUnitsOfMeasure(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("volume").toPromise()})}getCrePermissionTypes(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCrePermissionTypes().toPromise()})}submit(){this.crePermission.provider_name=this.crePermissionsModalForm.controls.provider_name.value,this.crePermission.rfc=this.crePermissionsModalForm.controls.rfc.value,this.crePermission.permission=this.crePermissionsModalForm.controls.permission.value,this.crePermission.documentation_tracking_type=this.crePermissionsModalForm.controls.documentation_tracking_type.value,this.crePermission.default_currency=this.crePermissionsModalForm.controls.default_currency.value,this.crePermission.default_volume_unit_of_measure=this.crePermissionsModalForm.controls.default_volume_unit_of_measure.value,this.crePermission.cre_permission_type=this.crePermissionsModalForm.controls.cre_permission_type.value,this.crePermission.terminal_alm_y_dist=this.crePermissionsModalForm.controls.terminal_alm_y_dist.value,this.crePermission.status=this.crePermissionsModalForm.controls.status.value?2:1,this.crePermission.extranjero=this.crePermissionsModalForm.controls.extranjero.value?1:0,this.crePermission.permiso_importacion_o_exportacion=this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.value,null===this.crePermission.permission_id?this.createCrePermission():this.updateCrePermission()}createCrePermission(){this.isLoading=!0,this._crePermissionsService.create(this.crePermission).subscribe(i=>{this.snackbar.open(i.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"create",data:this.crePermission})},i=>{this.snackbar.open(i,null,{duration:5e3,panelClass:["red-snackbar"]})}),this.isLoading=!1}updateCrePermission(){this.isLoading=!0,this._crePermissionsService.update(this.crePermission).subscribe(i=>{this.snackbar.open(i.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"update",data:this.crePermission})},i=>{this.snackbar.open(i,null,{duration:5e3,panelClass:["green-snackbar"]})}),this.isLoading=!1}close(){this.dialogRef.close({action:"cancel",data:this.crePermission})}setActiveCrePermission(i){this.active_label=i.checked?"Activo":"Inactivo",this.status=i.checked}crePermissionTypeChange(i){1===i||2===i?(this.crePermissionsModalForm.controls.terminal_alm_y_dist.enable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValidators([s.kI.required])):(this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValue(""),this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators())}extranjeroChange(i){i.checked?(this.crePermissionsModalForm.controls.rfc.setValue(""),this.crePermissionsModalForm.controls.rfc.disable(),this.crePermissionsModalForm.controls.permission.setValue(""),this.crePermissionsModalForm.controls.permission.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValue(""),this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.enable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.setValidators([s.kI.required]),this.extranjero_label="Extranjero"):(this.crePermissionsModalForm.controls.rfc.enable(),this.crePermissionsModalForm.controls.permission.enable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.setValue(""),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.disable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.clearValidators(),this.extranjero_label="Nacional",(1===this.crePermissionsModalForm.controls.cre_permission_type.value||2===this.crePermissionsModalForm.controls.cre_permission_type.value)&&(this.crePermissionsModalForm.controls.terminal_alm_y_dist.enable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValidators([s.kI.required])))}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(A.WI),e.Y36(A.so),e.Y36(g.ux),e.Y36(v.w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["fury-form-wizard"]],viewQuery:function(i,a){if(1&i&&e.Gf(k,5),2&i){let l;e.iGM(l=e.CRH())&&(a._focusMe=l.first)}},decls:9,vars:6,consts:[[1,"title"],["svgIcon","permission"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"heading"],["fxLayout","column","fxLayoutGap","8px",1,"content",2,"margin-top","20px"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","24px"],["appearance","outline","fxFlex","",1,"field"],["type","text","formControlName","provider_name","required","","matInput",""],["type","text","formControlName","rfc","required","","matInput",""],["formControlName","cre_permission_type","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","permission","required","","matInput",""],["type","text","formControlName","terminal_alm_y_dist","required","","matInput",""],["fxLayout","column","fxLayout.gt-sm","row"],[1,"toggle"],[1,"label-toggle"],["color","primary","formControlName","extranjero",3,"change"],["type","text","formControlName","permiso_importacion_o_exportacion","required","","matInput",""],["color","primary","formControlName","status",3,"change"],["formControlName","documentation_tracking_type","required",""],["formControlName","default_currency","required",""],["formControlName","default_volume_unit_of_measure","required",""],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"],["color","primary","mat-raised-button","",3,"disabled","click"],[3,"value"]],template:function(i,a){1&i&&(e.TgZ(0,"fury-page"),e.TgZ(1,"fury-title",0),e._UZ(2,"mat-icon",1),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.YNc(5,G,2,1,"loading",2),e.TgZ(6,"div",3),e.TgZ(7,"div",4),e.YNc(8,X,73,10,"form",5),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(1),e.Oqu(a.title),e.xp6(1),e.Q6J("ngIf",a.isLoading),e.xp6(2),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("ngIf",a.crePermissionsModalForm))},directives:[b.i,D.M,Z.Hw,t.O5,O.xw,O.Wh,s._Y,s.JL,s.sg,O.SQ,I.KE,O.yH,I.hX,s.Fj,w.Nt,s.JJ,s.u,s.Q7,B.gD,t.sg,I.bx,Q.Rr,j.d,S.lW,I.TO,H.ey],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{overflow:scroll;margin:5px;max-width:600px;max-height:100%;border-radius:8px;padding:8px}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{max-width:800px;width:250px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:14px;padding:24px 8px 0}.toggle[_ngcontent-%COMP%]{padding:.8em .75em 0;border-style:solid;border-width:1px;border-radius:6px;max-width:800px;height:52px;width:250px;border-color:#e0e0e0;margin:5px 24px 0 0;display:inline-grid}.label-toggle[_ngcontent-%COMP%]{position:relative;font-size:11px;font-family:Roboto;font-weight:400;top:10px;color:#0009;background:white;z-index:1;max-width:100px;min-width:50px;margin:-31px 10px 0 0;height:10px;padding-left:5px}"],data:{animation:[L.X,F.M,U.K]}}),o})();var ee=r(39762),te=r(53580),ie=r(38932),re=r(19165),oe=r(94927),N=r(92181);function se(o,n){if(1&o&&(e.TgZ(0,"th",17),e._uU(1),e.qZA()),2&o){const i=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",i.name," ")}}function ne(o,n){if(1&o&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&o){const i=n.$implicit,a=e.oxw(2).$implicit,l=e.oxw();e.xp6(1),e.hij(" ",l.getLabel(a.name,i[a.property])," ")}}function ae(o,n){if(1&o&&(e.ynx(0,14),e.YNc(1,se,2,1,"th",15),e.YNc(2,ne,2,1,"td",16),e.BQk()),2&o){const i=e.oxw().$implicit;e.Q6J("matColumnDef",i.property)}}function le(o,n){if(1&o&&(e.ynx(0),e.YNc(1,ae,3,1,"ng-container",13),e.BQk()),2&o){const i=n.$implicit;e.xp6(1),e.Q6J("ngIf",i.isModelProperty)}}function me(o,n){1&o&&e._UZ(0,"th",19)}function ce(o,n){if(1&o){const i=e.EpF();e.TgZ(0,"td",20),e.TgZ(1,"button",21),e.NdJ("click",function(l){return l.stopPropagation()}),e.TgZ(2,"mat-icon"),e._uU(3,"more_horiz"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",22,23),e.TgZ(6,"button",24),e.NdJ("click",function(){const y=e.CHM(i).$implicit;return e.oxw().updateCrePermission(y)}),e.TgZ(7,"span"),e._uU(8,"Editar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const i=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",i)}}function ue(o,n){1&o&&e._UZ(0,"tr",25)}function de(o,n){if(1&o){const i=e.EpF();e.TgZ(0,"tr",26),e.NdJ("click",function(){const y=e.CHM(i).$implicit;return e.oxw().updateCrePermission(y)}),e.qZA()}}const _e=function(){return["Tables"]},pe=[{path:"",component:(()=>{class o{constructor(i,a){this.dialog=i,this._crePermissionsService=a,this.subject$=new M.t(1),this.data$=this.subject$.asObservable(),this.currencies=[],this.unitsOfMeasure=[],this.cre_permission_types=[],this.documentation_tracking_types=[{id:1,value:"Factura y remisi\xf3n"},{id:2,value:"Solo factura"},{id:3,value:"Solo remisi\xf3n"}],this.columns=[{name:"Nombre o raz\xf3n social",property:"provider_name",visible:!0,isModelProperty:!0},{name:"RFC",property:"rfc",visible:!0,isModelProperty:!0},{name:"Permiso",property:"permission",visible:!0,isModelProperty:!0},{name:"Moneda",property:"default_currency",visible:!0,isModelProperty:!0},{name:"Unidad de medida de volumen",property:"default_volume_unit_of_measure",visible:!0,isModelProperty:!0},{name:"Documentos para rastreo",property:"documentation_tracking_type",visible:!0,isModelProperty:!0},{name:"Tipo de permiso",property:"cre_permission_type",visible:!0,isModelProperty:!0},{name:"Fecha de creaci\xf3n",property:"timestamp",visible:!1,isModelProperty:!0},{name:"TAD",property:"terminal_alm_y_dist",visible:!0,isModelProperty:!0},{name:"Extranjero",property:"extranjero",visible:!0,isModelProperty:!0},{name:"Permiso importaci\xf3n",property:"permiso_importacion_o_exportacion",visible:!1,isModelProperty:!0},{name:"Estatus",property:"status",visible:!1,isModelProperty:!0},{name:"Acciones",property:"actions",visible:!0}],this.pageSize=10}getLabel(i,a){if(null!=i)return"Estatus"===i?2===a?"Activo":"Inactivo":"Moneda"===i?this.currencies.find(l=>l.id===a).currency:"Unidad de medida de volumen"===i?this.unitsOfMeasure.find(l=>l.id===a).unit_of_measure:"Tipo de permiso"===i?this.cre_permission_types.find(l=>l.id===a).cre_permission_type:"Documentos para rastreo"===i?this.documentation_tracking_types.find(l=>l.id===a).value:"Extranjero"===i?1==a?"Si":"No":a}get visibleColumns(){return this.columns.filter(i=>i.visible).map(i=>i.property)}getData(){this._crePermissionsService.getAll().subscribe(i=>{this.crePermissions=i,this.dataSource=new p.by(i),this.dataSource=new p.by(this.crePermissions),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},i=>{console.log(i)})}ngOnInit(){return(0,P.mG)(this,void 0,void 0,function*(){this.dataSource=new p.by,this.currencies=yield this.getCurrencies(),this.unitsOfMeasure=yield this.getUnitsOfMeasure(),this.cre_permission_types=yield this.getCrePermissionTypes(),this.getData(),this.data$.pipe((0,T.h)(i=>!!i)).subscribe(i=>{this.crePermissions=i,this.dataSource.data=i})})}getCurrencies(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCurrencies().toPromise()})}getUnitsOfMeasure(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("volume").toPromise()})}getCrePermissionTypes(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCrePermissionTypes().toPromise()})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createCrePermission(){this.dialog.open(R).afterClosed().subscribe(i=>{i&&(this.crePermissions.unshift(new E(i)),this.subject$.next(this.crePermissions),this.getData(),this.data$.pipe((0,T.h)(a=>!!a)).subscribe(a=>{this.crePermissions=a,this.dataSource.data=a}))})}updateCrePermission(i){this.dialog.open(R,{data:i}).afterClosed().subscribe(a=>{if(a){const l=this.crePermissions.findIndex(y=>y.permission_id===a.permission_id);this.crePermissions[l]=new E(a),this.subject$.next(this.crePermissions),this.getData(),this.data$.pipe((0,T.h)(y=>!!y)).subscribe(y=>{this.crePermissions=y,this.dataSource.data=y})}})}onFilterChange(i){!this.dataSource||(i=(i=i.trim()).toLowerCase(),this.dataSource.filter=i)}ngOnDestroy(){}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(A.uw),e.Y36(v.w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["cre-permissions-table"]],viewQuery:function(i,a){if(1&i&&(e.Gf(c.NW,7),e.Gf(d.YE,7)),2&i){let l;e.iGM(l=e.CRH())&&(a.paginator=l.first),e.iGM(l=e.CRH())&&(a.sort=l.first)}},inputs:{columns:"columns"},decls:17,vars:10,consts:[["mode","card"],["current","Permisos CRE",3,"crumbs"],["name","Permisos CRE",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(i,a){1&i&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-header"),e._UZ(2,"fury-breadcrumbs",1),e.qZA(),e.TgZ(3,"fury-page-layout-content"),e.TgZ(4,"fury-list",2),e.NdJ("filterChange",function(y){return a.onFilterChange(y)}),e.TgZ(5,"div",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return a.createCrePermission()}),e.TgZ(7,"mat-icon"),e._uU(8,"add"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"table",5),e.YNc(10,le,2,1,"ng-container",6),e.ynx(11,7),e.YNc(12,me,1,0,"th",8),e.YNc(13,ce,9,1,"td",9),e.BQk(),e.YNc(14,ue,1,0,"tr",10),e.YNc(15,de,1,0,"tr",11),e.qZA(),e._UZ(16,"mat-paginator",12),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(2),e.Q6J("@fadeInRight",void 0)("crumbs",e.DdM(9,_e)),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",a.columns),e.xp6(5),e.Q6J("dataSource",a.dataSource),e.xp6(1),e.Q6J("ngForOf",a.columns),e.xp6(4),e.Q6J("matHeaderRowDef",a.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.visibleColumns),e.xp6(1),e.Q6J("pageSize",a.pageSize))},directives:[ee.N,te.U,ie.n,re.d,oe.n,S.lW,Z.Hw,p.BZ,d.YE,t.sg,p.w1,p.fO,p.Dz,p.as,p.nj,c.NW,t.O5,p.ge,d.nU,p.ev,N.p6,N.VK,N.OP,p.XQ,p.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[F.M,L.X]}}),o})()}];let fe=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.Bz.forChild(pe)],u.Bz]}),o})();var J=r(72467);const ge=[{path:"",component:R}];let q=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.Bz.forChild(ge)],u.Bz]}),o})();var he=r(61620),Pe=r(91079),ye=r(79814);let ve=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[t.ez,he.o9,s.u5,s.UX,Pe.Bb,S.ot,A.Is,Z.Ps,w.c,ye.Fk,B.LD,f.q,J.Z,q]]}),o})(),Ce=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[t.ez,s.u5,m.J,h.p,f.q,fe,J.Z,q,ve]]}),o})()},95288:(x,_,r)=>{r.d(_,{w:()=>f});var t=r(40520),s=r(98545),m=r(5e3),h=r(33344);let f=(()=>{class u{constructor(c,d){this.http=c,this.tokenStorage=d}getHeaders(){var c=new t.WM,d=this.tokenStorage.getToken();return c.set("token",d||"{}")}getAll(){var c=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSIONS,{headers:c})}create(c){var d=this.getHeaders();return this.http.post(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSIONS,c,{headers:d})}update(c){var d=this.getHeaders();return this.http.put(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSIONS+"/"+c.permission_id,c,{headers:d})}getCurrencies(){var c=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CURRENCIES,{headers:c})}getUnitsOfMeasure(c){var d=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.UNITS_OF_MEASURE+"?type="+c,{headers:d})}getCrePermissionTypes(){var c=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSION_TYPES,{headers:c})}getAllByType(c){var d=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSIONS+"?cre_permission_type="+c,{headers:d})}}return u.\u0275fac=function(c){return new(c||u)(m.LFG(t.eN),m.LFG(h.i))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);