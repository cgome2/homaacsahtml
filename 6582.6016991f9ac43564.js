"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[6582],{86582:(jt,H,c)=>{c.r(H),c.d(H,{GlobalModule:()=>ne});var j=c(69808),T=c(7057),R=c(3299),t=c(5e3),pt=c(59968),C=c(30277),x=c(70655),P=c(14499),A=c(88914),V=c(63182),ft=c(81041),vt=c(71872),D=c(48230),Y=c(20365),Q=c(77636),I=c(62827),Gt=c(98827),Wt=c(89181),Lt=c(17341),Et=c(36258),mt=c(2893),$=c(48966),K=c(12736),O=c(97199),tt=c(47423),et=c(25245),G=c(92181),rt=c(75972);let Rt=(()=>{class s{constructor(e,r,i,n){this.platformId=e,this.filterDialog=r,this._widgetsService=i,this.zone=n,this.data=[],this.filter={},this.title="Todos",this.titleStations="Todas"}ngAfterViewInit(){return(0,x.mG)(this,void 0,void 0,function*(){this.data=yield this.getData(),this.browserOnly(()=>{var e=ft.f.new("volume_gauge_widget_chartdiv");e.setThemes([mt.Z.new(e)]);var r=e.container.children.push(Wt.H.new(e,{panX:!1,panY:!1,radius:vt.aQ(90),innerRadius:-20}));function i(a,o,l,h,g,d){var p=Lt.Y.new(e,{strokeOpacity:.1,minGridDistance:30,startAngle:l,endAngle:h,stroke:g});p.ticks.template.setAll({visible:!0,strokeOpacity:.8,stroke:g}),p.grid.template.setAll({visible:!1});var f=r.xAxes.push(I.m.new(e,{maxDeviation:0,min:a,max:o,strictMinMax:!0,renderer:p})),m=f.makeDataItem({value:a,endValue:o});return f.createAxisRange(m),m.get("axisFill").setAll({visible:!0,fill:g,fillOpacity:.8,stroke:g,strokeOpacity:.8,strokeWidth:1}),m.get("label").setAll({text:d,inside:!0,fontSize:"0.9em",fill:D.$_(16777215)}),m.get("tick").setAll({visible:!1}),f}function n(a,o,l,h){var g=1e3*+o,d=h?"[bold]Volumen actual:[/]\n":"[bold]Volumen anterior:[/]\n",p=a.makeDataItem({value:0}),f=p.set("bullet",Gt._.new(e,{sprite:Et.F.new(e,{radius:vt.aQ(90),innerRadius:vt.aQ(70)})}));f.get("sprite").pin.setAll({forceHidden:!0}),f.get("sprite").hand.setAll({fill:l,fillOpacity:.9});var m=Y.u.new(e,{labelText:d+new Intl.NumberFormat("en-US",{maximumSignificantDigits:14}).format(g)+" lts"});return m.get("background").setAll({fill:D.$_(l),fillOpacity:.7}),f.get("sprite").set("tooltip",m),f.get("sprite").set("tooltipText","Volumen"),a.createAxisRange(p),f}this.data.forEach(a=>{var l,h,g,o=a.previous>=a.current;1===a.type?l=o?i(0,a.previous>0?a.previous:1,-105,15,D.$_(a.color),a.label):i(0,a.current,-105,15,D.$_("#c4141b"),a.label):2===a.type?l=o?i(0,a.previous>0?a.previous:1,20,95,D.$_(a.color),a.label):i(0,a.current,20,95,D.$_("#c4141b"),a.label):3===a.type?l=o?i(0,a.previous>0?a.previous:1,100,175,D.$_(a.color),a.label):i(0,a.current,100,175,D.$_("#c4141b"),a.label):4===a.type&&(l=o?i(0,a.previous>0?a.previous:1,180,250,D.$_(a.color),a.label):i(0,a.current,180,250,D.$_("#c4141b"),a.label)),h=n(l,a.previous,a.color,!1),g=n(l,a.current,D.$_(o?"#000000":"#c4141b"),!0),setInterval(function(){g.get("sprite").dataItem.animate({key:"value",to:a.current,duration:1e3,easing:Q.C0(Q.T7)}),h.get("sprite").dataItem.animate({key:"value",to:a.previous,duration:1e3,easing:Q.C0(Q.T7)})},2e3)}),this.root=e})})}getData(){return(0,x.mG)(this,void 0,void 0,function*(){return yield this._widgetsService.getByAcronymous("VG",this.filter).toPromise()})}browserOnly(e){(0,j.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{e()})}ngOnDestroy(){this.browserOnly(()=>{this.root&&this.root.dispose()})}reload(){this.isLoading=!0,this.root.dispose(),this.ngAfterViewInit(),this.isLoading=!1}openFilterOptions(){this.filterDialog.open(V.K,{data:{title:"Filtro de productos/estaciones",filter_type:"products"}}).afterClosed().subscribe(e=>{this.filter=e,this.title=""!==e.products_names?e.products_names:"Todos",this.titleStations=""!==e.stations_names?e.stations_names:"Todas",console.log(e),this.reload()})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.Lbi),t.Y36($.uw),t.Y36(K.L),t.Y36(t.R0b))},s.\u0275cmp=t.Xpm({type:s,selectors:[["volume-gauge-widget"]],inputs:{product_id:"product_id"},decls:33,vars:4,consts:[["fxFlex","auto"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"card-content"],["id","volume_gauge_widget_chartdiv",2,"width","100%","height","100%"],[3,"isLoading"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled",""]],template:function(e,r){if(1&e&&(t.TgZ(0,"fury-card",0),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3," Desempe\xf1o de despachos "),t._UZ(4,"br"),t._uU(5),t.qZA(),t.TgZ(6,"fury-card-header-actions"),t.TgZ(7,"button",1),t.NdJ("click",function(){return r.reload()}),t.TgZ(8,"mat-icon"),t._uU(9,"refresh"),t.qZA(),t.qZA(),t.TgZ(10,"button",2),t.TgZ(11,"mat-icon"),t._uU(12,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"fury-card-content",3),t._UZ(14,"div",4),t.qZA(),t._UZ(15,"fury-loading-overlay",5),t.qZA(),t.TgZ(16,"mat-menu",null,6),t.TgZ(18,"button",7),t.NdJ("click",function(){return r.openFilterOptions()}),t.TgZ(19,"mat-icon"),t._uU(20,"filter_list"),t.qZA(),t.TgZ(21,"span"),t._uU(22," Filtrar "),t.qZA(),t.qZA(),t.TgZ(23,"button",8),t.TgZ(24,"mat-icon"),t._uU(25," more"),t.qZA(),t.TgZ(26,"span"),t._uU(27," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(28,"button",8),t.TgZ(29,"mat-icon"),t._uU(30," remove_circle"),t.qZA(),t.TgZ(31,"span"),t._uU(32," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.MAs(17);t.xp6(5),t.AsE("Productos: ",r.title," Estaciones: ",r.titleStations," "),t.xp6(5),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("isLoading",r.isLoading)}},directives:[O.i0,C.yH,O.$X,O.eP,O.OA,tt.lW,et.Hw,G.p6,O.z8,rt.d,G.VK,G.OP],styles:["[_nghost-%COMP%]{height:100%}.fury-card-header[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{padding:24px;cursor:pointer;border-top:4px solid transparent}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);padding-bottom:6px}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-headline)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]{font:var(--font-caption)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:13px;height:13px;width:13px;vertical-align:middle}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .compared[_ngcontent-%COMP%]{font:var(--font-caption);visibility:hidden}.card-content[_ngcontent-%COMP%]{min-height:350px}.actions[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{margin-top:-24px;margin-bottom:-1.34375em;font-size:14px}"],data:{animation:[A.M,P.X]}}),s})();var _t=c(58453),_=c(78154),bt=c(55777),wt=c(12143),Tt=c(60621),U=c(8256),yt=c(10062),M=c(59660),xt=c(70533),it=c(57166),at=function(s){function u(){var e=null!==s&&s.apply(this,arguments)||this;return Object.defineProperty(e,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_groupingCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_intervalDuration",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(e,"_baseDuration",{enumerable:!0,configurable:!0,writable:!0,value:1}),e}return(0,x.ZT)(u,s),Object.defineProperty(u.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._settings.themeTags=it.Fy(this._settings.themeTags,["axis"]),s.prototype._afterNew.call(this),this._setBaseInterval(this.get("baseInterval")),this.on("baseInterval",function(){e._setBaseInterval(e.get("baseInterval"))})}}),Object.defineProperty(u.prototype,"_setBaseInterval",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.setPrivateRaw("baseInterval",e),this._baseDuration=_.WI(e)}}),Object.defineProperty(u.prototype,"_fixZoomFactor",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setPrivateRaw("maxZoomFactor",Math.round((this.getPrivate("max",0)-this.getPrivate("min",0))/this.baseMainDuration()))}}),Object.defineProperty(u.prototype,"_groupData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,r=this.getPrivate("min"),i=this.getPrivate("max");if(U.hj(r)&&U.hj(i)){this._fixZoomFactor();var n=this.getPrivate("groupInterval");if(this._setBaseInterval(n||this.get("baseInterval")),this.isDirty("groupInterval")){var a=this.get("groupInterval");a&&this.setRaw("groupIntervals",[a])}if(this.isDirty("groupData")&&!this._dataGrouped){if(this.get("groupData"))M.S6(this.series,function(h){e._groupSeriesData(h)}),this._handleRangeChange();else{var o=this.get("baseInterval"),l=o.timeUnit+o.count;M.S6(this.series,function(h){h.setDataSet(l)}),this._setBaseInterval(o),this.setPrivateRaw("groupInterval",void 0),this.markDirtyExtremes()}this._dataGrouped=!0}}}}),Object.defineProperty(u.prototype,"_groupSeriesData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this;if(this.get("groupData")&&!e.get("groupDataDisabled")){var i=[],n=this.baseMainDuration(),a=this.get("groupIntervals");M.S6(a,function(v){_.WI(v)>n&&i.push(v)}),e._dataSets={};var l,o=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),h=e.get("baseAxis");e.get("xAxis")===h?l=e._valueYFields:e.get("yAxis")===h&&(l=e._valueXFields);var g=e._mainDataItems,d=this.get("baseInterval");e._dataSets[d.timeUnit+d.count]=g;var f=e.get("groupDataCallback"),m=e.get("groupDataWithOriginals",!1);f&&(m=!0),M.vn(i,function(v){var Z=-1/0,y=v.timeUnit+v.count;e._dataSets[y]=[];var b,S={},W={},E={},z={};M.S6(l,function(F){S[F]=0,W[F]=0,E[F]=e.get(F+"Grouped"),z[F]=F+"Working"});var Ft,q,k=_.g9(v.timeUnit);return g[0]&&(Ft=new Date(g[0].get(o))),M.S6(g,function(F){var Pt,se=F.get(o),ht=_.NM(new Date(se),v.timeUnit,v.count,r._root.locale.firstDayOfWeek,r._root.utc,Ft,r._root.timezone).getTime();Z<ht-k/24?(Pt=xt.JG(F.dataContext),(b=new Tt.z(e,Pt,e._makeDataItem(Pt))).setRaw(o,ht),e._dataSets[y].push(b),M.S6(l,function(w){var B=F.get(w);U.hj(B)&&(b.setRaw(w,B),b.setRaw(z[w],B),W[w]++,S[w]+=B)}),m&&b.set("originals",[F]),f&&q&&f(q,v),q=b):(M.S6(l,function(w){var B=E[w],L=F.get(w);if(void 0!==L){var gt=b.get(w);switch(B){case"close":b.setRaw(w,L);break;case"sum":b.setRaw(w,gt+L);break;case"open":break;case"low":L<gt&&b.setRaw(w,L);break;case"high":L>gt&&b.setRaw(w,L);break;case"average":W[w]++,S[w]+=L,b.setRaw(w,S[w]/W[w]);break;case"extreme":Math.abs(L)>Math.abs(gt)&&b.setRaw(w,L)}b.setRaw(z[w],b.get(w));var Ut=xt.JG(F.dataContext);Ut[o]=ht,b.dataContext=Ut}}),m&&b.get("originals").push(F)),Z=ht}),f&&q&&f(q,v),!(e._dataSets[y].length<r.get("groupCount",1/0))}),e._dataSetId&&e.setDataSet(e._dataSetId),this.markDirtySize()}}}),Object.defineProperty(u.prototype,"_clearDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){s.prototype._clearDirty.call(this),this._groupingCalculated=!1,this._dataGrouped=!1}}),Object.defineProperty(u.prototype,"_handleRangeChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;s.prototype._handleRangeChange.call(this);var r=this.getPrivate("selectionMin"),i=this.getPrivate("selectionMax");if(U.hj(r)&&U.hj(i)){if(this.get("groupData")&&!this._groupingCalculated){this._groupingCalculated=!0;var n=this.get("baseInterval"),a=i-r+(this.get("startLocation",0)+(1-this.get("endLocation",1))*this.baseDuration()),o=this.get("groupInterval");if(!o){var l=this.get("groupIntervals");l&&(o=_.Pk(0,a,this.get("groupCount",1/0),l),_.WI(o)<_.WI(n)&&(o=(0,x.pi)({},n)))}var h=this.getPrivate("groupInterval");if(o&&(!h||h.timeUnit!==o.timeUnit||h.count!==o.count)&&(this.setPrivateRaw("groupInterval",o),this._setBaseInterval(o),o)){var g=o.timeUnit+o.count;M.S6(this.series,function(d){d.get("baseAxis")===e&&d.setDataSet(g)}),this.markDirtyExtremes()}}M.S6(this.series,function(d){if(d.get("baseAxis")===e){var p=e.getPrivate("name")+e.get("renderer").getPrivate("letter"),m=M.sK(d.dataItems,function(k){return yt.qu(k.get(p),r)}).index;m>0&&(m-=1);var Z=M.sK(d.dataItems,function(k){return yt.qu(k.get(p),i)}).index,y=Z;y>0&&y--;var b=d.dataItems[m],S=d.dataItems[y],W=void 0,E=void 0;b&&(E=b.get(p)),S&&(W=S.get(p));var z=!1;null!=W&&null!=E&&(W<r||E>i)&&(z=!0),d.setPrivate("outOfSelection",z),d.setPrivate("startIndex",m),d.setPrivate("endIndex",Z)}})}}}),Object.defineProperty(u.prototype,"_adjustMinMax",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,i,n){return{min:e,max:r,step:(r-e)/i}}}),Object.defineProperty(u.prototype,"intervalDuration",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._intervalDuration}}),Object.defineProperty(u.prototype,"_prepareAxisItems",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getPrivate("min"),r=this.getPrivate("max");if(U.hj(e)&&U.hj(r)){var i=this.getPrivate("selectionMin"),n=this.getPrivate("selectionMax"),a=this.get("renderer"),o=this.getPrivate("baseInterval"),l=i,h=0,g=this.get("gridIntervals"),d=_.Pk(0,n-i,a.gridCount(),g);_.WI(d)<this.baseDuration()&&(d=(0,x.pi)({},o));var p=_.WI(d);this._intervalDuration=p;var f=_.XC(d.timeUnit),m=(l=_.NM(new Date(i-p),d.timeUnit,d.count,this._root.locale.firstDayOfWeek,this._root.utc,new Date(e),this._root.timezone).getTime())-p,v=void 0,Z=this.get("dateFormats");for(this.setPrivateRaw("gridInterval",d);l<n+p;){var y=void 0;this.dataItems.length<h+1?(y=new Tt.z(this,void 0,{}),this._dataItems.push(y),this.processDataItem(y)):y=this.dataItems[h],this._createAssets(y,[]),y.isHidden()&&y.show(),y.setRaw("value",l),y.setRaw("endValue",_.IH(new Date(l),d.timeUnit,d.count,this._root.utc).getTime());var b=new Date(l);v=Z[d.timeUnit],f&&this.get("markUnitChange")&&U.hj(m)&&"year"!=d.timeUnit&&_.oE(l,m,f,this._root.utc,this._root.timezone)&&(v=this.get("periodChangeDateFormats")[d.timeUnit]);var S=y.get("label");S&&S.set("text",this._root.dateFormatter.format(b,v)),this._prepareDataItem(y,d.count),m=l,l=_.IH(new Date(l),d.timeUnit,d.count,this._root.utc).getTime(),h++}for(var W=h;W<this.dataItems.length;W++)this.dataItems[W].hide();M.S6(this.series,function(E){E.inited&&E._markDirtyAxes()})}this._updateGhost()}}),Object.defineProperty(u.prototype,"_fixMin",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this.getPrivate("baseInterval"),i=_.NM(new Date(e),r.timeUnit,r.count,this._root.locale.firstDayOfWeek,this._root.utc,void 0,this._root.timezone).getTime();return i+(_.IH(new Date(i),r.timeUnit,r.count,this._root.utc).getTime()-i)*this.get("startLocation",0)}}),Object.defineProperty(u.prototype,"_fixMax",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this.getPrivate("baseInterval"),i=_.NM(new Date(e),r.timeUnit,r.count,this._root.locale.firstDayOfWeek,this._root.utc,void 0,this._root.timezone).getTime();return i+(_.IH(new Date(i),r.timeUnit,r.count,this._root.utc).getTime()-i)*this.get("endLocation",1)}}),Object.defineProperty(u.prototype,"_updateDates",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(u.prototype,"baseDuration",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._baseDuration}}),Object.defineProperty(u.prototype,"baseMainDuration",{enumerable:!1,configurable:!0,writable:!0,value:function(){return _.WI(this.get("baseInterval"))}}),Object.defineProperty(u.prototype,"processSeriesDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){var i=this,n=this.getPrivate("baseInterval");e.open={},e.close={},M.S6(r,function(a){var o=e.get(a);if(U.hj(o)){var l=_.NM(new Date(o),n.timeUnit,n.count,i._root.locale.firstDayOfWeek,i._root.utc,void 0,i._root.timezone).getTime(),h=_.IH(new Date(l),n.timeUnit,n.count,i._root.utc).getTime();e.open[a]=l,e.close[a]=h,i._updateDates(l)}})}}),Object.defineProperty(u.prototype,"getDataItemPositionX",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,i,n){var a,o;e.open&&e.close?(a=e.open[r],o=e.close[r]):o=a=e.get(r);var l=a+(o-a)*i;return this.valueToPosition(l=this._baseValue+(l-this._baseValue)*n)}}),Object.defineProperty(u.prototype,"getDataItemCoordinateX",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,i,n){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,r,i,n))}}),Object.defineProperty(u.prototype,"getDataItemPositionY",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,i,n){var a,o;e.open&&e.close?(a=e.open[r],o=e.close[r]):o=a=e.get(r);var l=a+(o-a)*i;return this.valueToPosition(l=this._baseValue+(l-this._baseValue)*n)}}),Object.defineProperty(u.prototype,"getDataItemCoordinateY",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,i,n){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,r,i,n))}}),Object.defineProperty(u.prototype,"roundAxisPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){var i=this.positionToValue(e),n=this.getPrivate("baseInterval"),a=i=_.NM(new Date(i),n.timeUnit,n.count,this._root.locale.firstDayOfWeek,this._root.utc,new Date(this.getPrivate("min",0)),this._root.timezone).getTime();return r>0&&(a=_.IH(new Date(i),n.timeUnit,n.count,this._root.utc).getTime()),this.valueToPosition(i+(a-i)*r)}}),Object.defineProperty(u.prototype,"getTooltipText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this.get("tooltipDateFormats")[this.getPrivate("baseInterval").timeUnit],i=new Date(this.positionToValue(e)),n=this.getPrivate("baseInterval"),a=_.zX(n,i,this._root.locale.firstDayOfWeek,this._root.utc,this._root.timezone);return this._root.dateFormatter.format(new Date(this.positionToValue(e)+this.get("tooltipIntervalOffset",-this.get("tooltipLocation",.5))*a),this.get("tooltipDateFormat",r))}}),Object.defineProperty(u.prototype,"getSeriesItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){var i=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),n=this.positionToValue(r),a=M.sK(e.dataItems,function(m){var v=0;return m.open&&(v=m.open[i]),yt.qu(v,n)});if(e.get("snapTooltip")){var o=e.dataItems[a.index-1],l=e.dataItems[a.index];if(o&&l&&o.open&&l.close){var g=l.close[i];if(Math.abs(n-o.open[i])>Math.abs(n-g))return l}return o}var d=e.dataItems[a.index-1];if(d&&d.open&&d.close&&n>=d.open[i]&&n<=d.close[i])return d}}),Object.defineProperty(u.prototype,"shouldGap",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,i,n){var a=e.get(n);return r.get(n)-a>this.baseDuration()*i}}),Object.defineProperty(u.prototype,"zoomToDates",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,i){this.zoomToValues(e.getTime(),r.getTime(),i)}}),Object.defineProperty(u.prototype,"positionToDate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new Date(this.positionToValue(e))}}),Object.defineProperty(u.prototype,"dateToPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.valueToPosition(e.getTime())}}),Object.defineProperty(u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DateAxis"}),Object.defineProperty(u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:I.m.classNames.concat([u.className])}),u}(I.m),nt=c(28810),ot=c(36519),st=c(78350),Ot=c(81519),Zt=c(57970),At=c(50314),It=c(75854),Mt=function(s){function u(){var e=null!==s&&s.apply(this,arguments)||this;return Object.defineProperty(e,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:e._makeThumb()}),Object.defineProperty(e,"startGrip",{enumerable:!0,configurable:!0,writable:!0,value:e._makeButton()}),Object.defineProperty(e,"endGrip",{enumerable:!0,configurable:!0,writable:!0,value:e._makeButton()}),Object.defineProperty(e,"_thumbBusy",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_startDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_endDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_thumbDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(e,"_gripDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,x.ZT)(u,s),Object.defineProperty(u.prototype,"_addOrientationClass",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._settings.themeTags=it.Fy(this._settings.themeTags,["scrollbar",this._settings.orientation]),this._settings.background||(this._settings.background=Ot.c.new(this._root,{themeTags:it.Fy(this._settings.themeTags,["main","background"])}))}}),Object.defineProperty(u.prototype,"_makeButton",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.children.push(It.z.new(this._root,{themeTags:["resize","button",this.get("orientation")],icon:At.T.new(this._root,{themeTags:["icon"]})}))}}),Object.defineProperty(u.prototype,"_makeThumb",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.children.push(Ot.c.new(this._root,{themeTags:["thumb",this.get("orientation")]}))}}),Object.defineProperty(u.prototype,"_handleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this;e&&this._disposers.push(e.events.on("stopped",function(){r.setPrivateRaw("isBusy",!1),r._thumbBusy=!1}))}}),Object.defineProperty(u.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._addOrientationClass(),s.prototype._afterNew.call(this);var r=this.startGrip,i=this.endGrip,n=this.thumb,a=this.get("background");a&&this._disposers.push(a.events.on("click",function(o){e.setPrivateRaw("isBusy",!0);var p,f,m,l=e._display.toLocal(o.point),h=e.width(),g=e.height(),d=e.get("orientation");p="vertical"==d?(l.y-n.height()/2)/g:(l.x-n.width()/2)/h,"vertical"==d?(f=p*g,m="y"):(f=p*h,m="x");var v=e.get("animationDuration",0);v>0?(e._thumbBusy=!0,e._handleAnimation(e.thumb.animate({key:m,to:f,duration:v,easing:e.get("animationEasing")}))):(e.thumb.set(m,f),e._root.events.on("frameended",function(){e.setPrivateRaw("isBusy",!1)}))})),this._disposers.push(n.events.on("dblclick",function(){var o=e.get("animationDuration",0),l=e.get("animationEasing");e.animate({key:"start",to:0,duration:o,easing:l}),e.animate({key:"end",to:1,duration:o,easing:l})})),this._disposers.push(r.events.on("pointerdown",function(){e.setPrivateRaw("isBusy",!0),e._startDown=!0,e._gripDown="start"})),this._disposers.push(i.events.on("pointerdown",function(){e.setPrivateRaw("isBusy",!0),e._endDown=!0,e._gripDown="end"})),this._disposers.push(n.events.on("pointerdown",function(){e.setPrivateRaw("isBusy",!0),e._thumbDown=!0,e._gripDown=void 0})),this._disposers.push(r.events.on("globalpointerup",function(){e._startDown&&e.setPrivateRaw("isBusy",!1),e._startDown=!1})),this._disposers.push(i.events.on("globalpointerup",function(){e._endDown&&e.setPrivateRaw("isBusy",!1),e._endDown=!1})),this._disposers.push(n.events.on("globalpointerup",function(){e._thumbDown&&e.setPrivateRaw("isBusy",!1),e._thumbDown=!1})),this._disposers.push(r.on("x",function(){e._updateThumb()})),this._disposers.push(i.on("x",function(){e._updateThumb()})),this._disposers.push(r.on("y",function(){e._updateThumb()})),this._disposers.push(i.on("y",function(){e._updateThumb()})),this._disposers.push(n.events.on("positionchanged",function(){e._updateGripsByThumb()})),"vertical"==this.get("orientation")?(r.set("x",0),i.set("x",0),this._disposers.push(n.adapters.add("y",function(o){return Math.max(Math.min(Number(o),e.height()-n.height()),0)})),this._disposers.push(n.adapters.add("x",function(o){return e.width()/2})),this._disposers.push(r.adapters.add("x",function(o){return e.width()/2})),this._disposers.push(i.adapters.add("x",function(o){return e.width()/2})),this._disposers.push(r.adapters.add("y",function(o){return Math.max(Math.min(Number(o),e.height()),0)})),this._disposers.push(i.adapters.add("y",function(o){return Math.max(Math.min(Number(o),e.height()),0)}))):(r.set("y",0),i.set("y",0),this._disposers.push(n.adapters.add("x",function(o){return Math.max(Math.min(Number(o),e.width()-n.width()),0)})),this._disposers.push(n.adapters.add("y",function(o){return e.height()/2})),this._disposers.push(r.adapters.add("y",function(o){return e.height()/2})),this._disposers.push(i.adapters.add("y",function(o){return e.height()/2})),this._disposers.push(r.adapters.add("x",function(o){return Math.max(Math.min(Number(o),e.width()),0)})),this._disposers.push(i.adapters.add("x",function(o){return Math.max(Math.min(Number(o),e.width()),0)})))}}),Object.defineProperty(u.prototype,"_updateChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){s.prototype._updateChildren.call(this),(this.isDirty("end")||this.isDirty("start")||this._sizeDirty)&&this.updateGrips()}}),Object.defineProperty(u.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(s.prototype._changed.call(this),this.isDirty("start")||this.isDirty("end")){var e="rangechanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,start:this.get("start",0),end:this.get("end",1),grip:this._gripDown})}}}),Object.defineProperty(u.prototype,"updateGrips",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.startGrip,r=this.endGrip,i=this.get("orientation"),n=this.height(),a=this.width();"vertical"==i?(e.set("y",n*this.get("start",0)),r.set("y",n*this.get("end",1))):(e.set("x",a*this.get("start",0)),r.set("x",a*this.get("end",1)));var g,d,o=this.getPrivate("positionTextFunction"),l=Math.round(100*this.get("start",0)),h=Math.round(100*this.get("end",0));o?(g=o.call(this,this.get("start",0)),d=o.call(this,this.get("end",0))):(g=l+"%",d=h+"%"),e.set("ariaLabel",this._t("From %1",void 0,g)),e.set("ariaValueNow",""+l),e.set("ariaValueText",l+"%"),e.set("ariaValueMin","0"),e.set("ariaValueMax","100"),r.set("ariaLabel",this._t("To %1",void 0,d)),r.set("ariaValueNow",""+h),r.set("ariaValueText",h+"%"),r.set("ariaValueMin","0"),r.set("ariaValueMax","100")}}),Object.defineProperty(u.prototype,"_updateThumb",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.thumb,r=this.startGrip,i=this.endGrip,n=this.height(),a=this.width(),o=r.x(),l=i.x(),h=r.y(),g=i.y(),d=0,p=1;"vertical"==this.get("orientation")?U.hj(h)&&U.hj(g)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("height",g-h),e.set("y",h)),d=h/n,p=g/n):U.hj(o)&&U.hj(l)&&(!this._thumbBusy&&!e.isDragging()&&(e.set("width",l-o),e.set("x",o)),d=o/a,p=l/a),this.getPrivate("isBusy")&&(this.get("start")!=d||this.get("end")!=p)&&(this.set("start",d),this.set("end",p));var Z,y,f=this.getPrivate("positionTextFunction"),m=Math.round(100*this.get("start",0)),v=Math.round(100*this.get("end",0));f?(Z=f.call(this,this.get("start",0)),y=f.call(this,this.get("end",0))):(Z=m+"%",y=v+"%"),e.set("ariaLabel",this._t("From %1 to %2",void 0,Z,y)),e.set("ariaValueNow",""+m),e.set("ariaValueText",m+"%")}}),Object.defineProperty(u.prototype,"_updateGripsByThumb",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.thumb,r=this.startGrip,i=this.endGrip;if("vertical"==this.get("orientation")){var n=e.height();r.set("y",e.y()),i.set("y",e.y()+n)}else n=e.width(),r.set("x",e.x()),i.set("x",e.x()+n)}}),Object.defineProperty(u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Scrollbar"}),Object.defineProperty(u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zt.W.classNames.concat([u.className])}),u}(Zt.W),Ct=function(s){function u(){var e=null!==s&&s.apply(this,arguments)||this;return Object.defineProperty(e,"chart",{enumerable:!0,configurable:!0,writable:!0,value:e.children.push(bt.z.new(e._root,{themeTags:["chart"],interactive:!1,interactiveChildren:!1,panX:!1,panY:!1,wheelX:"none",wheelY:"none"}))}),Object.defineProperty(e,"overlay",{enumerable:!0,configurable:!0,writable:!0,value:e.children.push(At.T.new(e._root,{themeTags:["overlay"],interactive:!1}))}),e}return(0,x.ZT)(u,s),Object.defineProperty(u.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._addOrientationClass(),this._settings.themeTags=it.Fy(this._settings.themeTags,["scrollbar","xy","chart",this._settings.orientation]);var e=this.children;e.moveValue(this.thumb),e.moveValue(this.startGrip),e.moveValue(this.endGrip),this.thumb.set("opacity",0),this.thumb.states.create("hover",{opacity:.2});var r=this.chart.plotContainer;r.set("interactive",!1),r.remove("background"),r.children.removeValue(this.chart.zoomOutButton),s.prototype._afterNew.call(this)}}),Object.defineProperty(u.prototype,"_updateThumb",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;s.prototype._updateThumb.call(this),this.overlay.set("draw",function(r){var i,n,a=e.startGrip,o=e.endGrip,l=a.x(),h=a.y(),g=o.x(),d=o.y(),p=e.height(),f=e.width();l>g&&(l=(i=(0,x.CR)([g,l],2))[0],g=i[1]),h>d&&(h=(n=(0,x.CR)([d,h],2))[0],d=n[1]),"horizontal"===e.get("orientation")?(r.moveTo(0,0),r.lineTo(l,0),r.lineTo(l,p),r.lineTo(0,p),r.lineTo(0,0),r.moveTo(g,0),r.lineTo(f,0),r.lineTo(f,p),r.lineTo(g,p),r.lineTo(g,0)):(r.moveTo(0,0),r.lineTo(0,h),r.lineTo(f,h),r.lineTo(f,0),r.lineTo(0,0),r.moveTo(0,d),r.lineTo(0,p),r.lineTo(f,p),r.lineTo(f,d),r.lineTo(0,d))})}}),Object.defineProperty(u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYChartScrollbar"}),Object.defineProperty(u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Mt.classNames.concat([u.className])}),u}(Mt),Dt=c(9360);let Vt=(()=>{class s{constructor(e,r,i,n,a){this.platformId=e,this.filterDialog=r,this._productsService=i,this._widgetsService=n,this.zone=a,this.hoProducts=[],this.data=[],this.filter={},this.title="Todas"}ngAfterViewInit(){return(0,x.mG)(this,void 0,void 0,function*(){this.hoProducts=yield this.getLocalProducts();var e=yield this.getData();e.length>0&&e.forEach(function(r,i,n){n[i].date=new Date(n[i].year,n[i].month,n[i].day).getTime()}),this.browserOnly(()=>{let r=ft.f.new("products_transactions_chartdiv");r.setThemes([mt.Z.new(r)]);var i=r.container.children.push(bt.z.new(r,{panX:!0,panY:!0,wheelX:"panX",wheelY:"zoomX",pinchZoomX:!0,layout:r.verticalLayout}));i.set("cursor",wt.L.new(r,{behavior:"none"})).lineY.set("visible",!1);var a=i.xAxes.push(at.new(r,{baseInterval:{timeUnit:"day",count:1},renderer:nt.n.new(r,{}),tooltip:Y.u.new(r,{})})),o=i.yAxes.push(I.m.new(r,{renderer:ot.j.new(r,{})})),h=1;this.hoProducts.forEach(v=>{(function l(v,Z,y,b){let S=i.series.push(st.e.new(r,{name:v,xAxis:a,yAxis:o,valueYField:Z,valueXField:"date",tooltip:Y.u.new(r,{labelText:"{valueY} lts"}),fill:D.$_(y),stroke:D.$_(y)}));S.strokes.template.setAll({strokeWidth:2}),S.data.setAll(e),S.appear(b)})(v.name,v.id,v.color,1e3*h),h++});let g=i.set("scrollbarX",Ct.new(r,{orientation:"horizontal",height:60})),d=g.chart.xAxes.push(at.new(r,{baseInterval:{timeUnit:"day",count:1},renderer:nt.n.new(r,{})})),p=g.chart.yAxes.push(I.m.new(r,{renderer:ot.j.new(r,{})}));g.chart.series.push(st.e.new(r,{valueYField:"value",valueXField:"date",xAxis:d,yAxis:p})).data.setAll(e),i.children.push(_t.D.new(r,{})).data.setAll(i.series.values),i.appear(1e3,100),this.root=r})})}getDemoData(){var e=new Date(2022,0,1);e.setHours(0,0,0,0);var r=400,i=100,n=900,a=860,o=780;return function h(g){for(var d=[],p=0;p<g;++p)d.push((r=Math.round(10*Math.random()-5+r),i=Math.round(10*Math.random()-5+i),n=Math.round(10*Math.random()-5+n),a=Math.round(10*Math.random()-5+a),o=Math.round(10*Math.random()-5+o),_.IH(e,"day",1),{date:e.getTime(),300000001:r,300000002:i,300000003:n,300000006:a,300000008:o}));return d}(365)}getLocalProducts(){return(0,x.mG)(this,void 0,void 0,function*(){return yield this._productsService.getAll(this.filter).toPromise()})}getData(){return(0,x.mG)(this,void 0,void 0,function*(){return yield this._widgetsService.getByAcronymous("TXP",this.filter).toPromise()})}browserOnly(e){(0,j.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{e()})}ngOnDestroy(){this.browserOnly(()=>{this.root&&this.root.dispose()})}reload(){this.isLoading=!0,this.root.dispose(),this.ngAfterViewInit(),this.isLoading=!1}openFilterOptions(){this.filterDialog.open(V.K,{data:{title:"Filtro de estaciones",filter_type:"stations"}}).afterClosed().subscribe(e=>{this.filter=e,this.title=""===this.filter.stations_names?"Todas":this.filter.stations_names,this.reload()})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.Lbi),t.Y36($.uw),t.Y36(Dt.s),t.Y36(K.L),t.Y36(t.R0b))},s.\u0275cmp=t.Xpm({type:s,selectors:[["products-transactions-widget"]],inputs:{station_id:"station_id"},decls:33,vars:3,consts:[["fxFlex","auto"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"card-content"],["id","products_transactions_chartdiv",2,"width","100%","height","100%"],[3,"isLoading"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled",""]],template:function(e,r){if(1&e&&(t.TgZ(0,"fury-card",0),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3," Volumen despachado por producto "),t._UZ(4,"br"),t._uU(5),t.qZA(),t.TgZ(6,"fury-card-header-actions"),t.TgZ(7,"button",1),t.NdJ("click",function(){return r.reload()}),t.TgZ(8,"mat-icon"),t._uU(9,"refresh"),t.qZA(),t.qZA(),t.TgZ(10,"button",2),t.TgZ(11,"mat-icon"),t._uU(12,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"fury-card-content",3),t._UZ(14,"div",4),t.qZA(),t._UZ(15,"fury-loading-overlay",5),t.qZA(),t.TgZ(16,"mat-menu",null,6),t.TgZ(18,"button",7),t.NdJ("click",function(){return r.openFilterOptions()}),t.TgZ(19,"mat-icon"),t._uU(20,"filter_list"),t.qZA(),t.TgZ(21,"span"),t._uU(22," Filtrar "),t.qZA(),t.qZA(),t.TgZ(23,"button",8),t.TgZ(24,"mat-icon"),t._uU(25," more"),t.qZA(),t.TgZ(26,"span"),t._uU(27," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(28,"button",8),t.TgZ(29,"mat-icon"),t._uU(30," remove_circle"),t.qZA(),t.TgZ(31,"span"),t._uU(32," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.MAs(17);t.xp6(5),t.hij(" Estaciones: ",r.title," "),t.xp6(5),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("isLoading",r.isLoading)}},directives:[O.i0,C.yH,O.$X,O.eP,O.OA,tt.lW,et.Hw,G.p6,O.z8,rt.d,G.VK,G.OP],styles:["[_nghost-%COMP%]{height:100%}.fury-card-header[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{padding:24px;cursor:pointer;border-top:4px solid transparent}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);padding-bottom:6px}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-headline)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]{font:var(--font-caption)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:13px;height:13px;width:13px;vertical-align:middle}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .compared[_ngcontent-%COMP%]{font:var(--font-caption);visibility:hidden}.card-content[_ngcontent-%COMP%]{min-height:350px}.actions[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{margin-top:-24px;margin-bottom:-1.34375em;font-size:14px}"],data:{animation:[A.M,P.X]}}),s})();var zt=c(95288);let Bt=(()=>{class s{constructor(e,r,i,n,a){this.platformId=e,this.filterDialog=r,this._crePermissionsService=i,this._widgetsService=n,this.zone=a,this.crePermissions=[],this.data=[],this.filter={}}ngAfterViewInit(){return(0,x.mG)(this,void 0,void 0,function*(){this.crePermissions=yield this.getCrePermissions();var e=yield this.getData();e.length>0&&e.forEach(function(r,i,n){n[i].date=new Date(n[i].year,n[i].month,n[i].day).getTime()}),this.browserOnly(()=>{let r=ft.f.new("wet_providers_performance_chartdiv");r.setThemes([mt.Z.new(r)]);var i=r.container.children.push(bt.z.new(r,{panX:!0,panY:!0,wheelX:"panX",wheelY:"zoomX",pinchZoomX:!0,layout:r.verticalLayout}));i.set("cursor",wt.L.new(r,{behavior:"none"})).lineY.set("visible",!1);var a=i.xAxes.push(at.new(r,{baseInterval:{timeUnit:"day",count:1},renderer:nt.n.new(r,{}),tooltip:Y.u.new(r,{})})),o=i.yAxes.push(I.m.new(r,{renderer:ot.j.new(r,{})})),h=1;this.crePermissions.forEach(v=>{(function l(v,Z,y){let b=i.series.push(st.e.new(r,{name:v,xAxis:a,yAxis:o,valueYField:Z,valueXField:"date",tooltip:Y.u.new(r,{labelText:"{valueY} %"})}));b.strokes.template.setAll({strokeWidth:2}),b.data.setAll(e),b.appear(y)})(v.provider_name,v.permission_id,1e3*h),h++});let g=i.set("scrollbarX",Ct.new(r,{orientation:"horizontal",height:60})),d=g.chart.xAxes.push(at.new(r,{baseInterval:{timeUnit:"day",count:1},renderer:nt.n.new(r,{})})),p=g.chart.yAxes.push(I.m.new(r,{renderer:ot.j.new(r,{})}));g.chart.series.push(st.e.new(r,{valueYField:"value",valueXField:"date",xAxis:d,yAxis:p})).data.setAll(e),i.children.push(_t.D.new(r,{})).data.setAll(i.series.values),i.appear(1e3,100),this.root=r})})}getCrePermissions(){return(0,x.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getAllByType(3).toPromise()})}getData(){return(0,x.mG)(this,void 0,void 0,function*(){return yield this._widgetsService.getByAcronymous("WPP",this.filter).toPromise()})}getDemoData(){return[{month:1,date:0,3:-.87,day:26,year:2022,2:-.484},{date:0,month:2,3:-3.36,year:2022,day:1},{day:4,year:2022,2:-.17,1:-.89,month:2,date:0},{day:5,year:2022,2:-1.36,3:-1.01,1:-1,month:2,date:0},{3:-2.01,year:2022,day:7,2:-1,1:-.9,month:2,date:0},{month:2,date:0,day:11,year:2022,1:-.9},{month:2,date:0,day:14,1:-.91,year:2022,2:-.87},{3:.26,day:18,year:2022,date:0,month:2},{month:2,date:0,day:20,1:.39,year:2022},{month:2,date:0,3:.06,year:2022,day:21},{day:22,year:2022,1:-.58,month:2,date:0},{1:.13,day:23,year:2022,2:-.14,month:2,date:0},{1:-.43,3:-.42,day:24,date:0,2:-7.71,month:2,year:2022},{2:-1.1,3:-.11,year:2022,day:25,date:0,month:2},{2:-90,year:2022,day:29,3:-.76,1:-.6,date:0,month:2},{2:-.64,year:2022,1:-1.85,day:30,month:2,date:0},{3:-.55,day:31,2:-1.8,year:2022,month:2,date:0},{1:-.55,day:1,year:2022,2:-.96,3:-.27,date:0,month:3},{month:3,date:0,year:2022,day:2,2:-.07},{2:-.16,year:2022,day:3,3:-.18,date:0,month:3},{month:3,date:0,3:-.25,1:.29,year:2022,day:4,2:-.15}]}browserOnly(e){(0,j.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{e()})}ngOnDestroy(){this.browserOnly(()=>{this.root&&this.root.dispose()})}reload(){this.isLoading=!0,this.root.dispose(),this.ngAfterViewInit(),this.isLoading=!1}openFilterOptions(){this.filterDialog.open(V.K,{data:{title:"Filtro de fechas",filter_type:"dates_range"}}).afterClosed().subscribe(e=>{this.filter=e,this.reload()})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.Lbi),t.Y36($.uw),t.Y36(zt.w),t.Y36(K.L),t.Y36(t.R0b))},s.\u0275cmp=t.Xpm({type:s,selectors:[["wet-providers-performance-widget"]],inputs:{station_id:"station_id"},decls:31,vars:2,consts:[["fxFlex","auto"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"card-content"],["id","wet_providers_performance_chartdiv",2,"width","100%","height","100%"],[3,"isLoading"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled",""]],template:function(e,r){if(1&e&&(t.TgZ(0,"fury-card",0),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3," Desempe\xf1o de proveedores por estaci\xf3n "),t.qZA(),t.TgZ(4,"fury-card-header-actions"),t.TgZ(5,"button",1),t.NdJ("click",function(){return r.reload()}),t.TgZ(6,"mat-icon"),t._uU(7,"refresh"),t.qZA(),t.qZA(),t.TgZ(8,"button",2),t.TgZ(9,"mat-icon"),t._uU(10,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"fury-card-content",3),t._UZ(12,"div",4),t.qZA(),t._UZ(13,"fury-loading-overlay",5),t.qZA(),t.TgZ(14,"mat-menu",null,6),t.TgZ(16,"button",7),t.NdJ("click",function(){return r.openFilterOptions()}),t.TgZ(17,"mat-icon"),t._uU(18,"filter_list"),t.qZA(),t.TgZ(19,"span"),t._uU(20," Filtrar "),t.qZA(),t.qZA(),t.TgZ(21,"button",8),t.TgZ(22,"mat-icon"),t._uU(23," more"),t.qZA(),t.TgZ(24,"span"),t._uU(25," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(26,"button",8),t.TgZ(27,"mat-icon"),t._uU(28," remove_circle"),t.qZA(),t.TgZ(29,"span"),t._uU(30," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.MAs(15);t.xp6(8),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("isLoading",r.isLoading)}},directives:[O.i0,C.yH,O.$X,O.eP,O.OA,tt.lW,et.Hw,G.p6,O.z8,rt.d,G.VK,G.OP],styles:["[_nghost-%COMP%]{height:100%}.fury-card-header[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{padding:24px;cursor:pointer;border-top:4px solid transparent}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);padding-bottom:6px}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-headline)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]{font:var(--font-caption)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:13px;height:13px;width:13px;vertical-align:middle}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .compared[_ngcontent-%COMP%]{font:var(--font-caption);visibility:hidden}.card-content[_ngcontent-%COMP%]{min-height:350px}.actions[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{margin-top:-24px;margin-bottom:-1.34375em;font-size:14px}"],data:{animation:[A.M,P.X]}}),s})();var N=c(48240),X=c(31819),Yt=c(26387);let Nt=(()=>{class s{constructor(e,r,i,n,a){this.platformId=e,this.filterDialog=r,this._productsService=i,this._widgetsService=n,this.zone=a,this.hoProducts=[],this.existences=[],this.filter={},this.title="Todas"}ngAfterViewInit(){return(0,x.mG)(this,void 0,void 0,function*(){this.hoProducts=yield this.getLocalProducts(),this.data=yield this.getExistences(),N.FgM(Yt.Z),N.YMi.autoDispose=!0;let e=N.Ue8("products_existences_status_chartdiv",X.zO);e.paddingRight=20,e.data=this.data,e.legend=new X.De;let r=e.xAxes.push(new X.$l);r.dataFields.category="station",r.title.text="Estaciones",r.renderer.grid.template.location=0;let i=e.yAxes.push(new X.mn);i.title.text="Existencia en litros",i.renderer.opposite=!0,this.hoProducts.forEach(function(a){!function n(a,o,l){var h=e.series.push(new X.En);h.dataFields.valueY=o,h.dataFields.dateY="date",h.dataFields.categoryX="station",h.name=a,h.columns.template.fill=N.$_Y(l),h.columns.template.tooltipText="Producto: {name}\nVolumen: {valueY} lts\nFecha: {date}",h.appear()}(a.name,a.id,a.color)}),this.chart=e})}getLocalProducts(){return(0,x.mG)(this,void 0,void 0,function*(){return yield this._productsService.getAll(this.filter).toPromise()})}getExistences(){return(0,x.mG)(this,void 0,void 0,function*(){return yield this._widgetsService.getByAcronymous("EXP",this.filter).toPromise()})}browserOnly(e){(0,j.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{e()})}ngOnDestroy(){N.ODi()}reload(){this.isLoading=!0,this.ngAfterViewInit(),this.isLoading=!1}openFilterOptions(){this.filterDialog.open(V.K,{data:{title:"Filtro de estaciones",filter_type:"stations"}}).afterClosed().subscribe(e=>{this.filter=e,console.log(this.filter),this.title=""===this.filter.stations_names?"Todas":this.filter.stations_names,this.reload()})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.Lbi),t.Y36($.uw),t.Y36(Dt.s),t.Y36(K.L),t.Y36(t.R0b))},s.\u0275cmp=t.Xpm({type:s,selectors:[["products-existences-status-widget"]],inputs:{station_id:"station_id"},decls:33,vars:3,consts:[["fxFlex","auto"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"card-content"],["id","products_existences_status_chartdiv",2,"width","100%","height","100%"],[3,"isLoading"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled",""],["mat-menu-item",""]],template:function(e,r){if(1&e&&(t.TgZ(0,"fury-card",0),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3," Existencias de productos por estaci\xf3n "),t._UZ(4,"br"),t._uU(5),t.qZA(),t.TgZ(6,"fury-card-header-actions"),t.TgZ(7,"button",1),t.NdJ("click",function(){return r.reload()}),t.TgZ(8,"mat-icon"),t._uU(9,"refresh"),t.qZA(),t.qZA(),t.TgZ(10,"button",2),t.TgZ(11,"mat-icon"),t._uU(12,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"fury-card-content",3),t._UZ(14,"div",4),t.qZA(),t._UZ(15,"fury-loading-overlay",5),t.qZA(),t.TgZ(16,"mat-menu",null,6),t.TgZ(18,"button",7),t.NdJ("click",function(){return r.openFilterOptions()}),t.TgZ(19,"mat-icon"),t._uU(20,"filter_list"),t.qZA(),t.TgZ(21,"span"),t._uU(22," Filtrar "),t.qZA(),t.qZA(),t.TgZ(23,"button",8),t.TgZ(24,"mat-icon"),t._uU(25," more"),t.qZA(),t.TgZ(26,"span"),t._uU(27," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(28,"button",9),t.TgZ(29,"mat-icon"),t._uU(30," remove_circle"),t.qZA(),t.TgZ(31,"span"),t._uU(32," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.MAs(17);t.xp6(5),t.hij(" Estaciones: ",r.title," "),t.xp6(5),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("isLoading",r.isLoading)}},directives:[O.i0,C.yH,O.$X,O.eP,O.OA,tt.lW,et.Hw,G.p6,O.z8,rt.d,G.VK,G.OP],styles:["[_nghost-%COMP%]{height:100%}.fury-card-header[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{padding:24px;cursor:pointer;border-top:4px solid transparent}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);padding-bottom:6px}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-headline)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]{font:var(--font-caption)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:13px;height:13px;width:13px;vertical-align:middle}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .compared[_ngcontent-%COMP%]{font:var(--font-caption);visibility:hidden}.card-content[_ngcontent-%COMP%]{min-height:350px}.actions[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{margin-top:-24px;margin-bottom:-1.34375em;font-size:14px}"],data:{animation:[A.M,P.X]}}),s})();var Xt=c(4624),Jt=c(75440),kt=c(37767);const qt=[{path:"",component:(()=>{class s{constructor(e,r){this.router=e,this.route=r,this.product_id=300000001,this._gap=16,this.gap=`${this._gap}px`,/Edge/.test(navigator.userAgent)&&s.isInitialLoad&&(this.router.navigate(["/apps/chat"]).then(()=>{this.router.navigate(["/"])}),s.isInitialLoad=!1)}col(e){return`1 1 calc(${100/e}% - ${this._gap-this._gap/e}px)`}ngOnInit(){this.route.params.subscribe(e=>{})}goToStationsSyncStatus(){this.router.navigate(["/charts/sync-status"])}}return s.isInitialLoad=!0,s.\u0275fac=function(e){return new(e||s)(t.Y36(R.F0),t.Y36(R.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["global-dashboard"]],decls:22,vars:18,consts:[["fxLayout","column",1,"dashboard",3,"fxLayoutGap"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-lg","row",3,"fxLayoutGap"],["fxLayout","row",3,"fxLayoutGap","fxFlex"],["fxFlex","auto",3,"fxFlex.gt-sm"],[1,"fullheight",3,"product_id"],["fxFlex","grow",1,"route-animations-elements"],[1,"fullheight"]],template:function(e,r){1&e&&(t.TgZ(0,"fury-page",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._UZ(4,"volume-gauge-widget",4),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"products-transactions-widget"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",1),t.TgZ(8,"div",5),t._UZ(9,"wet-providers-performance-widget"),t.qZA(),t.qZA(),t.TgZ(10,"div",1),t.TgZ(11,"div",2),t.TgZ(12,"div",3),t._UZ(13,"products-existences-status-widget",6),t.qZA(),t.TgZ(14,"div",3),t._UZ(15,"hours-fuel-efficiency-widget"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",1),t.TgZ(17,"div",2),t.TgZ(18,"div",3),t._UZ(19,"kms-fuel-efficiency-widget"),t.qZA(),t.TgZ(20,"div",3),t._UZ(21,"fury-earlywarning-maintenance-widget"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("fxLayoutGap",r.gap),t.xp6(1),t.Q6J("fxLayoutGap",r.gap),t.xp6(1),t.Q6J("fxLayoutGap",r.gap)("fxFlex",r.col(4)),t.xp6(1),t.Q6J("fxFlex.gt-sm",r.col(4)),t.xp6(1),t.Q6J("product_id",r.product_id),t.xp6(1),t.Q6J("fxFlex.gt-sm",r.col(4)),t.xp6(2),t.Q6J("fxLayoutGap",r.gap),t.xp6(3),t.Q6J("fxLayoutGap",r.gap),t.xp6(1),t.Q6J("fxLayoutGap",r.gap)("fxFlex",r.col(4)),t.xp6(1),t.Q6J("fxFlex.gt-sm",r.col(4)),t.xp6(2),t.Q6J("fxFlex.gt-sm",r.col(4)),t.xp6(2),t.Q6J("fxLayoutGap",r.gap),t.xp6(1),t.Q6J("fxLayoutGap",r.gap)("fxFlex",r.col(4)),t.xp6(1),t.Q6J("fxFlex.gt-sm",r.col(4)),t.xp6(2),t.Q6J("fxFlex.gt-sm",r.col(4)))},directives:[pt.i,C.xw,C.SQ,C.yH,Rt,Vt,Bt,Nt,Xt.G,Jt.A,kt.w],styles:[".config-panel-toggle[_ngcontent-%COMP%]{position:fixed;bottom:140px;right:24px;z-index:100;background-color:#000}"]}),s})()}];let Ht=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[R.Bz.forChild(qt)],R.Bz]}),s})();var J=c(72467),Qt=c(64456),$t=c(20120),Kt=c(25331),ut=c(61264),lt=c(4940),ct=c(74519),dt=c(59159);let te=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[j.ez,T.q,lt.p,ut.J,dt.V,ct.O,J.Z]]}),s})();var St=c(93075),ee=c(79207);let re=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[j.ez,St.u5,St.UX,T.q,ee.rU,lt.p,ut.J,dt.V,ct.O,J.Z]]}),s})(),ie=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[j.ez,T.q,lt.p,ut.J,dt.V,ct.O,J.Z]]}),s})(),ae=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[j.ez,T.q,lt.p,ut.J,dt.V,ct.O,J.Z]]}),s})(),ne=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[j.ez,T.q,Ht,J.Z,Qt.T,$t.j,Kt.f,te,re,ae,ie]]}),s})()},95288:(jt,H,c)=>{c.d(H,{w:()=>pt});var j=c(40520),T=c(98545),R=c(5e3),t=c(33344);let pt=(()=>{class C{constructor(P,A){this.http=P,this.tokenStorage=A}getHeaders(){var P=new j.WM,A=this.tokenStorage.getToken();return P.set("token",A||"{}")}getAll(){var P=this.getHeaders();return this.http.get(T._.settings.apiServer.API_URL_BASE+T._.settings.apiServer.CRE_PERMISSIONS,{headers:P})}create(P){var A=this.getHeaders();return this.http.post(T._.settings.apiServer.API_URL_BASE+T._.settings.apiServer.CRE_PERMISSIONS,P,{headers:A})}update(P){var A=this.getHeaders();return this.http.put(T._.settings.apiServer.API_URL_BASE+T._.settings.apiServer.CRE_PERMISSIONS+"/"+P.permission_id,P,{headers:A})}getCurrencies(){var P=this.getHeaders();return this.http.get(T._.settings.apiServer.API_URL_BASE+T._.settings.apiServer.CURRENCIES,{headers:P})}getUnitsOfMeasure(P){var A=this.getHeaders();return this.http.get(T._.settings.apiServer.API_URL_BASE+T._.settings.apiServer.UNITS_OF_MEASURE+"?type="+P,{headers:A})}getCrePermissionTypes(){var P=this.getHeaders();return this.http.get(T._.settings.apiServer.API_URL_BASE+T._.settings.apiServer.CRE_PERMISSION_TYPES,{headers:P})}getAllByType(P){var A=this.getHeaders();return this.http.get(T._.settings.apiServer.API_URL_BASE+T._.settings.apiServer.CRE_PERMISSIONS+"?cre_permission_type="+P,{headers:A})}}return C.\u0275fac=function(P){return new(P||C)(R.LFG(j.eN),R.LFG(t.i))},C.\u0275prov=R.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()}}]);