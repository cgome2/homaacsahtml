"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[2790],{37425:(X,N,r)=>{r.d(N,{K:()=>i});var b=r(41777);const i=(0,b.X$)("scaleIn",[(0,b.eR)(":enter",[(0,b.oB)({transform:"scale(0)"}),(0,b.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,b.oB)({transform:"scale(1)"}))])])},8062:(X,N,r)=>{r.d(N,{m:()=>b});class b{constructor(c){this.invoice_id=c&&c.invoice_id||0,this.invoice_number1=c&&c.invoice_number1||"",this.invoice_number2=c&&c.invoice_number2||"",this.invoice_date=c&&c.invoice_date||"",this.invoice_timestamp=c&&c.invoice_timestamp||"",this.volume_unit_of_measure_id=c&&c.volume_unit_of_measure_id||0,this.temperature_unit_of_measure_id=c&&c.temperature_unit_of_measure_id||0,this.currency_id=c&&c.currency_id||0,this.currency_exchange_rate=c&&c.currency_exchange_rate||0,this.invoice_volume=c&&c.invoice_volume||0,this.invoice_volume_liters=c&&c.invoice_volume_liters||0,this.invoice_temperature=c&&c.invoice_temperature||0,this.invoice_temperature_celsius=c&&c.invoice_temperature_celsius||0,this.invoice_ppv=c&&c.invoice_ppv||0,this.invoice_ppv_pesos=c&&c.invoice_ppv_pesos||0,this.invoice_total_price=c&&c.invoice_total_price||0,this.invoice_total_price_pesos=c&&c.invoice_total_price_pesos||0,this.timestamp=c&&c.timestamp||"",this.status=c&&c.status||0,this.user_id=c&&c.user_id||0,this.cre_permission_id=c&&c.cre_permission_id||0,this.tarifa_de_almac=c&&c.tarifa_de_almac||0,this.cargo_por_capacidad_almac=c&&c.cargo_por_capacidad_almac||0,this.cargo_por_uso_almac=c&&c.cargo_por_uso_almac||0,this.cargo_volumetrico_almac=c&&c.cargo_volumetrico_almac||0,this.tarifa_de_transporte=c&&c.tarifa_de_transporte||0,this.cargo_por_capacidad_trans=c&&c.cargo_por_capacidad_trans||0,this.cargo_por_uso_trans=c&&c.cargo_por_uso_trans||0,this.cargo_volumetrico_trans=c&&c.cargo_volumetrico_trans||0,this.tarifa_de_suministro=c&&c.tarifa_de_suministro||0,this.Remissions=c&&c.Remissions||[],this.TankDeliveryReadings=c&&c.TankDeliveryReadings||[],this.WeighingMachineReadings=c&&c.WeighingMachineReadings||[],this.ChemicalProductAnalyses=c&&c.ChemicalProductAnalyses||[]}}},71936:(X,N,r)=>{r.d(N,{T:()=>b});class b{constructor(c){this.reception_id=c&&c.reception_id||0,this.site_code=c&&c.site_code||null,this.station_name=c&&c.station_name||null,this.cre_permission_provider_id=c&&c.cre_permission_provider_id||null,this.provider_name=c&&c.provider_name||null,this.default_currency=c&&c.default_currency||null,this.currency=c&&c.currency||null,this.default_volume_unit_of_measure=c&&c.default_volume_unit_of_measure||null,this.volume_unit_of_measure=c&&c.volume_unit_of_measure||null,this.permission=c&&c.permission||null,this.rfc=c&&c.rfc||null,this.cre_permission_type=c&&c.cre_permission_type||null,this.documentation_tracking_type=c&&c.documentation_tracking_type||null,this.cre_permission_storage_id=c&&c.cre_permission_storage_id||null,this.storage_provider_name=c&&c.storage_provider_name||null,this.cre_permission_transport_id=c&&c.cre_permission_transport_id||null,this.transport_provider_name=c&&c.transport_provider_name||null,this.timestamp=c&&c.timestamp||null,this.status=c&&c.status||2,this.chemical_analysis_machine=c&&c.chemical_analysis_machine||!1,this.weighing_machine=c&&c.weighing_machine||!1,this.Invoices=c&&c.Invoices||[],this.Remissions=c&&c.Remissions||[],this.ChemicalProductAnalyses=c&&c.CheicalProductAnalyses||[],this.TankDeliveryReadings=c&&c.TankDeliveryReadings||[],this.WeighingMachineReadings=c&&c.WeighingMachineReadings||[]}}},12644:(X,N,r)=>{r.d(N,{O:()=>b});class b{constructor(c){this.remission_id=c&&c.remission_id||0,this.identification_number=c&&c.identification_number||"",this.identification_number2=c&&c.identification_number2||"",this.remission_date=c&&c.remission_date||"",this.volume_unit_of_measure_id=c&&c.volume_unit_of_measure_id||0,this.temperature_unit_of_measure_id=c&&c.temperature_unit_of_measure_id||0,this.currency_id=c&&c.currency_id||0,this.currency_exchange_rate=c&&c.currency_exchange_rate||0,this.remission_volume=c&&c.remission_volume||0,this.remission_volume_liters=c&&c.remission_volume_liters||0,this.remission_temperature=c&&c.remission_temperature||0,this.remission_temperature_celsius=c&&c.remission_temperature_celsius||0,this.remission_ppv=c&&c.remission_ppv||0,this.remission_ppv_pesos=c&&c.remission_ppv_pesos||0,this.remission_total_price=c&&c.remission_total_price||0,this.remission_total_price_pesos=c&&c.remission_total_price_pesos||0,this.stamp1=c&&c.stamp1||"",this.stamp2=c&&c.stamp2||"",this.stamp3=c&&c.stamp3||"",this.stamp4=c&&c.stamp4||"",this.vehicle_number=c&&c.vehicle_number||"",this.vehicle_plate=c&&c.vehicle_plate||"",this.vehicle_axles_number=c&&c.vehicle_axles_number||0,this.nice=c&&c.nice||0,this.vehicle_tank_number=c&&c.vehicle_tank_number||0,this.timestamp=c&&c.timestamp||"",this.status=c&&c.status||0,this.user_id=c&&c.user_id||0,this.cre_permission_id=c&&c.cre_permission_id||0,this.TankDeliveryReadings=c&&c.TankDeliveryReadings||[],this.WeighingMachineReadings=c&&c.WeighingMachineReadings||[],this.ChemicalProductAnalyses=c&&c.ChemicalProductAnalyses||[]}}},92790:(X,N,r)=>{r.d(N,{h:()=>Fe});var b=r(3299),i=r(70655),c=r(93075),I=r(88914),e=r(37425),A=r(14499),G=r(71936),n=r(5e3),t=r(48966),f=r(86087),P=r(84847),R=r(32075),k=r(20449),o=r(96831),w=r(92198),Z=r(8062),U=r(76166),z=r(11635),te=r(42877),V=r(27702),Y=r(53212),oe=r(24629),re=r(95288),se=r(57261),j=r(92824),$=r(97199),ee=r(69808),ce=r(75972),ae=r(47423),le=r(25245),ie=r(77446),ne=r(92181);function _e(g,q){1&g&&(n.TgZ(0,"fury-card-header-subheading"),n._uU(1," Facturas disponibles "),n.qZA())}function ue(g,q){1&g&&(n.TgZ(0,"fury-card-header-subheading"),n._uU(1," Facturas asociadas "),n.qZA())}function de(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){return n.CHM(_),n.oxw().detailInvoices()}),n._UZ(1,"mat-icon",16),n.qZA()}2&g&&(n.xp6(1),n.Q6J("@scaleIn",void 0))}function D(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){return n.CHM(_),n.oxw().createInvoice()}),n.TgZ(1,"mat-icon"),n._uU(2,"add"),n.qZA(),n.qZA()}}function K(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){return n.CHM(_),n.oxw().close()}),n.TgZ(1,"mat-icon"),n._uU(2,"close"),n.qZA(),n.qZA()}}function x(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){return n.CHM(_),n.oxw().reload()}),n.TgZ(1,"mat-icon"),n._uU(2,"refresh"),n.qZA(),n.qZA()}}function y(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"th",17),n.TgZ(1,"mat-checkbox",18),n.NdJ("change",function(v){n.CHM(_);const J=n.oxw();return v?J.masterToggle():null}),n.qZA(),n.qZA()}if(2&g){const _=n.oxw();n.xp6(1),n.Q6J("checked",_.selection.hasValue()&&_.isAllSelected())("indeterminate",_.selection.hasValue()&&!_.isAllSelected())}}function S(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"td",19),n.TgZ(1,"mat-checkbox",20),n.NdJ("click",function(v){return v.stopPropagation()})("change",function(v){const he=n.CHM(_).$implicit,ve=n.oxw();return v?ve.selection.toggle(he):null}),n.qZA(),n.qZA()}if(2&g){const _=q.$implicit,m=n.oxw();n.xp6(1),n.Q6J("checked",m.selection.isSelected(_))}}function h(g,q){if(1&g&&(n.TgZ(0,"th",24),n._uU(1),n.qZA()),2&g){const _=n.oxw(2).$implicit;n.xp6(1),n.hij(" ",_.name,"")}}function E(g,q){if(1&g&&(n.TgZ(0,"td",19),n._uU(1),n.qZA()),2&g){const _=q.$implicit,m=n.oxw(2).$implicit,v=n.oxw();n.xp6(1),n.Oqu(v.getLabel(m.name,_[m.property]))}}function L(g,q){if(1&g&&(n.ynx(0,22),n.YNc(1,h,2,1,"th",23),n.YNc(2,E,2,1,"td",6),n.BQk()),2&g){const _=n.oxw().$implicit;n.Q6J("matColumnDef",_.property)}}function u(g,q){if(1&g&&(n.ynx(0),n.YNc(1,L,3,1,"ng-container",21),n.BQk()),2&g){const _=q.$implicit;n.xp6(1),n.Q6J("ngIf",_.isModelProperty)}}function a(g,q){1&g&&n._UZ(0,"th",25)}function s(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){n.CHM(_);const v=n.oxw().$implicit;return n.oxw().viewInvoice(v)}),n.TgZ(1,"span"),n._uU(2,"Ver"),n.qZA(),n.qZA()}}function l(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){n.CHM(_);const v=n.oxw().$implicit;return n.oxw().updateInvoice(v)}),n.TgZ(1,"span"),n._uU(2,"Editar"),n.qZA(),n.qZA()}}function d(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){n.CHM(_);const v=n.oxw().$implicit;return n.oxw().assignRemissions(v)}),n.TgZ(1,"span"),n._uU(2,"Asociar remisiones"),n.qZA(),n.qZA()}}function M(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){n.CHM(_);const v=n.oxw().$implicit;return n.oxw().assignTankDeliveryReadings(v)}),n.TgZ(1,"span"),n._uU(2,"Asociar incremento de combustible"),n.qZA(),n.qZA()}}function F(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){n.CHM(_);const v=n.oxw().$implicit;return n.oxw().assignWeighingMachineReadings(v)}),n.TgZ(1,"span"),n._uU(2,"Asociar pesaje"),n.qZA(),n.qZA()}}function B(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){n.CHM(_);const v=n.oxw().$implicit;return n.oxw().assignChemicalProductAnalysis(v)}),n.TgZ(1,"span"),n._uU(2,"Asociar an\xe1lisis qu\xedmico"),n.qZA(),n.qZA()}}function H(g,q){if(1&g&&(n.TgZ(0,"td",26),n.TgZ(1,"button",27),n.NdJ("click",function(m){return m.stopPropagation()}),n.TgZ(2,"mat-icon"),n._uU(3,"more_horiz"),n.qZA(),n.qZA(),n.TgZ(4,"mat-menu",28,29),n.YNc(6,s,3,0,"button",30),n.YNc(7,l,3,0,"button",30),n.YNc(8,d,3,0,"button",30),n.YNc(9,M,3,0,"button",30),n.YNc(10,F,3,0,"button",30),n.YNc(11,B,3,0,"button",30),n.qZA(),n.qZA()),2&g){const _=q.$implicit,m=n.MAs(5),v=n.oxw();n.xp6(1),n.Q6J("matMenuTriggerFor",m),n.xp6(5),n.Q6J("ngIf",v.view),n.xp6(1),n.Q6J("ngIf",!v.view),n.xp6(1),n.Q6J("ngIf",1==v.reception.documentation_tracking_type&&_.status>=1&&!v.view),n.xp6(1),n.Q6J("ngIf",2==v.reception.documentation_tracking_type&&_.status>=1&&!v.view),n.xp6(1),n.Q6J("ngIf",2==v.reception.documentation_tracking_type&&_.status>=1&&!v.view),n.xp6(1),n.Q6J("ngIf",2==v.reception.documentation_tracking_type&&_.status>=1&&!v.view)}}function me(g,q){1&g&&n._UZ(0,"tr",32)}function fe(g,q){1&g&&n._UZ(0,"tr",33)}let O=(()=>{class g{constructor(_,m,v,J,he,ve,We,Ne){this.data=_,this.dialogRef=m,this.dialog=v,this._invoicesService=J,this._crePermissionsService=he,this.snackbar=ve,this._receptionsService=We,this.router=Ne,this.subject$=new o.t(1),this.data$=this.subject$.asObservable(),this.selection=new k.Ov(!0,[]),this.invoices=[],this.vmus=[],this.tmus=[],this.currencies=[],this.providers=[],this.reception=new G.T,this.recep=new n.vpe,this.columns=[{name:"Checkbox",property:"select",visible:!0},{name:"Id factura",property:"invoice_id",visible:!1,isModelProperty:!0},{name:"Proveedor",property:"cre_permission_id",visible:!0,isModelProperty:!0},{name:"Folio de factura",property:"invoice_number1",visible:!0,isModelProperty:!0},{name:"Folio de factura 2",property:"invoice_number2",visible:!1,isModelProperty:!0},{name:"Fecha de factura",property:"invoice_date",visible:!0,isModelProperty:!0},{name:"Unidad de medida de volumen",property:"volume_unit_of_measure_id",visible:!1,isModelProperty:!0},{name:"Unidad de medidad de temperatura",property:"temperature_unit_of_measure_id",visible:!1,isModelProperty:!0},{name:"Moneda",property:"currency_id",visible:!1,isModelProperty:!0},{name:"Tipo de cambio",property:"currency_exchange_rate",visible:!1,isModelProperty:!0},{name:"Volumen en documento",property:"invoice_volume",visible:!1,isModelProperty:!0},{name:"Volumen en litros",property:"invoice_volume_liters",visible:!0,isModelProperty:!0},{name:"Temperatura en documento",property:"invoice_temperature",visible:!1,isModelProperty:!0},{name:"Temperatura en celsius",property:"invoice_temperature_celsius",visible:!0,isModelProperty:!0},{name:"Precio por volumen en documento",property:"invoice_ppv",visible:!1,isModelProperty:!0},{name:"Precio por volumen en pesos",property:"invoice_ppv_pesos",visible:!0,isModelProperty:!0},{name:"Precio total en documento",property:"invoice_total_price",visible:!1,isModelProperty:!0},{name:"Precio total en pesos",property:"invoice_total_price_pesos",visible:!0,isModelProperty:!0},{name:"\xdaltima actualizaci\xf3n",property:"timestamp",visible:!1,isModelProperty:!0},{name:"Estatus",property:"status",visible:!0,isModelProperty:!0},{name:"Tarifa almacenamiento",property:"tarifa_de_almac",visible:!0,isModelProperty:!0},{name:"Cargo capacidad almacenamiento",property:"cargo_por_capacidad_almac",visible:!1,isModelProperty:!0},{name:"Cargo uso almacenamiento",property:"cargo_por_uso_almac",visible:!1,isModelProperty:!0},{name:"Cargo volumetrico almacenamiento",property:"cargo_volumetrico_almac",visible:!1,isModelProperty:!0},{name:"Tarifa transporte",property:"tarifa_de_transporte",visible:!0,isModelProperty:!0},{name:"Cargo capacidad transporte",property:"cargo_por_capacidad_trans",visible:!1,isModelProperty:!0},{name:"Cargo uso transporte",property:"cargo_por_uso_trans",visible:!1,isModelProperty:!0},{name:"Cargo volumetrico transporte",property:"cargo_volumetrico_trans",visible:!1,isModelProperty:!0},{name:"Tarifa suministro",property:"tarifa_de_suministro",visible:!1,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(_,m){if(null!=_){if("Unidad de medida de volumen"==_){let v=this.vmus.find(J=>J.id===m);return v?v.unit_of_measure:m}if("Unidad de medidad de temperatura"==_){let v=this.tmus.find(J=>J.id===m);return v?v.unit_of_measure:m}if("Moneda"==_){let v=this.currencies.find(J=>J.id===m);return v?v.currency:m}if("Estatus"!=_){if("Proveedor"==_){let v=this.providers.find(J=>+J.permission_id==+m);return v?v.provider_name:m}return m}switch(+m){case 2:return"Activa";case 1:return"Asignada";case 0:return"Archivada";default:return"No disponible"}}}get visibleColumns(){return this.columns.filter(_=>_.visible).map(_=>_.property)}getData(){this.invoices=this.reception.Invoices,this.dataSource=new R.by(this.reception.Invoices),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnInit(){return(0,i.mG)(this,void 0,void 0,function*(){this.dataSource=new R.by,this.view?(this.reception=this.rec,this.invoice=new Z.m(null)):(this.view=!!this.data.view,this.reception=new G.T(this.data.reception),this.invoice=new Z.m(this.data.invoice)),this.getData(),this.currencies=yield this.getCurrencies(),this.tmus=yield this.getTemperatureUnitsOfMeasure(),this.vmus=yield this.getVolumeUnitsOfMeasure(),this.providers=yield this.getProviders(),this.data$.pipe((0,w.h)(_=>!!_)).subscribe(_=>{this.invoices=_,this.dataSource.data=_})})}ngOnChanges(_){for(const m in _)this[m]=_[m].currentValue,this.reload()}getVolumeUnitsOfMeasure(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("volume").toPromise()})}getTemperatureUnitsOfMeasure(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("temperature").toPromise()})}getCurrencies(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCurrencies().toPromise()})}getProviders(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getAllByType(3).toPromise()})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}assignRemissions(_){this.dialog.open(z.F,{data:{reception:this.reception,invoice:new Z.m(_)}}).afterClosed().subscribe(m=>{m&&(this.reception=m,this.invoices=this.reception.Invoices,this.dataSource=new R.by(this.reception.Invoices),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator),this.recep.emit(this.reception)})}assignTankDeliveryReadings(_){this.dialog.open(te.q,{data:{reception:this.reception,invoice:new Z.m(_),remission:_}}).afterClosed().subscribe(m=>{m&&(this.reception=m,this.invoices=this.reception.Invoices,this.dataSource=new R.by(this.reception.Invoices),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator),this.recep.emit(this.reception)})}assignWeighingMachineReadings(_){this.dialog.open(V.k,{data:{reception:this.reception,invoice:new Z.m(_),remission:_}}).afterClosed().subscribe(m=>{m&&(this.reception=m,this.invoices=this.reception.Invoices,this.dataSource=new R.by(this.reception.Invoices),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator),this.recep.emit(this.reception)})}assignChemicalProductAnalysis(_){this.dialog.open(Y.K,{data:{reception:this.reception,invoice:new Z.m(_),remission:_}}).afterClosed().subscribe(m=>{m&&(this.reception=m,this.invoices=this.reception.Invoices,this.dataSource=new R.by(this.reception.Invoices),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator),this.recep.emit(this.reception)})}onFilterChange(_){!this.dataSource||(_=(_=_.trim()).toLowerCase(),this.dataSource.filter=_)}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}close(){this.dialogRef.close(this.reception)}ngOnDestroy(){}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(_=>this.selection.select(_))}createInvoice(){this.dialog.open(U.E,{data:{reception:this.reception,invoice:this.invoice,view:!1}}).afterClosed().subscribe(_=>{if(_){var m=new Z.m(_.invoice);this.reception.reception_id=_.reception.reception_id,this.reception.Invoices.push(m),this.subject$.next(this.invoices),this.getData(),this.data$.pipe((0,w.h)(v=>!!v)).subscribe(v=>{this.invoices=v,this.dataSource.data=v},v=>{this.snackbar.open(v.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}this.recep.emit(this.reception)})}updateInvoice(_){var m=new Z.m(_);this.dialog.open(U.E,{data:{reception:this.data,invoice:m,view:!1}}).afterClosed().subscribe(v=>{v&&(this.reception.reception_id=v.reception.reception_id,this.reception.Invoices[this.reception.Invoices.findIndex(J=>J.invoice_id==v.invoice.invoice_id)]=v.invoice,this.subject$.next(this.invoices),this.view=!1,this.getData(),this.data$.pipe((0,w.h)(J=>!!J)).subscribe(J=>{this.invoices=J,this.dataSource.data=J})),this.recep.emit(this.reception)})}viewInvoice(_){this.dialog.open(U.E,{data:{reception:this.reception,invoice:new Z.m(_),view:!0}}).afterClosed().subscribe(m=>{m&&(this.reception.reception_id=m.reception.reception_id,this.reception.Invoices[this.reception.Invoices.findIndex(v=>v.invoice_id==m.invoice.invoice_id)]=m.invoice,this.subject$.next(this.invoices),this.view=!0,this.getData(),this.data$.pipe((0,w.h)(v=>!!v)).subscribe(v=>{this.invoices=v,this.dataSource.data=v})),this.recep.emit(this.reception)})}detailInvoices(){this.dialog.open(g,{data:{reception:this.reception,invoice:null,view:!1}}).afterClosed().subscribe(_=>{_&&(this.reception=_,this.getData(),this.data$.pipe((0,w.h)(m=>!!m)).subscribe(m=>{this.invoices=m,this.dataSource.data=m}),this.recep.emit(this.reception)),this.recep.emit(this.reception)})}}return g.\u0275fac=function(_){return new(_||g)(n.Y36(t.WI),n.Y36(t.so),n.Y36(t.uw),n.Y36(oe.x),n.Y36(re.w),n.Y36(se.ux),n.Y36(j.J),n.Y36(b.F0))},g.\u0275cmp=n.Xpm({type:g,selectors:[["invoices-widget"]],viewQuery:function(_,m){if(1&_&&(n.Gf(f.NW,7),n.Gf(P.YE,7)),2&_){let v;n.iGM(v=n.CRH())&&(m.paginator=v.first),n.iGM(v=n.CRH())&&(m.sort=v.first)}},inputs:{view:"view",rec:"rec",columns:"columns"},outputs:{recep:"recep"},features:[n.TTD],decls:24,vars:12,consts:[[4,"ngIf"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],[1,"card-content"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","style","width: 30px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"isLoading"],["mat-icon-button","","type","button",3,"click"],["svgIcon","folder_details"],["mat-header-cell","",2,"width","30px"],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(_,m){1&_&&(n.TgZ(0,"fury-card"),n.TgZ(1,"fury-card-header"),n.TgZ(2,"fury-card-header-heading"),n._uU(3," Facturas "),n.qZA(),n.YNc(4,_e,2,0,"fury-card-header-subheading",0),n.YNc(5,ue,2,0,"fury-card-header-subheading",0),n.TgZ(6,"fury-card-header-actions"),n.YNc(7,de,2,1,"button",1),n.YNc(8,D,3,0,"button",1),n.YNc(9,K,3,0,"button",1),n.YNc(10,x,3,0,"button",1),n.qZA(),n.qZA(),n.TgZ(11,"fury-card-content",2),n.TgZ(12,"table",3),n.ynx(13,4),n.YNc(14,y,2,2,"th",5),n.YNc(15,S,2,1,"td",6),n.BQk(),n.YNc(16,u,2,1,"ng-container",7),n.ynx(17,8),n.YNc(18,a,1,0,"th",9),n.YNc(19,H,12,7,"td",10),n.BQk(),n.YNc(20,me,1,0,"tr",11),n.YNc(21,fe,1,0,"tr",12),n.qZA(),n._UZ(22,"mat-paginator",13),n.qZA(),n._UZ(23,"fury-loading-overlay",14),n.qZA()),2&_&&(n.xp6(4),n.Q6J("ngIf",!m.view),n.xp6(1),n.Q6J("ngIf",m.view),n.xp6(2),n.Q6J("ngIf",m.view&&2==m.reception.status&&m.rec.Invoices.length>0),n.xp6(1),n.Q6J("ngIf",!m.view&&2==m.reception.status),n.xp6(1),n.Q6J("ngIf",!m.view),n.xp6(1),n.Q6J("ngIf",!m.view&&2==m.reception.status),n.xp6(2),n.Q6J("dataSource",m.dataSource),n.xp6(4),n.Q6J("ngForOf",m.columns),n.xp6(4),n.Q6J("matHeaderRowDef",m.visibleColumns),n.xp6(1),n.Q6J("matRowDefColumns",m.visibleColumns),n.xp6(1),n.Q6J("pageSize",m.pageSize),n.xp6(1),n.Q6J("isLoading",m.isLoading))},directives:[$.i0,$.$X,$.eP,ee.O5,$.OA,$.z8,R.BZ,P.YE,R.w1,R.fO,R.Dz,ee.sg,R.as,R.nj,f.NW,ce.d,$.lO,ae.lW,le.Hw,R.ge,ie.oG,R.ev,P.nU,ne.p6,ne.VK,ne.OP,R.XQ,R.Gk],styles:[".fury-card[_ngcontent-%COMP%]{background:#195fc7;color:#f5f5f5}.fury-card[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}.gain[_ngcontent-%COMP%]{margin-left:8px;font:var(--font-caption)}.gain[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;line-height:18px}.card-content[_ngcontent-%COMP%]{padding:0;overflow:scroll}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]{padding:0 24px 24px}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);text-transform:uppercase}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-display-1)}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{margin-left:3px;font-size:32px;height:32px;width:32px}.card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:170px;max-width:100%;display:flex;flex:1;position:relative}"],data:{animation:[I.M,A.X,e.K]}}),g})();var Q=r(52190),p=r(39762),T=r(53580),C=r(38932),W=r(92081),pe=r(30277),ge=r(67322),Ze=r(74107),Te=r(90508);function Ae(g,q){1&g&&n._uU(0,"Datos de los proveedores")}function Ce(g,q){if(1&g&&(n.TgZ(0,"mat-option",19),n._uU(1),n.qZA()),2&g){const _=q.$implicit;n.Q6J("value",_.permission_id),n.xp6(1),n.Oqu(_.provider_name+" - "+_.permission)}}function ye(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"mat-form-field",16),n.TgZ(1,"mat-label"),n._uU(2,"Proveedor:"),n.qZA(),n.TgZ(3,"mat-select",17),n.NdJ("selectionChange",function(v){return n.CHM(_),n.oxw().onChangeProvider(v.value)}),n.YNc(4,Ce,2,2,"mat-option",18),n.qZA(),n.qZA()}if(2&g){const _=n.oxw();n.xp6(4),n.Q6J("ngForOf",_.cpsc)}}function Me(g,q){if(1&g&&(n.TgZ(0,"mat-option",19),n._uU(1),n.qZA()),2&g){const _=q.$implicit;n.Q6J("value",_.permission_id),n.xp6(1),n.Oqu(_.provider_name+" - "+_.permission)}}function xe(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"mat-form-field",16),n.TgZ(1,"mat-label"),n._uU(2,"Almac\xe9n:"),n.qZA(),n.TgZ(3,"mat-select",20),n.NdJ("selectionChange",function(v){return n.CHM(_),n.oxw().onChangeStorage(v.value)}),n.YNc(4,Me,2,2,"mat-option",18),n.qZA(),n.qZA()}if(2&g){const _=n.oxw();n.xp6(4),n.Q6J("ngForOf",_.cpss)}}function be(g,q){if(1&g&&(n.TgZ(0,"mat-option",19),n._uU(1),n.qZA()),2&g){const _=q.$implicit;n.Q6J("value",_.permission_id),n.xp6(1),n.Oqu(_.provider_name+" - "+_.permission)}}function Pe(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"mat-form-field",16),n.TgZ(1,"mat-label"),n._uU(2,"Transporte:"),n.qZA(),n.TgZ(3,"mat-select",21),n.NdJ("selectionChange",function(v){return n.CHM(_),n.oxw().onChangeTransport(v.value)}),n.YNc(4,be,2,2,"mat-option",18),n.qZA(),n.qZA()}if(2&g){const _=n.oxw();n.xp6(4),n.Q6J("ngForOf",_.cpst)}}function Ie(g,q){if(1&g&&(n.TgZ(0,"mat-option",19),n._uU(1),n.qZA()),2&g){const _=q.$implicit;n.Q6J("value",_.site_code),n.xp6(1),n.Oqu(_.station_name)}}function Oe(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"mat-form-field",16),n.TgZ(1,"mat-label"),n._uU(2,"Estaci\xf3n:"),n.qZA(),n.TgZ(3,"mat-select",22),n.NdJ("selectionChange",function(v){return n.CHM(_),n.oxw().onChangeStation(v.value)}),n.YNc(4,Ie,2,2,"mat-option",18),n.qZA(),n.qZA()}if(2&g){const _=n.oxw();n.xp6(4),n.Q6J("ngForOf",_.stations)}}function Re(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",23),n.NdJ("click",function(){return n.CHM(_),n.oxw().loadModalWidget("remissions")}),n._uU(1,"COMPROBANTES DESCARGA"),n.qZA()}if(2&g){const _=n.oxw();n.Q6J("disabled",_.providersFormGroup.invalid)}}function Ee(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",23),n.NdJ("click",function(){return n.CHM(_),n.oxw().loadModalWidget("invoices")}),n._uU(1,"DOCUMENTOS"),n.qZA()}if(2&g){const _=n.oxw();n.Q6J("disabled",_.providersFormGroup.invalid)}}function Ue(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"button",23),n.NdJ("click",function(){return n.CHM(_),n.oxw().toFile()}),n._uU(1,"ARCHIVAR"),n.qZA()}if(2&g){const _=n.oxw();n.Q6J("disabled",_.providersFormGroup.invalid)}}function qe(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"div",24),n.TgZ(1,"div",25),n.TgZ(2,"invoices-widget",26),n.NdJ("recep",function(v){return n.CHM(_),n.oxw().onUpdateReception(v)}),n.qZA(),n.qZA(),n.qZA()}if(2&g){const _=n.oxw();n.xp6(2),n.Q6J("rec",_.theReception)("view",!0)}}function Se(g,q){if(1&g){const _=n.EpF();n.TgZ(0,"div",24),n.TgZ(1,"div",25),n.TgZ(2,"remissions-widget",26),n.NdJ("recep",function(v){return n.CHM(_),n.oxw().onUpdateReception(v)}),n.qZA(),n.qZA(),n.qZA()}if(2&g){const _=n.oxw();n.xp6(2),n.Q6J("rec",_.theReception)("view",!0)}}const De=function(){return["Tables/receptions"]},we=[{path:"",component:(()=>{class g{constructor(_,m,v,J,he,ve){this.router=_,this.dialog=m,this.snackbar=v,this._receptionsService=J,this._stationsService=he,this._crePermissionsService=ve,this.cpsc=[],this.cpss=[],this.cpst=[],this.stations=[],this.theReception=new G.T,this.providersFormGroup=new c.cw({reception_id:new c.NI(0),site_code:new c.NI("",[c.kI.required]),cre_permission_provider_id:new c.NI("",[c.kI.required]),cre_permission_storage_id:new c.NI,cre_permission_transport_id:new c.NI,timestamp:new c.NI,status:new c.NI(!0)}),this.theReception=new G.T(history.state.data)}ngOnInit(){return(0,i.mG)(this,void 0,void 0,function*(){this.cpsc=yield this.getCrePermissionsComertialization(),this.cpss=yield this.getCrePermissionsStorage(),this.cpst=yield this.getCrePermissionsTransporter(),this.stations=yield this.getStations(),0!=this.theReception.reception_id?(this.providersFormGroup.controls.reception_id.setValue(this.theReception.reception_id),this.providersFormGroup.controls.site_code.setValue(this.theReception.site_code),this.providersFormGroup.controls.cre_permission_provider_id.setValue(this.theReception.cre_permission_provider_id),this.providersFormGroup.controls.cre_permission_storage_id.setValue(this.theReception.cre_permission_storage_id),this.providersFormGroup.controls.cre_permission_transport_id.setValue(this.theReception.cre_permission_transport_id),this.providersFormGroup.controls.timestamp.setValue(this.theReception.status),this.providersFormGroup.controls.status.setValue(this.theReception.status),this.providersFormGroup.controls.site_code.disable(),this.providersFormGroup.controls.cre_permission_provider_id.disable(),this.providersFormGroup.controls.cre_permission_storage_id.disable(),this.providersFormGroup.controls.cre_permission_transport_id.disable()):(this.theReception.reception_id=0,this.theReception.status=2)})}getCrePermissionsStorage(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getAllByType(1).toPromise()})}getCrePermissionsDistribution(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getAllByType(2).toPromise()})}getCrePermissionsComertialization(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getAllByType(3).toPromise()})}getCrePermissionsTransporter(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getAllByType(4).toPromise()})}getStations(){return(0,i.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getAll(1).toPromise()})}createReception(){this._receptionsService.create(this.theReception).subscribe(_=>{this.theReception.reception_id=_.id,this.snackbar.open(_.message,null,{duration:5e3,panelClass:["green-snackbar"]})},_=>{this.snackbar.open(_.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}integerOnly(_){return/^[1-9][0-9]*?$/.test(_.key)}numericOnly(_){let m=_.target.value+_.key;return!!new RegExp(/^([1-9][0-9]{0,7}||[0]||[0][.][0-9]{0,2}||[1-9][0-9]{0,7}[.][0-9]{0,2})$/).test(m)}onChangeProvider(_){var m=this.cpsc.find(v=>v.permission_id===_);this.theReception.cre_permission_provider_id=_,this.theReception.default_volume_unit_of_measure=m.default_volume_unit_of_measure,this.theReception.default_currency=m.default_currency,this.theReception.permission=m.rfc,this.theReception.provider_name=m.provider_name,this.theReception.documentation_tracking_type=m.documentation_tracking_type}onChangeStorage(_){var m=this.cpss.find(v=>v.permission_id===_);this.theReception.cre_permission_storage_id=_,this.theReception.storage_provider_name=m.provider_name}onChangeTransport(_){var m=this.cpst.find(v=>v.permission_id===_);this.theReception.cre_permission_transport_id=_,this.theReception.transport_provider_name=m.provider_name}onChangeStation(_){var m=this.stations.find(v=>v.site_code===_);this.theReception.chemical_analysis_machine=1==m.chemical_analysis_machine,this.theReception.weighing_machine=1==m.weighing_machine,this.theReception.site_code=_,this.theReception.station_name=m.station_name}loadModalWidget(_){switch(this.theReception.reception_id=this.providersFormGroup.controls.reception_id.value,this.theReception.cre_permission_provider_id=this.providersFormGroup.controls.cre_permission_provider_id.value,this.theReception.site_code=this.providersFormGroup.controls.site_code.value,this.theReception.cre_permission_storage_id=this.providersFormGroup.controls.cre_permission_storage_id.value,this.theReception.cre_permission_transport_id=this.providersFormGroup.controls.cre_permission_transport_id.value,this.theReception.status=this.providersFormGroup.controls.status.value?2:1,_){case"remissions":this.dialog.open(z.F,{data:{reception:this.theReception,invoice:null,view:!1,parentName:"receptions_wizard"}}).afterClosed().subscribe(m=>{m&&(this.theReception=m,this.providersFormGroup.controls.reception_id.setValue(this.theReception.reception_id),this.ngOnInit())});break;case"invoices":this.dialog.open(O,{data:{reception:this.theReception,invoice:null,view:!1,parentName:"receptions_wizard"}}).afterClosed().subscribe(m=>{m&&(this.theReception=m)});break;default:console.log(_)}}submit(){this.theReception.reception_id>0?this.updateReception():this.createReception()}toFile(){this.theReception.status=0,this._receptionsService.file(this.theReception).subscribe(_=>{this.snackbar.open(_.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.router.navigateByUrl("/tables/receptions")},_=>{this.snackbar.open(_.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateReception(){this._receptionsService.update(this.theReception).subscribe(_=>{this.snackbar.open(_.message,null,{duration:5e3,panelClass:["green-snackbar"]})},_=>{this.snackbar.open(_.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}tableRecepciones(){this.router.navigateByUrl("/tables/receptions")}onUpdateReception(_){var m=new G.T(_);this.theReception=m,this.ngOnInit()}}return g.\u0275fac=function(_){return new(_||g)(n.Y36(b.F0),n.Y36(t.uw),n.Y36(se.ux),n.Y36(j.J),n.Y36(Q.w),n.Y36(re.w))},g.\u0275cmp=n.Xpm({type:g,selectors:[["fury-form-wizard"]],decls:27,vars:16,consts:[["mode","card"],["current","Recepciones",3,"crumbs"],[1,"card",2,"overflow","scroll","padding","30px"],[1,"heading"],[3,"linear"],["stepper","matVerticalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"subheading"],["fxLayout","row","fxLayoutGap","8px",1,"content"],["fxFlex","auto","appearance","outline",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","","mat-button","","type","button",3,"disabled","click",4,"ngIf"],["color","primary","mat-raised-button","","color","primary","mat-button","","type","button",3,"click"],["class","content","fxLayout","column","fxLayoutGap","8px",4,"ngIf"],["fxFlex","auto","appearance","outline"],["formControlName","cre_permission_provider_id",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","cre_permission_storage_id",3,"selectionChange"],["formControlName","cre_permission_transport_id",3,"selectionChange"],["formControlName","site_code",3,"selectionChange"],["color","primary","mat-raised-button","","mat-button","","type","button",3,"disabled","click"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxFlex","grow",1,"route-animations-elements"],[1,"fullheight",3,"rec","view","recep"]],template:function(_,m){1&_&&(n.TgZ(0,"fury-page-layout",0),n.TgZ(1,"fury-page-layout-header"),n._UZ(2,"fury-breadcrumbs",1),n.qZA(),n.TgZ(3,"div",2),n.TgZ(4,"div",3),n._uU(5,"Documentaci\xf3n de entradas de combustible:"),n.qZA(),n.TgZ(6,"mat-vertical-stepper",4,5),n.TgZ(8,"mat-step",6),n.TgZ(9,"form",7),n.YNc(10,Ae,1,0,"ng-template",8),n.TgZ(11,"div",9),n._uU(12,"Seleccionar permisos CRE por tipo de proveedor."),n.qZA(),n.TgZ(13,"div",10),n.YNc(14,ye,5,1,"mat-form-field",11),n.YNc(15,xe,5,1,"mat-form-field",11),n.qZA(),n.TgZ(16,"div",10),n.YNc(17,Pe,5,1,"mat-form-field",11),n.YNc(18,Oe,5,1,"mat-form-field",11),n.qZA(),n.TgZ(19,"div",12),n.YNc(20,Re,2,1,"button",13),n.YNc(21,Ee,2,1,"button",13),n.YNc(22,Ue,2,1,"button",13),n.TgZ(23,"button",14),n.NdJ("click",function(){return m.tableRecepciones()}),n._uU(24,"RECEPCIONES"),n.qZA(),n.qZA(),n.YNc(25,qe,3,2,"div",15),n.YNc(26,Se,3,2,"div",15),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&_&&(n.xp6(2),n.Q6J("@fadeInRight",void 0)("crumbs",n.DdM(15,De)),n.xp6(1),n.Q6J("@fadeInUp",void 0),n.xp6(3),n.Q6J("linear",!0),n.xp6(2),n.Q6J("stepControl",m.providersFormGroup),n.xp6(1),n.Q6J("formGroup",m.providersFormGroup),n.xp6(5),n.Q6J("ngIf",m.providersFormGroup),n.xp6(1),n.Q6J("ngIf",m.providersFormGroup),n.xp6(2),n.Q6J("ngIf",m.providersFormGroup),n.xp6(1),n.Q6J("ngIf",m.providersFormGroup),n.xp6(2),n.Q6J("ngIf",2==m.theReception.status&&(1==m.theReception.documentation_tracking_type||3==m.theReception.documentation_tracking_type)),n.xp6(1),n.Q6J("ngIf",2==m.theReception.status&&(1==m.theReception.documentation_tracking_type||2==m.theReception.documentation_tracking_type)),n.xp6(1),n.Q6J("ngIf",2==m.theReception.status&&(m.theReception.Invoices.length>0||m.theReception.Remissions.length>0)),n.xp6(3),n.Q6J("ngIf",m.theReception.reception_id>-1&&1==m.theReception.documentation_tracking_type||2==m.theReception.documentation_tracking_type),n.xp6(1),n.Q6J("ngIf",m.theReception.reception_id>-1&&1==m.theReception.documentation_tracking_type||3==m.theReception.documentation_tracking_type))},directives:[p.N,T.U,C.n,W.Vq,W.C0,c._Y,c.JL,c.sg,W.VY,pe.xw,pe.SQ,ee.O5,pe.Wh,ae.lW,ge.KE,pe.yH,ge.hX,Ze.gD,c.JJ,c.u,ee.sg,Te.ey,O,z.F],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 6px 6px -3px #0003,0 10px 14px 1px #00000024,0 4px 18px 3px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.copyright[_ngcontent-%COMP%]{position:absolute;bottom:24px;right:24px;color:#fff}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}"],data:{animation:[A.X,I.M,e.K]}}),g})()}];let Fe=(()=>{class g{}return g.\u0275fac=function(_){return new(_||g)},g.\u0275mod=n.oAB({type:g}),g.\u0275inj=n.cJS({imports:[[b.Bz.forChild(we)],b.Bz]}),g})()},15366:(X,N,r)=>{r.d(N,{g:()=>k});var b=r(48966),i=r(88914),c=r(37425),I=r(14499),e=r(5e3),A=r(59968),G=r(36551),n=r(25245),t=r(30277),f=r(93075),P=r(47423);const R=["productsModalForm"];let k=(()=>{class o{constructor(Z,U){this.data=Z,this.dialogRef=U,U.disableClose=!0}ngOnInit(){console.log(this.data)}close(){this.dialogRef.close()}}return o.\u0275fac=function(Z){return new(Z||o)(e.Y36(b.WI),e.Y36(b.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["fury-form-wizard"]],viewQuery:function(Z,U){if(1&Z&&e.Gf(R,5),2&Z){let z;e.iGM(z=e.CRH())&&(U._focusMe=z.first)}},decls:164,vars:28,consts:[[1,"title"],["svgIcon","chemistry"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[1,"heading"],[2,"width","400px"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"]],template:function(Z,U){1&Z&&(e.TgZ(0,"fury-page"),e.TgZ(1,"fury-title",0),e._UZ(2,"mat-icon",1),e.TgZ(3,"span"),e._uU(4,"An\xe1lisis qu\xedmico de producto"),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"form"),e.TgZ(8,"div",4),e._uU(9,"Resultados:"),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"tr"),e.TgZ(12,"td"),e.TgZ(13,"strong"),e._uU(14,"id:"),e.qZA(),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"tr"),e.TgZ(18,"td"),e.TgZ(19,"strong"),e._uU(20,"Fecha:"),e.qZA(),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"tr"),e.TgZ(24,"td"),e.TgZ(25,"strong"),e._uU(26,"Producto:"),e.qZA(),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.qZA(),e.TgZ(29,"tr"),e.TgZ(30,"td"),e.TgZ(31,"strong"),e._uU(32,"M\xe1quina para an\xe1lisis qu\xedmico:"),e.qZA(),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA(),e.qZA(),e.TgZ(35,"tr"),e.TgZ(36,"td"),e.TgZ(37,"strong"),e._uU(38,"Proveedor:"),e.qZA(),e.qZA(),e.TgZ(39,"td"),e._uU(40),e.qZA(),e.qZA(),e.TgZ(41,"tr"),e.TgZ(42,"td"),e.TgZ(43,"strong"),e._uU(44,"Id estaci\xf3n:"),e.qZA(),e.qZA(),e.TgZ(45,"td"),e._uU(46),e.qZA(),e.qZA(),e.TgZ(47,"tr"),e.TgZ(48,"td"),e.TgZ(49,"strong"),e._uU(50,"Estaci\xf3n:"),e.qZA(),e.qZA(),e.TgZ(51,"td"),e._uU(52),e.qZA(),e.qZA(),e.TgZ(53,"tr"),e.TgZ(54,"td"),e.TgZ(55,"strong"),e._uU(56,"Muestra:"),e.qZA(),e.qZA(),e.TgZ(57,"td"),e._uU(58),e.qZA(),e.qZA(),e.TgZ(59,"tr"),e.TgZ(60,"td"),e.TgZ(61,"strong"),e._uU(62,"Operador:"),e.qZA(),e.qZA(),e.TgZ(63,"td"),e._uU(64),e.qZA(),e.qZA(),e.TgZ(65,"tr"),e.TgZ(66,"td"),e.TgZ(67,"strong"),e._uU(68,"sDens:"),e.qZA(),e.qZA(),e.TgZ(69,"td"),e._uU(70),e.qZA(),e.qZA(),e.TgZ(71,"tr"),e.TgZ(72,"td"),e.TgZ(73,"strong"),e._uU(74,"sTemp:"),e.qZA(),e.qZA(),e.TgZ(75,"td"),e._uU(76),e.qZA(),e.qZA(),e.TgZ(77,"tr"),e.TgZ(78,"td"),e.TgZ(79,"strong"),e._uU(80,"cetano:"),e.qZA(),e.qZA(),e.TgZ(81,"td"),e._uU(82),e.qZA(),e.qZA(),e.TgZ(83,"tr"),e.TgZ(84,"td"),e.TgZ(85,"strong"),e._uU(86,"cetanoIndex:"),e.qZA(),e.qZA(),e.TgZ(87,"td"),e._uU(88),e.qZA(),e.qZA(),e.TgZ(89,"tr"),e.TgZ(90,"td"),e.TgZ(91,"strong"),e._uU(92,"aromat:"),e.qZA(),e.qZA(),e.TgZ(93,"td"),e._uU(94),e.qZA(),e.qZA(),e.TgZ(95,"tr"),e.TgZ(96,"td"),e.TgZ(97,"strong"),e._uU(98,"fame:"),e.qZA(),e.qZA(),e.TgZ(99,"td"),e._uU(100),e.qZA(),e.qZA(),e.TgZ(101,"tr"),e.TgZ(102,"td"),e.TgZ(103,"strong"),e._uU(104,"oil:"),e.qZA(),e.qZA(),e.TgZ(105,"td"),e._uU(106),e.qZA(),e.qZA(),e.TgZ(107,"tr"),e.TgZ(108,"td"),e.TgZ(109,"strong"),e._uU(110,"ibp:"),e.qZA(),e.qZA(),e.TgZ(111,"td"),e._uU(112),e.qZA(),e.qZA(),e.TgZ(113,"tr"),e.TgZ(114,"td"),e.TgZ(115,"strong"),e._uU(116,"t10:"),e.qZA(),e.qZA(),e.TgZ(117,"td"),e._uU(118),e.qZA(),e.qZA(),e.TgZ(119,"tr"),e.TgZ(120,"td"),e.TgZ(121,"strong"),e._uU(122,"t50:"),e.qZA(),e.qZA(),e.TgZ(123,"td"),e._uU(124),e.qZA(),e.qZA(),e.TgZ(125,"tr"),e.TgZ(126,"td"),e.TgZ(127,"strong"),e._uU(128,"t90:"),e.qZA(),e.qZA(),e.TgZ(129,"td"),e._uU(130),e.qZA(),e.qZA(),e.TgZ(131,"tr"),e.TgZ(132,"td"),e.TgZ(133,"strong"),e._uU(134,"t95:"),e.qZA(),e.qZA(),e.TgZ(135,"td"),e._uU(136),e.qZA(),e.qZA(),e.TgZ(137,"tr"),e.TgZ(138,"td"),e.TgZ(139,"strong"),e._uU(140,"fbp:"),e.qZA(),e.qZA(),e.TgZ(141,"td"),e._uU(142),e.qZA(),e.qZA(),e.TgZ(143,"tr"),e.TgZ(144,"td"),e.TgZ(145,"strong"),e._uU(146,"maha:"),e.qZA(),e.qZA(),e.TgZ(147,"td"),e._uU(148),e.qZA(),e.qZA(),e.TgZ(149,"tr"),e.TgZ(150,"td"),e.TgZ(151,"strong"),e._uU(152,"cfpp:"),e.qZA(),e.qZA(),e.TgZ(153,"td"),e._uU(154),e.qZA(),e.qZA(),e.TgZ(155,"tr"),e.TgZ(156,"td"),e.TgZ(157,"strong"),e._uU(158,"visco:"),e.qZA(),e.qZA(),e.TgZ(159,"td"),e._uU(160),e.qZA(),e.qZA(),e.qZA(),e.TgZ(161,"div",6),e.TgZ(162,"button",7),e.NdJ("click",function(){return U.close()}),e._uU(163,"CERRAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&Z&&(e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(3),e.Q6J("@fadeInUp",void 0),e.xp6(10),e.Oqu(U.data.id),e.xp6(6),e.Oqu(U.data.date),e.xp6(6),e.Oqu(U.data.product_name),e.xp6(6),e.Oqu(U.data.chemical_analysis_machine_name),e.xp6(6),e.Oqu(U.data.provider_name),e.xp6(6),e.Oqu(U.data.site_code),e.xp6(6),e.Oqu(U.data.station_name),e.xp6(6),e.Oqu(U.data.sample),e.xp6(6),e.Oqu(U.data.operator),e.xp6(6),e.Oqu(U.data.sDens),e.xp6(6),e.Oqu(U.data.sTemp),e.xp6(6),e.Oqu(U.data.cetano),e.xp6(6),e.Oqu(U.data.cetanoIndex),e.xp6(6),e.Oqu(U.data.aromat),e.xp6(6),e.Oqu(U.data.fame),e.xp6(6),e.Oqu(U.data.oil),e.xp6(6),e.Oqu(U.data.ibp),e.xp6(6),e.Oqu(U.data.t10),e.xp6(6),e.Oqu(U.data.t50),e.xp6(6),e.Oqu(U.data.t90),e.xp6(6),e.Oqu(U.data.t95),e.xp6(6),e.Oqu(U.data.fbp),e.xp6(6),e.Oqu(U.data.maha),e.xp6(6),e.Oqu(U.data.cfpp),e.xp6(6),e.Oqu(U.data.visco))},directives:[A.i,G.M,n.Hw,t.xw,t.Wh,f._Y,f.JL,f.F,t.SQ,P.lW],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{overflow:scroll;margin:5px;max-width:100%;max-height:400px;border-radius:8px;padding:8px}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:14px;padding:24px 8px 0}"],data:{animation:[I.X,i.M,c.K]}}),o})()},53212:(X,N,r)=>{r.d(N,{K:()=>L});var b=r(70655),i=r(15366),c=r(48966),I=r(86087),e=r(84847),A=r(32075),G=r(20449),n=r(96831),t=r(92198),f=r(37425),P=r(88914),R=r(14499);class k{constructor(a){this.id=a&&a.id||null,this.date=a&&a.date||null,this.sample=a&&a.sample||null,this.operator=a&&a.operator||null,this.sDens=a&&a.sDens||null,this.sTemp=a&&a.sTemp||null,this.cetano=a&&a.cetano||null,this.cetanoIndex=a&&a.cetanoIndex||null,this.aromat=a&&a.aromat||null,this.fame=a&&a.fame||null,this.oil=a&&a.oil||null,this.ibp=a&&a.ibp||null,this.t10=a&&a.t10||null,this.t50=a&&a.t50||null,this.t90=a&&a.t90||null,this.t95=a&&a.t95||null,this.fbp=a&&a.fbp||null,this.maha=a&&a.maha||null,this.cfpp=a&&a.cfpp||null,this.visco=a&&a.visco||null,this.reception_id=a&&a.reception_id||null,this.product_id=a&&a.product_id||null,this.product_name=a&&a.product_name||null,this.chemical_analysis_machine_id=a&&a.chemical_analysis_machine_id||null,this.chemical_analysis_machine_name=a&&a.chemical_analysis_machine_name||null,this.cre_permission_id=a&&a.cre_permission_id||null,this.provider_name=a&&a.provider_name||null,this.site_code=a&&a.site_code||null,this.station_name=a&&a.station_name||null,this.status=a&&a.status||null}}var o=r(5e3),w=r(40520),Z=r(98545),U=r(33344);let z=(()=>{class u{constructor(s,l){this.http=s,this.tokenStorage=l}getHeaders(){var s=new w.WM,l=this.tokenStorage.getToken();return s.set("token",l||"{}")}getAll(s,l,d,M,F){var B=this.getHeaders(),H="?site_code="+s;return H+="&status="+l,H+=d?"&reception_id="+d:"",H+=M?"&remission_id="+M:"",this.http.get(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.CHEMICALS_PRODUCTS_ANALYSES+(H+=F?"&invoice_id="+F:""),{headers:B})}assign(s,l,d,M){console.log("Hachina:",s);var F=this.getHeaders(),B="?reception_id="+s.reception_id;return B+="&site_code="+s.site_code,B+=d?"&invoice_id="+d.invoice_id:"",this.http.put(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.CHEMICALS_PRODUCTS_ANALYSES+(B+=M?"&remission_id="+M.remission_id:""),l,{headers:F})}}return u.\u0275fac=function(s){return new(s||u)(o.LFG(w.eN),o.LFG(U.i))},u.\u0275prov=o.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var te=r(57261),V=r(97199),Y=r(69808),oe=r(75972),re=r(47423),se=r(25245),j=r(77446),$=r(92181);function ee(u,a){if(1&u&&(o.TgZ(0,"fury-card-header-subheading"),o._uU(1),o.qZA()),2&u){const s=o.oxw();o.xp6(1),o.hij(" ",s.title," disponibles ")}}function ce(u,a){if(1&u&&(o.TgZ(0,"fury-card-header-subheading"),o._uU(1),o.qZA()),2&u){const s=o.oxw();o.xp6(1),o.hij(" ",s.title," asignados ")}}function ae(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"button",16),o.NdJ("click",function(){return o.CHM(s),o.oxw().addToDocument()}),o._UZ(1,"mat-icon",17),o.qZA()}2&u&&(o.xp6(1),o.Q6J("@scaleIn",void 0))}function le(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"button",16),o.NdJ("click",function(){return o.CHM(s),o.oxw().close()}),o.TgZ(1,"mat-icon"),o._uU(2,"close"),o.qZA(),o.qZA()}}function ie(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"button",18),o.NdJ("click",function(){return o.CHM(s),o.oxw().reload()}),o.TgZ(1,"mat-icon"),o._uU(2,"refresh"),o.qZA(),o.qZA()}}function ne(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"th",19),o.TgZ(1,"mat-checkbox",20),o.NdJ("change",function(d){o.CHM(s);const M=o.oxw();return d?M.masterToggle():null}),o.qZA(),o.qZA()}if(2&u){const s=o.oxw();o.xp6(1),o.Q6J("checked",s.selection.hasValue()&&s.isAllSelected())("indeterminate",s.selection.hasValue()&&!s.isAllSelected())}}function _e(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"td",21),o.TgZ(1,"mat-checkbox",22),o.NdJ("click",function(d){return d.stopPropagation()})("change",function(d){const F=o.CHM(s).$implicit,B=o.oxw();return d?B.selection.toggle(F):null}),o.qZA(),o.qZA()}if(2&u){const s=a.$implicit,l=o.oxw();o.xp6(1),o.Q6J("checked",l.selection.isSelected(s))}}function ue(u,a){if(1&u&&(o.TgZ(0,"th",27),o._uU(1),o.qZA()),2&u){const s=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",s.name,"")}}function de(u,a){if(1&u&&(o.TgZ(0,"td",28),o._uU(1),o.qZA()),2&u){const s=a.$implicit,l=o.oxw(2).$implicit,d=o.oxw();o.xp6(1),o.Oqu(d.getLabel(l.name,s[l.property]))}}function D(u,a){if(1&u&&(o.ynx(0,24),o.YNc(1,ue,2,1,"th",25),o.YNc(2,de,2,1,"td",26),o.BQk()),2&u){const s=o.oxw().$implicit;o.Q6J("matColumnDef",s.property)}}function K(u,a){if(1&u&&(o.ynx(0),o.YNc(1,D,3,1,"ng-container",23),o.BQk()),2&u){const s=a.$implicit;o.xp6(1),o.Q6J("ngIf",s.isModelProperty)}}function x(u,a){1&u&&o._UZ(0,"th",29)}function y(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"button",34),o.NdJ("click",function(){o.CHM(s);const d=o.oxw().$implicit;return o.oxw().delete(d)}),o.TgZ(1,"span"),o._uU(2,"Eliminar"),o.qZA(),o.qZA()}}function S(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"td",30),o.TgZ(1,"button",31),o.NdJ("click",function(d){return d.stopPropagation()}),o.TgZ(2,"mat-icon"),o._uU(3,"more_horiz"),o.qZA(),o.qZA(),o.TgZ(4,"mat-menu",32,33),o.TgZ(6,"button",34),o.NdJ("click",function(){const M=o.CHM(s).$implicit;return o.oxw().show(M)}),o.TgZ(7,"span"),o._uU(8,"Ver"),o.qZA(),o.qZA(),o.YNc(9,y,3,0,"button",35),o.qZA(),o.qZA()}if(2&u){const s=a.$implicit,l=o.MAs(5),d=o.oxw();o.xp6(1),o.Q6J("matMenuTriggerFor",l),o.xp6(8),o.Q6J("ngIf",2==s.status&&!d.view)}}function h(u,a){1&u&&o._UZ(0,"tr",36)}function E(u,a){1&u&&o._UZ(0,"tr",37)}let L=(()=>{class u{constructor(s,l,d,M,F){this.data=s,this.dialog=l,this.dialogRef=d,this._chemicalsProductsAnalysesService=M,this.snackbar=F,this.subject$=new n.t(1),this.data$=this.subject$.asObservable(),this.selection=new G.Ov(!0,[]),this.chemicals_products_analyses=[],this.title="An\xe1lisis qu\xedmicos de productos",this.columns=[{name:"Checkbox",property:"select",visible:!0},{name:"Id",property:"id",visible:!0,isModelProperty:!0},{name:"Fecha",property:"date",visible:!0,isModelProperty:!0},{name:"Muestra",property:"sample",visible:!0,isModelProperty:!0},{name:"Operador",property:"operator",visible:!1,isModelProperty:!0},{name:"Densidad",property:"sDens",visible:!1,isModelProperty:!0},{name:"Temperatura",property:"sTemp",visible:!1,isModelProperty:!0},{name:"Cetano",property:"cetano",visible:!1,isModelProperty:!0},{name:"Indice de cetano",property:"cetanoIndex",visible:!1,isModelProperty:!0},{name:"Aromat",property:"aromat",visible:!1,isModelProperty:!0},{name:"Fame",property:"fame",visible:!1,isModelProperty:!0},{name:"Oil",property:"oil",visible:!1,isModelProperty:!0},{name:"ibp",property:"ibp",visible:!1,isModelProperty:!0},{name:"t10",property:"t10",visible:!1,isModelProperty:!0},{name:"t50",property:"t50",visible:!1,isModelProperty:!0},{name:"t90",property:"t90",visible:!1,isModelProperty:!0},{name:"t95",property:"t95",visible:!1,isModelProperty:!0},{name:"fbp",property:"fbp",visible:!1,isModelProperty:!0},{name:"maha",property:"maha",visible:!1,isModelProperty:!0},{name:"cfpp",property:"cfpp",visible:!1,isModelProperty:!0},{name:"Viscosidad",property:"visco",visible:!1,isModelProperty:!0},{name:"Id recepci\xf3n",property:"reception_id",visible:!1,isModelProperty:!0},{name:"Id producto",property:"product_id",visible:!1,isModelProperty:!0},{name:"Producto",property:"product_name",visible:!0,isModelProperty:!0},{name:"Id m\xe1quina de an\xe1lisis",property:"chemical_analysis_machine_id",visible:!0,isModelProperty:!0},{name:"M\xe1quina de an\xe1lisis",property:"chemical_analysis_machine_name",visible:!0,isModelProperty:!0},{name:"Id proveedor",property:"cre_permission_id",visible:!1,isModelProperty:!0},{name:"Proveedor",property:"provider_name",visible:!0,isModelProperty:!0},{name:"Id estaci\xf3n",property:"site_code",visible:!1,isModelProperty:!0},{name:"Estaci\xf3n",property:"station_name",visible:!0,isModelProperty:!0},{name:"Estatus",property:"status",visible:!1,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(s,l){if(null!=s)return l}get visibleColumns(){return this.columns.filter(s=>s.visible).map(s=>s.property)}getRemoteData(){this._chemicalsProductsAnalysesService.getAll(this.reception.site_code,this.reception.status,this.reception.reception_id,null!=this.remission?this.remission.remission_id:null,null!=this.invoice?this.invoice.invoice_id:null).subscribe(s=>{this.chemicals_products_analyses=s,this.dataSource=new A.by(s),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},s=>{console.log(s)})}getData(){this.invoice?(this.chemicals_products_analyses=this.invoice.ChemicalProductAnalyses,this.dataSource=new A.by(this.invoice.ChemicalProductAnalyses)):this.remission&&(this.chemicals_products_analyses=this.remission.ChemicalProductAnalyses,this.dataSource=new A.by(this.remission.ChemicalProductAnalyses)),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnInit(){return(0,b.mG)(this,void 0,void 0,function*(){this.dataSource=new A.by,this.view?(this.reception=this.rec,this.getData()):(this.reception=this.data.reception,this.remission=this.data.remission?this.data.remission:null,this.invoice=this.data.invoice?this.data.invoice:null,this.getRemoteData()),this.data$.pipe((0,t.h)(s=>!!s)).subscribe(s=>{this.chemicals_products_analyses=s,this.dataSource.data=s})})}ngOnChanges(s){for(const l in s)this[l]=s[l].currentValue,this.reload()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}addToDocument(){this._chemicalsProductsAnalysesService.assign(this.reception,this.selection.selected,this.invoice,this.remission).subscribe(s=>{this.selection.selected.forEach(l=>{this.chemical_product_analysis=new k(l),this.invoice?this.invoice.Remissions.length>0?this.reception.Invoices.find(d=>d.invoice_id==this.invoice.invoice_id).Remissions.find(d=>d.remission_id==this.remission.remission_id).ChemicalProductAnalyses.push(this.chemical_product_analysis):this.reception.Invoices.find(d=>d.invoice_id==this.invoice.invoice_id).ChemicalProductAnalyses.push(this.chemical_product_analysis):this.reception.Remissions.find(d=>d.remission_id==this.remission.remission_id).ChemicalProductAnalyses.push(this.chemical_product_analysis)}),this.snackbar.open(s.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.reception)},s=>{this.snackbar.open(s.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}close(){this.dialogRef.close()}onFilterChange(s){!this.dataSource||(s=(s=s.trim()).toLowerCase(),this.dataSource.filter=s)}show(s){this.dialog.open(i.g,{data:s}).afterClosed().subscribe(l=>{})}delete(s){}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}ngOnDestroy(){}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(s=>this.selection.select(s))}}return u.\u0275fac=function(s){return new(s||u)(o.Y36(c.WI),o.Y36(c.uw),o.Y36(c.so),o.Y36(z),o.Y36(te.ux))},u.\u0275cmp=o.Xpm({type:u,selectors:[["chemicals-products-analyses-widget"]],viewQuery:function(s,l){if(1&s&&(o.Gf(I.NW,7),o.Gf(e.YE,7)),2&s){let d;o.iGM(d=o.CRH())&&(l.paginator=d.first),o.iGM(d=o.CRH())&&(l.sort=d.first)}},inputs:{invoice:"invoice",remission:"remission",view:"view",rec:"rec",columns:"columns"},features:[o.TTD],decls:23,vars:12,consts:[[4,"ngIf"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"card-content"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","style","width: 30px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"isLoading"],["mat-icon-button","","type","button",3,"click"],["svgIcon","attach_docs"],["mat-icon-button","",3,"click"],["mat-header-cell","",2,"width","30px"],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","","style","padding: 5px",4,"matHeaderCellDef"],["mat-cell","","style","padding: 5px",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",2,"padding","5px"],["mat-cell","",2,"padding","5px"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(s,l){1&s&&(o.TgZ(0,"fury-card"),o.TgZ(1,"fury-card-header"),o.TgZ(2,"fury-card-header-heading"),o._uU(3),o.qZA(),o.YNc(4,ee,2,1,"fury-card-header-subheading",0),o.YNc(5,ce,2,1,"fury-card-header-subheading",0),o.TgZ(6,"fury-card-header-actions"),o.YNc(7,ae,2,1,"button",1),o.YNc(8,le,3,0,"button",1),o.YNc(9,ie,3,0,"button",2),o.qZA(),o.qZA(),o.TgZ(10,"fury-card-content",3),o.TgZ(11,"table",4),o.ynx(12,5),o.YNc(13,ne,2,2,"th",6),o.YNc(14,_e,2,1,"td",7),o.BQk(),o.YNc(15,K,2,1,"ng-container",8),o.ynx(16,9),o.YNc(17,x,1,0,"th",10),o.YNc(18,S,10,2,"td",11),o.BQk(),o.YNc(19,h,1,0,"tr",12),o.YNc(20,E,1,0,"tr",13),o.qZA(),o._UZ(21,"mat-paginator",14),o.qZA(),o._UZ(22,"fury-loading-overlay",15),o.qZA()),2&s&&(o.xp6(3),o.hij(" ",l.title," "),o.xp6(1),o.Q6J("ngIf",!l.view),o.xp6(1),o.Q6J("ngIf",l.view),o.xp6(2),o.Q6J("ngIf",!l.view&&2==l.reception.status),o.xp6(1),o.Q6J("ngIf",!l.view),o.xp6(1),o.Q6J("ngIf",!l.view&&2==l.reception.status),o.xp6(2),o.Q6J("dataSource",l.dataSource),o.xp6(4),o.Q6J("ngForOf",l.columns),o.xp6(4),o.Q6J("matHeaderRowDef",l.visibleColumns),o.xp6(1),o.Q6J("matRowDefColumns",l.visibleColumns),o.xp6(1),o.Q6J("pageSize",l.pageSize),o.xp6(1),o.Q6J("isLoading",l.isLoading))},directives:[V.i0,V.$X,V.eP,Y.O5,V.OA,V.z8,A.BZ,e.YE,A.w1,A.fO,A.Dz,Y.sg,A.as,A.nj,I.NW,oe.d,V.lO,re.lW,se.Hw,A.ge,j.oG,A.ev,e.nU,$.p6,$.VK,$.OP,A.XQ,A.Gk],styles:[".fury-card[_ngcontent-%COMP%]{background:#195fc7;color:#f5f5f5}.fury-card[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}.gain[_ngcontent-%COMP%]{margin-left:8px;font:var(--font-caption)}.gain[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;line-height:18px}.card-content[_ngcontent-%COMP%]{padding:0;overflow:scroll}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]{padding:0 24px 24px}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);text-transform:uppercase}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-display-1)}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{margin-left:3px;font-size:32px;height:32px;width:32px}.card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:170px;max-width:100%;display:flex;flex:1;position:relative}"],data:{animation:[R.X,P.M,f.K]}}),u})()},76166:(X,N,r)=>{r.d(N,{E:()=>x});var b=r(70655),i=r(93075),c=r(48966),I=r(37425),e=r(14499),A=r(88914),G=r(8062),n=r(71936),t=r(5e3),f=r(57261),P=r(24629),R=r(95288),k=r(59968),o=r(36551),w=r(25245),Z=r(30277),U=r(67322),z=r(74107),te=r(69808),V=r(77531),Y=r(86856),oe=r(4834),re=r(47423),se=r(90508),j=r(11635),$=r(42877),ee=r(27702),ce=r(53212);function ae(y,S){if(1&y&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&y){const h=S.$implicit;t.Q6J("value",h.permission_id),t.xp6(1),t.Oqu(h.provider_name)}}function le(y,S){if(1&y&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&y){const h=S.$implicit;t.Q6J("value",h.id),t.xp6(1),t.Oqu(h.unit_of_measure)}}function ie(y,S){if(1&y&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&y){const h=S.$implicit;t.Q6J("value",h.id),t.xp6(1),t.Oqu(h.unit_of_measure)}}function ne(y,S){if(1&y&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&y){const h=S.$implicit;t.Q6J("value",h.id),t.xp6(1),t.Oqu(h.currency)}}function _e(y,S){if(1&y&&(t.TgZ(0,"div",42),t.TgZ(1,"div",43),t._UZ(2,"remissions-widget",44),t.qZA(),t.qZA()),2&y){const h=t.oxw();t.xp6(2),t.Q6J("rec",h.reception)("inv",h.theInvoice)("view",!0)}}function ue(y,S){if(1&y&&(t.TgZ(0,"div",42),t.TgZ(1,"div",43),t._UZ(2,"tank-delivery-readings-widget",45),t.qZA(),t.qZA()),2&y){const h=t.oxw();t.xp6(2),t.Q6J("invoice",h.theInvoice)("rec",h.reception)("view",!0)}}function de(y,S){if(1&y&&(t.TgZ(0,"div",42),t.TgZ(1,"div",43),t._UZ(2,"weighing-machine-readings-widget",45),t.qZA(),t.qZA()),2&y){const h=t.oxw();t.xp6(2),t.Q6J("invoice",h.theInvoice)("rec",h.reception)("view",!0)}}function D(y,S){if(1&y&&(t.TgZ(0,"div",42),t.TgZ(1,"div",43),t._UZ(2,"chemicals-products-analyses-widget",45),t.qZA(),t.qZA()),2&y){const h=t.oxw();t.xp6(2),t.Q6J("invoice",h.theInvoice)("rec",h.reception)("view",!0)}}function K(y,S){if(1&y){const h=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(h),t.oxw().submit()}),t._uU(1,"GUARDAR"),t.qZA()}if(2&y){const h=t.oxw();t.Q6J("disabled",h.generalFormGroup.invalid)}}let x=(()=>{class y{constructor(h,E,L,u,a){this.data=h,this.dialogRef=E,this.snackbar=L,this._invoicesService=u,this._crePermissionsService=a,this.active_label="Activo",this.allowCreateUser=!1,this.theInvoice=new G.m,this.current_temperature_unit_of_measure=11,this.volume_conversion_factor=1,this.view=!1,this.generalFormGroup=new i.cw({invoice_id:new i.NI,cre_permission_id:new i.NI("",[i.kI.required]),invoice_number1:new i.NI("",[i.kI.required]),invoice_number2:new i.NI,invoice_date:new i.NI("",[i.kI.required]),volume_unit_of_measure_id:new i.NI(1,[i.kI.required]),temperature_unit_of_measure_id:new i.NI(11,[i.kI.required]),currency_id:new i.NI(1,[i.kI.required]),currency_exchange_rate:new i.NI(1,[i.kI.required]),invoice_volume:new i.NI(0,[i.kI.required]),invoice_volume_liters:new i.NI(0,[i.kI.required]),invoice_temperature:new i.NI(0,[i.kI.required]),invoice_temperature_celsius:new i.NI(0,[i.kI.required]),invoice_ppv:new i.NI(0,[i.kI.required]),invoice_ppv_pesos:new i.NI(0,[i.kI.required]),invoice_total_price:new i.NI(0,[i.kI.required]),invoice_total_price_pesos:new i.NI(0,[i.kI.required]),timestamp:new i.NI,status:new i.NI(2),user_id:new i.NI(""),tarifa_de_almac:new i.NI(""),cargo_por_capacidad_almac:new i.NI(""),cargo_por_uso_almac:new i.NI(""),cargo_volumetrico_almac:new i.NI(""),tarifa_de_transporte:new i.NI(""),cargo_por_capacidad_trans:new i.NI(""),cargo_por_uso_trans:new i.NI(""),cargo_volumetrico_trans:new i.NI(""),tarifa_de_suministro:new i.NI("")}),this.dialogRef.disableClose=!0}ngOnInit(){return(0,b.mG)(this,void 0,void 0,function*(){console.log("Modal-invoices ngOnInit",this.data),this.reception=new n.T(this.data.reception),this.theInvoice=this.data.invoice.invoice_id>0?this.data.invoice:new G.m(this.reception.Invoices.find(h=>h.invoice_id==this.data.invoice.invoice_id)),this.view=this.data.view,this.vmus=yield this.getVolumeUnitsOfMeasure(),this.tmus=yield this.getTemperatureUnitsOfMeasure(),this.currencies=yield this.getCurrencies(),this.providers=yield this.getProviders(),0!=this.theInvoice.invoice_id?(this.theInvoice=this.data.invoice,this.generalFormGroup.patchValue({invoice_id:this.theInvoice.invoice_id,cre_permission_id:+this.theInvoice.cre_permission_id,invoice_number1:this.theInvoice.invoice_number1,invoice_number2:this.theInvoice.invoice_number2,invoice_date:new Date(this.theInvoice.invoice_date),volume_unit_of_measure_id:+this.theInvoice.volume_unit_of_measure_id,temperature_unit_of_measure_id:+this.theInvoice.temperature_unit_of_measure_id,currency_id:+this.theInvoice.currency_id,currency_exchange_rate:this.theInvoice.currency_exchange_rate,invoice_volume:this.theInvoice.invoice_volume,invoice_volume_liters:this.theInvoice.invoice_volume_liters,invoice_temperature:this.theInvoice.invoice_temperature,invoice_temperature_celsius:this.theInvoice.invoice_temperature_celsius,invoice_ppv:this.theInvoice.invoice_ppv,invoice_ppv_pesos:this.theInvoice.invoice_ppv_pesos,invoice_total_price:this.theInvoice.invoice_total_price,invoice_total_price_pesos:this.theInvoice.invoice_total_price_pesos,timestamp:this.theInvoice.timestamp,status:+this.theInvoice.status,user_id:this.theInvoice.user_id,tarifa_de_almac:this.theInvoice.tarifa_de_almac,cargo_por_capacidad_almac:this.theInvoice.cargo_por_capacidad_almac,cargo_por_uso_almac:this.theInvoice.cargo_por_uso_almac,cargo_volumetrico_almac:this.theInvoice.cargo_volumetrico_almac,tarifa_de_transporte:this.theInvoice.tarifa_de_transporte,cargo_por_capacidad_trans:this.theInvoice.cargo_por_capacidad_trans,cargo_por_uso_trans:this.theInvoice.cargo_por_uso_trans,cargo_volumetrico_trans:this.theInvoice.cargo_volumetrico_trans,tarifa_de_suministro:this.theInvoice.tarifa_de_suministro})):(this.generalFormGroup.controls.cre_permission_id.setValue(this.reception.cre_permission_provider_id),this.generalFormGroup.controls.volume_unit_of_measure_id.setValue(+this.reception.default_volume_unit_of_measure),this.generalFormGroup.controls.currency_id.setValue(+this.reception.default_currency),this.generalFormGroup.controls.status.setValue(+this.theInvoice.status)),this.generalFormGroup.controls.cre_permission_id.disable(),this.view&&(this.generalFormGroup.controls.invoice_id.disable(),this.generalFormGroup.controls.cre_permission_id.disable(),this.generalFormGroup.controls.invoice_number1.disable(),this.generalFormGroup.controls.invoice_number2.disable(),this.generalFormGroup.controls.invoice_date.disable(),this.generalFormGroup.controls.volume_unit_of_measure_id.disable(),this.generalFormGroup.controls.temperature_unit_of_measure_id.disable(),this.generalFormGroup.controls.currency_id.disable(),this.generalFormGroup.controls.currency_exchange_rate.disable(),this.generalFormGroup.controls.invoice_volume.disable(),this.generalFormGroup.controls.invoice_volume_liters.disable(),this.generalFormGroup.controls.invoice_temperature.disable(),this.generalFormGroup.controls.invoice_temperature_celsius.disable(),this.generalFormGroup.controls.invoice_ppv.disable(),this.generalFormGroup.controls.invoice_ppv_pesos.disable(),this.generalFormGroup.controls.invoice_total_price.disable(),this.generalFormGroup.controls.invoice_total_price_pesos.disable(),this.generalFormGroup.controls.timestamp.disable(),this.generalFormGroup.controls.status.disable(),this.generalFormGroup.controls.user_id.disable(),this.generalFormGroup.controls.tarifa_de_almac.disable(),this.generalFormGroup.controls.cargo_por_capacidad_almac.disable(),this.generalFormGroup.controls.cargo_por_uso_almac.disable(),this.generalFormGroup.controls.cargo_volumetrico_almac.disable(),this.generalFormGroup.controls.tarifa_de_transporte.disable(),this.generalFormGroup.controls.cargo_por_capacidad_trans.disable(),this.generalFormGroup.controls.cargo_por_uso_trans.disable(),this.generalFormGroup.controls.cargo_volumetrico_trans.disable(),this.generalFormGroup.controls.tarifa_de_suministro.disable())})}getVolumeUnitsOfMeasure(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("volume").toPromise()})}getTemperatureUnitsOfMeasure(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("temperature").toPromise()})}getCurrencies(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCurrencies().toPromise()})}getProviders(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getAllByType(3).toPromise()})}submit(){this.theInvoice.cre_permission_id=this.generalFormGroup.controls.cre_permission_id.value,this.theInvoice.invoice_number1=this.generalFormGroup.controls.invoice_number1.value,this.theInvoice.invoice_number2=this.generalFormGroup.controls.invoice_number2.value,this.theInvoice.invoice_date=this.getMysqlDate(this.generalFormGroup.controls.invoice_date.value),this.theInvoice.volume_unit_of_measure_id=this.generalFormGroup.controls.volume_unit_of_measure_id.value,this.theInvoice.temperature_unit_of_measure_id=this.generalFormGroup.controls.temperature_unit_of_measure_id.value,this.theInvoice.currency_id=this.generalFormGroup.controls.currency_id.value,this.theInvoice.currency_exchange_rate=this.generalFormGroup.controls.currency_exchange_rate.value,this.theInvoice.invoice_volume=this.generalFormGroup.controls.invoice_volume.value,this.theInvoice.invoice_volume_liters=this.generalFormGroup.controls.invoice_volume_liters.value,this.theInvoice.invoice_temperature=this.generalFormGroup.controls.invoice_temperature.value,this.theInvoice.invoice_temperature_celsius=this.generalFormGroup.controls.invoice_temperature_celsius.value,this.theInvoice.invoice_ppv=this.generalFormGroup.controls.invoice_ppv.value,this.theInvoice.invoice_ppv_pesos=this.generalFormGroup.controls.invoice_ppv_pesos.value,this.theInvoice.invoice_total_price=this.generalFormGroup.controls.invoice_total_price.value,this.theInvoice.invoice_total_price_pesos=this.generalFormGroup.controls.invoice_total_price_pesos.value,this.theInvoice.timestamp=this.generalFormGroup.controls.timestamp.value,this.theInvoice.status=+this.generalFormGroup.controls.status.value,this.theInvoice.user_id=this.generalFormGroup.controls.user_id.value,this.theInvoice.tarifa_de_almac=this.generalFormGroup.controls.tarifa_de_almac.value,this.theInvoice.cargo_por_capacidad_almac=this.generalFormGroup.controls.cargo_por_capacidad_almac.value,this.theInvoice.cargo_por_uso_almac=this.generalFormGroup.controls.cargo_por_uso_almac.value,this.theInvoice.cargo_volumetrico_almac=this.generalFormGroup.controls.cargo_volumetrico_almac.value,this.theInvoice.tarifa_de_transporte=this.generalFormGroup.controls.tarifa_de_transporte.value,this.theInvoice.cargo_por_capacidad_trans=this.generalFormGroup.controls.cargo_por_capacidad_trans.value,this.theInvoice.cargo_por_uso_trans=this.generalFormGroup.controls.cargo_por_uso_trans.value,this.theInvoice.cargo_volumetrico_trans=this.generalFormGroup.controls.cargo_volumetrico_trans.value,this.theInvoice.tarifa_de_suministro=this.generalFormGroup.controls.tarifa_de_suministro.value,this.theInvoice.invoice_id>0?this.updateInvoice():this.createInvoice()}close(){this.dialogRef.close()}createInvoice(){this._invoicesService.create(this.theInvoice,0!==this.data.reception_id?"?reception_id="+this.reception.reception_id+"&cre_permission_provider_id="+this.reception.cre_permission_provider_id+"&cre_permission_storage_id="+this.reception.cre_permission_storage_id+"&cre_permission_transport_id="+this.reception.cre_permission_transport_id+"&status=2&site_code="+this.reception.site_code:"").subscribe(E=>{this.snackbar.open(E.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.reception.reception_id=E.reception_id,this.theInvoice.invoice_id=E.invoice_id,this.theInvoice.status=2,this.dialogRef.close({invoice:this.theInvoice,reception:this.reception})},E=>{this.snackbar.open(E.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateInvoice(){this._invoicesService.update(this.theInvoice).subscribe(h=>{this.snackbar.open(h.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({invoice:this.theInvoice,reception:this.reception})},h=>{this.snackbar.open(h.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}setActiveInvoice(h){this.active_label=h.checked?"Activo":"Inactivo"}onChangeVolumeUnitOfMeasure(h){this.volume_conversion_factor=this.vmus.find(E=>E.id==h).conversion_factor,this.generalFormGroup.controls.invoice_volume_liters.setValue((this.volume_conversion_factor*this.generalFormGroup.controls.invoice_volume.value).toFixed(2))}onChangeTemperatureUnitOfMeasure(h){this.current_temperature_unit_of_measure=h,this.generalFormGroup.controls.invoice_temperature_celsius.setValue(12==this.current_temperature_unit_of_measure?((this.generalFormGroup.controls.invoice_temperature.value-32)/1.8).toFixed(2):13==this.current_temperature_unit_of_measure?(this.generalFormGroup.controls.invoice_temperature.value-273.15).toFixed(2):(+this.generalFormGroup.controls.invoice_temperature.value).toFixed(2))}onChangeCurrency(h){1==h&&(this.generalFormGroup.controls.currency_exchange_rate.setValue(1),this.generalFormGroup.controls.invoice_ppv_pesos.setValue((this.generalFormGroup.controls.invoice_ppv.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)),this.generalFormGroup.controls.invoice_total_price_pesos.setValue((this.generalFormGroup.controls.invoice_total_price.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)))}numericOnly(h){let E=h.target.value+h.key;return!!new RegExp(/^([1-9][0-9]{0,7}||[0]||[0][.][0-9]{0,2}||[1-9][0-9]{0,7}[.][0-9]{0,2})$/).test(E)&&(("currency_exchange_rate"==h.target.id||"invoice_ppv"==h.target.id||"invoice_total_price"==h.target.id)&&(this.generalFormGroup.controls.invoice_ppv_pesos.setValue((this.generalFormGroup.controls.invoice_ppv.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)),this.generalFormGroup.controls.invoice_total_price_pesos.setValue((this.generalFormGroup.controls.invoice_total_price.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)),("currency_exchange_rate"==h.target.id||"invoice_ppv"==h.target.id)&&(this.generalFormGroup.controls.invoice_total_price.setValue((this.generalFormGroup.controls.invoice_ppv.value*this.generalFormGroup.controls.invoice_volume.value).toFixed(2)),this.generalFormGroup.controls.invoice_total_price_pesos.setValue((this.generalFormGroup.controls.invoice_total_price.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)))),"invoice_volume"==h.target.id&&(this.volume_conversion_factor=this.vmus.find(u=>u.id==this.generalFormGroup.controls.volume_unit_of_measure_id.value).conversion_factor,this.generalFormGroup.controls.invoice_volume_liters.setValue((+this.generalFormGroup.controls.invoice_volume.value*this.volume_conversion_factor).toFixed(2)),this.generalFormGroup.controls.invoice_total_price.setValue((this.generalFormGroup.controls.invoice_ppv.value*this.generalFormGroup.controls.invoice_volume.value).toFixed(2)),this.generalFormGroup.controls.invoice_total_price_pesos.setValue((this.generalFormGroup.controls.invoice_total_price.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2))),"invoice_temperature"==h.target.id&&this.generalFormGroup.controls.invoice_temperature_celsius.setValue(12==this.current_temperature_unit_of_measure?((+this.generalFormGroup.controls.invoice_temperature.value-32)/1.8).toFixed(2):13==this.current_temperature_unit_of_measure?(+this.generalFormGroup.controls.invoice_temperature.value-273.15).toFixed(2):(+this.generalFormGroup.controls.invoice_temperature.value).toFixed(2)),!0)}getMysqlDate(h){return null!==h?h.getFullYear()+"-"+("0"+(h.getMonth()+1)).slice(-2)+"-"+("0"+h.getDate()).slice(-2):""}}return y.\u0275fac=function(h){return new(h||y)(t.Y36(c.WI),t.Y36(c.so),t.Y36(f.ux),t.Y36(P.x),t.Y36(R.w))},y.\u0275cmp=t.Xpm({type:y,selectors:[["modal-invoices"]],decls:144,vars:15,consts:[[1,"modal-table"],[1,"title"],["svgIcon","invoice"],[1,"card"],[2,"margin","15px",3,"formGroup"],["fxLayout","row","fxLayoutGap","8px",1,"content"],["fxFlex","auto","appearance","outline"],["formControlName","cre_permission_id","readonly",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","invoice_number1","matInput","","required",""],["formControlName","invoice_number2","matInput","","required",""],["appearance","outline","fxFlex","auto",1,"field"],["matInput","","formControlName","invoice_date","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["color","primary"],["invoiceDate",""],["formControlName","volume_unit_of_measure_id",3,"selectionChange"],["formControlName","temperature_unit_of_measure_id",3,"selectionChange"],["formControlName","currency_id",3,"selectionChange"],["formControlName","currency_exchange_rate","matInput","","required","","id","currency_exchange_rate",3,"keyup"],["formControlName","invoice_volume","matInput","","required","","id","invoice_volume",3,"keyup"],["formControlName","invoice_volume_liters","matInput","","required","","readonly",""],["formControlName","invoice_temperature","matInput","","required","","id","invoice_temperature",3,"keyup"],["formControlName","invoice_temperature_celsius","matInput","","required","","readonly",""],["formControlName","invoice_ppv","matInput","","required","","id","invoice_ppv",3,"keyup"],["formControlName","invoice_ppv_pesos","matInput","","required","","readonly",""],["formControlName","invoice_total_price","matInput","","required","","id","invoice_total_price",3,"keyup"],["formControlName","invoice_total_price_pesos","matInput","","required","","readonly",""],[1,"subheading"],["formControlName","tarifa_de_almac","matInput","","type","number",3,"keyup"],["formControlName","cargo_por_capacidad_almac","matInput","","type","number",3,"keyup"],["formControlName","cargo_por_uso_almac","matInput","","type","number",3,"keyup"],["formControlName","tarifa_de_transporte","matInput","","type","number",3,"keyup"],["formControlName","cargo_por_capacidad_trans","matInput","","type","number",3,"keyup"],["formControlName","cargo_por_uso_trans","matInput","","type","number",3,"keyup"],["formControlName","tarifa_de_suministro","matInput","","type","number",3,"keyup"],["class","content","fxLayout","column","fxLayoutGap","8px",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","",3,"click"],["color","primary","mat-raised-button","",3,"disabled","click",4,"ngIf"],[3,"value"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxFlex","grow",1,"route-animations-elements"],[1,"fullheight",3,"rec","inv","view"],[1,"fullheight",3,"invoice","remission","rec","view"],["color","primary","mat-raised-button","",3,"disabled","click"]],template:function(h,E){if(1&h&&(t.TgZ(0,"fury-page",0),t.TgZ(1,"fury-title",1),t._UZ(2,"mat-icon",2),t.TgZ(3,"span"),t._uU(4,"Facturas"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"form",4),t.TgZ(7,"div",5),t.TgZ(8,"mat-form-field",6),t.TgZ(9,"mat-label"),t._uU(10,"Proveedor:"),t.qZA(),t.TgZ(11,"mat-select",7),t.YNc(12,ae,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",5),t.TgZ(14,"mat-form-field",6),t.TgZ(15,"mat-label"),t._uU(16,"Serie y folio de factura:"),t.qZA(),t._UZ(17,"input",9),t.qZA(),t.TgZ(18,"mat-form-field",6),t.TgZ(19,"mat-label"),t._uU(20,"UUID:"),t.qZA(),t._UZ(21,"input",10),t.qZA(),t.TgZ(22,"mat-form-field",11),t.TgZ(23,"mat-label"),t._uU(24,"Fecha de la factura:"),t.qZA(),t._UZ(25,"input",12),t.TgZ(26,"mat-datepicker-toggle",13),t.TgZ(27,"mat-icon",14),t._uU(28,"date_range"),t.qZA(),t.qZA(),t._UZ(29,"mat-datepicker",15,16),t.qZA(),t.qZA(),t.TgZ(31,"div",5),t.TgZ(32,"mat-form-field",6),t.TgZ(33,"mat-label"),t._uU(34,"Unidad de medida de volumen:"),t.qZA(),t.TgZ(35,"mat-select",17),t.NdJ("selectionChange",function(u){return E.onChangeVolumeUnitOfMeasure(u.value)}),t.YNc(36,le,2,2,"mat-option",8),t.qZA(),t.qZA(),t.TgZ(37,"mat-form-field",6),t.TgZ(38,"mat-label"),t._uU(39,"Unidad de medida de temperatura:"),t.qZA(),t.TgZ(40,"mat-select",18),t.NdJ("selectionChange",function(u){return E.onChangeTemperatureUnitOfMeasure(u.value)}),t.YNc(41,ie,2,2,"mat-option",8),t.qZA(),t.qZA(),t.TgZ(42,"mat-form-field",6),t.TgZ(43,"mat-label"),t._uU(44,"Moneda:"),t.qZA(),t.TgZ(45,"mat-select",19),t.NdJ("selectionChange",function(u){return E.onChangeCurrency(u.value)}),t.YNc(46,ne,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",5),t.TgZ(48,"mat-form-field",6),t.TgZ(49,"mat-label"),t._uU(50,"Tipo de cambio:"),t.qZA(),t.TgZ(51,"input",20),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.TgZ(52,"mat-form-field",6),t.TgZ(53,"mat-label"),t._uU(54,"Volumen documentado:"),t.qZA(),t.TgZ(55,"input",21),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.TgZ(56,"mat-form-field",6),t.TgZ(57,"mat-label"),t._uU(58,"Volumen documentado en litros:"),t.qZA(),t._UZ(59,"input",22),t.qZA(),t.qZA(),t.TgZ(60,"div",5),t.TgZ(61,"mat-form-field",6),t.TgZ(62,"mat-label"),t._uU(63,"Temperatura documentada:"),t.qZA(),t.TgZ(64,"input",23),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.TgZ(65,"mat-form-field",6),t.TgZ(66,"mat-label"),t._uU(67,"Temperatura documentada en grados celsius"),t.qZA(),t._UZ(68,"input",24),t.qZA(),t.TgZ(69,"mat-form-field",6),t.TgZ(70,"mat-label"),t._uU(71,"Precio por volumen documentado:"),t.qZA(),t.TgZ(72,"input",25),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",5),t.TgZ(74,"mat-form-field",6),t.TgZ(75,"mat-label"),t._uU(76,"Precio por volumen en pesos:"),t.qZA(),t._UZ(77,"input",26),t.qZA(),t.TgZ(78,"mat-form-field",6),t.TgZ(79,"mat-label"),t._uU(80,"Precio total documentado"),t.qZA(),t.TgZ(81,"input",27),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.TgZ(82,"mat-form-field",6),t.TgZ(83,"mat-label"),t._uU(84,"Precio total en pesos:"),t.qZA(),t._UZ(85,"input",28),t.qZA(),t.qZA(),t._UZ(86,"mat-divider"),t.TgZ(87,"div",29),t._uU(88,"Almacenamiento y distribuci\xf3n."),t.qZA(),t.TgZ(89,"div",5),t.TgZ(90,"mat-form-field",6),t.TgZ(91,"mat-label"),t._uU(92,"Tarifa de almacenamiento:"),t.qZA(),t.TgZ(93,"input",30),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.TgZ(94,"mat-form-field",6),t.TgZ(95,"mat-label"),t._uU(96,"Cargo por capacidad de almacenamiento:"),t.qZA(),t.TgZ(97,"input",31),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",5),t.TgZ(99,"mat-form-field",6),t.TgZ(100,"mat-label"),t._uU(101,"Cargo por uso de almacenamiento:"),t.qZA(),t.TgZ(102,"input",32),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.TgZ(103,"mat-form-field",6),t.TgZ(104,"mat-label"),t._uU(105,"Cargo \xfanico volum\xe9trico del almacenamiento:"),t.qZA(),t.TgZ(106,"input",32),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(107,"mat-divider"),t.TgZ(108,"div",29),t._uU(109,"Transporte."),t.qZA(),t.TgZ(110,"div",5),t.TgZ(111,"mat-form-field",6),t.TgZ(112,"mat-label"),t._uU(113,"Tarifa de transporte:"),t.qZA(),t.TgZ(114,"input",33),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.TgZ(115,"mat-form-field",6),t.TgZ(116,"mat-label"),t._uU(117,"Cargo por capacidad de transporte:"),t.qZA(),t.TgZ(118,"input",34),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(119,"div",5),t.TgZ(120,"mat-form-field",6),t.TgZ(121,"mat-label"),t._uU(122,"Cargo por uso de transporte:"),t.qZA(),t.TgZ(123,"input",35),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.TgZ(124,"mat-form-field",6),t.TgZ(125,"mat-label"),t._uU(126,"Cargo \xfanico volum\xe9trico del transporte:"),t.qZA(),t.TgZ(127,"input",35),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(128,"mat-divider"),t.TgZ(129,"div",29),t._uU(130,"Suministro."),t.qZA(),t.TgZ(131,"div",5),t.TgZ(132,"mat-form-field",6),t.TgZ(133,"mat-label"),t._uU(134,"Tarifa de suministro:"),t.qZA(),t.TgZ(135,"input",36),t.NdJ("keyup",function(u){return E.numericOnly(u)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(136,_e,3,3,"div",37),t.YNc(137,ue,3,3,"div",37),t.YNc(138,de,3,3,"div",37),t.YNc(139,D,3,3,"div",37),t.TgZ(140,"div",38),t.TgZ(141,"button",39),t.NdJ("click",function(){return E.close()}),t._uU(142,"CANCELAR"),t.qZA(),t.YNc(143,K,2,1,"button",40),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&h){const L=t.MAs(30);t.xp6(2),t.Q6J("@scaleIn",void 0),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(2),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("formGroup",E.generalFormGroup),t.xp6(6),t.Q6J("ngForOf",E.providers),t.xp6(13),t.Q6J("matDatepicker",L),t.xp6(1),t.Q6J("for",L),t.xp6(10),t.Q6J("ngForOf",E.vmus),t.xp6(5),t.Q6J("ngForOf",E.tmus),t.xp6(5),t.Q6J("ngForOf",E.currencies),t.xp6(90),t.Q6J("ngIf",E.theInvoice.Remissions.length>0),t.xp6(1),t.Q6J("ngIf",E.theInvoice.TankDeliveryReadings.length>0),t.xp6(1),t.Q6J("ngIf",E.theInvoice.WeighingMachineReadings.length>0),t.xp6(1),t.Q6J("ngIf",E.theInvoice.ChemicalProductAnalyses.length>0),t.xp6(4),t.Q6J("ngIf",!E.view&&2==E.reception.status)}},directives:[k.i,o.M,w.Hw,i._Y,i.JL,i.sg,Z.xw,Z.SQ,U.KE,Z.yH,U.hX,z.gD,i.JJ,i.u,te.sg,i.Fj,V.Nt,i.Q7,Y.hl,Y.nW,U.R9,Y.Q0,Y.Mq,oe.d,i.wV,te.O5,Z.Wh,re.lW,se.ey,j.F,$.q,ee.k,ce.K],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{overflow:scroll;height:550px;width:800px;margin:20px;border-radius:8px;padding:5px;box-shadow:0 6px 6px -3px #0003,0 10px 14px 1px #00000024,0 4px 18px 3px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{max-width:32.5%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .information-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:100%}.card[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:410px}.card[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.card[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;width:245px}.card[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:0;width:245px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .indented-right[_ngcontent-%COMP%]{margin-left:10px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}.modal-table[_ngcontent-%COMP%]{width:840px;padding:1px}"],data:{animation:[e.X,A.M,I.K]}}),y})()},57425:(X,N,r)=>{r.d(N,{L:()=>de});var b=r(70655),i=r(93075),c=r(48966),I=r(37425),e=r(14499),A=r(88914),G=r(71936),n=r(12644),t=r(5e3),f=r(57261),P=r(57e3),R=r(95288),k=r(59968),o=r(36551),w=r(25245),Z=r(30277),U=r(67322),z=r(74107),te=r(69808),V=r(77531),Y=r(86856),oe=r(47423),re=r(90508),se=r(42877),j=r(27702),$=r(53212);function ee(D,K){if(1&D&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&D){const x=K.$implicit;t.Q6J("value",x.permission_id),t.xp6(1),t.Oqu(x.provider_name)}}function ce(D,K){if(1&D&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&D){const x=K.$implicit;t.Q6J("value",x.id),t.xp6(1),t.Oqu(x.unit_of_measure)}}function ae(D,K){if(1&D&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&D){const x=K.$implicit;t.Q6J("value",x.id),t.xp6(1),t.Oqu(x.unit_of_measure)}}function le(D,K){if(1&D&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&D){const x=K.$implicit;t.Q6J("value",x.id),t.xp6(1),t.Oqu(x.currency)}}function ie(D,K){if(1&D&&(t.TgZ(0,"div",43),t.TgZ(1,"div",44),t._UZ(2,"tank-delivery-readings-widget",45),t.qZA(),t.qZA()),2&D){const x=t.oxw();t.xp6(2),t.Q6J("remission",x.theRemission)("rec",x.reception)("view",!0)}}function ne(D,K){if(1&D&&(t.TgZ(0,"div",43),t.TgZ(1,"div",44),t._UZ(2,"weighing-machine-readings-widget",45),t.qZA(),t.qZA()),2&D){const x=t.oxw();t.xp6(2),t.Q6J("remission",x.theRemission)("rec",x.reception)("view",!0)}}function _e(D,K){if(1&D&&(t.TgZ(0,"div",43),t.TgZ(1,"div",44),t._UZ(2,"chemicals-products-analyses-widget",45),t.qZA(),t.qZA()),2&D){const x=t.oxw();t.xp6(2),t.Q6J("remission",x.theRemission)("rec",x.reception)("view",!0)}}function ue(D,K){if(1&D){const x=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(x),t.oxw().submit()}),t._uU(1,"GUARDAR"),t.qZA()}if(2&D){const x=t.oxw();t.Q6J("disabled",x.generalFormGroup.invalid)}}let de=(()=>{class D{constructor(x,y,S,h,E){this.data=x,this.dialogRef=y,this.snackbar=S,this._remissionsService=h,this._crePermissionsService=E,this.active_label="Activo",this.allowCreateUser=!1,this.theRemission=new n.O,this.current_temperature_unit_of_measure=11,this.volume_conversion_factor=1,this.view=!1,this.generalFormGroup=new i.cw({remission_id:new i.NI,cre_permission_id:new i.NI("",[i.kI.required]),identification_number:new i.NI("",[i.kI.required]),identification_number2:new i.NI,remission_date:new i.NI("",[i.kI.required]),volume_unit_of_measure_id:new i.NI(1,[i.kI.required]),temperature_unit_of_measure_id:new i.NI(11,[i.kI.required]),currency_id:new i.NI(1,[i.kI.required]),currency_exchange_rate:new i.NI(1,[i.kI.required]),remission_volume:new i.NI(0,[i.kI.required]),remission_volume_liters:new i.NI(0,[i.kI.required]),remission_temperature:new i.NI(0,[i.kI.required]),remission_temperature_celsius:new i.NI(0,[i.kI.required]),remission_ppv:new i.NI(0,[i.kI.required]),remission_ppv_pesos:new i.NI(0,[i.kI.required]),remission_total_price:new i.NI(0,[i.kI.required]),remission_total_price_pesos:new i.NI(0,[i.kI.required]),stamp1:new i.NI("",[i.kI.required]),stamp2:new i.NI,stamp3:new i.NI,stamp4:new i.NI,vehicle_number:new i.NI("",[i.kI.required]),vehicle_plate:new i.NI("",[i.kI.required]),vehicle_axles_number:new i.NI,nice:new i.NI,vehicle_tank_number:new i.NI,timestamp:new i.NI,status:new i.NI(2),user_id:new i.NI("")}),this.dialogRef.disableClose=!0}ngOnInit(){return(0,b.mG)(this,void 0,void 0,function*(){this.reception=new G.T(this.data.reception),this.view=this.data.view,this.vmus=yield this.getVolumeUnitsOfMeasure(),this.tmus=yield this.getTemperatureUnitsOfMeasure(),this.currencies=yield this.getCurrencies(),this.providers=yield this.getProviders(),null!=this.data.remission?(this.theRemission=new n.O(this.data.remission),this.generalFormGroup.patchValue({remission_id:this.theRemission.remission_id,cre_permission_id:+this.theRemission.cre_permission_id,identification_number:this.theRemission.identification_number,identification_number2:this.theRemission.identification_number2,remission_date:new Date(this.theRemission.remission_date),volume_unit_of_measure_id:+this.theRemission.volume_unit_of_measure_id,temperature_unit_of_measure_id:+this.theRemission.temperature_unit_of_measure_id,currency_id:+this.theRemission.currency_id,currency_exchange_rate:this.theRemission.currency_exchange_rate,remission_volume:this.theRemission.remission_volume,remission_volume_liters:this.theRemission.remission_volume_liters,remission_temperature:this.theRemission.remission_temperature,remission_temperature_celsius:this.theRemission.remission_temperature_celsius,remission_ppv:this.theRemission.remission_ppv,remission_ppv_pesos:this.theRemission.remission_ppv_pesos,remission_total_price:this.theRemission.remission_total_price,remission_total_price_pesos:this.theRemission.remission_total_price_pesos,stamp1:this.theRemission.stamp1,stamp2:this.theRemission.stamp2,stamp3:this.theRemission.stamp3,stamp4:this.theRemission.stamp4,vehicle_number:this.theRemission.vehicle_number,vehicle_plate:this.theRemission.vehicle_plate,vehicle_axles_number:this.theRemission.vehicle_axles_number,nice:this.theRemission.nice,vehicle_tank_number:this.theRemission.vehicle_tank_number,timestamp:this.theRemission.timestamp,status:this.theRemission.status,user_id:this.theRemission.user_id})):(this.generalFormGroup.controls.cre_permission_id.setValue(this.reception.cre_permission_provider_id),this.generalFormGroup.controls.volume_unit_of_measure_id.setValue(this.reception.default_volume_unit_of_measure),this.generalFormGroup.controls.currency_id.setValue(this.reception.default_currency),this.generalFormGroup.controls.status.setValue(this.theRemission.status)),this.generalFormGroup.controls.cre_permission_id.disable(),this.view&&(this.generalFormGroup.controls.remission_id.disable(),this.generalFormGroup.controls.cre_permission_id.disable(),this.generalFormGroup.controls.identification_number.disable(),this.generalFormGroup.controls.identification_number2.disable(),this.generalFormGroup.controls.remission_date.disable(),this.generalFormGroup.controls.volume_unit_of_measure_id.disable(),this.generalFormGroup.controls.temperature_unit_of_measure_id.disable(),this.generalFormGroup.controls.currency_id.disable(),this.generalFormGroup.controls.currency_exchange_rate.disable(),this.generalFormGroup.controls.remission_volume.disable(),this.generalFormGroup.controls.remission_volume_liters.disable(),this.generalFormGroup.controls.remission_temperature.disable(),this.generalFormGroup.controls.remission_temperature_celsius.disable(),this.generalFormGroup.controls.remission_ppv.disable(),this.generalFormGroup.controls.remission_ppv_pesos.disable(),this.generalFormGroup.controls.remission_total_price.disable(),this.generalFormGroup.controls.remission_total_price_pesos.disable(),this.generalFormGroup.controls.stamp1.disable(),this.generalFormGroup.controls.stamp2.disable(),this.generalFormGroup.controls.stamp3.disable(),this.generalFormGroup.controls.stamp4.disable(),this.generalFormGroup.controls.vehicle_number.disable(),this.generalFormGroup.controls.vehicle_plate.disable(),this.generalFormGroup.controls.vehicle_axles_number.disable(),this.generalFormGroup.controls.nice.disable(),this.generalFormGroup.controls.vehicle_tank_number.disable(),this.generalFormGroup.controls.timestamp.disable(),this.generalFormGroup.controls.status.disable(),this.generalFormGroup.controls.user_id.disable())})}getVolumeUnitsOfMeasure(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("volume").toPromise()})}getTemperatureUnitsOfMeasure(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("temperature").toPromise()})}getCurrencies(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCurrencies().toPromise()})}getProviders(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getAllByType(3).toPromise()})}submit(){this.theRemission.identification_number=this.generalFormGroup.controls.identification_number.value,this.theRemission.identification_number2=this.generalFormGroup.controls.identification_number2.value,this.theRemission.remission_date=this.getMysqlDate(this.generalFormGroup.controls.remission_date.value),this.theRemission.volume_unit_of_measure_id=this.generalFormGroup.controls.volume_unit_of_measure_id.value,this.theRemission.temperature_unit_of_measure_id=this.generalFormGroup.controls.temperature_unit_of_measure_id.value,this.theRemission.currency_id=this.generalFormGroup.controls.currency_id.value,this.theRemission.currency_exchange_rate=this.generalFormGroup.controls.currency_exchange_rate.value,this.theRemission.remission_volume=this.generalFormGroup.controls.remission_volume.value,this.theRemission.remission_volume_liters=this.generalFormGroup.controls.remission_volume_liters.value,this.theRemission.remission_temperature=this.generalFormGroup.controls.remission_temperature.value,this.theRemission.remission_temperature_celsius=this.generalFormGroup.controls.remission_temperature_celsius.value,this.theRemission.remission_ppv=this.generalFormGroup.controls.remission_ppv.value,this.theRemission.remission_ppv_pesos=this.generalFormGroup.controls.remission_ppv_pesos.value,this.theRemission.remission_total_price=this.generalFormGroup.controls.remission_total_price.value,this.theRemission.remission_total_price_pesos=this.generalFormGroup.controls.remission_total_price_pesos.value,this.theRemission.stamp1=this.generalFormGroup.controls.stamp1.value,this.theRemission.stamp2=this.generalFormGroup.controls.stamp2.value,this.theRemission.stamp3=this.generalFormGroup.controls.stamp3.value,this.theRemission.stamp4=this.generalFormGroup.controls.stamp4.value,this.theRemission.vehicle_number=this.generalFormGroup.controls.vehicle_number.value,this.theRemission.vehicle_plate=this.generalFormGroup.controls.vehicle_plate.value,this.theRemission.vehicle_axles_number=this.generalFormGroup.controls.vehicle_axles_number.value,this.theRemission.nice=this.generalFormGroup.controls.nice.value,this.theRemission.vehicle_tank_number=this.generalFormGroup.controls.vehicle_tank_number.value,this.theRemission.timestamp=this.generalFormGroup.controls.timestamp.value,this.theRemission.status=this.generalFormGroup.controls.status.value,this.theRemission.user_id=this.generalFormGroup.controls.user_id.value,this.theRemission.cre_permission_id=this.generalFormGroup.controls.cre_permission_id.value,this.theRemission.remission_id>0?this.updateRemission():this.createRemission()}close(){this.dialogRef.close()}createRemission(){this._remissionsService.create(this.theRemission,0!==this.data.reception_id?"?reception_id="+this.reception.reception_id+"&cre_permission_provider_id="+this.reception.cre_permission_provider_id+"&cre_permission_storage_id="+this.reception.cre_permission_storage_id+"&cre_permission_transport_id="+this.reception.cre_permission_transport_id+"&status=2&site_code="+this.reception.site_code:"").subscribe(y=>{this.snackbar.open(y.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.reception.reception_id=y.reception_id,this.theRemission.remission_id=y.remission_id,this.theRemission.status=2,this.dialogRef.close({remission:this.theRemission,reception:this.reception})},y=>{this.snackbar.open(y.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateRemission(){this._remissionsService.update(this.theRemission).subscribe(x=>{this.snackbar.open(x.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({remission:this.theRemission,reception:this.reception})},x=>{this.snackbar.open(x.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}setActiveRemission(x){this.active_label=x.checked?"Activo":"Inactivo"}onChangeVolumeUnitOfMeasure(x){this.volume_conversion_factor=this.vmus.find(y=>y.id==x).conversion_factor,this.generalFormGroup.controls.remission_volume_liters.setValue((this.volume_conversion_factor*this.generalFormGroup.controls.remission_volume.value).toFixed(2))}onChangeTemperatureUnitOfMeasure(x){this.current_temperature_unit_of_measure=x,this.generalFormGroup.controls.remission_temperature_celsius.setValue(12==this.current_temperature_unit_of_measure?((this.generalFormGroup.controls.remission_temperature.value-32)/1.8).toFixed(2):13==this.current_temperature_unit_of_measure?(this.generalFormGroup.controls.remission_temperature.value-273.15).toFixed(2):(+this.generalFormGroup.controls.remission_temperature.value).toFixed(2))}onChangeCurrency(x){1==x&&(this.generalFormGroup.controls.currency_exchange_rate.setValue(1),this.generalFormGroup.controls.remission_ppv_pesos.setValue((this.generalFormGroup.controls.remission_ppv.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)),this.generalFormGroup.controls.remission_total_price_pesos.setValue((this.generalFormGroup.controls.remission_total_price.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)))}numericOnly(x){let y=x.target.value+x.key;return!!new RegExp(/^([1-9][0-9]{0,7}||[0]||[0][.][0-9]{0,2}||[1-9][0-9]{0,7}[.][0-9]{0,2})$/).test(y)&&(("currency_exchange_rate"==x.target.id||"remission_ppv"==x.target.id||"remission_total_price"==x.target.id)&&(this.generalFormGroup.controls.remission_ppv_pesos.setValue((this.generalFormGroup.controls.remission_ppv.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)),this.generalFormGroup.controls.remission_total_price_pesos.setValue((this.generalFormGroup.controls.remission_total_price.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)),("currency_exchange_rate"==x.target.id||"remission_ppv"==x.target.id)&&(this.generalFormGroup.controls.remission_total_price.setValue((this.generalFormGroup.controls.remission_ppv.value*this.generalFormGroup.controls.remission_volume.value).toFixed(2)),this.generalFormGroup.controls.remission_total_price_pesos.setValue((this.generalFormGroup.controls.remission_total_price.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2)))),"remission_volume"==x.target.id&&(this.volume_conversion_factor=this.vmus.find(h=>h.id==this.generalFormGroup.controls.volume_unit_of_measure_id.value).conversion_factor,this.generalFormGroup.controls.remission_volume_liters.setValue((+this.generalFormGroup.controls.remission_volume.value*this.volume_conversion_factor).toFixed(2)),this.generalFormGroup.controls.remission_total_price.setValue((this.generalFormGroup.controls.remission_ppv.value*this.generalFormGroup.controls.remission_volume.value).toFixed(2)),this.generalFormGroup.controls.remission_total_price_pesos.setValue((this.generalFormGroup.controls.remission_total_price.value*this.generalFormGroup.controls.currency_exchange_rate.value).toFixed(2))),"remission_temperature"==x.target.id&&this.generalFormGroup.controls.remission_temperature_celsius.setValue(12==this.current_temperature_unit_of_measure?((+this.generalFormGroup.controls.remission_temperature.value-32)/1.8).toFixed(2):13==this.current_temperature_unit_of_measure?(+this.generalFormGroup.controls.remission_temperature.value-273.15).toFixed(2):(+this.generalFormGroup.controls.remission_temperature.value).toFixed(2)),""==x.target.id||void 0)}getMysqlDate(x){return null!==x?x.getFullYear()+"-"+("0"+(x.getMonth()+1)).slice(-2)+"-"+("0"+x.getDate()).slice(-2):""}}return D.\u0275fac=function(x){return new(x||D)(t.Y36(c.WI),t.Y36(c.so),t.Y36(f.ux),t.Y36(P.D),t.Y36(R.w))},D.\u0275cmp=t.Xpm({type:D,selectors:[["modal-remissions"]],decls:132,vars:14,consts:[[1,"modal-table"],[1,"title"],["svgIcon","invoice"],[1,"card"],[2,"margin","15px",3,"formGroup"],["fxLayout","row","fxLayoutGap","8px",1,"content"],["fxFlex","auto","appearance","outline"],["formControlName","cre_permission_id","requierd",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","identification_number","matInput","","required",""],["formControlName","identification_number2","matInput",""],["appearance","outline","fxFlex","auto",1,"field"],["matInput","","formControlName","remission_date","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["color","primary"],["remissionDate",""],["formControlName","volume_unit_of_measure_id","requierd","",3,"selectionChange"],["formControlName","temperature_unit_of_measure_id","required","",3,"selectionChange"],["formControlName","currency_id","required","",3,"selectionChange"],["formControlName","currency_exchange_rate","matInput","","required","","id","currency_exchange_rate",3,"keyup"],["formControlName","remission_volume","matInput","","required","","id","remission_volume",3,"keyup"],["formControlName","remission_volume_liters","matInput","","required","","readonly",""],["formControlName","remission_temperature","matInput","","required","","id","remission_temperature",3,"keyup"],["formControlName","remission_temperature_celsius","matInput","","required","","readonly",""],["formControlName","remission_ppv","matInput","","required","","id","remission_ppv",3,"keyup"],["formControlName","remission_ppv_pesos","matInput","","required","","readonly",""],["formControlName","remission_total_price","matInput","","required","","id","remission_total_price",3,"keyup"],["formControlName","remission_total_price_pesos","matInput","","required","","readonly",""],["formControlName","stamp1","matInput","","required",""],["formControlName","stamp2","matInput",""],["formControlName","stamp3","matInput",""],["formControlName","stamp4","matInput",""],["formControlName","vehicle_number","matInput","","required",""],["formControlName","vehicle_plate","matInput","","required",""],["formControlName","vehicle_axles_number","matInput","",3,"keyup"],["formControlName","nice","matInput","",3,"keyup"],["formControlName","vehicle_tank_number","matInput","",3,"keyup"],["class","content","fxLayout","column","fxLayoutGap","8px",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","",3,"click"],["color","primary","mat-raised-button","",3,"disabled","click",4,"ngIf"],[3,"value"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxFlex","grow",1,"route-animations-elements"],[1,"fullheight",3,"invoice","remission","rec","view"],["color","primary","mat-raised-button","",3,"disabled","click"]],template:function(x,y){if(1&x&&(t.TgZ(0,"fury-page",0),t.TgZ(1,"fury-title",1),t._UZ(2,"mat-icon",2),t.TgZ(3,"span"),t._uU(4,"Remisiones"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"form",4),t.TgZ(7,"div",5),t.TgZ(8,"mat-form-field",6),t.TgZ(9,"mat-label"),t._uU(10,"Proveedor autorizado:"),t.qZA(),t.TgZ(11,"mat-select",7),t.YNc(12,ee,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",5),t.TgZ(14,"mat-form-field",6),t.TgZ(15,"mat-label"),t._uU(16,"Folio de remisi\xf3n:"),t.qZA(),t._UZ(17,"input",9),t.qZA(),t.TgZ(18,"mat-form-field",6),t.TgZ(19,"mat-label"),t._uU(20,"Folio de remisi\xf3n 2:"),t.qZA(),t._UZ(21,"input",10),t.qZA(),t.TgZ(22,"mat-form-field",11),t.TgZ(23,"mat-label"),t._uU(24,"Fecha de la remisi\xf3n:"),t.qZA(),t._UZ(25,"input",12),t.TgZ(26,"mat-datepicker-toggle",13),t.TgZ(27,"mat-icon",14),t._uU(28,"date_range"),t.qZA(),t.qZA(),t._UZ(29,"mat-datepicker",15,16),t.qZA(),t.qZA(),t.TgZ(31,"div",5),t.TgZ(32,"mat-form-field",6),t.TgZ(33,"mat-label"),t._uU(34,"Unidad de medida de volumen:"),t.qZA(),t.TgZ(35,"mat-select",17),t.NdJ("selectionChange",function(h){return y.onChangeVolumeUnitOfMeasure(h.value)}),t.YNc(36,ce,2,2,"mat-option",8),t.qZA(),t.qZA(),t.TgZ(37,"mat-form-field",6),t.TgZ(38,"mat-label"),t._uU(39,"Unidad de medida de temperatura:"),t.qZA(),t.TgZ(40,"mat-select",18),t.NdJ("selectionChange",function(h){return y.onChangeTemperatureUnitOfMeasure(h.value)}),t.YNc(41,ae,2,2,"mat-option",8),t.qZA(),t.qZA(),t.TgZ(42,"mat-form-field",6),t.TgZ(43,"mat-label"),t._uU(44,"Moneda:"),t.qZA(),t.TgZ(45,"mat-select",19),t.NdJ("selectionChange",function(h){return y.onChangeCurrency(h.value)}),t.YNc(46,le,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",5),t.TgZ(48,"mat-form-field",6),t.TgZ(49,"mat-label"),t._uU(50,"Tipo de cambio:"),t.qZA(),t.TgZ(51,"input",20),t.NdJ("keyup",function(h){return y.numericOnly(h)}),t.qZA(),t.qZA(),t.TgZ(52,"mat-form-field",6),t.TgZ(53,"mat-label"),t._uU(54,"Volumen documentado:"),t.qZA(),t.TgZ(55,"input",21),t.NdJ("keyup",function(h){return y.numericOnly(h)}),t.qZA(),t.qZA(),t.TgZ(56,"mat-form-field",6),t.TgZ(57,"mat-label"),t._uU(58,"Volumen documentado en litros:"),t.qZA(),t._UZ(59,"input",22),t.qZA(),t.qZA(),t.TgZ(60,"div",5),t.TgZ(61,"mat-form-field",6),t.TgZ(62,"mat-label"),t._uU(63,"Temperatura documentada:"),t.qZA(),t.TgZ(64,"input",23),t.NdJ("keyup",function(h){return y.numericOnly(h)}),t.qZA(),t.qZA(),t.TgZ(65,"mat-form-field",6),t.TgZ(66,"mat-label"),t._uU(67,"Temperatura documentada en grados celsius"),t.qZA(),t._UZ(68,"input",24),t.qZA(),t.TgZ(69,"mat-form-field",6),t.TgZ(70,"mat-label"),t._uU(71,"Precio por volumen documentado:"),t.qZA(),t.TgZ(72,"input",25),t.NdJ("keyup",function(h){return y.numericOnly(h)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",5),t.TgZ(74,"mat-form-field",6),t.TgZ(75,"mat-label"),t._uU(76,"Precio por volumen en pesos:"),t.qZA(),t._UZ(77,"input",26),t.qZA(),t.TgZ(78,"mat-form-field",6),t.TgZ(79,"mat-label"),t._uU(80,"Precio total documentado"),t.qZA(),t.TgZ(81,"input",27),t.NdJ("keyup",function(h){return y.numericOnly(h)}),t.qZA(),t.qZA(),t.TgZ(82,"mat-form-field",6),t.TgZ(83,"mat-label"),t._uU(84,"Precio total en pesos:"),t.qZA(),t._UZ(85,"input",28),t.qZA(),t.qZA(),t.TgZ(86,"div",5),t.TgZ(87,"mat-form-field",6),t.TgZ(88,"mat-label"),t._uU(89,"Sello:"),t.qZA(),t._UZ(90,"input",29),t.qZA(),t.TgZ(91,"mat-form-field",6),t.TgZ(92,"mat-label"),t._uU(93,"Sello 2:"),t.qZA(),t._UZ(94,"input",30),t.qZA(),t.TgZ(95,"mat-form-field",6),t.TgZ(96,"mat-label"),t._uU(97,"Sello 3:"),t.qZA(),t._UZ(98,"input",31),t.qZA(),t.qZA(),t.TgZ(99,"div",5),t.TgZ(100,"mat-form-field",6),t.TgZ(101,"mat-label"),t._uU(102,"Sello 4:"),t.qZA(),t._UZ(103,"input",32),t.qZA(),t.TgZ(104,"mat-form-field",6),t.TgZ(105,"mat-label"),t._uU(106,"N\xfamero de veh\xedculo:"),t.qZA(),t._UZ(107,"input",33),t.qZA(),t.TgZ(108,"mat-form-field",6),t.TgZ(109,"mat-label"),t._uU(110,"Placa de veh\xedculo:"),t.qZA(),t._UZ(111,"input",34),t.qZA(),t.qZA(),t.TgZ(112,"div",5),t.TgZ(113,"mat-form-field",6),t.TgZ(114,"mat-label"),t._uU(115,"Cantidad de ejes:"),t.qZA(),t.TgZ(116,"input",35),t.NdJ("keyup",function(h){return y.numericOnly(h)}),t.qZA(),t.qZA(),t.TgZ(117,"mat-form-field",6),t.TgZ(118,"mat-label"),t._uU(119,"Nice:"),t.qZA(),t.TgZ(120,"input",36),t.NdJ("keyup",function(h){return y.numericOnly(h)}),t.qZA(),t.qZA(),t.TgZ(121,"mat-form-field",6),t.TgZ(122,"mat-label"),t._uU(123,"N\xfamero de tanque del veh\xedculo:"),t.qZA(),t.TgZ(124,"input",37),t.NdJ("keyup",function(h){return y.numericOnly(h)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(125,ie,3,3,"div",38),t.YNc(126,ne,3,3,"div",38),t.YNc(127,_e,3,3,"div",38),t.TgZ(128,"div",39),t.TgZ(129,"button",40),t.NdJ("click",function(){return y.close()}),t._uU(130,"CANCELAR"),t.qZA(),t.YNc(131,ue,2,1,"button",41),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&x){const S=t.MAs(30);t.xp6(2),t.Q6J("@scaleIn",void 0),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(2),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("formGroup",y.generalFormGroup),t.xp6(6),t.Q6J("ngForOf",y.providers),t.xp6(13),t.Q6J("matDatepicker",S),t.xp6(1),t.Q6J("for",S),t.xp6(10),t.Q6J("ngForOf",y.vmus),t.xp6(5),t.Q6J("ngForOf",y.tmus),t.xp6(5),t.Q6J("ngForOf",y.currencies),t.xp6(79),t.Q6J("ngIf",y.theRemission.TankDeliveryReadings.length>0),t.xp6(1),t.Q6J("ngIf",y.theRemission.WeighingMachineReadings.length>0),t.xp6(1),t.Q6J("ngIf",y.theRemission.ChemicalProductAnalyses.length>0),t.xp6(4),t.Q6J("ngIf",!y.view&&2==y.reception.status)}},directives:[k.i,o.M,w.Hw,i._Y,i.JL,i.sg,Z.xw,Z.SQ,U.KE,Z.yH,U.hX,z.gD,i.JJ,i.u,te.sg,i.Fj,V.Nt,i.Q7,Y.hl,Y.nW,U.R9,Y.Q0,Y.Mq,te.O5,Z.Wh,oe.lW,re.ey,se.q,j.k,$.K],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{overflow:scroll;height:550px;width:800px;margin:20px;border-radius:8px;padding:5px;box-shadow:0 6px 6px -3px #0003,0 10px 14px 1px #00000024,0 4px 18px 3px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{max-width:32.5%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .information-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:100%}.card[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:410px}.card[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.card[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;width:245px}.card[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:0;width:245px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .indented-right[_ngcontent-%COMP%]{margin-left:10px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}.modal-table[_ngcontent-%COMP%]{width:840px;padding:1px}"],data:{animation:[e.X,A.M,I.K]}}),D})()},11635:(X,N,r)=>{r.d(N,{F:()=>fe});var b=r(70655),i=r(5e3),c=r(48966),I=r(86087),e=r(84847),A=r(32075),G=r(20449),n=r(96831),t=r(92198),f=r(88914),P=r(14499),R=r(37425),k=r(8062),o=r(71936),w=r(12644),Z=r(57425),U=r(42877),z=r(27702),te=r(53212),V=r(57e3),Y=r(95288),oe=r(57261),re=r(92824),se=r(3299),j=r(97199),$=r(69808),ee=r(75972),ce=r(47423),ae=r(25245),le=r(77446),ie=r(92181);function ne(O,Q){1&O&&(i.TgZ(0,"fury-card-header-subheading"),i._uU(1," Remisiones disponibles "),i.qZA())}function _e(O,Q){1&O&&(i.TgZ(0,"fury-card-header-subheading"),i._uU(1," Remisiones sin facturas asociadas "),i.qZA())}function ue(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",17),i.NdJ("click",function(){return i.CHM(p),i.oxw().detailRemissions()}),i._UZ(1,"mat-icon",18),i.qZA()}2&O&&(i.xp6(1),i.Q6J("@scaleIn",void 0))}function de(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",17),i.NdJ("click",function(){return i.CHM(p),i.oxw().addToInvoice()}),i._UZ(1,"mat-icon",19),i.qZA()}}function D(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",17),i.NdJ("click",function(){return i.CHM(p),i.oxw().createRemission()}),i.TgZ(1,"mat-icon"),i._uU(2,"add"),i.qZA(),i.qZA()}}function K(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",17),i.NdJ("click",function(){return i.CHM(p),i.oxw().close()}),i.TgZ(1,"mat-icon"),i._uU(2,"close"),i.qZA(),i.qZA()}}function x(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",20),i.NdJ("click",function(){return i.CHM(p),i.oxw().reload()}),i.TgZ(1,"mat-icon"),i._uU(2,"refresh"),i.qZA(),i.qZA()}}function y(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"th",21),i.TgZ(1,"mat-checkbox",22),i.NdJ("change",function(C){i.CHM(p);const W=i.oxw();return C?W.masterToggle():null}),i.qZA(),i.qZA()}if(2&O){const p=i.oxw();i.xp6(1),i.Q6J("checked",p.selection.hasValue()&&p.isAllSelected())("indeterminate",p.selection.hasValue()&&!p.isAllSelected())}}function S(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"td",23),i.TgZ(1,"mat-checkbox",24),i.NdJ("click",function(C){return C.stopPropagation()})("change",function(C){const pe=i.CHM(p).$implicit,ge=i.oxw();return C?ge.selection.toggle(pe):null}),i.qZA(),i.qZA()}if(2&O){const p=Q.$implicit,T=i.oxw();i.xp6(1),i.Q6J("checked",T.selection.isSelected(p))}}function h(O,Q){if(1&O&&(i.TgZ(0,"th",29),i._uU(1),i.qZA()),2&O){const p=i.oxw(2).$implicit;i.xp6(1),i.hij(" ",p.name,"")}}function E(O,Q){if(1&O&&(i.TgZ(0,"td",30),i._uU(1),i.qZA()),2&O){const p=Q.$implicit,T=i.oxw(2).$implicit,C=i.oxw();i.xp6(1),i.Oqu(C.getLabel(T.name,p[T.property]))}}function L(O,Q){if(1&O&&(i.ynx(0,26),i.YNc(1,h,2,1,"th",27),i.YNc(2,E,2,1,"td",28),i.BQk()),2&O){const p=i.oxw().$implicit;i.Q6J("matColumnDef",p.property)}}function u(O,Q){if(1&O&&(i.ynx(0),i.YNc(1,L,3,1,"ng-container",25),i.BQk()),2&O){const p=Q.$implicit;i.xp6(1),i.Q6J("ngIf",p.isModelProperty)}}function a(O,Q){1&O&&i._UZ(0,"th",31)}function s(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",37),i.NdJ("click",function(){i.CHM(p);const C=i.oxw().$implicit;return i.oxw().viewRemission(C)}),i.TgZ(1,"span"),i._uU(2,"Ver"),i.qZA(),i.qZA()}}function l(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",37),i.NdJ("click",function(){i.CHM(p);const C=i.oxw().$implicit;return i.oxw().updateRemission(C)}),i.TgZ(1,"span"),i._uU(2,"Editar"),i.qZA(),i.qZA()}}function d(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",37),i.NdJ("click",function(){i.CHM(p);const C=i.oxw().$implicit;return i.oxw().assignTankDeliveryReadings(C)}),i.TgZ(1,"span"),i._uU(2,"Asociar incremento de combustible"),i.qZA(),i.qZA()}}function M(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",37),i.NdJ("click",function(){i.CHM(p);const C=i.oxw().$implicit;return i.oxw().assignWeighingMachineReadings(C)}),i.TgZ(1,"span"),i._uU(2,"Asociar pesaje"),i.qZA(),i.qZA()}}function F(O,Q){if(1&O){const p=i.EpF();i.TgZ(0,"button",37),i.NdJ("click",function(){i.CHM(p);const C=i.oxw().$implicit;return i.oxw().assignChemicalProductAnalysis(C)}),i.TgZ(1,"span"),i._uU(2,"Asociar an\xe1lisis qu\xedmico"),i.qZA(),i.qZA()}}function B(O,Q){if(1&O&&(i.TgZ(0,"td",32),i.TgZ(1,"button",33),i.NdJ("click",function(T){return T.stopPropagation()}),i.TgZ(2,"mat-icon"),i._uU(3,"more_horiz"),i.qZA(),i.qZA(),i.TgZ(4,"mat-menu",34,35),i.YNc(6,s,3,0,"button",36),i.YNc(7,l,3,0,"button",36),i.YNc(8,d,3,0,"button",36),i.YNc(9,M,3,0,"button",36),i.YNc(10,F,3,0,"button",36),i.qZA(),i.qZA()),2&O){const p=Q.$implicit,T=i.MAs(5),C=i.oxw();i.xp6(1),i.Q6J("matMenuTriggerFor",T),i.xp6(5),i.Q6J("ngIf",C.view),i.xp6(1),i.Q6J("ngIf",2==C.reception.status&&!C.view),i.xp6(1),i.Q6J("ngIf",2!=C.reception.documentation_tracking_type&&2==C.reception.status&&2==p.status&&!C.view),i.xp6(1),i.Q6J("ngIf",2!=C.reception.documentation_tracking_type&&2==C.reception.status&&2==p.status&&!C.view),i.xp6(1),i.Q6J("ngIf",2!=C.reception.documentation_tracking_type&&2==C.reception.status&&2==p.status&&!C.view)}}function H(O,Q){1&O&&i._UZ(0,"tr",38)}function me(O,Q){1&O&&i._UZ(0,"tr",14)}let fe=(()=>{class O{constructor(p,T,C,W,pe,ge,Ze,Te){this.data=p,this.dialogRef=T,this.dialog=C,this._remissionsService=W,this._crePermissionsService=pe,this.snackbar=ge,this._receptionsService=Ze,this.router=Te,this.subject$=new n.t(1),this.data$=this.subject$.asObservable(),this.selection=new G.Ov(!0,[]),this.remissions=[],this.vmus=[],this.tmus=[],this.currencies=[],this.providers=[],this.reception=new o.T,this.recep=new i.vpe,this.columns=[{name:"Checkbox",property:"select",visible:!0},{name:"Id remisi\xf3n",property:"remission_id",visible:!1,isModelProperty:!0},{name:"Proveedor",property:"cre_permission_id",visible:!0,isModelProperty:!0},{name:"Folio de remisi\xf3n",property:"identification_number",visible:!0,isModelProperty:!0},{name:"Folio de remisi\xf3n 2",property:"identification_number1",visible:!1,isModelProperty:!0},{name:"Fecha de remisi\xf3n",property:"remission_date",visible:!0,isModelProperty:!0},{name:"Unidad de medida de volumen",property:"volume_unit_of_measure_id",visible:!1,isModelProperty:!0},{name:"Unidad de medidad de temperatura",property:"temperature_unit_of_measure_id",visible:!1,isModelProperty:!0},{name:"Moneda",property:"currency_id",visible:!1,isModelProperty:!0},{name:"Tipo de cambio",property:"currency_exchange_rate",visible:!1,isModelProperty:!0},{name:"Volumen en documento",property:"remission_volume",visible:!1,isModelProperty:!0},{name:"Volumen en litros",property:"remission_volume_liters",visible:!0,isModelProperty:!0},{name:"Temperatura en documento",property:"remission_temperature",visible:!1,isModelProperty:!0},{name:"Temperatura en celsius",property:"remission_temperature_celsius",visible:!1,isModelProperty:!0},{name:"Precio por volumen en documento",property:"remission_ppv",visible:!1,isModelProperty:!0},{name:"Precio por volumen en pesos",property:"remission_ppv_pesos",visible:!0,isModelProperty:!0},{name:"Precio total en documento",property:"remission_total_price",visible:!1,isModelProperty:!0},{name:"Precio total en pesos",property:"remission_total_price_pesos",visible:!0,isModelProperty:!0},{name:"Sello",property:"stamp1",visible:!1,isModelProperty:!0},{name:"Sello 2",property:"stamp2",visible:!1,isModelProperty:!0},{name:"Sello 3",property:"stamp3",visible:!1,isModelProperty:!0},{name:"Sello 4",property:"stamp4",visible:!1,isModelProperty:!0},{name:"N\xfamero de veh\xedculo",property:"vehicle_number",visible:!1,isModelProperty:!0},{name:"Placas",property:"vehicle_plate",visible:!1,isModelProperty:!0},{name:"N\xfamero de ejes",property:"vehicle_axles_number",visible:!1,isModelProperty:!0},{name:"Nice",property:"nice",visible:!1,isModelProperty:!0},{name:"N\xfamero de tanque del veh\xedculo",property:"vehicle_tank_number",visible:!1,isModelProperty:!0},{name:"\xdaltima actualizaci\xf3n",property:"timestamp",visible:!1,isModelProperty:!0},{name:"Estatus",property:"status",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(p,T){if(null!=p){if("Unidad de medida de volumen"==p){let C=this.vmus.find(W=>W.id===T);return C?C.unit_of_measure:T}if("Unidad de medidad de temperatura"==p){let C=this.tmus.find(W=>W.id===T);return C?C.unit_of_measure:T}if("Moneda"==p){let C=this.currencies.find(W=>W.id===T);return C?C.currency:T}if("Estatus"!=p){if("Proveedor"==p){let C=this.providers.find(W=>+W.permission_id==+T);return C?C.provider_name:T}return T}switch(+T){case 2:return"Activa";case 1:return"Asignada";case 0:return"Archivada";default:return"No disponible"}}}get visibleColumns(){return this.columns.filter(p=>p.visible).map(p=>p.property)}getData(){this.view?this.inv?(this.remissions=this.invoice.Remissions,this.dataSource=new A.by(this.invoice.Remissions)):(this.remissions=this.reception.Remissions,this.dataSource=new A.by(this.reception.Remissions)):this._remissionsService.getAll("?reception_id="+this.reception.reception_id+"&site_code="+this.reception.site_code+"&cre_permission_id="+this.reception.cre_permission_provider_id+"&status="+(this.data.not_assigned?2:"1,2")+"&invoice_id="+this.invoice.invoice_id).subscribe(C=>{this.remissions=C,this.dataSource=new A.by(C)}),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnInit(){return(0,b.mG)(this,void 0,void 0,function*(){this.dataSource=new A.by,this.view?(this.reception=this.rec,this.invoice=this.inv?this.inv:new k.m(null)):(this.view=!!this.data.view,this.reception=new o.T(this.data.reception),this.invoice=new k.m(this.data.invoice)),this.getData(),this.currencies=yield this.getCurrencies(),this.tmus=yield this.getTemperatureUnitsOfMeasure(),this.vmus=yield this.getVolumeUnitsOfMeasure(),this.providers=yield this.getProviders(),this.data$.pipe((0,t.h)(p=>!!p)).subscribe(p=>{this.remissions=p,this.dataSource.data=p})})}ngOnChanges(p){for(const T in p)this[T]=p[T].currentValue,this.reload()}getVolumeUnitsOfMeasure(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("volume").toPromise()})}getTemperatureUnitsOfMeasure(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("temperature").toPromise()})}getCurrencies(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCurrencies().toPromise()})}getProviders(){return(0,b.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getAll().toPromise()})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}assignTankDeliveryReadings(p){this.dialog.open(U.q,{data:{reception:this.reception,remission:p}}).afterClosed().subscribe(T=>{T&&(this.reception=T,this.remissions=this.reception.Remissions,this.dataSource=new A.by(this.reception.Remissions),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator)})}assignWeighingMachineReadings(p){this.dialog.open(z.k,{data:{reception:this.reception,remission:p}}).afterClosed().subscribe(T=>{T&&(this.reception=T,this.remissions=this.reception.Remissions,this.dataSource=new A.by(this.reception.Remissions),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator)})}assignChemicalProductAnalysis(p){this.dialog.open(te.K,{data:{reception:this.reception,remission:p}}).afterClosed().subscribe(T=>{T&&(this.reception=T,this.remissions=this.reception.Remissions,this.dataSource=new A.by(this.reception.Remissions),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator)})}changeRemissionStatus(p){}onFilterChange(p){!this.dataSource||(p=(p=p.trim()).toLowerCase(),this.dataSource.filter=p)}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}close(){this.dialogRef.close(this.reception)}ngOnDestroy(){}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(p=>this.selection.select(p))}createRemission(){this.dialog.open(Z.L,{data:{reception:this.reception,remission:this.remission,view:!1}}).afterClosed().subscribe(p=>{if(p){var T=new w.O(p.remission);this.reception.reception_id=p.reception.reception_id,this.reception.Remissions.push(T),this.subject$.next(this.remissions),this.getData(),this.data$.pipe((0,t.h)(C=>!!C)).subscribe(C=>{this.remissions=C,this.dataSource.data=C},C=>{this.snackbar.open(C.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}this.recep.emit(this.reception)})}updateRemission(p){this._remissionsService.getRemission(p.remission_id,this.reception.reception_id).subscribe(T=>{this.remission=T,this.dialog.open(Z.L,{data:{reception:this.reception,remission:this.remission,view:!1}}).afterClosed().subscribe(C=>{C&&(this.reception.reception_id=C.reception.reception_id,this.reception.Remissions[this.reception.Remissions.findIndex(W=>W.remission_id==C.remission.remission_id)]=C.remission,this.subject$.next(this.remissions),this.getData(),this.data$.pipe((0,t.h)(W=>!!W)).subscribe(W=>{this.remissions=W,this.dataSource.data=W}))}),this.recep.emit(this.reception)},T=>{this.snackbar.open(T.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}viewRemission(p){var T=this.invoice.invoice_id>0?this.invoice.Remissions[this.invoice.Remissions.findIndex(C=>C.remission_id=p.remission_id)]:this.reception.Remissions[this.reception.Remissions.findIndex(C=>C.remission_id=p.remission_id)];this.dialog.open(Z.L,{data:{reception:this.reception,remission:T,view:!0}}).afterClosed().subscribe(C=>{C&&(this.reception.reception_id=C.reception.reception_id,this.reception.Remissions[this.reception.Remissions.findIndex(W=>W.remission_id==C.remission.remission_id)]=C.remission,this.subject$.next(this.remissions),this.view=!0,this.getData(),this.data$.pipe((0,t.h)(W=>!!W)).subscribe(W=>{this.remissions=W,this.dataSource.data=W})),this.recep.emit(this.reception)})}addToInvoice(){this._remissionsService.assign(this.reception,this.selection.selected,this.invoice,"add").subscribe(p=>{this.selection.selected.forEach(T=>{if(this.remission=new w.O(T),this.invoice){this.reception.Invoices.find(W=>W.invoice_id==this.invoice.invoice_id).Remissions.push(this.remission);var C=this.reception.Remissions.findIndex(W=>W.remission_id==this.remission.remission_id);this.reception.Remissions.splice(C,1)}}),this.snackbar.open(p.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.reception),this.recep.emit(this.reception)},p=>{this.snackbar.open(p.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}removeFromInvoice(){this._remissionsService.assign(this.reception,this.selection.selected,this.invoice,"from").subscribe(p=>{this.selection.selected.forEach(T=>{this.remission=new w.O(T),this.invoice&&this.reception.Invoices.find(C=>C.invoice_id==this.invoice.invoice_id).Remissions.push(this.remission)}),this.snackbar.open(p.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.reception),this.recep.emit(this.reception)},p=>{this.snackbar.open(p.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}detailRemissions(){this.dialog.open(O,{data:{reception:this.reception,invoice:null,view:!1,not_assigned:!0}}).afterClosed().subscribe(p=>{p&&(this.reception=p,this.getData(),this.data$.pipe((0,t.h)(T=>!!T)).subscribe(T=>{this.remissions=T,this.dataSource.data=T})),this.recep.emit(this.reception)})}}return O.\u0275fac=function(p){return new(p||O)(i.Y36(c.WI),i.Y36(c.so),i.Y36(c.uw),i.Y36(V.D),i.Y36(Y.w),i.Y36(oe.ux),i.Y36(re.J),i.Y36(se.F0))},O.\u0275cmp=i.Xpm({type:O,selectors:[["remissions-widget"]],viewQuery:function(p,T){if(1&p&&(i.Gf(I.NW,7),i.Gf(e.YE,7)),2&p){let C;i.iGM(C=i.CRH())&&(T.paginator=C.first),i.iGM(C=i.CRH())&&(T.sort=C.first)}},inputs:{view:"view",rec:"rec",inv:"inv",columns:"columns"},outputs:{recep:"recep"},features:[i.TTD],decls:26,vars:13,consts:[[4,"ngIf"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"card-content"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","style","width: 30px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row",""],[1,"paginator",3,"pageSize"],[3,"isLoading"],["mat-icon-button","","type","button",3,"click"],["svgIcon","folder_details"],["svgIcon","attach_docs"],["mat-icon-button","",3,"click"],["mat-header-cell","",2,"width","30px"],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","","style","padding: 7px",4,"matHeaderCellDef"],["mat-cell","","style","padding: 7px",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",2,"padding","7px"],["mat-cell","",2,"padding","7px"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-header-row",""]],template:function(p,T){1&p&&(i.TgZ(0,"fury-card"),i.TgZ(1,"fury-card-header"),i.TgZ(2,"fury-card-header-heading"),i._uU(3," Remisiones "),i.qZA(),i.YNc(4,ne,2,0,"fury-card-header-subheading",0),i.YNc(5,_e,2,0,"fury-card-header-subheading",0),i.TgZ(6,"fury-card-header-actions"),i.YNc(7,ue,2,1,"button",1),i.YNc(8,de,2,0,"button",1),i.YNc(9,D,3,0,"button",1),i.YNc(10,K,3,0,"button",1),i.YNc(11,x,3,0,"button",2),i.qZA(),i.qZA(),i.TgZ(12,"fury-card-content",3),i.TgZ(13,"table",4),i.ynx(14,5),i.YNc(15,y,2,2,"th",6),i.YNc(16,S,2,1,"td",7),i.BQk(),i.YNc(17,u,2,1,"ng-container",8),i.ynx(18,9),i.YNc(19,a,1,0,"th",10),i.YNc(20,B,11,6,"td",11),i.BQk(),i.YNc(21,H,1,0,"tr",12),i.YNc(22,me,1,0,"tr",13),i._UZ(23,"tr",14),i.qZA(),i._UZ(24,"mat-paginator",15),i.qZA(),i._UZ(25,"fury-loading-overlay",16),i.qZA()),2&p&&(i.xp6(4),i.Q6J("ngIf",!T.view),i.xp6(1),i.Q6J("ngIf",T.view),i.xp6(2),i.Q6J("ngIf",T.view&&2==T.reception.status&&T.rec.Remissions.length>0),i.xp6(1),i.Q6J("ngIf",0!=T.invoice.invoice_id&&!T.view&&2==T.reception.status),i.xp6(1),i.Q6J("ngIf",0==T.invoice.invoice_id&&!T.view&&2==T.reception.status),i.xp6(1),i.Q6J("ngIf",!T.view),i.xp6(1),i.Q6J("ngIf",!T.view&&2==T.reception.status),i.xp6(2),i.Q6J("dataSource",T.dataSource),i.xp6(4),i.Q6J("ngForOf",T.columns),i.xp6(4),i.Q6J("matHeaderRowDef",T.visibleColumns),i.xp6(1),i.Q6J("matRowDefColumns",T.visibleColumns),i.xp6(2),i.Q6J("pageSize",T.pageSize),i.xp6(1),i.Q6J("isLoading",T.isLoading))},directives:[j.i0,j.$X,j.eP,$.O5,j.OA,j.z8,A.BZ,e.YE,A.w1,A.fO,A.Dz,$.sg,A.as,A.nj,A.Gk,I.NW,ee.d,j.lO,ce.lW,ae.Hw,A.ge,le.oG,A.ev,e.nU,ie.p6,ie.VK,ie.OP,A.XQ],styles:[".fury-card[_ngcontent-%COMP%]{background:#195fc7;color:#f5f5f5}.fury-card[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}.gain[_ngcontent-%COMP%]{margin-left:8px;font:var(--font-caption)}.gain[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;line-height:18px}.card-content[_ngcontent-%COMP%]{padding:0;overflow:scroll}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]{padding:0 24px 24px}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);text-transform:uppercase}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-display-1)}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{margin-left:3px;font-size:32px;height:32px;width:32px}.card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:170px;max-width:100%;display:flex;flex:1;position:relative}"],data:{animation:[f.M,P.X,R.K]}}),O})()},17250:(X,N,r)=>{r.d(N,{U:()=>R});var b=r(48966),i=r(88914),c=r(37425),I=r(14499),e=r(5e3),A=r(59968),G=r(36551),n=r(25245),t=r(30277),f=r(93075),P=r(47423);let R=(()=>{class k{constructor(w,Z){this.data=w,this.dialogRef=Z,Z.disableClose=!0}ngOnInit(){console.log(this.data)}close(){this.dialogRef.close()}}return k.\u0275fac=function(w){return new(w||k)(e.Y36(b.WI),e.Y36(b.so))},k.\u0275cmp=e.Xpm({type:k,selectors:[["fury-form-wizard"]],decls:118,vars:16,consts:[[1,"title"],["svgIcon","tank_delivery_reading"],["fxLayout","column","fxLayoutAlign","start center",2,"border-width","thin","border-style","solid","margin-top","10px"],[1,"card"],[1,"heading"],[2,"width","500px"],[2,"width","60px"],[2,"text-align","right"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"]],template:function(w,Z){1&w&&(e.TgZ(0,"fury-page"),e.TgZ(1,"fury-title",0),e._UZ(2,"mat-icon",1),e.TgZ(3,"span"),e._uU(4,"Incremento de combustible"),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"form"),e.TgZ(8,"div",4),e._uU(9,"Resultados:"),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"tr"),e.TgZ(12,"td"),e.TgZ(13,"strong"),e._uU(14,"Id:"),e.qZA(),e.qZA(),e.TgZ(15,"td",6),e._uU(16,"\xa0"),e.qZA(),e.TgZ(17,"td",7),e._uU(18),e.qZA(),e.qZA(),e.TgZ(19,"tr"),e.TgZ(20,"td"),e.TgZ(21,"strong"),e._uU(22,"Producto:"),e.qZA(),e.qZA(),e.TgZ(23,"td"),e._uU(24,"\xa0"),e.qZA(),e.TgZ(25,"td",7),e._uU(26),e.qZA(),e.qZA(),e.TgZ(27,"tr"),e.TgZ(28,"td"),e.TgZ(29,"strong"),e._uU(30,"Estaci\xf3n:"),e.qZA(),e.qZA(),e.TgZ(31,"td"),e._uU(32,"\xa0"),e.qZA(),e.TgZ(33,"td",7),e._uU(34),e.qZA(),e.qZA(),e.TgZ(35,"tr"),e.TgZ(36,"td"),e.TgZ(37,"strong"),e._uU(38,"Tanque:"),e.qZA(),e.qZA(),e.TgZ(39,"td"),e._uU(40,"\xa0"),e.qZA(),e.TgZ(41,"td",7),e._uU(42),e.qZA(),e.qZA(),e.TgZ(43,"tr"),e.TgZ(44,"td"),e.TgZ(45,"strong"),e._uU(46,"N\xfamero de tanque:"),e.qZA(),e.qZA(),e.TgZ(47,"td"),e._uU(48,"\xa0"),e.qZA(),e.TgZ(49,"td",7),e._uU(50),e.qZA(),e.qZA(),e.TgZ(51,"tr"),e.TgZ(52,"td"),e.TgZ(53,"strong"),e._uU(54,"Volumen inicial:"),e.qZA(),e.qZA(),e.TgZ(55,"td"),e._uU(56,"\xa0"),e.qZA(),e.TgZ(57,"td",7),e._uU(58),e.qZA(),e.qZA(),e.TgZ(59,"tr"),e.TgZ(60,"td"),e.TgZ(61,"strong"),e._uU(62,"Volumen final:"),e.qZA(),e.qZA(),e.TgZ(63,"td"),e._uU(64,"\xa0"),e.qZA(),e.TgZ(65,"td",7),e._uU(66),e.qZA(),e.qZA(),e.TgZ(67,"tr"),e.TgZ(68,"td"),e.TgZ(69,"strong"),e._uU(70,"Volumen descarga:"),e.qZA(),e.qZA(),e.TgZ(71,"td"),e._uU(72,"\xa0"),e.qZA(),e.TgZ(73,"td",7),e._uU(74),e.qZA(),e.qZA(),e.TgZ(75,"tr"),e.TgZ(76,"td"),e.TgZ(77,"strong"),e._uU(78,"Inicio de descarga:"),e.qZA(),e.qZA(),e.TgZ(79,"td"),e._uU(80,"\xa0"),e.qZA(),e.TgZ(81,"td",7),e._uU(82),e.qZA(),e.qZA(),e.TgZ(83,"tr"),e.TgZ(84,"td"),e.TgZ(85,"strong"),e._uU(86,"Fin de descarga:"),e.qZA(),e.qZA(),e.TgZ(87,"td"),e._uU(88,"\xa0"),e.qZA(),e.TgZ(89,"td",7),e._uU(90),e.qZA(),e.qZA(),e.TgZ(91,"tr"),e.TgZ(92,"td"),e.TgZ(93,"strong"),e._uU(94,"Temperatura inicial:"),e.qZA(),e.qZA(),e.TgZ(95,"td"),e._uU(96,"\xa0"),e.qZA(),e.TgZ(97,"td",7),e._uU(98),e.qZA(),e.qZA(),e.TgZ(99,"tr"),e.TgZ(100,"td"),e.TgZ(101,"strong"),e._uU(102,"Temperatura final:"),e.qZA(),e.qZA(),e.TgZ(103,"td"),e._uU(104,"\xa0"),e.qZA(),e.TgZ(105,"td",7),e._uU(106),e.qZA(),e.qZA(),e.TgZ(107,"tr"),e.TgZ(108,"td"),e.TgZ(109,"strong"),e._uU(110,"Origen del registro:"),e.qZA(),e.qZA(),e.TgZ(111,"td"),e._uU(112,"\xa0"),e.qZA(),e.TgZ(113,"td",7),e._uU(114),e.qZA(),e.qZA(),e.qZA(),e.TgZ(115,"div",8),e.TgZ(116,"button",9),e.NdJ("click",function(){return Z.close()}),e._uU(117,"CERRAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&w&&(e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(3),e.Q6J("@fadeInUp",void 0),e.xp6(12),e.Oqu(Z.data.reception_id),e.xp6(8),e.Oqu(Z.data.product_name),e.xp6(8),e.Oqu(Z.data.station_name),e.xp6(8),e.Oqu(Z.data.tank_name),e.xp6(8),e.Oqu(Z.data.tank_number),e.xp6(8),e.Oqu(Z.data.start_volume),e.xp6(8),e.Oqu(Z.data.end_volume),e.xp6(8),e.Oqu(Z.data.volume),e.xp6(8),e.Oqu(Z.data.start_delivery_timestamp),e.xp6(8),e.Oqu(Z.data.end_delivery_timestamp),e.xp6(8),e.Oqu(Z.data.start_temp),e.xp6(8),e.Oqu(Z.data.end_temp),e.xp6(8),e.Oqu(Z.data.register_origin))},directives:[A.i,G.M,n.Hw,t.xw,t.Wh,f._Y,f.JL,f.F,t.SQ,P.lW],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{overflow:scroll;margin:5px;max-width:100%;max-height:400px;border-radius:8px;padding:8px}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title);vertical-align:middle;background-color:#add8e6}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:14px;padding:24px 8px 0}"],data:{animation:[I.X,i.M,c.K]}}),k})()},42877:(X,N,r)=>{r.d(N,{q:()=>u});var b=r(70655),i=r(5e3),c=r(48966),I=r(86087),e=r(84847),A=r(32075),G=r(20449),n=r(96831),t=r(92198),f=r(88914),P=r(14499),R=r(37425),k=r(17250);class o{constructor(s){this.tank_delivery_reading_id=s&&s.tank_delivery_reading_id||null,this.reception_unique_id=s&&s.reception_unique_id||null,this.tank_id=s&&s.tank_id||null,this.start_volume=s&&s.start_volume||null,this.end_volume=s&&s.end_volume||null,this.start_temp=s&&s.start_temp||null,this.volume=s&&s.volume||null,this.end_temp=s&&s.end_temp||null,this.start_delivery_timestamp=s&&s.start_delivery_timestamp||null,this.end_delivery_timestamp=s&&s.end_delivery_timestamp||null,this.rui=s&&s.rui||null,this.status=s&&s.status||null,this.start_tc_volume=s&&s.start_tc_volume||null,this.end_tc_volume=s&&s.end_tc_volume||null,this.start_height=s&&s.start_height||null,this.end_height=s&&s.end_height||null,this.start_water=s&&s.start_water||null,this.end_water=s&&s.end_water||null,this.site_code=s&&s.site_code||null,this.station_name=s&&s.station_name||null,this.tank_name=s&&s.tank_name||null,this.tank_number=s&&s.tank_number||null,this.register_origin=s&&s.register_origin||null,this.reception_id=s&&s.reception_id||null,this.ho_product_id=s&&s.ho_product_id||null,this.product_name=s&&s.product_name||null,this.color=s&&s.color||null}}var w=r(40520),Z=r(98545),U=r(33344);let z=(()=>{class a{constructor(l,d){this.http=l,this.tokenStorage=d}getHeaders(){var l=new w.WM,d=this.tokenStorage.getToken();return l.set("token",d||"{}")}getAll(l,d,M,F,B){var H=this.getHeaders(),me="?site_code="+l;return me+="&status="+d,me+=M?"&reception_id="+M:"",me+=F?"&remission_id="+F:"",this.http.get(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.TANK_DELIVERY_READINGS+(me+=B?"&invoice_id="+B:""),{headers:H})}assign(l,d,M,F){var B=this.getHeaders(),H="?reception_id="+l.reception_id;return H+="&site_code="+l.site_code,H+=M?"&invoice_id="+M.invoice_id:"",this.http.put(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.TANK_DELIVERY_READINGS+(H+=F?"&remission_id="+F.remission_id:""),d,{headers:B})}delete(l){var d=this.getHeaders();return this.http.delete(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.TANK_DELIVERY_READINGS+"/"+l.tank_delivery_reading_id,{headers:d})}}return a.\u0275fac=function(l){return new(l||a)(i.LFG(w.eN),i.LFG(U.i))},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var te=r(92824),V=r(57261),Y=r(97199),oe=r(69808),re=r(75972),se=r(47423),j=r(25245),$=r(77446),ee=r(92181);function ce(a,s){if(1&a&&(i.TgZ(0,"fury-card-header-subheading"),i._uU(1),i.qZA()),2&a){const l=i.oxw();i.xp6(1),i.hij(" ",l.title," disponibles ")}}function ae(a,s){if(1&a&&(i.TgZ(0,"fury-card-header-subheading"),i._uU(1),i.qZA()),2&a){const l=i.oxw();i.xp6(1),i.hij(" ",l.title," asignados ")}}function le(a,s){if(1&a){const l=i.EpF();i.TgZ(0,"button",16),i.NdJ("click",function(){return i.CHM(l),i.oxw().addToDocument()}),i._UZ(1,"mat-icon",17),i.qZA()}2&a&&(i.xp6(1),i.Q6J("@scaleIn",void 0))}function ie(a,s){if(1&a){const l=i.EpF();i.TgZ(0,"button",16),i.NdJ("click",function(){return i.CHM(l),i.oxw().close()}),i.TgZ(1,"mat-icon"),i._uU(2,"close"),i.qZA(),i.qZA()}}function ne(a,s){if(1&a){const l=i.EpF();i.TgZ(0,"button",18),i.NdJ("click",function(){return i.CHM(l),i.oxw().reload()}),i.TgZ(1,"mat-icon"),i._uU(2,"refresh"),i.qZA(),i.qZA()}}function _e(a,s){if(1&a){const l=i.EpF();i.TgZ(0,"th",19),i.TgZ(1,"mat-checkbox",20),i.NdJ("change",function(M){i.CHM(l);const F=i.oxw();return M?F.masterToggle():null}),i.qZA(),i.qZA()}if(2&a){const l=i.oxw();i.xp6(1),i.Q6J("checked",l.selection.hasValue()&&l.isAllSelected())("indeterminate",l.selection.hasValue()&&!l.isAllSelected())}}function ue(a,s){if(1&a){const l=i.EpF();i.TgZ(0,"td",21),i.TgZ(1,"mat-checkbox",22),i.NdJ("click",function(M){return M.stopPropagation()})("change",function(M){const B=i.CHM(l).$implicit,H=i.oxw();return M?H.selection.toggle(B):null}),i.qZA(),i.qZA()}if(2&a){const l=s.$implicit,d=i.oxw();i.xp6(1),i.Q6J("checked",d.selection.isSelected(l))}}function de(a,s){if(1&a&&(i.TgZ(0,"th",27),i._uU(1),i.qZA()),2&a){const l=i.oxw(2).$implicit;i.xp6(1),i.hij(" ",l.name,"")}}function D(a,s){if(1&a&&(i.TgZ(0,"td",28),i._uU(1),i.qZA()),2&a){const l=s.$implicit,d=i.oxw(2).$implicit,M=i.oxw();i.xp6(1),i.Oqu(M.getLabel(d.name,l[d.property]))}}function K(a,s){if(1&a&&(i.ynx(0,24),i.YNc(1,de,2,1,"th",25),i.YNc(2,D,2,1,"td",26),i.BQk()),2&a){const l=i.oxw().$implicit;i.Q6J("matColumnDef",l.property)}}function x(a,s){if(1&a&&(i.ynx(0),i.YNc(1,K,3,1,"ng-container",23),i.BQk()),2&a){const l=s.$implicit;i.xp6(1),i.Q6J("ngIf",l.isModelProperty)}}function y(a,s){1&a&&i._UZ(0,"th",29)}function S(a,s){if(1&a){const l=i.EpF();i.TgZ(0,"button",34),i.NdJ("click",function(){i.CHM(l);const M=i.oxw().$implicit;return i.oxw().deattach(M)}),i.TgZ(1,"span"),i._uU(2,"Desasociar"),i.qZA(),i.qZA()}}function h(a,s){if(1&a){const l=i.EpF();i.TgZ(0,"td",30),i.TgZ(1,"button",31),i.NdJ("click",function(M){return M.stopPropagation()}),i.TgZ(2,"mat-icon"),i._uU(3,"more_horiz"),i.qZA(),i.qZA(),i.TgZ(4,"mat-menu",32,33),i.TgZ(6,"button",34),i.NdJ("click",function(){const F=i.CHM(l).$implicit;return i.oxw().show(F)}),i.TgZ(7,"span"),i._uU(8,"Ver"),i.qZA(),i.qZA(),i.YNc(9,S,3,0,"button",35),i.qZA(),i.qZA()}if(2&a){const l=s.$implicit,d=i.MAs(5),M=i.oxw();i.xp6(1),i.Q6J("matMenuTriggerFor",d),i.xp6(8),i.Q6J("ngIf",2==M.reception.status&&2!=l.status)}}function E(a,s){1&a&&i._UZ(0,"tr",36)}function L(a,s){1&a&&i._UZ(0,"tr",37)}let u=(()=>{class a{constructor(l,d,M,F,B,H){this.data=l,this.dialog=d,this.dialogRef=M,this._tankDeliveryReadingsService=F,this._receptionsService=B,this.snackbar=H,this.subject$=new n.t(1),this.data$=this.subject$.asObservable(),this.selection=new G.Ov(!0,[]),this.tank_delivery_readings=[],this.title="Incrementos de combustible",this.remis=new i.vpe,this.columns=[{name:"Checkbox",property:"select",visible:!0},{name:"Id",property:"tank_delivery_reading_id",visible:!0,isModelProperty:!0},{name:"Id \xfanico de recepci\xf3n",property:"reception_unique_id",visible:!1,isModelProperty:!0},{name:"Id tanque",property:"tank_id",visible:!1,isModelProperty:!0},{name:"Volumen inicial",property:"start_volume",visible:!0,isModelProperty:!0},{name:"Volumen final",property:"end_volume",visible:!0,isModelProperty:!0},{name:"Volumen",property:"volume",visible:!0,isModelProperty:!0},{name:"Temperatura inicial",property:"start_temp",visible:!1,isModelProperty:!0},{name:"Temperatura final",property:"end_temp",visible:!1,isModelProperty:!0},{name:"Inicio de lectura",property:"start_delivery_timestamp",visible:!0,isModelProperty:!0},{name:"Fin de lectura",property:"end_delivery_timestamp",visible:!0,isModelProperty:!0},{name:"RUI",property:"rui",visible:!1,isModelProperty:!0},{name:"Estatus",property:"status",visible:!0,isModelProperty:!0},{name:"Volumen TC inicial",property:"start_tc_volume",visible:!1,isModelProperty:!0},{name:"Volumen TC final",property:"end_tc_volume",visible:!1,isModelProperty:!0},{name:"Altura inicial",property:"start_height",visible:!1,isModelProperty:!0},{name:"Altura final",property:"end_height",visible:!1,isModelProperty:!0},{name:"Volumen de agua inicial",property:"start_water",visible:!1,isModelProperty:!0},{name:"Volumen de agua final",property:"end_water",visible:!1,isModelProperty:!0},{name:"Id estaci\xf3n",property:"site_code",visible:!1,isModelProperty:!0},{name:"Estaci\xf3n",property:"station_name",visible:!0,isModelProperty:!0},{name:"N\xfamero de tanque",property:"tank_number",visible:!0,isModelProperty:!0},{name:"Nombre de tanque",property:"tank_name",visible:!0,isModelProperty:!0},{name:"Id recepci\xf3n",property:"reception_id",visible:!1,isModelProperty:!0},{name:"Id producto",property:"ho_product_id",visible:!1,isModelProperty:!0},{name:"Producto",property:"product_name",visible:!0,isModelProperty:!0},{name:"Origen del registro",property:"register_origin",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(l,d){if(null!=l)return"Estatus"==l?2==d?"Disponible":"Asignado":"Origen del registro"==l?"TLS"==d?"TLS":"Bomba":d}get visibleColumns(){return this.columns.filter(l=>l.visible).map(l=>l.property)}getRemoteData(){this._tankDeliveryReadingsService.getAll(this.reception.site_code,this.reception.status,this.reception.reception_id,null!=this.remission?this.remission.remission_id:null,null!=this.invoice?this.invoice.invoice_id:null).subscribe(l=>{this.tank_delivery_readings=l,this.dataSource=new A.by(l),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},l=>{console.log(l)})}getData(){this.invoice?(this.tank_delivery_readings=this.invoice.TankDeliveryReadings,this.dataSource=new A.by(this.invoice.TankDeliveryReadings)):this.remission&&(this.tank_delivery_readings=this.remission.TankDeliveryReadings,this.dataSource=new A.by(this.remission.TankDeliveryReadings)),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnInit(){return(0,b.mG)(this,void 0,void 0,function*(){this.dataSource=new A.by,this.view?(this.reception=this.rec,this.getData()):(this.reception=this.data.reception,this.remission=this.data.remission?this.data.remission:null,this.invoice=this.data.invoice?this.data.invoice:null,this.getRemoteData()),this.data$.pipe((0,t.h)(l=>!!l)).subscribe(l=>{this.tank_delivery_readings=l,this.dataSource.data=l})})}ngOnChanges(l){for(const d in l)this[d]=l[d].currentValue,this.reload()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}addToDocument(){this._tankDeliveryReadingsService.assign(this.reception,this.selection.selected,this.invoice,this.remission).subscribe(l=>{this.selection.selected.forEach(d=>{this.tank_delivery_reading=new o(d),this.invoice?this.invoice.Remissions.length>0?this.reception.Invoices.find(M=>M.invoice_id==this.invoice.invoice_id).Remissions.find(M=>M.remission_id==this.remission.remission_id).TankDeliveryReadings.push(this.tank_delivery_reading):this.reception.Invoices.find(M=>M.invoice_id==this.invoice.invoice_id).TankDeliveryReadings.push(this.tank_delivery_reading):this.reception.Remissions.find(M=>M.remission_id==this.remission.remission_id).TankDeliveryReadings.push(this.tank_delivery_reading)}),this.snackbar.open(l.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.reception)},l=>{this.snackbar.open(l.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}close(){this.dialogRef.close()}onFilterChange(l){!this.dataSource||(l=(l=l.trim()).toLowerCase(),this.dataSource.filter=l)}show(l){this.dialog.open(k.U,{data:l}).afterClosed().subscribe(d=>{})}deattach(l){this._receptionsService.dettach({reception_id:this.data.reception.reception_id,invoice_id:void 0!==this.data.invoice?this.data.invoice.invoice_id:null,remission_id:void 0!==this.data.remission?this.data.remission.remission_id:null,tank_delivery_reading_id:l.tank_delivery_reading_id}).subscribe(M=>{this.remission.TankDeliveryReadings.splice(this.remission.TankDeliveryReadings.findIndex(F=>F.tank_delivery_reading_id=l.tank_delivery_reading_id),1),this.snackbar.open(M.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.reload()},M=>{this.snackbar.open(M.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}delete(l){this._tankDeliveryReadingsService.delete(l).subscribe(d=>{this.getRemoteData(),this.snackbar.open(d.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.reception)},d=>{this.snackbar.open(d.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}ngOnDestroy(){}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(l=>this.selection.select(l))}}return a.\u0275fac=function(l){return new(l||a)(i.Y36(c.WI),i.Y36(c.uw),i.Y36(c.so),i.Y36(z),i.Y36(te.J),i.Y36(V.ux))},a.\u0275cmp=i.Xpm({type:a,selectors:[["tank-delivery-readings-widget"]],viewQuery:function(l,d){if(1&l&&(i.Gf(I.NW,7),i.Gf(e.YE,7)),2&l){let M;i.iGM(M=i.CRH())&&(d.paginator=M.first),i.iGM(M=i.CRH())&&(d.sort=M.first)}},inputs:{invoice:"invoice",remission:"remission",view:"view",rec:"rec",columns:"columns"},outputs:{remis:"remis"},features:[i.TTD],decls:23,vars:12,consts:[[4,"ngIf"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"card-content"],["mat-table","","matSort","",2,"width","150%",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","style","width: 30px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",2,"width","150%",3,"pageSize"],[3,"isLoading"],["mat-icon-button","","type","button",3,"click"],["svgIcon","attach_docs"],["mat-icon-button","",3,"click"],["mat-header-cell","",2,"width","30px"],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","","style","padding: 5px",4,"matHeaderCellDef"],["mat-cell","","style","padding: 5px",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",2,"padding","5px"],["mat-cell","",2,"padding","5px"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(l,d){1&l&&(i.TgZ(0,"fury-card"),i.TgZ(1,"fury-card-header"),i.TgZ(2,"fury-card-header-heading"),i._uU(3),i.qZA(),i.YNc(4,ce,2,1,"fury-card-header-subheading",0),i.YNc(5,ae,2,1,"fury-card-header-subheading",0),i.TgZ(6,"fury-card-header-actions"),i.YNc(7,le,2,1,"button",1),i.YNc(8,ie,3,0,"button",1),i.YNc(9,ne,3,0,"button",2),i.qZA(),i.qZA(),i.TgZ(10,"fury-card-content",3),i.TgZ(11,"table",4),i.ynx(12,5),i.YNc(13,_e,2,2,"th",6),i.YNc(14,ue,2,1,"td",7),i.BQk(),i.YNc(15,x,2,1,"ng-container",8),i.ynx(16,9),i.YNc(17,y,1,0,"th",10),i.YNc(18,h,10,2,"td",11),i.BQk(),i.YNc(19,E,1,0,"tr",12),i.YNc(20,L,1,0,"tr",13),i.qZA(),i._UZ(21,"mat-paginator",14),i.qZA(),i._UZ(22,"fury-loading-overlay",15),i.qZA()),2&l&&(i.xp6(3),i.hij(" ",d.title," "),i.xp6(1),i.Q6J("ngIf",!d.view),i.xp6(1),i.Q6J("ngIf",d.view),i.xp6(2),i.Q6J("ngIf",!d.view&&2==d.reception.status),i.xp6(1),i.Q6J("ngIf",!d.view&&2==d.reception.status),i.xp6(1),i.Q6J("ngIf",!d.view&&2==d.reception.status),i.xp6(2),i.Q6J("dataSource",d.dataSource),i.xp6(4),i.Q6J("ngForOf",d.columns),i.xp6(4),i.Q6J("matHeaderRowDef",d.visibleColumns),i.xp6(1),i.Q6J("matRowDefColumns",d.visibleColumns),i.xp6(1),i.Q6J("pageSize",d.pageSize),i.xp6(1),i.Q6J("isLoading",d.isLoading))},directives:[Y.i0,Y.$X,Y.eP,oe.O5,Y.OA,Y.z8,A.BZ,e.YE,A.w1,A.fO,A.Dz,oe.sg,A.as,A.nj,I.NW,re.d,Y.lO,se.lW,j.Hw,A.ge,$.oG,A.ev,e.nU,ee.p6,ee.VK,ee.OP,A.XQ,A.Gk],styles:[".fury-card[_ngcontent-%COMP%]{background:#195fc7;color:#f5f5f5}.fury-card[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}.gain[_ngcontent-%COMP%]{margin-left:8px;font:var(--font-caption)}.gain[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;line-height:18px}.card-content[_ngcontent-%COMP%]{padding:0;overflow:scroll}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]{padding:0 24px 24px}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);text-transform:uppercase}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-display-1)}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{margin-left:3px;font-size:32px;height:32px;width:32px}.card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:170px;max-width:100%;display:flex;flex:1;position:relative}"],data:{animation:[P.X,f.M,R.K]}}),a})()},25250:(X,N,r)=>{r.d(N,{y:()=>R});var b=r(48966),i=r(88914),c=r(37425),I=r(14499),e=r(5e3),A=r(59968),G=r(36551),n=r(25245),t=r(30277),f=r(93075),P=r(47423);let R=(()=>{class k{constructor(w,Z){this.data=w,this.dialogRef=Z,Z.disableClose=!0}ngOnInit(){console.log(this.data)}close(){this.dialogRef.close()}}return k.\u0275fac=function(w){return new(w||k)(e.Y36(b.WI),e.Y36(b.so))},k.\u0275cmp=e.Xpm({type:k,selectors:[["fury-form-wizard"]],decls:174,vars:23,consts:[[1,"title"],["svgIcon","balance"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[1,"heading"],[2,"width","400px"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"]],template:function(w,Z){1&w&&(e.TgZ(0,"fury-page"),e.TgZ(1,"fury-title",0),e._UZ(2,"mat-icon",1),e.TgZ(3,"span"),e._uU(4,"Pesaje"),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"form"),e.TgZ(8,"div",4),e._uU(9,"Resultados:"),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"tr"),e.TgZ(12,"td"),e.TgZ(13,"strong"),e._uU(14,"Id"),e.qZA(),e.qZA(),e.TgZ(15,"td"),e._uU(16,"\xa0"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.qZA(),e.TgZ(19,"tr"),e.TgZ(20,"td"),e.TgZ(21,"strong"),e._uU(22,"Id pesaje"),e.qZA(),e.qZA(),e.TgZ(23,"td"),e._uU(24,"\xa0"),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.qZA(),e.TgZ(27,"tr"),e.TgZ(28,"td"),e.TgZ(29,"strong"),e._uU(30,"B\xe1scula"),e.qZA(),e.qZA(),e.TgZ(31,"td"),e._uU(32,"\xa0"),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA(),e.qZA(),e.TgZ(35,"tr"),e.TgZ(36,"td"),e.TgZ(37,"strong"),e._uU(38,"Medici\xf3n de entrada"),e.qZA(),e.qZA(),e.TgZ(39,"td"),e._uU(40,"\xa0"),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.qZA(),e.qZA(),e.TgZ(43,"tr"),e.TgZ(44,"td"),e.TgZ(45,"strong"),e._uU(46,"Medici\xf3n de salida"),e.qZA(),e.qZA(),e.TgZ(47,"td"),e._uU(48,"\xa0"),e.qZA(),e.TgZ(49,"td"),e._uU(50),e.qZA(),e.qZA(),e.TgZ(51,"tr"),e.TgZ(52,"td"),e.TgZ(53,"strong"),e._uU(54,"Placa de veh\xedculo"),e.qZA(),e.qZA(),e.TgZ(55,"td"),e._uU(56,"\xa0"),e.qZA(),e.TgZ(57,"td"),e._uU(58),e.qZA(),e.qZA(),e.TgZ(59,"tr"),e.TgZ(60,"td"),e.TgZ(61,"strong"),e._uU(62,"Conductor"),e.qZA(),e.qZA(),e.TgZ(63,"td"),e._uU(64,"\xa0"),e.qZA(),e.TgZ(65,"td"),e._uU(66),e.qZA(),e.qZA(),e.TgZ(67,"tr"),e.TgZ(68,"td"),e.TgZ(69,"strong"),e._uU(70,"Proveedor"),e.qZA(),e.qZA(),e.TgZ(71,"td"),e._uU(72,"\xa0"),e.qZA(),e.TgZ(73,"td"),e._uU(74),e.qZA(),e.qZA(),e.TgZ(75,"tr"),e.TgZ(76,"td"),e.TgZ(77,"strong"),e._uU(78,"Peso bruto al entrar"),e.qZA(),e.qZA(),e.TgZ(79,"td"),e._uU(80,"\xa0"),e.qZA(),e.TgZ(81,"td"),e._uU(82),e.qZA(),e.qZA(),e.TgZ(83,"tr"),e.TgZ(84,"td"),e.TgZ(85,"strong"),e._uU(86,"Peso bruto al salir"),e.qZA(),e.qZA(),e.TgZ(87,"td"),e._uU(88,"\xa0"),e.qZA(),e.TgZ(89,"td"),e._uU(90),e.qZA(),e.qZA(),e.TgZ(91,"tr"),e.TgZ(92,"td"),e.TgZ(93,"strong"),e._uU(94,"Tara al entrar"),e.qZA(),e.qZA(),e.TgZ(95,"td"),e._uU(96,"\xa0"),e.qZA(),e.TgZ(97,"td"),e._uU(98),e.qZA(),e.qZA(),e.TgZ(99,"tr"),e.TgZ(100,"td"),e.TgZ(101,"strong"),e._uU(102,"Tara al salir"),e.qZA(),e.qZA(),e.TgZ(103,"td"),e._uU(104,"\xa0"),e.qZA(),e.TgZ(105,"td"),e._uU(106),e.qZA(),e.qZA(),e.TgZ(107,"tr"),e.TgZ(108,"td"),e.TgZ(109,"strong"),e._uU(110,"Peso neto al entrar"),e.qZA(),e.qZA(),e.TgZ(111,"td"),e._uU(112,"\xa0"),e.qZA(),e.TgZ(113,"td"),e._uU(114),e.qZA(),e.qZA(),e.TgZ(115,"tr"),e.TgZ(116,"td"),e.TgZ(117,"strong"),e._uU(118,"Peso neto al salir"),e.qZA(),e.qZA(),e.TgZ(119,"td"),e._uU(120,"\xa0"),e.qZA(),e.TgZ(121,"td"),e._uU(122),e.qZA(),e.qZA(),e.TgZ(123,"tr"),e.TgZ(124,"td"),e.TgZ(125,"strong"),e._uU(126,"Temperatura exterior al entrar"),e.qZA(),e.qZA(),e.TgZ(127,"td"),e._uU(128,"\xa0"),e.qZA(),e.TgZ(129,"td"),e._uU(130),e.qZA(),e.qZA(),e.TgZ(131,"tr"),e.TgZ(132,"td"),e.TgZ(133,"strong"),e._uU(134,"Temperatura exterior al salir"),e.qZA(),e.qZA(),e.TgZ(135,"td"),e._uU(136,"\xa0"),e.qZA(),e.TgZ(137,"td"),e._uU(138),e.qZA(),e.qZA(),e.TgZ(139,"tr"),e.TgZ(140,"td"),e.TgZ(141,"strong"),e._uU(142,"Id estaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(143,"td"),e._uU(144,"\xa0"),e.qZA(),e.TgZ(145,"td"),e._uU(146),e.qZA(),e.qZA(),e.TgZ(147,"tr"),e.TgZ(148,"td"),e.TgZ(149,"strong"),e._uU(150,"Estaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(151,"td"),e._uU(152,"\xa0"),e.qZA(),e.TgZ(153,"td"),e._uU(154),e.qZA(),e.qZA(),e.TgZ(155,"tr"),e.TgZ(156,"td"),e.TgZ(157,"strong"),e._uU(158,"Producto"),e.qZA(),e.qZA(),e.TgZ(159,"td"),e._uU(160,"\xa0"),e.qZA(),e.TgZ(161,"td"),e._uU(162),e.qZA(),e.qZA(),e.TgZ(163,"tr"),e.TgZ(164,"td"),e.TgZ(165,"strong"),e._uU(166,"Observaciones"),e.qZA(),e.qZA(),e.TgZ(167,"td"),e._uU(168,"\xa0"),e.qZA(),e.TgZ(169,"td"),e._uU(170),e.qZA(),e.qZA(),e.qZA(),e.TgZ(171,"div",6),e.TgZ(172,"button",7),e.NdJ("click",function(){return Z.close()}),e._uU(173,"CERRAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&w&&(e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(3),e.Q6J("@fadeInUp",void 0),e.xp6(12),e.Oqu(Z.data.id),e.xp6(8),e.Oqu(Z.data.weighing_machine_reading_id),e.xp6(8),e.Oqu(Z.data.weighing_machine_name),e.xp6(8),e.Oqu(Z.data.entrance_weighing_timestamp),e.xp6(8),e.Oqu(Z.data.salida_weighing_timestamp),e.xp6(8),e.Oqu(Z.data.vehicle_plate),e.xp6(8),e.Oqu(Z.data.driver),e.xp6(8),e.Oqu(Z.data.provider_name),e.xp6(8),e.Oqu(Z.data.entrance_gross_weight),e.xp6(8),e.Oqu(Z.data.exit_gross_weight),e.xp6(8),e.Oqu(Z.data.entrance_tare_weight),e.xp6(8),e.Oqu(Z.data.exit_tare_weight),e.xp6(8),e.Oqu(Z.data.entrance_net_weight),e.xp6(8),e.Oqu(Z.data.exit_net_weight),e.xp6(8),e.Oqu(Z.data.entrance_external_temperature),e.xp6(8),e.Oqu(Z.data.exit_external_temperature),e.xp6(8),e.Oqu(Z.data.site_code),e.xp6(8),e.Oqu(Z.data.station_name),e.xp6(8),e.Oqu(Z.data.product_name),e.xp6(8),e.Oqu(Z.data.observations))},directives:[A.i,G.M,n.Hw,t.xw,t.Wh,f._Y,f.JL,f.F,t.SQ,P.lW],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{overflow:scroll;margin:5px;max-width:100%;max-height:400px;border-radius:8px;padding:8px}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:14px;padding:24px 8px 0}"],data:{animation:[I.X,i.M,c.K]}}),k})()},27702:(X,N,r)=>{r.d(N,{k:()=>L});var b=r(70655),i=r(48966),c=r(86087),I=r(84847),e=r(32075),A=r(20449),G=r(96831),n=r(92198),t=r(37425),f=r(88914),P=r(14499);class R{constructor(a){console.log(a),this.id=a=a&&a.id||null,this.entrance_weighing_machine_reading_id=a=a&&a.entrance_weighing_machine_reading_id||null,this.exit_weighing_machine_reading_id=a=a&&a.exit_weighing_machine_reading_id||null,this.weighing_machine_id=a=a&&a.weighing_machine_id||null,this.weighing_machine_name=a&&a.weighing_machine_name||null,this.entrance_weighing_timestamp=a=a&&a.entrance_weighing_machine_timestamp||null,this.exit_weighing_timestamp=a=a&&a.exit_weighing_machine_timestamp||null,this.vehicle_plate=a=a&&a.vehicle_plate||null,this.driver=a=a&&a.driver||null,this.cre_permission_id=a=a&&a.cre_permission_id||null,this.provider_name=a&&a.provider_name||null,this.entrance_gross_weight=a=a&&a.entrance_gross_weight||null,this.exit_gross_weight=a=a&&a.exit_gross_weight||null,this.entrance_tare_weight=a=a&&a.entrance_tare_weight||null,this.exit_tare_weight=a=a&&a.exit_tare_weight||null,this.entrance_net_weight=a=a&&a.entrance_net_weight||null,this.exit_net_weight=a=a&&a.exit_net_weight||null,this.entrance_external_temperature=a=a&&a.entrance_external_temperature||null,this.exit_external_temperature=a=a&&a.exit_external_temperature||null,this.remission_document_id=a=a&&a.remission_document_id||null,this.identification_number=a=a&&a.identification_number||null,this.invoice_document_id=a=a&&a.invoice_document_id||null,this.invoice_number1=a=a&&a.invoice_number1||null,this.tank_delivery_reading_id=a=a&&a.tank_delivery_reading_id||null,this.site_code=a=a&&a.site_code||null,this.station_name=a=a&&a.station_name||null,this.product_id=a=a&&a.product_id||null,this.product_name=a=a&&a.product_name||null,this.observations=a=a&&a.observations||null,this.reception_id=a=a&&a.reception_id||null,this.status=a=a&&a.status||null}}var k=r(25250),o=r(5e3),w=r(40520),Z=r(98545),U=r(33344);let z=(()=>{class u{constructor(s,l){this.http=s,this.tokenStorage=l}getHeaders(){var s=new w.WM,l=this.tokenStorage.getToken();return s.set("token",l||"{}")}getAll(s,l,d,M,F){var B=this.getHeaders(),H="?site_code="+s;return H+="&status="+l,H+=d?"&reception_id="+d:"",H+=M?"&remission_id="+M:"",this.http.get(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.WEIGHING_MACHINE_READINGS+(H+=F?"&invoice_id="+F:""),{headers:B})}assign(s,l,d,M){console.log(l);var F=this.getHeaders(),B="?reception_id="+s.reception_id;return B+="&site_code="+s.site_code,B+=d?"&invoice_id="+d.invoice_id:"",this.http.put(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.WEIGHING_MACHINE_READINGS+(B+=M?"&remission_id="+M.remission_id:""),l,{headers:F})}delete(s){var l=this.getHeaders();return this.http.delete(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.WEIGHING_MACHINE_READINGS+"/"+s.id,{headers:l})}}return u.\u0275fac=function(s){return new(s||u)(o.LFG(w.eN),o.LFG(U.i))},u.\u0275prov=o.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var te=r(57261),V=r(97199),Y=r(69808),oe=r(75972),re=r(47423),se=r(25245),j=r(77446),$=r(92181);function ee(u,a){if(1&u&&(o.TgZ(0,"fury-card-header-subheading"),o._uU(1),o.qZA()),2&u){const s=o.oxw();o.xp6(1),o.hij(" ",s.title," disponibles ")}}function ce(u,a){if(1&u&&(o.TgZ(0,"fury-card-header-subheading"),o._uU(1),o.qZA()),2&u){const s=o.oxw();o.xp6(1),o.hij(" ",s.title," asignados ")}}function ae(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"button",16),o.NdJ("click",function(){return o.CHM(s),o.oxw().addToDocument()}),o._UZ(1,"mat-icon",17),o.qZA()}2&u&&(o.xp6(1),o.Q6J("@scaleIn",void 0))}function le(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"button",16),o.NdJ("click",function(){return o.CHM(s),o.oxw().close()}),o.TgZ(1,"mat-icon"),o._uU(2,"close"),o.qZA(),o.qZA()}}function ie(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"button",18),o.NdJ("click",function(){return o.CHM(s),o.oxw().reload()}),o.TgZ(1,"mat-icon"),o._uU(2,"refresh"),o.qZA(),o.qZA()}}function ne(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"th",19),o.TgZ(1,"mat-checkbox",20),o.NdJ("change",function(d){o.CHM(s);const M=o.oxw();return d?M.masterToggle():null}),o.qZA(),o.qZA()}if(2&u){const s=o.oxw();o.xp6(1),o.Q6J("checked",s.selection.hasValue()&&s.isAllSelected())("indeterminate",s.selection.hasValue()&&!s.isAllSelected())}}function _e(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"td",21),o.TgZ(1,"mat-checkbox",22),o.NdJ("click",function(d){return d.stopPropagation()})("change",function(d){const F=o.CHM(s).$implicit,B=o.oxw();return d?B.selection.toggle(F):null}),o.qZA(),o.qZA()}if(2&u){const s=a.$implicit,l=o.oxw();o.xp6(1),o.Q6J("checked",l.selection.isSelected(s))}}function ue(u,a){if(1&u&&(o.TgZ(0,"th",27),o._uU(1),o.qZA()),2&u){const s=o.oxw(2).$implicit;o.xp6(1),o.hij(" ",s.name,"")}}function de(u,a){if(1&u&&(o.TgZ(0,"td",28),o._uU(1),o.qZA()),2&u){const s=a.$implicit,l=o.oxw(2).$implicit,d=o.oxw();o.xp6(1),o.Oqu(d.getLabel(l.name,s[l.property]))}}function D(u,a){if(1&u&&(o.ynx(0,24),o.YNc(1,ue,2,1,"th",25),o.YNc(2,de,2,1,"td",26),o.BQk()),2&u){const s=o.oxw().$implicit;o.Q6J("matColumnDef",s.property)}}function K(u,a){if(1&u&&(o.ynx(0),o.YNc(1,D,3,1,"ng-container",23),o.BQk()),2&u){const s=a.$implicit;o.xp6(1),o.Q6J("ngIf",s.isModelProperty)}}function x(u,a){1&u&&o._UZ(0,"th",29)}function y(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"button",34),o.NdJ("click",function(){o.CHM(s);const d=o.oxw().$implicit;return o.oxw().delete(d)}),o.TgZ(1,"span"),o._uU(2,"Eliminar pesaje"),o.qZA(),o.qZA()}}function S(u,a){if(1&u){const s=o.EpF();o.TgZ(0,"td",30),o.TgZ(1,"button",31),o.NdJ("click",function(d){return d.stopPropagation()}),o.TgZ(2,"mat-icon"),o._uU(3,"more_horiz"),o.qZA(),o.qZA(),o.TgZ(4,"mat-menu",32,33),o.TgZ(6,"button",34),o.NdJ("click",function(){const M=o.CHM(s).$implicit;return o.oxw().show(M)}),o.TgZ(7,"span"),o._uU(8,"Ver"),o.qZA(),o.qZA(),o.YNc(9,y,3,0,"button",35),o.qZA(),o.qZA()}if(2&u){const s=a.$implicit,l=o.MAs(5),d=o.oxw();o.xp6(1),o.Q6J("matMenuTriggerFor",l),o.xp6(8),o.Q6J("ngIf",2==s.status&&!d.view)}}function h(u,a){1&u&&o._UZ(0,"tr",36)}function E(u,a){1&u&&o._UZ(0,"tr",37)}let L=(()=>{class u{constructor(s,l,d,M,F){this.data=s,this.dialog=l,this.dialogRef=d,this._weighingMachineReadingsService=M,this.snackbar=F,this.subject$=new G.t(1),this.data$=this.subject$.asObservable(),this.selection=new A.Ov(!0,[]),this.weighing_machine_readings=[],this.title="Pesajes de b\xe1scula",this.columns=[{name:"Checkbox",property:"select",visible:!0},{name:"Id",property:"id",visible:!1,isModelProperty:!0},{name:"Id pesaje de entrada",property:"entrance_weighing_machine_reading_id",visible:!0,isModelProperty:!0},{name:"Id pesaje de salida",property:"exit_weighing_machine_reading_id",visible:!0,isModelProperty:!0},{name:"Id b\xe1scula",property:"weighing_machine_id",visible:!1,isModelProperty:!0},{name:"B\xe1scula",property:"weighing_machine_name",visible:!0,isModelProperty:!0},{name:"Medici\xf3n de entrada",property:"entrance_weighing_timestamp",visible:!1,isModelProperty:!0},{name:"Medici\xf3n de salida",property:"exit_weighing_timestamp",visible:!0,isModelProperty:!0},{name:"Placa de veh\xedculo",property:"vehicle_plate",visible:!0,isModelProperty:!0},{name:"Conductor",property:"driver",visible:!0,isModelProperty:!0},{name:"Id proveedor",property:"cre_permission_id",visible:!1,isModelProperty:!0},{name:"Proveedor",property:"provider_name",visible:!0,isModelProperty:!0},{name:"Peso bruto de entrada",property:"entrance_gross_weight",visible:!0,isModelProperty:!0},{name:"Peso bruto de salida",property:"exit_gross_weight",visible:!0,isModelProperty:!0},{name:"Tara de entrada",property:"entrance_tare_weight",visible:!1,isModelProperty:!0},{name:"Tara de salida",property:"exit_tare_weight",visible:!1,isModelProperty:!0},{name:"Peso neto de entrada",property:"entrance_net_weight",visible:!1,isModelProperty:!0},{name:"Peso neto de salida",property:"exit_net_weight",visible:!1,isModelProperty:!0},{name:"Temperatura de entrada",property:"entrance_external_temperature",visible:!1,isModelProperty:!0},{name:"Temperatura de salida",property:"exit_external_temperature",visible:!1,isModelProperty:!0},{name:"Id remisi\xf3n",property:"remission_document_id",visible:!1,isModelProperty:!0},{name:"Remisi\xf3n",property:"identification_number",visible:!1,isModelProperty:!0},{name:"Id factura",property:"invoice_document_id",visible:!1,isModelProperty:!0},{name:"Factura",property:"invoice_number1",visible:!1,isModelProperty:!0},{name:"Id estaci\xf3n",property:"site_code",visible:!1,isModelProperty:!0},{name:"Estaci\xf3n",property:"station_name",visible:!0,isModelProperty:!0},{name:"Id producto",property:"product_id",visible:!1,isModelProperty:!0},{name:"Producto",property:"product_name",visible:!0,isModelProperty:!0},{name:"Estatus",property:"status",visible:!1,isModelProperty:!0},{name:"Observaciones",property:"observations",visible:!1,isModelProperty:!0},{name:"Id recepci\xf3n",property:"reception_id",visible:!1,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(s,l){if(null!=s)return l}get visibleColumns(){return this.columns.filter(s=>s.visible).map(s=>s.property)}getRemoteData(){this._weighingMachineReadingsService.getAll(this.reception.site_code,this.reception.status,this.reception.reception_id,null!=this.remission?this.remission.remission_id:null,null!=this.invoice?this.invoice.invoice_id:null).subscribe(s=>{this.weighing_machine_readings=s,this.dataSource=new e.by(s),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},s=>{console.log(s)})}getData(){this.invoice?(this.weighing_machine_readings=this.invoice.WeighingMachineReadings,this.dataSource=new e.by(this.invoice.WeighingMachineReadings)):this.remission&&(this.weighing_machine_readings=this.remission.WeighingMachineReadings,this.dataSource=new e.by(this.remission.WeighingMachineReadings)),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnInit(){return(0,b.mG)(this,void 0,void 0,function*(){this.dataSource=new e.by,this.view?(this.reception=this.rec,this.getData()):(this.reception=this.data.reception,this.remission=this.data.remission?this.data.remission:null,this.invoice=this.data.invoice?this.data.invoice:null,this.getRemoteData()),this.data$.pipe((0,n.h)(s=>!!s)).subscribe(s=>{this.weighing_machine_readings=s,this.dataSource.data=s})})}ngOnChanges(s){for(const l in s)this[l]=s[l].currentValue,this.reload()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}addToDocument(){this._weighingMachineReadingsService.assign(this.reception,this.selection.selected,this.invoice,this.remission).subscribe(s=>{this.selection.selected.forEach(l=>{this.weighing_machine_reading=new R(l),this.invoice?this.invoice.Remissions.length>0?this.reception.Invoices.find(d=>d.invoice_id==this.invoice.invoice_id).Remissions.find(d=>d.remission_id==this.remission.remission_id).WeighingMachineReadings.push(this.weighing_machine_reading):this.reception.Invoices.find(d=>d.invoice_id==this.invoice.invoice_id).WeighingMachineReadings.push(this.weighing_machine_reading):this.reception.Remissions.find(d=>d.remission_id==this.remission.remission_id).WeighingMachineReadings.push(this.weighing_machine_reading)}),this.snackbar.open(s.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.reception)},s=>{this.snackbar.open(s.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}close(){this.dialogRef.close()}onFilterChange(s){!this.dataSource||(s=(s=s.trim()).toLowerCase(),this.dataSource.filter=s)}show(s){this.dialog.open(k.y,{data:s}).afterClosed().subscribe(l=>{})}delete(s){this._weighingMachineReadingsService.delete(this.weighing_machine_reading)}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}ngOnDestroy(){}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(s=>this.selection.select(s))}}return u.\u0275fac=function(s){return new(s||u)(o.Y36(i.WI),o.Y36(i.uw),o.Y36(i.so),o.Y36(z),o.Y36(te.ux))},u.\u0275cmp=o.Xpm({type:u,selectors:[["weighing-machine-readings-widget"]],viewQuery:function(s,l){if(1&s&&(o.Gf(c.NW,7),o.Gf(I.YE,7)),2&s){let d;o.iGM(d=o.CRH())&&(l.paginator=d.first),o.iGM(d=o.CRH())&&(l.sort=d.first)}},inputs:{invoice:"invoice",remission:"remission",view:"view",rec:"rec",columns:"columns"},features:[o.TTD],decls:23,vars:12,consts:[[4,"ngIf"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"card-content"],["mat-table","","matSort","",2,"width","150%",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","style","width: 30px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",2,"width","150%",3,"pageSize"],[3,"isLoading"],["mat-icon-button","","type","button",3,"click"],["svgIcon","attach_docs"],["mat-icon-button","",3,"click"],["mat-header-cell","",2,"width","30px"],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","","style","padding: 5px",4,"matHeaderCellDef"],["mat-cell","","style","padding: 5px",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",2,"padding","5px"],["mat-cell","",2,"padding","5px"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(s,l){1&s&&(o.TgZ(0,"fury-card"),o.TgZ(1,"fury-card-header"),o.TgZ(2,"fury-card-header-heading"),o._uU(3),o.qZA(),o.YNc(4,ee,2,1,"fury-card-header-subheading",0),o.YNc(5,ce,2,1,"fury-card-header-subheading",0),o.TgZ(6,"fury-card-header-actions"),o.YNc(7,ae,2,1,"button",1),o.YNc(8,le,3,0,"button",1),o.YNc(9,ie,3,0,"button",2),o.qZA(),o.qZA(),o.TgZ(10,"fury-card-content",3),o.TgZ(11,"table",4),o.ynx(12,5),o.YNc(13,ne,2,2,"th",6),o.YNc(14,_e,2,1,"td",7),o.BQk(),o.YNc(15,K,2,1,"ng-container",8),o.ynx(16,9),o.YNc(17,x,1,0,"th",10),o.YNc(18,S,10,2,"td",11),o.BQk(),o.YNc(19,h,1,0,"tr",12),o.YNc(20,E,1,0,"tr",13),o.qZA(),o._UZ(21,"mat-paginator",14),o.qZA(),o._UZ(22,"fury-loading-overlay",15),o.qZA()),2&s&&(o.xp6(3),o.hij(" ",l.title," "),o.xp6(1),o.Q6J("ngIf",!l.view),o.xp6(1),o.Q6J("ngIf",l.view),o.xp6(2),o.Q6J("ngIf",!l.view&&2==l.reception.status),o.xp6(1),o.Q6J("ngIf",!l.view&&2==l.reception.status),o.xp6(1),o.Q6J("ngIf",!l.view&&2==l.reception.status),o.xp6(2),o.Q6J("dataSource",l.dataSource),o.xp6(4),o.Q6J("ngForOf",l.columns),o.xp6(4),o.Q6J("matHeaderRowDef",l.visibleColumns),o.xp6(1),o.Q6J("matRowDefColumns",l.visibleColumns),o.xp6(1),o.Q6J("pageSize",l.pageSize),o.xp6(1),o.Q6J("isLoading",l.isLoading))},directives:[V.i0,V.$X,V.eP,Y.O5,V.OA,V.z8,e.BZ,I.YE,e.w1,e.fO,e.Dz,Y.sg,e.as,e.nj,c.NW,oe.d,V.lO,re.lW,se.Hw,e.ge,j.oG,e.ev,I.nU,$.p6,$.VK,$.OP,e.XQ,e.Gk],styles:[".fury-card[_ngcontent-%COMP%]{background:#195fc7;color:#f5f5f5}.fury-card[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}.gain[_ngcontent-%COMP%]{margin-left:8px;font:var(--font-caption)}.gain[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;line-height:18px}.card-content[_ngcontent-%COMP%]{padding:0;overflow:scroll}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]{padding:0 24px 24px}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);text-transform:uppercase}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-display-1)}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{margin-left:3px;font-size:32px;height:32px;width:32px}.card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:170px;max-width:100%;display:flex;flex:1;position:relative}"],data:{animation:[P.X,f.M,t.K]}}),u})()},95288:(X,N,r)=>{r.d(N,{w:()=>e});var b=r(40520),i=r(98545),c=r(5e3),I=r(33344);let e=(()=>{class A{constructor(n,t){this.http=n,this.tokenStorage=t}getHeaders(){var n=new b.WM,t=this.tokenStorage.getToken();return n.set("token",t||"{}")}getAll(){var n=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.CRE_PERMISSIONS,{headers:n})}create(n){var t=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.CRE_PERMISSIONS,n,{headers:t})}update(n){var t=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.CRE_PERMISSIONS+"/"+n.permission_id,n,{headers:t})}getCurrencies(){var n=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.CURRENCIES,{headers:n})}getUnitsOfMeasure(n){var t=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.UNITS_OF_MEASURE+"?type="+n,{headers:t})}getCrePermissionTypes(){var n=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.CRE_PERMISSION_TYPES,{headers:n})}getAllByType(n){var t=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.CRE_PERMISSIONS+"?cre_permission_type="+n,{headers:t})}}return A.\u0275fac=function(n){return new(n||A)(c.LFG(b.eN),c.LFG(I.i))},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},24629:(X,N,r)=>{r.d(N,{x:()=>e});var b=r(40520),i=r(98545),c=r(5e3),I=r(33344);let e=(()=>{class A{constructor(n,t){this.http=n,this.tokenStorage=t}getHeaders(){var n=new b.WM,t=this.tokenStorage.getToken();return n.set("token",t||"{}")}getAll(n){var t=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.INVOICES+(n||""),{headers:t})}getInvoice(n){var t=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.INVOICES+"/"+n,{headers:t})}create(n,t){var f=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.INVOICES+t,n,{headers:f})}update(n){var t=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.INVOICES+"/"+n.invoice_id,n,{headers:t})}}return A.\u0275fac=function(n){return new(n||A)(c.LFG(b.eN),c.LFG(I.i))},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},92824:(X,N,r)=>{r.d(N,{J:()=>e});var b=r(40520),i=r(98545),c=r(5e3),I=r(33344);let e=(()=>{class A{constructor(n,t){this.http=n,this.tokenStorage=t}getHeaders(){var n=new b.WM,t=this.tokenStorage.getToken();return n.set("token",t||"{}")}getAll(n){var t=this.getHeaders();const f=n?(new b.LE).appendAll(n):null;return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.RECEPTIONS,{params:f,headers:t})}getReception(n){var t=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.RECEPTIONS+"/"+n,{headers:t})}create(n){var t=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.RECEPTIONS,n,{headers:t})}update(n){var t=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.RECEPTIONS+"/"+n.reception_id,n,{headers:t})}getMyInvoices(n){var t=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MY_INVOICES+"/"+n,{headers:t})}file(n){var t=this.getHeaders();return this.http.patch(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.RECEPTIONS+"/"+n.reception_id,n,{headers:t})}dettach(n){var t=this.getHeaders();const f=(new b.LE).appendAll(n);return this.http.delete(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.RECEPTIONS,{params:f,headers:t})}getTinySummary(n){var t=this.getHeaders();const f=(new b.LE).appendAll(n);return this.http.get(i._.settings.apiServer.API_URL_BASE+"/receptions_tiny_summary",{params:f,headers:t})}}return A.\u0275fac=function(n){return new(n||A)(c.LFG(b.eN),c.LFG(I.i))},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},57e3:(X,N,r)=>{r.d(N,{D:()=>e});var b=r(40520),i=r(98545),c=r(5e3),I=r(33344);let e=(()=>{class A{constructor(n,t){this.http=n,this.tokenStorage=t}getHeaders(){var n=new b.WM,t=this.tokenStorage.getToken();return n.set("token",t||"{}")}getAll(n){var t=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.REMISSIONS+(n||""),{headers:t})}getRemission(n,t){var f=this.getHeaders();const P=(new b.LE).appendAll({reception_id:t});return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.REMISSIONS+"/"+n,{params:P,headers:f})}create(n,t){var f=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.REMISSIONS+t,n,{headers:f})}update(n){var t=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.REMISSIONS+"/"+n.remission_id,n,{headers:t})}assign(n,t,f,P){var R=this.getHeaders(),k="?reception_id="+n.reception_id;return k+="&site_code="+n.site_code,k+="&invoice_id="+f.invoice_id,this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.REMISSIONS+(k+="&operation="+P),t,{headers:R})}}return A.\u0275fac=function(n){return new(n||A)(c.LFG(b.eN),c.LFG(I.i))},A.\u0275prov=c.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},52190:(X,N,r)=>{r.d(N,{w:()=>G});var b=r(40520),i=r(46227),c=r(27221),I=r(98545),e=r(5e3),A=r(33344);let G=(()=>{class n{constructor(f,P){this.http=f,this.tokenStorage=P}getHeaders(){var f=new b.WM,P=this.tokenStorage.getToken();return f.set("token",P||"{}")}getAll(f){var P=this.getHeaders();const R=(new b.LE).appendAll(f?{type:f}:{});return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.STATIONS,{params:R,headers:P})}create(f){var P=this.getHeaders();return this.http.post(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.STATIONS,f,{headers:P}).pipe((0,i.V)(1e4),(0,c.K)(R=>{throw"Error de conexi\xf3n. Detalles: "+R}))}update(f){var P=this.getHeaders();return this.http.put(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.STATIONS+"/"+f.site_code,f,{headers:P}).pipe((0,i.V)(1e4),(0,c.K)(R=>{throw"Error de conexi\xf3n. Detalles: "+R}))}delete(f){var P=this.getHeaders();return this.http.delete(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.STATIONS+"/"+f.site_code,{headers:P})}getRemoteProducts(f){var P=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.REMOTE_PRODUCTS+"/"+f.site_code,{headers:P}).pipe((0,i.V)(1e4),(0,c.K)(R=>{throw"Error de conexi\xf3n. Detalles: "+R}))}getRemoteTanks(f){var P=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+"/remoteTanks/"+f.site_code,{headers:P}).pipe((0,i.V)(1e4),(0,c.K)(R=>{throw"Error de conexi\xf3n. Detalles: "+R}))}getMapOfProducts(f){var P=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.PRODUCTS_MAPS+"/"+f.site_code,{headers:P})}setMapOfProducts(f,P){var R=this.getHeaders();return this.http.post(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.PRODUCTS_MAPS+"/"+P,f,{headers:R})}setTanksT(f){var P=this.getHeaders();return console.log(typeof f),this.http.post(I._.settings.apiServer.API_URL_BASE+"/remoteTanks",f,{headers:P})}getDevicesStatus(f){var P=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.DEVICES_STATUS+"?site_code="+f,{headers:P})}getAllTanksStatus(){var f=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.STATUS_TANKS,{headers:f})}getTanksStatus(f){var P=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.STATUS_TANKS+"/"+f,{headers:P})}getPumpsStatus(f){var P=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.STATUS_PUMPS+"/"+f,{headers:P})}getPumps(f){var P=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.PUMPS+"/"+f,{headers:P})}syncSingle(f,P){var R=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.SYNC+"?site_code="+f+"&stub="+P,{headers:R}).pipe((0,i.V)(1e4),(0,c.K)(k=>{throw"Error de conexi\xf3n. Detalles: "+k}))}getMarimbas(){var f=this.getHeaders();return this.http.get(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.MARIMBAS,{headers:f})}updateIndexes(f){var P=this.getHeaders();return console.log(P),this.http.put(I._.settings.apiServer.API_URL_BASE+I._.settings.apiServer.INDEXES,f,{headers:P})}}return n.\u0275fac=function(f){return new(f||n)(e.LFG(b.eN),e.LFG(A.i))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);