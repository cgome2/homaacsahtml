"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[1152],{71152:(y,u,o)=>{o.r(u),o.d(u,{SettingsModule:()=>B});var d=o(69808),i=o(93075),f=o(61264),_=o(7057),x=o(72467),g=o(3299),v=o(70655),s=o(14499),l=o(88914),c=o(40520);class p{constructor(a){this.marimbas_schedule_time=a&&a.marimbas_schedule_time||"",this.two_stage_verification_code=a&&a.two_stage_verification_code||"",this.logo_filename=a&&a.logo_filename||"",this.two_stage_verification_captcha=a&&a.two_stage_verification_captcha||"",this.weighing_machines=a&&a.weighing_machines||"",this.chemical_analyses=a&&a.chemical_analyses||""}}var e=o(5e3),M=o(74002),S=o(60198),Z=o(57261),w=o(39762),A=o(53580),O=o(38932),h=o(30277),C=o(67322),P=o(74107),T=o(77531),b=o(50974),U=o(47423),k=o(25245),I=o(32368),E=o(90508);function L(n,a){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.value)}}function J(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",5),e.TgZ(1,"div",6),e.TgZ(2,"div",7),e.TgZ(3,"mat-form-field",8),e.TgZ(4,"mat-label"),e._uU(5,"Modo de autenticaci\xf3n en dos etapas:"),e.qZA(),e.TgZ(6,"mat-select",9),e.YNc(7,L,2,2,"mat-option",10),e.qZA(),e.qZA(),e.TgZ(8,"mat-form-field",11),e._UZ(9,"input",12),e._UZ(10,"ngx-material-timepicker",13,14),e.TgZ(12,"mat-label"),e._uU(13,"Horario de corte para reporte Marimbas"),e.qZA(),e.qZA(),e.TgZ(14,"div",15),e.TgZ(15,"div",16),e.TgZ(16,"input",17,18),e.NdJ("change",function(m){return e.CHM(t),e.oxw().onFileSelected(m)}),e.qZA(),e.TgZ(18,"button",19),e.NdJ("click",function(){return e.CHM(t),e.MAs(17).click()}),e.TgZ(19,"mat-icon"),e._uU(20,"attach_file"),e.qZA(),e.qZA(),e.TgZ(21,"mat-label",20),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"div",21),e.TgZ(24,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().uploadFile()}),e._uU(25,"Subir archivo"),e.qZA(),e.TgZ(26,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeFile()}),e._uU(27,"Eliminar archivo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",23),e.TgZ(29,"mat-slide-toggle",24),e._uU(30,"Uso de aplicaciones de pesaje"),e.qZA(),e.qZA(),e.TgZ(31,"div",23),e.TgZ(32,"mat-slide-toggle",25),e._uU(33,"Uso de aplicaciones de an\xe1lisis qu\xedmicos"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",26),e.TgZ(35,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._uU(36,"GUARDAR"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(11),r=e.oxw();e.Q6J("formGroup",r.settingsFormGroup),e.xp6(7),e.Q6J("ngForOf",r.two_stage_verification_modes),e.xp6(2),e.Q6J("ngxTimepicker",t)("format",24),e.xp6(1),e.Q6J("theme",r.homaacsaTheme),e.xp6(6),e.Q6J("accept",r.requiredFileType),e.xp6(2),e.Q6J("disabled",""!=r.logoFile),e.xp6(4),e.Oqu(r.selectedFilename),e.xp6(2),e.Q6J("disabled",""!=r.logoFile),e.xp6(2),e.Q6J("disabled",""==r.logoFile),e.xp6(9),e.Q6J("disabled",r.settingsFormGroup.invalid)}}const G=function(){return["Tables"]},N=[{path:"",component:(()=>{class n{constructor(t,r,m,F){this._generalSettingsService=t,this._filesUploaderService=r,this.snackbar=m,this.route=F,this.selectedFile=null,this.selectedFilename="Seleccione logotipo para flotas del HO",this.logoFile="",this.requiredFileType="image/png",this.configuration=new p,this.two_stage_verification_modes=[{id:1,value:"C\xf3digo de verificaci\xf3n por correo"},{id:2,value:"C\xf3digo captcha"}],this.settingsFormGroup=new i.cw({two_stage_verification_mode:new i.NI(1,[i.kI.required]),report_schedule_time:new i.NI("00:00"),logo_filename:new i.NI,weighing_machines:new i.NI,chemical_analyses:new i.NI}),this.homaacsaTheme={container:{bodyBackgroundColor:"#ffffff",buttonColor:"#0f192a",primaryFontFamily:"#ffffff"},dial:{dialBackgroundColor:"#0f192a",dialInactiveColor:"#8c8c8c",dialActiveColor:"#ffffff",dialEditableActiveColor:"#ffffff",dialEditableBackgroundColor:"#ffffff"},clockFace:{clockFaceBackgroundColor:"#0f192a",clockHandColor:"#165ffe",clockFaceTimeActiveColor:"#ffffff",clockFaceTimeInactiveColor:"#8c8c8c",clockFaceInnerTimeInactiveColor:"#8c8c8c",clockFaceTimeDisabledColor:"#d9d9d9"}}}ngOnInit(){this.configuration=this.route.snapshot.data.settings,this.settingsFormGroup.setValue({two_stage_verification_mode:"1"===this.route.snapshot.data.settings.two_stage_verification_captcha?2:1,report_schedule_time:this.route.snapshot.data.settings.marimbas_schedule_time,logo_filename:this.route.snapshot.data.settings.logo_filename,weighing_machines:"1"===this.route.snapshot.data.settings.weighing_machines,chemical_analyses:"1"===this.route.snapshot.data.settings.chemical_analyses}),this.logoFile=null==this.configuration.logo_filename?"":this.configuration.logo_filename,this.selectedFilename=null==this.configuration.logo_filename?"Seleccione logotipo para flotas del HO":this.configuration.logo_filename}submit(){return(0,v.mG)(this,void 0,void 0,function*(){1===this.settingsFormGroup.controls.two_stage_verification_mode.value?(this.configuration.two_stage_verification_captcha="0",this.configuration.two_stage_verification_code="1"):2===this.settingsFormGroup.controls.two_stage_verification_mode.value&&(this.configuration.two_stage_verification_captcha="1",this.configuration.two_stage_verification_code="0"),this.configuration.marimbas_schedule_time=this.settingsFormGroup.controls.report_schedule_time.value,this.configuration.logo_filename=this.settingsFormGroup.controls.logo_filename.value,this.logoFile=this.configuration.logo_filename,this.selectedFilename=this.configuration.logo_filename,this.configuration.weighing_machines=this.settingsFormGroup.controls.weighing_machines.value?"1":"0",this.configuration.chemical_analyses=this.settingsFormGroup.controls.chemical_analyses.value?"1":"0",this._generalSettingsService.update(this.configuration).subscribe(t=>{this.snackbar.open(t.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.ngOnInit()},t=>{console.log(t)})})}onFileSelected(t){this.selectedFile=t.target.files[0],this.selectedFilename=this.selectedFile.name}uploadFile(){this._filesUploaderService.uploadFile(this.selectedFile).subscribe(t=>{t.type===c.dt.UploadProgress?console.log("Upload progres: "+100*Math.round(t.loaded/t.total)+"%"):t.type===c.dt.Response&&(this.settingsFormGroup.controls.logo_filename.setValue(t.body.filename),this.logoFile=t.body.filename,this.selectedFilename=t.body.filename,this.snackbar.open(t.body.message,null,{duration:5e3,panelClass:["green-snackbar"]}))},t=>{this.snackbar.open(t.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}removeFile(){this._filesUploaderService.removeFile({file:this.logoFile,type:"settings"}).subscribe(r=>{this.logoFile="",this.selectedFilename="",this.selectedFile=null,this.settingsFormGroup.controls.logo_filename.setValue(""),this.snackbar.open(r.message,null,{duration:5e3,panelClass:["green-snackbar"]})},r=>{this.snackbar.open(r.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.b),e.Y36(S.a),e.Y36(Z.ux),e.Y36(g.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["settings-component"]],decls:7,vars:5,consts:[["mode","card"],["current","Settings",3,"crumbs"],[1,"card"],[1,"heading"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["fxLayout","column",1,"content"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["appearance","outline","fxFlex","auto"],["formControlName","two_stage_verification_mode"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline"],["formControlName","report_schedule_time","matInput","","readonly","",3,"ngxTimepicker","format"],[3,"theme"],["pickerMarimbas",""],[1,"div-file-input"],["fxLayoutAlign","start center",2,"min-width","50%"],["type","file",1,"hidden",3,"accept","change"],["fileInput",""],["requiredFileType","image/png","type","button","mat-mini-fab","","color","primary",1,"create",2,"margin-top","-4px",3,"disabled","click"],[1,"selected-label"],["fxLayoutAlign","end center",2,"min-width","50%"],["type","button","color","primary","mat-button","","mat-raised-button","",2,"margin-left","8px",3,"disabled","click"],[1,"radio"],["formControlName","weighing_machines"],["formControlName","chemical_analyses"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","",3,"disabled","click"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-header"),e._UZ(2,"fury-breadcrumbs",1),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._uU(5,"Configuraci\xf3n general del Head Office:"),e.qZA(),e.YNc(6,J,37,11,"form",4),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@fadeInRight",void 0)("crumbs",e.DdM(4,G)),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(3),e.Q6J("ngIf",r.settingsFormGroup))},directives:[w.N,A.U,O.n,d.O5,i._Y,i.JL,i.sg,h.xw,h.SQ,C.KE,h.yH,C.hX,P.gD,i.JJ,i.u,d.sg,i.Fj,T.Nt,b.I2,b.ro,h.Wh,U.lW,k.Hw,I.Rr,E.ey],styles:[".title[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:scroll;padding:20px;box-shadow:0 6px 6px -3px #0003,0 10px 14px 1px #00000024,0 4px 18px 3px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:3px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px;width:50%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{max-width:33%;min-width:33%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.div-area[_ngcontent-%COMP%]{display:inline-grid;margin-right:0;min-width:33%;max-width:33%}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}  .custom-slider{text-align:center;border-width:thin;border-style:solid;border-radius:5px;border-color:#e0e0e0;color:#5b5b5b;max-width:33%;min-width:33%}  .custom-slider .ngx-slider{width:95%}  .custom-slider .ngx-slider .ngx-slider-bar{background:#006acb;height:2px}  .custom-slider .ngx-slider .ngx-slider-selection{background:#006acb}  .custom-slider .ngx-slider .ngx-slider-pointer{width:8px;height:14px;top:auto;bottom:0;background-color:#006acb;border-top-left-radius:3px;border-top-right-radius:3px}  .custom-slider .ngx-slider .ngx-slider-pointer:after{display:none}  .custom-slider .ngx-slider .ngx-slider-bubble{font-size:13px;bottom:14px}  .custom-slider .ngx-slider .ngx-slider-limit{font-weight:400;color:#006acb}  .custom-slider .ngx-slider .ngx-slider-tick{width:1px;height:10px;margin-left:4px;border-radius:0;background:#006acb;top:-1px}  .custom-slider .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#006acb}.div-temperature[_ngcontent-%COMP%]{display:inline-grid;height:51px;padding-left:20px;margin-top:4px!important}.label-area[_ngcontent-%COMP%]{position:relative;font-size:11px;font-family:Roboto;font-weight:400;top:10px;color:#0009;background:white;z-index:1;width:35px;margin:-92px 10px 0!important;height:15px;padding-left:5px}.label-temperature[_ngcontent-%COMP%]{position:relative;font-size:11px;font-family:Roboto;font-weight:400;top:10px;color:#0009;background:white;z-index:1;width:170px;margin:-73px 0 0 -15px;height:12px}.tree-filter[_ngcontent-%COMP%]{display:inline-grid;width:100%;padding:0}.tree-filter[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{border:none}.tree-filter[_ngcontent-%COMP%]   .mat-select-placeholder[_ngcontent-%COMP%]{color:#000;margin-bottom:15px}.tree-filter[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{display:none}.tree-filter[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{text-align:left}.div-file-input[_ngcontent-%COMP%]{display:flex;height:52px;padding:8px;text-align:left;border-width:thin;border-style:solid;border-radius:5px;border-color:#e0e0e0;color:#5b5b5b;max-width:100%;min-width:100%}.hidden[_ngcontent-%COMP%]{display:none}.selected-label[_ngcontent-%COMP%]{max-width:450%;min-width:45%;margin-right:40px;padding:8px}.radio[_ngcontent-%COMP%]{padding-top:14px;padding-bottom:14px;padding-left:12px;display:inline-grid;width:100%;height:52px;border-style:solid;border-width:1px;border-radius:5px;border-color:#e0e0e0;margin-top:24px;min-width:50%}"],data:{animation:[l.M,s.X]}}),n})()}];let R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(N)],g.Bz]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,i.u5,i.UX,f.J,_.q,x.Z,R,b.rK]]}),n})()},60198:(y,u,o)=>{o.d(u,{a:()=>x});var d=o(40520),i=o(98545),f=o(5e3),_=o(33344);let x=(()=>{class g{constructor(s,l){this.http=s,this.tokenStorage=l}getHeaders(){var s=new d.WM,l=this.tokenStorage.getToken();return s.set("token",l||"{}")}uploadFile(s){var l=this.getHeaders();const c=new FormData;return c.append("image",s,s.name),this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.FILES,c,{headers:l,reportProgress:!0,observe:"events"})}processFile(s){var l=this.getHeaders();const c=(new d.LE).appendAll({folder:"backups"}),p=new FormData;return p.append("db",s,s.name),this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.FILES,p,{params:c,headers:l,reportProgress:!0,observe:"events"})}removeFile(s){var l=this.getHeaders();const c=(new d.LE).appendAll(s);return this.http.delete(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.FILES,{params:c,headers:l})}getFileBase64(s){var l=this.getHeaders();const c=(new d.LE).appendAll({file:s,format:"base64",folder:"images"});return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.FILES,{params:c,headers:l})}getFile(s,l){var c=this.getHeaders();console.log(l);const p=l||"backups",e=(new d.LE).appendAll({file:s,format:"asitis",folder:p});return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.FILES,{params:e,headers:c})}}return g.\u0275fac=function(s){return new(s||g)(f.LFG(d.eN),f.LFG(_.i))},g.\u0275prov=f.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);