"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[2515],{37425:(k,x,n)=>{n.d(x,{K:()=>r});var l=n(41777);const r=(0,l.X$)("scaleIn",[(0,l.eR)(":enter",[(0,l.oB)({transform:"scale(0)"}),(0,l.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,l.oB)({transform:"scale(1)"}))])])},94927:(k,x,n)=>{n.d(x,{n:()=>O});var l=n(5e3),r=n(23753),p=n(75778),y=n(80013),T=n(69808),m=n(92181),R=n(30277),c=n(25245),h=n(47423),g=n(77446),F=n(93075);const w=["filter"];function M(_,e){if(1&_&&(l.TgZ(0,"div",5),l.TgZ(1,"div",6),l._uU(2),l.qZA(),l.TgZ(3,"div",7),l.TgZ(4,"mat-icon",8),l._uU(5,"search"),l.qZA(),l._UZ(6,"input",9,10),l.qZA(),l.TgZ(8,"button",11),l.TgZ(9,"mat-icon"),l._uU(10,"filter_list"),l.qZA(),l.qZA(),l.Hsn(11,1),l.qZA()),2&_){const d=l.oxw(),f=l.MAs(3);l.xp6(2),l.Oqu(d.name),l.xp6(6),l.Q6J("matMenuTriggerFor",f)}}function I(_,e){if(1&_){const d=l.EpF();l.TgZ(0,"button",12),l.NdJ("click",function(Z){const b=l.CHM(d).$implicit;return l.oxw().toggleColumnVisibility(b,Z)}),l.TgZ(1,"mat-checkbox",13,14),l.NdJ("ngModelChange",function(Z){return l.CHM(d).$implicit.visible=Z})("click",function(Z){return Z.stopPropagation()}),l._uU(3),l.qZA(),l.qZA()}if(2&_){const d=e.$implicit;l.xp6(1),l.Q6J("ngModel",d.visible),l.xp6(2),l.hij(" ",d.name," ")}}const E=["*",[["",8,"actions"]]],C=["*",".actions"];let O=(()=>{class _{constructor(){this.filterChange=new l.vpe}ngAfterViewInit(){this.hideHeader||(0,r.R)(this.filter.nativeElement,"keyup").pipe((0,p.x)(),(0,y.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(d,f){f.stopPropagation(),f.stopImmediatePropagation(),d.visible=!d.visible}}return _.\u0275fac=function(d){return new(d||_)},_.\u0275cmp=l.Xpm({type:_,selectors:[["fury-list"]],viewQuery:function(d,f){if(1&d&&l.Gf(w,5),2&d){let Z;l.iGM(Z=l.CRH())&&(f.filter=Z.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:C,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(d,f){1&d&&(l.F$t(E),l.TgZ(0,"div",0),l.YNc(1,M,12,2,"div",1),l.TgZ(2,"mat-menu",2,3),l.YNc(4,I,4,2,"button",4),l.qZA(),l.Hsn(5),l.qZA()),2&d&&(l.xp6(1),l.Q6J("ngIf",!f.hideHeader),l.xp6(3),l.Q6J("ngForOf",f.columns))},directives:[T.O5,m.VK,T.sg,R.xw,R.Wh,R.SQ,R.yH,c.Hw,h.lW,m.p6,g.oG,F.JJ,F.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),_})()},4940:(k,x,n)=>{n.d(x,{p:()=>T});var l=n(69808),r=n(93075),p=n(7057),y=n(5e3);let T=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=y.oAB({type:m}),m.\u0275inj=y.cJS({imports:[[l.ez,p.q,r.u5]]}),m})()},19165:(k,x,n)=>{n.d(x,{d:()=>r});var l=n(5e3);let r=(()=>{class p{constructor(){}}return p.\u0275fac=function(T){return new(T||p)},p.\u0275dir=l.lG2({type:p,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),p})()},59968:(k,x,n)=>{n.d(x,{i:()=>r});var l=n(5e3);let r=(()=>{class p{constructor(){}}return p.\u0275fac=function(T){return new(T||p)},p.\u0275dir=l.lG2({type:p,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),p})()},2515:(k,x,n)=>{n.r(x),n.d(x,{RulesTableModule:()=>We});var l=n(69808),r=n(93075),p=n(61264),y=n(4940),T=n(7057),m=n(72467),R=n(3299),c=n(86087),h=n(84847),g=n(32075),F=n(96831),w=n(92198),M=n(88914),I=n(14499),E=n(70655),C=n(48966),O=n(37425);class _{constructor(i){this.day=i&&i.day||"",this.id=i&&i.id||"",this.from1=i&&i.from1||"",this.to1=i&&i.to1||"",this.from2=i&&i.from2||"",this.to2=i&&i.to2||"",this.from3=i&&i.from3||"",this.to3=i&&i.to3||"",this.from4=i&&i.from4||"",this.to4=i&&i.to4||"",this.from5=i&&i.from5||"",this.to5=i&&i.to5||"",this.from6=i&&i.from6||"",this.to6=i&&i.to6||"",this.from7=i&&i.from7||"",this.to7=i&&i.to7||"",this.from8=i&&i.from8||"",this.to8=i&&i.to8||"",this.from9=i&&i.from9||"",this.to9=i&&i.to9||"",this.from10=i&&i.from10||"",this.to10=i&&i.to10||""}stringToTime(i){let t,o;return o=parseInt(i),t=this.zeroFill(o,4),t=[t.slice(0,2),":",t.slice(2)].join(""),t}timeToString(i){let t;return t=(+i.replace(/:/gi,"")).toString(),t}zeroFill(i,t){return(t-=i.toString().length)>0?new Array(t+1).join("0")+i:i.toString()}}var e=n(5e3),d=n(30277),f=n(67322),Z=n(77531),D=n(50974),b=n(25245),L=n(47423);const H=["timesForm"];function z(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"mat-form-field",5),e.TgZ(2,"mat-label",6),e._uU(3,"Desde"),e.qZA(),e._UZ(4,"input",17),e.TgZ(5,"ngx-material-timepicker",8,18),e.NdJ("timeSet",function(a){const v=e.CHM(t).$implicit;return e.oxw(2).onTimeChanged(a,2*(v+1))}),e.qZA(),e.TgZ(7,"mat-icon",10),e._uU(8,"access_time"),e.qZA(),e.qZA(),e.TgZ(9,"mat-form-field",5),e.TgZ(10,"mat-label",6),e._uU(11,"Hasta"),e.qZA(),e._UZ(12,"input",17),e.TgZ(13,"ngx-material-timepicker",8,19),e.NdJ("timeSet",function(a){const v=e.CHM(t).$implicit;return e.oxw(2).onTimeChanged(a,2*(v+1)+1)}),e.qZA(),e.TgZ(15,"mat-icon",10),e._uU(16,"access_time"),e.qZA(),e.qZA(),e.TgZ(17,"button",16),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw(2).deleteTimepicker(u)}),e.TgZ(18,"mat-icon"),e._uU(19,"delete"),e.qZA(),e._uU(20,"\xa0Eliminar"),e.qZA(),e.qZA()}if(2&s){const t=i.$implicit,o=e.MAs(6),a=e.MAs(14),u=e.oxw(2);e.uIk("id","setTimepicker"+t),e.xp6(4),e.MGl("formControlName","from",t+2,""),e.Q6J("ngxTimepicker",o)("format",24)("min",u.mins[2*(t+1)])("max",u.maxs[2*(t+1)]),e.xp6(1),e.Q6J("theme",u.homaacsaTheme),e.xp6(7),e.MGl("formControlName","to",t+2,""),e.Q6J("ngxTimepicker",a)("format",24)("min",u.mins[2*(t+1)+1])("max",u.maxs[2*(t+1)+1]),e.xp6(1),e.Q6J("theme",u.homaacsaTheme)}}function Q(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().save()}),e.TgZ(1,"mat-dialog-content"),e.TgZ(2,"div",3),e.TgZ(3,"div",4),e.TgZ(4,"mat-form-field",5),e.TgZ(5,"mat-label",6),e._uU(6,"Desde"),e.qZA(),e._UZ(7,"input",7),e.TgZ(8,"ngx-material-timepicker",8,9),e.NdJ("timeSet",function(a){return e.CHM(t),e.oxw().onTimeChanged(a,0)}),e.qZA(),e.TgZ(10,"mat-icon",10),e._uU(11,"access_time"),e.qZA(),e.qZA(),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label",6),e._uU(14,"Hasta"),e.qZA(),e._UZ(15,"input",11),e.TgZ(16,"ngx-material-timepicker",8,12),e.NdJ("timeSet",function(a){return e.CHM(t),e.oxw().onTimeChanged(a,1)}),e.qZA(),e.TgZ(18,"mat-icon",10),e._uU(19,"access_time"),e.qZA(),e.qZA(),e.TgZ(20,"button",13),e._uU(21,"\xa0"),e.qZA(),e.qZA(),e.YNc(22,z,21,13,"div",14),e.qZA(),e.TgZ(23,"div"),e._UZ(24,"hr"),e.qZA(),e.TgZ(25,"div",15),e.TgZ(26,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().addTimepicker()}),e.TgZ(27,"mat-icon"),e._uU(28,"add"),e.qZA(),e._uU(29,"\xa0Agregar"),e.qZA(),e.TgZ(30,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveIntervals()}),e.TgZ(31,"mat-icon"),e._uU(32,"done"),e.qZA(),e._uU(33,"\xa0Aceptar"),e.qZA(),e.TgZ(34,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().close()}),e.TgZ(35,"mat-icon"),e._uU(36,"cancel"),e.qZA(),e._uU(37,"\xa0Cancelar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.MAs(9),o=e.MAs(17),a=e.oxw();e.Q6J("formGroup",a.timesForm),e.xp6(3),e.uIk("id","setTimepicker0"),e.xp6(4),e.Q6J("ngxTimepicker",t)("format",24)("min",a.mins[0])("max",a.maxs[0]),e.xp6(1),e.Q6J("theme",a.homaacsaTheme),e.xp6(7),e.Q6J("ngxTimepicker",o)("format",24)("min",a.mins[1])("max",a.maxs[1]),e.xp6(1),e.Q6J("theme",a.homaacsaTheme),e.xp6(6),e.Q6J("ngForOf",a.additionalTimepickers)}}let B=(()=>{class s{constructor(t,o){this.data=t,this.dialogRef=o,this.title="Rangos de tiempo",this.timesForm=new r.cw({day:new r.NI("",[r.kI.required]),id:new r.NI,from1:new r.NI("",[r.kI.required]),to1:new r.NI("",[r.kI.required]),from2:new r.NI,to2:new r.NI,from3:new r.NI,to3:new r.NI,from4:new r.NI,to4:new r.NI,from5:new r.NI,to5:new r.NI,from6:new r.NI,to6:new r.NI,from7:new r.NI,to7:new r.NI,from8:new r.NI,to8:new r.NI,from9:new r.NI,to9:new r.NI,from10:new r.NI,to10:new r.NI}),this.mins=["00:00","","","","","","","","","","","","","","","","","","",""],this.maxs=["23:59","","","","","","","","","","","","","","","","","","",""],this.additionalTimepickers=[],this.homaacsaTheme={container:{bodyBackgroundColor:"#ffffff",buttonColor:"#0f192a",primaryFontFamily:"#ffffff"},dial:{dialBackgroundColor:"#0f192a",dialInactiveColor:"#8c8c8c",dialActiveColor:"#ffffff",dialEditableActiveColor:"#ffffff",dialEditableBackgroundColor:"#ffffff"},clockFace:{clockFaceBackgroundColor:"#0f192a",clockHandColor:"#165ffe",clockFaceTimeActiveColor:"#ffffff",clockFaceTimeInactiveColor:"#8c8c8c",clockFaceInnerTimeInactiveColor:"#8c8c8c",clockFaceTimeDisabledColor:"#d9d9d9"}},o.disableClose=!0}ngOnInit(){this.timeRange=new _(this.data.timeRange),this.timesForm.patchValue(this.timeRange);for(var t=1;t<=10;t++)""!=this.timesForm.controls["from"+t].value&&(this.mins[2*t-2]=1==t||""==this.timeRange["to"+(t-1)]?"00:00":this.timeRange["to"+(t-1)],this.maxs[2*t-2]=this.timeRange["to"+t],this.mins[2*t-1]=this.timeRange["from"+t],this.maxs[2*t-1]=10==t||""!=this.timeRange["from"+(t+1)]?this.timeRange["from"+(t+1)]:"23:59",t>=2&&(this.additionalTimepickers.push(t-2),this.additionalTimepickers.sort()))}onSubmit(){}saveIntervals(){""===this.timesForm.value.id?this.validateIntervals()&&this.addIntervals():this.updateIntervals()}validateIntervals(){for(var t=1;t<=10;t++)if(+this.timeRange.timeToString(this.timesForm.value["from"+t])>+this.timeRange.timeToString(this.timesForm.value["to"+t]))return alert("Error en el intervalo"),!1;return!0}addIntervals(){this.dialogRef.close({action:"create",data:this.timesForm.value})}updateIntervals(){console.log("Updating intervals"),this.dialogRef.close({action:"update",data:this.timesForm.value})}close(){console.log("Canceling doing nothing"),this.dialogRef.close({action:"cancel",data:this.timesForm.value})}addTimepicker(){console.log("Size of additionalTimepickers ["+this.additionalTimepickers.length+"]");let t=this.additionalTimepickers.length;if(this.additionalTimepickers.length<9){for(let o=0;o<=t;o++)if(!(this.additionalTimepickers.indexOf(o)>=0)){console.log("adding timepicker "+o),this.additionalTimepickers.push(o),this.additionalTimepickers.sort();break}}else alert("\xa1No se pueden agregar m\xe1s de 10 intervalos por d\xeda!")}deleteTimepicker(t){var o=this.additionalTimepickers.indexOf(t);this.additionalTimepickers.splice(o,1);var a=o+2;this.timesForm.controls["from"+a].setValue(""),this.timesForm.controls["to"+a].setValue("")}onTimeChanged(t,o){this.mins[o+1]=t,this.maxs[o+1]=this.maxs[o],this.maxs[o-1]=t}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(C.WI),e.Y36(C.so))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],viewQuery:function(t,o){if(1&t&&e.Gf(H,5),2&t){let a;e.iGM(a=e.CRH())&&(o._focusMe=a.first)}},decls:3,vars:2,consts:[["mat-dialog-title","",2,"margin","0px 0px 8px"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","8px",1,"result"],["fxLayoutAlign","center center","fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","8px",2,"min-height","75px","height","35px"],["appearance","outline"],[2,"margin-left","8px"],["formControlName","from1","matInput","","readonly","",2,"width","200px",3,"ngxTimepicker","format","min","max"],[3,"theme","timeSet"],["pickerFrom0",""],["matPrefix",""],["formControlName","to1","matInput","","readonly","",2,"width","200px",3,"ngxTimepicker","format","min","max"],["pickerTo0",""],["color","primary","mat-button","","type","button",2,"width","110px"],["fxLayoutAlign","center center","fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","8px","style","min-height: 75px; height: 35px",4,"ngFor","ngForOf"],["fxLayoutAlign","center center","fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","24px"],["color","primary","mat-button","","mat-raised-button","","type","button",3,"click"],["matInput","","readonly","",2,"width","200px",3,"ngxTimepicker","format","min","max","formControlName"],["pickerFrom",""],["pickerTo",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.YNc(2,Q,38,13,"form",1)),2&t&&(e.xp6(1),e.Oqu(o.title),e.xp6(1),e.Q6J("ngIf",o.timesForm))},directives:[C.uh,l.O5,r._Y,r.JL,r.sg,C.xY,d.Wh,d.xw,d.SQ,f.KE,f.hX,r.Fj,Z.Nt,r.JJ,r.u,D.I2,D.ro,b.Hw,f.qo,L.lW,l.sg],encapsulation:2}),s})();class V{constructor(i){let t=new _;this.id=i&&i.id||null,this.TYPE=i&&i.TYPE||null,t.day="monday",this.monday=i&&i.monday||new _(t),t.day="tuesday",this.tuesday=i&&i.tuesday||new _(t),t.day="wednesday",this.wednesday=i&&i.wednesday||new _(t),t.day="thursday",this.thursday=i&&i.thursday||new _(t),t.day="friday",this.friday=i&&i.friday||new _(t),t.day="saturday",this.saturday=i&&i.saturday||new _(t),t.day="sunday",this.sunday=i&&i.sunday||new _(t)}}class ${constructor(i){this.id=i&&i.id||null,this.DAY=i&&i.DAY||"",this.week=i&&i.week||"",this.MONTH=i&&i.MONTH||""}}class K{constructor(i){this.id=i&&i.id||"",this.TYPE=i&&i.TYPE||"",this.f1=i&&i.f1||"",this.f2=i&&i.f2||"",this.f3=i&&i.f3||"",this.f4=i&&i.f4||"",this.f5=i&&i.f5||"",this.f6=i&&i.f6||"",this.f7=i&&i.f7||"",this.f8=i&&i.f8||"",this.f9=i&&i.f9||"",this.f10=i&&i.f10||"",this.f11=i&&i.f11||"",this.f12=i&&i.f12||"",this.f13=i&&i.f13||"",this.f14=i&&i.f14||"",this.f15=i&&i.f15||"",this.f16=i&&i.f16||"",this.f17=i&&i.f17||"",this.f18=i&&i.f18||"",this.f19=i&&i.f19||"",this.f20=i&&i.f20||""}}class j{constructor(i){this.id=i&&i.id||"",this.single=i&&i.single||"",this.DAY=i&&i.DAY||"",this.week=i&&i.week||"",this.MONTH=i&&i.MONTH||"",this.TYPE=i&&i.TYPE||"",this.year=i&&i.year||""}}class q{constructor(i){this.id=i&&i.id||null,this.rule_id=i&&i.rule_id||null,this.rule_type=i&&i.rule_type||null,this.name=i&&i.name||"",this.description=i&&i.description||"",this.status=i&&i.status||2,this.content_summary=i&&i.content_summary||"",this.sent_to_fho=i&&i.sent_to_fho||0,this.sent_to_dho=i&&i.sent_to_dho||0,this.discovered=i&&i.discovered||0,this.owner_fleet=i&&i.owner_fleet||"",this.sync=i&&i.sync||0,this.timestamp=i&&i.timestamp||"",this.Times_Rule=i&&i.Times_Rule||new V,this.Visits_Rule=i&&i.Visits_Rule||new $,this.Fuels_Rule=i&&i.Fuels_Rule||new K,this.Limits_Rule=i&&i.Limits_Rule||new j}}var S=n(57261),J=n(12783),X=n(9360),ee=n(59968),te=n(36551),N=n(92081),ie=n(32368),Y=n(74107),oe=n(90508),G=n(79814),se=n(77446),ae=n(4834);function re(s,i){1&s&&e._uU(0,"Propiedades de regla")}function ne(s,i){if(1&s&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.type)}}function le(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"mat-form-field",12),e.TgZ(1,"mat-label"),e._uU(2,"Tipo de regla"),e.qZA(),e.TgZ(3,"mat-select",20),e.NdJ("selectionChange",function(a){return e.CHM(t),e.oxw().prepareDetailsRuleByType(a.value)}),e.YNc(4,ne,2,2,"mat-option",21),e.qZA(),e.TgZ(5,"mat-hint"),e._uU(6,"Seleccionar el tipo de regla."),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.typeRuleOptions)}}function ue(s,i){1&s&&(e.TgZ(0,"mat-form-field",12),e.TgZ(1,"mat-label"),e._uU(2,"Tipo de regla"),e.qZA(),e._UZ(3,"input",23),e.qZA()),2&s&&(e.xp6(3),e.Q6J("readonly",!0))}function ce(s,i){1&s&&e._uU(0,"Detalle de regla")}function me(s,i){if(1&s&&(e.TgZ(0,"mat-radio-button",31),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.scope)}}function de(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"mat-checkbox",34),e.NdJ("change",function(a){e.CHM(t);const u=e.oxw().$implicit;return e.oxw(2).onCheck(a,u)}),e._uU(2),e.qZA(),e.TgZ(3,"button",35),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw(3).setIntervals(u.id)}),e.TgZ(4,"mat-icon"),e._uU(5,"access_time"),e.qZA(),e._uU(6,"\xa0Horarios"),e.qZA(),e.qZA()}if(2&s){const t=i.$implicit;e.xp6(1),e.s9C("id",t.id),e.s9C("formControlName",t.id),e.xp6(1),e.Oqu(t.label),e.xp6(1),e.MGl("id","times_+",t.id,""),e.Q6J("disabled",!t.checked)}}function pe(s,i){if(1&s&&(e.TgZ(0,"div",32),e.YNc(1,de,7,5,"div",33),e.qZA()),2&s){const t=i.$implicit;e.xp6(1),e.Q6J("ngForOf",t.days)}}function he(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"mat-step",5),e.TgZ(1,"form",6),e.YNc(2,ce,1,0,"ng-template",7),e.TgZ(3,"div",9),e._uU(4,"Tipo de restricci\xf3n."),e.qZA(),e.TgZ(5,"div",24),e.TgZ(6,"mat-radio-group",25),e.NdJ("change",function(a){return e.CHM(t),e.oxw().changeScope(a)}),e.YNc(7,me,2,2,"mat-radio-button",26),e.qZA(),e.qZA(),e._UZ(8,"hr"),e.YNc(9,pe,2,1,"div",27),e.TgZ(10,"div",28),e.TgZ(11,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkEmAll(!0)}),e.TgZ(12,"mat-icon"),e._uU(13,"check_box"),e.qZA(),e._uU(14,"\xa0Todos"),e.qZA(),e.TgZ(15,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkEmAll(!1)}),e.TgZ(16,"mat-icon"),e._uU(17,"check_box_outline_blank"),e.qZA(),e._uU(18,"\xa0Ninguno"),e.qZA(),e.qZA(),e.TgZ(19,"div",16),e.TgZ(20,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._uU(21,"GUARDAR REGLA"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("stepControl",t.detailTimeFormGroup),e.xp6(1),e.Q6J("formGroup",t.detailTimeFormGroup),e.xp6(6),e.Q6J("ngForOf",t.scopes),e.xp6(2),e.Q6J("ngForOf",t.weekDaysCheckboxes),e.xp6(11),e.Q6J("disabled",!t.allowCreateRule)}}function _e(s,i){1&s&&e._uU(0,"Detalle de regla")}function fe(s,i){if(1&s&&(e.TgZ(0,"mat-radio-button",31),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.type)}}function ge(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"mat-step",5),e.TgZ(1,"form",6),e.YNc(2,_e,1,0,"ng-template",7),e.TgZ(3,"div",10),e.TgZ(4,"mat-form-field",12),e.TgZ(5,"mat-label"),e._uU(6,"Cantidad por carga"),e.qZA(),e.TgZ(7,"input",36),e.NdJ("keypress",function(a){return e.CHM(t),e.oxw().numericOnly(a)}),e.qZA(),e.TgZ(8,"mat-hint"),e._uU(9,"Se\xf1alar cantidad m\xe1xima de despacho por una carga."),e.qZA(),e.TgZ(10,"mat-error"),e._uU(11,"Debe ser num\xe9rico y no puede ser cero."),e.qZA(),e.qZA(),e.TgZ(12,"mat-form-field",12),e.TgZ(13,"mat-label"),e._uU(14,"Cantidad por d\xeda"),e.qZA(),e.TgZ(15,"input",37),e.NdJ("keypress",function(a){return e.CHM(t),e.oxw().numericOnly(a)}),e.qZA(),e.TgZ(16,"mat-hint"),e._uU(17,"Se\xf1alar cantidad m\xe1xima por d\xeda."),e.qZA(),e.TgZ(18,"mat-error"),e._uU(19,"Debe ser num\xe9rico y no puede ser cero."),e.qZA(),e.qZA(),e.TgZ(20,"mat-form-field",12),e.TgZ(21,"mat-label"),e._uU(22,"Cantidad por semana"),e.qZA(),e.TgZ(23,"input",38),e.NdJ("keypress",function(a){return e.CHM(t),e.oxw().numericOnly(a)}),e.qZA(),e.TgZ(24,"mat-hint"),e._uU(25,"Se\xf1alar cantidad m\xe1xima de despacho por semana."),e.qZA(),e.TgZ(26,"mat-error"),e._uU(27,"Debe ser num\xe9rico y no puede ser cero."),e.qZA(),e.qZA(),e.TgZ(28,"mat-form-field",12),e.TgZ(29,"mat-label"),e._uU(30,"Cantidad mensual"),e.qZA(),e.TgZ(31,"input",39),e.NdJ("keypress",function(a){return e.CHM(t),e.oxw().numericOnly(a)}),e.qZA(),e.TgZ(32,"mat-hint"),e._uU(33,"Se\xf1alar cantidad m\xe1xima de despacho por mes."),e.qZA(),e.TgZ(34,"mat-error"),e._uU(35,"Debe ser num\xe9rico y no puede ser cero."),e.qZA(),e.qZA(),e.TgZ(36,"mat-form-field",12),e.TgZ(37,"mat-label"),e._uU(38,"Cantidad anual"),e.qZA(),e.TgZ(39,"input",40),e.NdJ("keypress",function(a){return e.CHM(t),e.oxw().numericOnly(a)}),e.qZA(),e.TgZ(40,"mat-hint"),e._uU(41,"Se\xf1alar cantidad m\xe1xima de despacho por a\xf1o."),e.qZA(),e.TgZ(42,"mat-error"),e._uU(43,"Debe ser num\xe9rico y no puede ser cero."),e.qZA(),e.qZA(),e._UZ(44,"mat-divider"),e.TgZ(45,"div",9),e._uU(46,"Tipo de restricci\xf3n."),e.qZA(),e.TgZ(47,"div",41),e.TgZ(48,"mat-radio-group",42),e.NdJ("change",function(a){return e.CHM(t),e.oxw().changeLimitType(a)}),e.YNc(49,fe,2,2,"mat-radio-button",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",16),e.TgZ(51,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._uU(52,"GUARDAR REGLA"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("stepControl",t.detailLimitFormGroup),e.xp6(1),e.Q6J("formGroup",t.detailLimitFormGroup),e.xp6(48),e.Q6J("ngForOf",t.limit_types),e.xp6(2),e.Q6J("disabled",t.detailLimitFormGroup.invalid)}}function xe(s,i){1&s&&e._uU(0,"Detalle de regla")}function Te(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"mat-step",5),e.TgZ(1,"form",6),e.YNc(2,xe,1,0,"ng-template",7),e.TgZ(3,"div",9),e._uU(4,"Cantidad m\xe1xima de visitas por:"),e.qZA(),e.TgZ(5,"div",10),e.TgZ(6,"mat-form-field",12),e.TgZ(7,"mat-label"),e._uU(8,"D\xeda"),e.qZA(),e.TgZ(9,"input",37),e.NdJ("keypress",function(a){return e.CHM(t),e.oxw().integerOnly(a)}),e.qZA(),e.TgZ(10,"mat-error"),e._uU(11,"Debe ser num\xe9rico y no puede ser cero."),e.qZA(),e.qZA(),e.TgZ(12,"mat-form-field",12),e.TgZ(13,"mat-label"),e._uU(14,"Semana"),e.qZA(),e.TgZ(15,"input",38),e.NdJ("keypress",function(a){return e.CHM(t),e.oxw().integerOnly(a)}),e.qZA(),e.TgZ(16,"mat-error"),e._uU(17,"Debe ser num\xe9rico y no puede ser cero."),e.qZA(),e.qZA(),e.TgZ(18,"mat-form-field",12),e.TgZ(19,"mat-label"),e._uU(20,"Mes"),e.qZA(),e.TgZ(21,"input",39),e.NdJ("keypress",function(a){return e.CHM(t),e.oxw().integerOnly(a)}),e.qZA(),e.TgZ(22,"mat-error"),e._uU(23,"Debe ser num\xe9rico y no puede ser cero."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",16),e.TgZ(25,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._uU(26,"GUARDAR REGLA"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("stepControl",t.detailVisitFormGroup),e.xp6(1),e.Q6J("formGroup",t.detailVisitFormGroup),e.xp6(24),e.Q6J("disabled",t.detailVisitFormGroup.invalid)}}function Re(s,i){1&s&&e._uU(0,"Detalle de regla")}function ye(s,i){if(1&s&&(e.TgZ(0,"mat-radio-button",31),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.scope)}}function ve(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",45),e.TgZ(1,"mat-checkbox",34),e.NdJ("change",function(a){return e.CHM(t),e.oxw(2).onCheckFuel(a)}),e._uU(2),e.qZA(),e.qZA()}if(2&s){const t=i.$implicit;e.xp6(1),e.s9C("id",t.name),e.s9C("formControlName",t.name),e.xp6(1),e.Oqu(t.name)}}function Ze(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"mat-step",5),e.TgZ(1,"form",6),e.YNc(2,Re,1,0,"ng-template",7),e.TgZ(3,"div",9),e._uU(4,"Tipo de restricci\xf3n."),e.qZA(),e.TgZ(5,"div",43),e.TgZ(6,"mat-radio-group",25),e.NdJ("change",function(a){return e.CHM(t),e.oxw().changeScopeFuelType(a)}),e.YNc(7,ye,2,2,"mat-radio-button",26),e.qZA(),e.qZA(),e._UZ(8,"mat-divider"),e.YNc(9,ve,3,3,"div",44),e.TgZ(10,"div",28),e.TgZ(11,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkAllFuels(!0)}),e.TgZ(12,"mat-icon"),e._uU(13,"check_box"),e.qZA(),e._uU(14,"\xa0Todos"),e.qZA(),e.TgZ(15,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkAllFuels(!1)}),e.TgZ(16,"mat-icon"),e._uU(17,"check_box_outline_blank"),e.qZA(),e._uU(18,"\xa0Ninguno"),e.qZA(),e.qZA(),e.TgZ(19,"div",16),e.TgZ(20,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._uU(21,"GUARDAR REGLA"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("stepControl",t.detailFuelFormGroup),e.xp6(1),e.Q6J("formGroup",t.detailFuelFormGroup),e.xp6(6),e.Q6J("ngForOf",t.scopes_fuel_type),e.xp6(2),e.Q6J("ngForOf",t.fuelsCheckboxes),e.xp6(11),e.Q6J("disabled",!t.allowCreateRule)}}let P=(()=>{class s{constructor(t,o,a,u,v,U){this.data=t,this.dialogRef=o,this.dialog=a,this.snackbar=u,this.rulesService=v,this.productsService=U,this.active_label="Activada",this.allowCreateRule=!1,this.days_of_week=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],this.generalFormGroup=new r.cw({id:new r.NI,rule_type:new r.NI(null),rule_type_name:new r.NI(null),name:new r.NI("",[r.kI.required]),description:new r.NI("",[r.kI.required]),status:new r.NI(!0)}),this.generalFormGroupRO=!1,this.limit_types=[{id:0,type:"Dinero",checked:!0},{id:1,type:"Litros",checked:!1}],this.scopes=[{id:1,scope:"Permitir cargar en los dias y rangos de tiempo seleccionados",checked:!0},{id:2,scope:"No permitir cargar en los dias y rangos de tiempo seleccionados",checked:!1}],this.scopes_fuel_type=[{id:1,scope:"Permitir solo los combustibles seleccionados",checked:!0},{id:2,scope:"No permitir los combustibles seleccionados",checked:!1}],this.theRule=new q,this.typeRuleOptions=[{id:0,type:"Time"},{id:1,type:"Limit"},{id:2,type:"Visit"},{id:3,type:"Fuel"}],this.weekDaysCheckboxes=[{group:1,days:[{id:"monday",label:"Lunes",checked:!1},{id:"tuesday",label:"Martes",checked:!1}]},{group:2,days:[{id:"wednesday",label:"Mi\xe9rcoles",checked:!1},{id:"thursday",label:"Jueves",checked:!1}]},{group:3,days:[{id:"friday",label:"Viernes",checked:!1},{id:"saturday",label:"S\xe1bado",checked:!1}]},{group:4,days:[{id:"sunday",label:"Domingo",checked:!1}]}],this.detailTimeFormGroup=new r.cw({id:new r.NI,TYPE:new r.NI(1,[r.kI.required]),monday:new r.NI(this.weekDaysCheckboxes[0].days[0].checked,[r.kI.required]),tuesday:new r.NI(this.weekDaysCheckboxes[0].days[1].checked,[r.kI.required]),wednesday:new r.NI(this.weekDaysCheckboxes[1].days[0].checked,[r.kI.required]),thursday:new r.NI(this.weekDaysCheckboxes[0].days[1].checked,[r.kI.required]),friday:new r.NI(this.weekDaysCheckboxes[2].days[0].checked,[r.kI.required]),saturday:new r.NI(this.weekDaysCheckboxes[2].days[1].checked,[r.kI.required]),sunday:new r.NI(this.weekDaysCheckboxes[3].days[0].checked,[r.kI.required])}),this.detailLimitFormGroup=new r.cw({id:new r.NI,TYPE:new r.NI(0,[r.kI.required]),single:new r.NI("",[A]),DAY:new r.NI("",[A]),week:new r.NI("",[A]),MONTH:new r.NI("",[A]),year:new r.NI("",[A])}),this.detailVisitFormGroup=new r.cw({id:new r.NI,DAY:new r.NI("",[A]),week:new r.NI("",[A]),MONTH:new r.NI("",[A])})}ngOnInit(){return(0,E.mG)(this,void 0,void 0,function*(){this.time_range=new _,this.fuelsCheckboxes=yield this.getFuels();for(let o=0;o<this.fuelsCheckboxes.length;o++)this.fuelsCheckboxes[o].checked=!1;if(null!=this.data){if(this.theRule=new q(this.data),this.generalFormGroupRO=!0,this.prepareDetailsRuleByType(this.theRule.rule_type),0==this.theRule.rule_type){for(var t=0;t<this.days_of_week.length;t++)if(this.theRule.Times_Rule[this.days_of_week[t]].day=this.days_of_week[t],""!=this.theRule.Times_Rule[this.days_of_week[t]].to1){let o=Math.floor((t+2)/2);this.weekDaysCheckboxes[o-1].days[(t+2)%2].checked=!0}this.setDetailTimeFormGroup(),this.allowCreateRule=this.validateDetailTimeFormGroup()}if(1==this.theRule.rule_type&&(0==+this.theRule.Limits_Rule.single&&(this.theRule.Limits_Rule.single=""),0==+this.theRule.Limits_Rule.DAY&&(this.theRule.Limits_Rule.DAY=""),0==+this.theRule.Limits_Rule.week&&(this.theRule.Limits_Rule.week=""),0==+this.theRule.Limits_Rule.MONTH&&(this.theRule.Limits_Rule.MONTH=""),0==+this.theRule.Limits_Rule.year&&(this.theRule.Limits_Rule.year=""),this.setDetailLimitFormGroup(),this.allowCreateRule=this.validateDetailLimitFormGroup()),2==this.theRule.rule_type&&(0==+this.theRule.Visits_Rule.DAY&&(this.theRule.Visits_Rule.DAY=""),0==+this.theRule.Visits_Rule.week&&(this.theRule.Visits_Rule.week=""),0==+this.theRule.Visits_Rule.MONTH&&(this.theRule.Visits_Rule.MONTH=""),this.setDetailVisitFormGroup(),this.allowCreateRule=this.validateDetailVisitFormGroup()),3==this.theRule.rule_type){for(let o=1;o<=20;o++)if(0==this.theRule.Fuels_Rule["f"+o])this.theRule.Fuels_Rule["f"+o]="";else e:for(let a=0;a<this.fuelsCheckboxes.length;a++)if(this.fuelsCheckboxes[a].id==this.theRule.Fuels_Rule["f"+o]){this.fuelsCheckboxes[a].checked=!0;break e}this.setDetailFuelFormGroup(),this.allowCreateRule=this.validateDetailFuelFormGroup()}}})}getFuels(){return(0,E.mG)(this,void 0,void 0,function*(){return yield this.productsService.getAll().toPromise()})}changeLimitType(t){this.theRule.Limits_Rule.TYPE=t.value,this.setDetailLimitFormGroup()}changeScope(t){this.theRule.Times_Rule.TYPE=t.value,this.setDetailTimeFormGroup()}changeScopeFuelType(t){this.theRule.Fuels_Rule.TYPE=t.value,this.setDetailFuelFormGroup()}checkEmAll(t){this.theRule.Times_Rule.TYPE=this.detailTimeFormGroup.value.TYPE,this.weekDaysCheckboxes.forEach(function(o){o.days.forEach(function(a){a.checked=t})}),this.setDetailTimeFormGroup()}checkAllFuels(t){this.fuelsCheckboxes.forEach(function(o){o.checked=t}),this.setDetailFuelFormGroup()}createRule(){this.rulesService.create(this.theRule).subscribe(t=>{this.theRule.id=t.id,this.snackbar.open(t.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.theRule)},t=>{this.snackbar.open(t.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}integerOnly(t){return/^[1-9][0-9]*?$/.test(t.key)}initializeDetailFuelFormGroup(){this.theRule.Fuels_Rule.TYPE=""==this.theRule.Fuels_Rule.TYPE?"1":this.theRule.Fuels_Rule.TYPE,this.detailFuelFormGroup=new r.cw({id:new r.NI,TYPE:new r.NI(+this.theRule.Fuels_Rule.TYPE,[r.kI.required])});for(var t=0;t<this.fuelsCheckboxes.length;t++)this.detailFuelFormGroup.addControl(this.fuelsCheckboxes[t].name,new r.NI(this.fuelsCheckboxes[t].checked));this.theRule.Fuels_Rule.TYPE=this.detailFuelFormGroup.value.TYPE,this.allowCreateRule=!0}numericOnly(t){let o=t.target.value+t.key;return!!new RegExp(/^([1-9][0-9]{0,7}||[0]||[0][.][0-9]{0,2}||[1-9][0-9]{0,7}[.][0-9]{0,2})$/).test(o)}onCheck(t,o){let a=this.weekDaysCheckboxes[o.group-1].days.findIndex(u=>u.id==t.source.id);this.weekDaysCheckboxes[o.group-1].days[a].checked=t.checked,this.theRule.Times_Rule.TYPE=this.detailTimeFormGroup.value.TYPE,this.setDetailTimeFormGroup()}onCheckFuel(t){let o=this.fuelsCheckboxes.findIndex(a=>a.name==t.source.id);this.fuelsCheckboxes[o].checked=t.checked,this.theRule.Fuels_Rule.TYPE=this.detailFuelFormGroup.value.TYPE,this.setDetailFuelFormGroup()}prepareDetailsRuleByType(t){this.theRule.rule_type=t,this.visibleDetailTimeGroup=0==t,this.visibleDetailLimitGroup=1==t,this.visibleDetailVisitGroup=2==t,this.visibleDetailFuelGroup=3==t,this.active_label=2==this.theRule.status?"Activada":"Desactivada",this.setGeneralFormGroup(),3==t&&this.initializeDetailFuelFormGroup()}setActiveRule(t){this.active_label=t.checked?"Activada":"Desactivada",this.theRule.status=t.checked?2:1,this.theRule.rule_type&&this.setGeneralFormGroup()}setDetailLimitFormGroup(){this.detailLimitFormGroup.setValue({id:this.theRule.id,TYPE:this.theRule.Limits_Rule.TYPE,single:this.theRule.Limits_Rule.single,DAY:this.theRule.Limits_Rule.DAY,week:this.theRule.Limits_Rule.week,MONTH:this.theRule.Limits_Rule.MONTH,year:this.theRule.Limits_Rule.year})}setDetailTimeFormGroup(){this.detailTimeFormGroup.setValue({id:this.theRule.id,TYPE:this.theRule.Times_Rule.TYPE,monday:this.weekDaysCheckboxes[0].days[0].checked,tuesday:this.weekDaysCheckboxes[0].days[1].checked,wednesday:this.weekDaysCheckboxes[1].days[0].checked,thursday:this.weekDaysCheckboxes[1].days[1].checked,friday:this.weekDaysCheckboxes[2].days[0].checked,saturday:this.weekDaysCheckboxes[2].days[1].checked,sunday:this.weekDaysCheckboxes[3].days[0].checked})}setDetailVisitFormGroup(){this.detailVisitFormGroup.setValue({id:this.theRule.id,DAY:this.theRule.Visits_Rule.DAY,week:this.theRule.Visits_Rule.week,MONTH:this.theRule.Visits_Rule.MONTH})}setDetailFuelFormGroup(){let t={};for(var[o,a]of Object.entries(this.detailFuelFormGroup.value))if("id"==o||"TYPE"==o)t[o]=this.theRule.Fuels_Rule[o];else t:for(var u=0;u<this.fuelsCheckboxes.length;u++)if(o==this.fuelsCheckboxes[u].name){t[o]=this.fuelsCheckboxes[u].checked;break t}this.detailFuelFormGroup.setValue(t)}setGeneralFormGroup(){this.generalFormGroup.setValue({id:this.theRule.id,rule_type:this.theRule.rule_type,rule_type_name:this.typeRuleOptions[this.theRule.rule_type].type,name:this.theRule.name,description:this.theRule.description,status:2==this.theRule.status})}setIntervals(t){let o;for(let a=1;a<=10;a++)""!=this.theRule.Times_Rule[t]["to"+a]&&(this.theRule.Times_Rule[t]["from"+a]=this.time_range.stringToTime(this.theRule.Times_Rule[t]["from"+a]),this.theRule.Times_Rule[t]["to"+a]=this.time_range.stringToTime(this.theRule.Times_Rule[t]["to"+a]));o=this.theRule.Times_Rule[t],this.dialog.open(B,{data:{timeRange:o}}).afterClosed().subscribe(a=>{for(let u=1;u<=10;u++)""!=a.data["from"+u]&&(a.data["from"+u]=this.time_range.timeToString(a.data["from"+u])),""!=a.data["to"+u]&&(a.data["to"+u]=this.time_range.timeToString(a.data["to"+u]));this.theRule.Times_Rule[a.data.day]=a.data,this.theRule.rule_type=this.generalFormGroup.value.rule_type,this.theRule.name=this.generalFormGroup.value.name,this.theRule.description=this.generalFormGroup.value.description,this.theRule.status=this.generalFormGroup.value.status?2:1,this.theRule.Times_Rule.TYPE=this.detailTimeFormGroup.value.TYPE,this.allowCreateRule=this.validateDetailTimeFormGroup()})}submit(){if(this.theRule.rule_type=this.generalFormGroup.value.rule_type,this.theRule.name=this.generalFormGroup.value.name,this.theRule.description=this.generalFormGroup.value.description,this.theRule.status=this.generalFormGroup.value.status?2:1,0==this.theRule.rule_type){delete this.theRule.Visits_Rule,delete this.theRule.Limits_Rule,delete this.theRule.Fuels_Rule,this.theRule.Times_Rule.TYPE=this.detailTimeFormGroup.value.TYPE;for(var t=0;t<this.days_of_week.length;t++){delete this.theRule.Times_Rule[this.days_of_week[t]].day;for(var o=1;o<=10;o++)""==this.theRule.Times_Rule[this.days_of_week[t]]["from"+o]&&(this.theRule.Times_Rule[this.days_of_week[t]]["from"+o]=0,this.theRule.Times_Rule[this.days_of_week[t]]["to"+o]=0)}}if(1==this.theRule.rule_type&&(delete this.theRule.Times_Rule,delete this.theRule.Visits_Rule,delete this.theRule.Fuels_Rule,this.theRule.Limits_Rule.TYPE=this.detailLimitFormGroup.value.TYPE,this.theRule.Limits_Rule.single=""!=this.detailLimitFormGroup.value.single?this.detailLimitFormGroup.value.single:0,this.theRule.Limits_Rule.DAY=""!=this.detailLimitFormGroup.value.DAY?this.detailLimitFormGroup.value.DAY:0,this.theRule.Limits_Rule.week=""!=this.detailLimitFormGroup.value.week?this.detailLimitFormGroup.value.week:0,this.theRule.Limits_Rule.MONTH=""!=this.detailLimitFormGroup.value.MONTH?this.detailLimitFormGroup.value.MONTH:0,this.theRule.Limits_Rule.year=""!=this.detailLimitFormGroup.value.year?this.detailLimitFormGroup.value.year:0),2==this.theRule.rule_type&&(delete this.theRule.Times_Rule,delete this.theRule.Limits_Rule,delete this.theRule.Fuels_Rule,this.theRule.Visits_Rule.DAY=""!=this.detailVisitFormGroup.value.DAY?this.detailVisitFormGroup.value.DAY:0,this.theRule.Visits_Rule.week=""!=this.detailVisitFormGroup.value.week?this.detailVisitFormGroup.value.week:0,this.theRule.Visits_Rule.MONTH=""!=this.detailVisitFormGroup.value.MONTH?this.detailVisitFormGroup.value.MONTH:0),3==this.theRule.rule_type){delete this.theRule.Times_Rule,delete this.theRule.Limits_Rule,delete this.theRule.Visits_Rule;let a=1;for(let u=0;u<this.fuelsCheckboxes.length;u++)this.detailFuelFormGroup.value[this.fuelsCheckboxes[u].name]&&(this.theRule.Fuels_Rule["f"+a]=this.fuelsCheckboxes[u].id,a++);for(let u=1;u<=20;u++)""==this.theRule.Fuels_Rule["f"+u]&&(this.theRule.Fuels_Rule["f"+u]=0)}this.theRule.id>0?this.updateRule():this.createRule()}updateRule(){this.rulesService.update(this.theRule).subscribe(t=>{this.snackbar.open(t.message,null,{duration:5e3,panelClass:["green-snackbar"]}),console.log("LA RULE DESPUES DE ACTUALIZARLA",this.theRule),this.dialogRef.close(this.theRule)},t=>{this.snackbar.open(t.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}validateDetailLimitFormGroup(){return""!=this.theRule.Limits_Rule.single||""!=this.theRule.Limits_Rule.DAY||""!=this.theRule.Limits_Rule.week||""!=this.theRule.Limits_Rule.MONTH||""!=this.theRule.Limits_Rule.year}validateDetailTimeFormGroup(){return""!=this.theRule.Times_Rule.monday.from1||""!=this.theRule.Times_Rule.tuesday.from1||""!=this.theRule.Times_Rule.wednesday.from1||""!=this.theRule.Times_Rule.thursday.from1||""!=this.theRule.Times_Rule.friday.from1||""!=this.theRule.Times_Rule.saturday.from1||""!=this.theRule.Times_Rule.sunday.from1}validateDetailVisitFormGroup(){return""!=this.theRule.Limits_Rule.DAY||""!=this.theRule.Limits_Rule.week||""!=this.theRule.Limits_Rule.MONTH}validateDetailFuelFormGroup(){return!0}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(C.WI),e.Y36(C.so),e.Y36(C.uw),e.Y36(S.ux),e.Y36(J.W),e.Y36(X.s))},s.\u0275cmp=e.Xpm({type:s,selectors:[["fury-form-wizard"]],decls:43,vars:15,consts:[[1,"title"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[3,"linear"],["stepper","matHorizontalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"heading"],[1,"subheading"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxFlex","auto","appearance","outline",4,"ngIf"],["fxFlex","auto","appearance","outline"],["formControlName","name","matInput","","required",""],["formControlName","description","matInput","","required",""],["formControlName","status",3,"change"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-button","","type","button",3,"disabled","click"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled"],[3,"stepControl",4,"ngIf"],["formControlName","rule_type",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","rule_type_name","matInput","","required","",3,"readonly"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","24px",1,"preview-content",2,"flex-flow","inherit","margin-top","30px","margin-bottom","30px"],["color","accent","fxLayout","column","fxLayoutGap","20px","required","","formControlName","TYPE",3,"change"],["class","radio",3,"value",4,"ngFor","ngForOf"],["fxLayoutAlign","start center","class","result","fxLayout","row","fxLayoutGap","24px","style","flex-flow: inherit;margin-top: 30px; margin-bottom: 30px;",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center","fxLayoutGap","24px",1,"result",2,"flex-flow","inherit","margin-top","30px","margin-bottom","30px"],["color","primary","mat-button","","mat-raised-button","","type","button",2,"width","110px",3,"click"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled","click"],[1,"radio",3,"value"],["fxLayoutAlign","start center","fxLayout","row","fxLayoutGap","24px",1,"result",2,"flex-flow","inherit","margin-top","30px","margin-bottom","30px"],[4,"ngFor","ngForOf"],[2,"width","100px",3,"id","formControlName","change"],["color","primary","mat-button","","mat-raised-button","","type","button",2,"width","110px",3,"disabled","id","click"],["formControlName","single","matInput","",3,"keypress"],["formControlName","DAY","matInput","",3,"keypress"],["formControlName","week","matInput","",3,"keypress"],["formControlName","MONTH","matInput","",3,"keypress"],["formControlName","year","matInput","",3,"keypress"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","24px",1,"preview-content",2,"flex-flow","inherit","margin-top","30px","margin-bottom","30px"],["color","accent","fxLayout","row","fxLayoutGap","20px","required","","formControlName","TYPE",3,"change"],["fxLayout","column","fxLayoutAlign","start","fxLayoutGap","24px",1,"preview-content",2,"flex-flow","inherit","margin-top","30px","margin-bottom","30px"],["fxLayoutAlign","start start","class","result","fxLayout","row","fxLayoutGap","24px","style","flex-flow: inherit;margin-top: 30px; margin-bottom: 30px;",4,"ngFor","ngForOf"],["fxLayoutAlign","start start","fxLayout","row","fxLayoutGap","24px",1,"result",2,"flex-flow","inherit","margin-top","30px","margin-bottom","30px"]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"fury-page"),e.TgZ(1,"fury-title",0),e.TgZ(2,"mat-icon"),e._uU(3,"rule"),e.qZA(),e.TgZ(4,"span"),e._uU(5,"Asistente para crear reglas de carga"),e.qZA(),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"div",2),e.TgZ(8,"mat-horizontal-stepper",3,4),e.TgZ(10,"mat-step",5),e.TgZ(11,"form",6),e.YNc(12,re,1,0,"ng-template",7),e.TgZ(13,"div",8),e._uU(14,"Generales"),e.qZA(),e.TgZ(15,"div",9),e._uU(16,"Indicar propiedades identificadoras de la regla."),e.qZA(),e.TgZ(17,"div",10),e.YNc(18,le,7,1,"mat-form-field",11),e.YNc(19,ue,4,1,"mat-form-field",11),e.TgZ(20,"mat-form-field",12),e.TgZ(21,"mat-label"),e._uU(22,"Nombre de regla"),e.qZA(),e._UZ(23,"input",13),e.TgZ(24,"mat-hint"),e._uU(25,"Se\xf1alar con qu\xe9 nombre ser\xe1 identificada la regla."),e.qZA(),e.qZA(),e.TgZ(26,"mat-form-field",12),e.TgZ(27,"mat-label"),e._uU(28,"Descripci\xf3n"),e.qZA(),e._UZ(29,"input",14),e.TgZ(30,"mat-hint"),e._uU(31,"Descripci\xf3n breve de la regla"),e.qZA(),e.qZA(),e.TgZ(32,"mat-slide-toggle",15),e.NdJ("change",function(v){return o.setActiveRule(v)}),e._uU(33),e.qZA(),e.qZA(),e.TgZ(34,"div",16),e.TgZ(35,"button",17),e.NdJ("click",function(){return e.CHM(a),e.MAs(9).reset()}),e._uU(36,"LIMPIAR"),e.qZA(),e.TgZ(37,"button",18),e._uU(38,"SIGUIENTE"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(39,he,22,5,"mat-step",19),e.YNc(40,ge,53,4,"mat-step",19),e.YNc(41,Te,27,3,"mat-step",19),e.YNc(42,Ze,22,5,"mat-step",19),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(2),e.Q6J("@fadeInRight",void 0),e.xp6(3),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("linear",!0),e.xp6(2),e.Q6J("stepControl",o.generalFormGroup),e.xp6(1),e.Q6J("formGroup",o.generalFormGroup),e.xp6(7),e.Q6J("ngIf",!o.generalFormGroupRO),e.xp6(1),e.Q6J("ngIf",o.generalFormGroupRO),e.xp6(14),e.Oqu(o.active_label),e.xp6(2),e.Q6J("disabled",o.generalFormGroup.pristine),e.xp6(2),e.Q6J("disabled",o.generalFormGroup.invalid),e.xp6(2),e.Q6J("ngIf",o.visibleDetailTimeGroup),e.xp6(1),e.Q6J("ngIf",o.visibleDetailLimitGroup),e.xp6(1),e.Q6J("ngIf",o.visibleDetailVisitGroup),e.xp6(1),e.Q6J("ngIf",o.visibleDetailFuelGroup))},directives:[ee.i,te.M,b.Hw,d.xw,d.Wh,N.Vq,N.C0,r._Y,r.JL,r.sg,N.VY,d.SQ,l.O5,f.KE,d.yH,f.hX,r.Fj,Z.Nt,r.JJ,r.u,r.Q7,f.bx,ie.Rr,L.lW,N.Ic,Y.gD,l.sg,oe.ey,G.VQ,G.U0,se.oG,f.TO,ae.d],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 6px 6px -3px #0003,0 10px 14px 1px #00000024,0 4px 18px 3px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.copyright[_ngcontent-%COMP%]{position:absolute;bottom:24px;right:24px;color:#fff}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}"],data:{animation:[I.X,M.M,O.K]}}),s})();function A(s){return""===s.value?null:void 0!==s.value&&(isNaN(s.value)||!/^([0]\.[0-9]{1,4}|[1-9]([0-9]*\.?[0-9]{1,2})?)$/.test(s.value))||s.value<=0?{notNumber:!0}:null}var Ce=n(24801),be=n(33344),Ae=n(39762),ke=n(53580),Fe=n(38932),we=n(19165),De=n(94927);function Le(s,i){if(1&s&&(e.TgZ(0,"th",14),e._uU(1),e.qZA()),2&s){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Me(s,i){if(1&s&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&s){const t=i.$implicit,o=e.oxw(2).$implicit,a=e.oxw();e.xp6(1),e.Oqu(a.getLabel(o.name,t[o.property]))}}function Ie(s,i){if(1&s&&(e.ynx(0,11),e.YNc(1,Le,2,1,"th",12),e.YNc(2,Me,2,1,"td",13),e.BQk()),2&s){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function Ee(s,i){if(1&s&&(e.ynx(0),e.YNc(1,Ie,3,1,"ng-container",10),e.BQk()),2&s){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty)}}function Ne(s,i){1&s&&e._UZ(0,"tr",16)}function Oe(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"tr",17),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw().updateRule(u)}),e.qZA()}}const Ge=function(){return["Tables"]},Pe=[{path:"",component:(()=>{class s{constructor(t,o,a,u,v){this.dialog=t,this.ruleService=o,this._jobsService=a,this.tokenStorageService=u,this.snackbar=v,this.subject$=new F.t(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Id",property:"id",visible:!1,isModelProperty:!0},{name:"Rule Id",property:"rule_id",visible:!1,isModelProperty:!0},{name:"Estatus",property:"status",visible:!0,isModelProperty:!0},{name:"Regla",property:"name",visible:!0,isModelProperty:!0},{name:"Tipo",property:"rule_type",visible:!0,isModelProperty:!0},{name:"Descripci\xf3n",property:"description",visible:!0,isModelProperty:!0},{name:"Contenido",property:"content_summary",visible:!0,isModelProperty:!0},{name:"Sync",property:"sync",visible:!1,isModelProperty:!0},{name:"\xdaltima modificaci\xf3n",property:"timestamp",visible:!0,isModelProperty:!0},{name:"Sent To FHO",property:"sent_to_fho",visible:!1,isModelProperty:!0},{name:"Sent To DHO",property:"sent_to_dho",visible:!1,isModelProperty:!0},{name:"Discovered",property:"discovered",visible:!1,isModelProperty:!0},{name:"Owner fleet",property:"owner_fleet",visible:!1,isModelProperty:!0}],this.pageSize=10}getLabel(t,o){if(null!=t)return"Tipo"==t?0==o?"Time":1==o?"Limit":2==o?"Visit":3==o?"Fuel":"Error":"Estatus"==t?2==o?"Activa":"Inactiva":o}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){this.ruleService.getAll().subscribe(t=>{this.rules=t,this.dataSource=new g.by(t)},t=>{console.log(t)})}ngOnInit(){this.dataSource=new g.by,this.getData(),this.data$.pipe((0,w.h)(t=>!!t)).subscribe(t=>{this.rules=t,this.dataSource.data=t})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createRule(){this.dialog.open(P).afterClosed().subscribe(t=>{t&&(this.subject$.next(this.rules),this.getData(),this.data$.pipe((0,w.h)(o=>!!o)).subscribe(o=>{this.rules=o,this.dataSource.data=o}),this._jobsService.push({type:"rules",object:t}).subscribe(o=>{this.snackbar.open(o.message,null,{duration:5e3,panelClass:["green-snackbar"]})},o=>{this.snackbar.open(o.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})}))})}updateRule(t){this.ruleService.getRule(t.id).subscribe(o=>{this.rule=o,this.dialog.open(P,{data:this.rule}).afterClosed().subscribe(a=>{a&&(this.subject$.next(this.rules),this.getData(),this.data$.pipe((0,w.h)(u=>!!u)).subscribe(u=>{this.rules=u,this.dataSource.data=u}),this._jobsService.push({type:"rules",object:a}).subscribe(u=>{this.snackbar.open(u.message,null,{duration:5e3,panelClass:["green-snackbar"]})},u=>{this.snackbar.open(u.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})}))})},o=>{console.log(o)})}changeRuleStatus(t){}onFilterChange(t){!this.dataSource||(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(C.uw),e.Y36(J.W),e.Y36(Ce.e),e.Y36(be.i),e.Y36(S.ux))},s.\u0275cmp=e.Xpm({type:s,selectors:[["rules-table"]],viewQuery:function(t,o){if(1&t&&(e.Gf(c.NW,7),e.Gf(h.YE,7)),2&t){let a;e.iGM(a=e.CRH())&&(o.paginator=a.first),e.iGM(a=e.CRH())&&(o.sort=a.first)}},inputs:{columns:"columns"},decls:14,vars:10,consts:[["mode","card"],["current","Reglas",3,"crumbs"],["name","Reglas",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-header"),e._UZ(2,"fury-breadcrumbs",1),e.qZA(),e.TgZ(3,"fury-page-layout-content"),e.TgZ(4,"fury-list",2),e.NdJ("filterChange",function(u){return o.onFilterChange(u)}),e.TgZ(5,"div",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.createRule()}),e.TgZ(7,"mat-icon"),e._uU(8,"add"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"table",5),e.YNc(10,Ee,2,1,"ng-container",6),e.YNc(11,Ne,1,0,"tr",7),e.YNc(12,Oe,1,0,"tr",8),e.qZA(),e._UZ(13,"mat-paginator",9),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@fadeInRight",void 0)("crumbs",e.DdM(9,Ge)),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",o.columns),e.xp6(5),e.Q6J("dataSource",o.dataSource),e.xp6(1),e.Q6J("ngForOf",o.columns),e.xp6(1),e.Q6J("matHeaderRowDef",o.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.visibleColumns),e.xp6(1),e.Q6J("pageSize",o.pageSize))},directives:[Ae.N,ke.U,Fe.n,we.d,De.n,L.lW,b.Hw,g.BZ,h.YE,l.sg,g.as,g.nj,c.NW,l.O5,g.w1,g.fO,g.Dz,g.ge,h.nU,g.ev,g.XQ,g.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[M.M,I.X]}}),s})()}];let Ue=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[R.Bz.forChild(Pe)],R.Bz]}),s})();const qe=[{path:"",component:P}];let W=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[R.Bz.forChild(qe)],R.Bz]}),s})(),Se=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[l.ez,W,m.Z,r.UX,T.q]]}),s})();var Je=n(61620);let Ye=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[l.ez,r.u5,r.UX,Je.o9,C.Is,Z.c,L.ot,b.Ps,G.Fk,Y.LD,D.rK]]}),s})(),We=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[l.ez,Ue,r.u5,T.q,m.Z,W,Se,y.p,Ye,p.J]]}),s})()},24801:(k,x,n)=>{n.d(x,{e:()=>T});var l=n(40520),r=n(98545),p=n(5e3),y=n(33344);let T=(()=>{class m{constructor(c,h){this.http=c,this.tokenStorage=h}getHeaders(){var c=new l.WM,h=this.tokenStorage.getToken();return c.set("token",h||"{}")}push(c){var h=this.getHeaders();return this.http.post(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.JOBS,c,{headers:h})}}return m.\u0275fac=function(c){return new(c||m)(p.LFG(l.eN),p.LFG(y.i))},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},9360:(k,x,n)=>{n.d(x,{s:()=>T});var l=n(40520),r=n(98545),p=n(5e3),y=n(33344);let T=(()=>{class m{constructor(c,h){this.http=c,this.tokenStorage=h}getHeaders(){var c=new l.WM,h=this.tokenStorage.getToken();return c.set("token",h||"{}")}getAll(c){var h=this.getHeaders();if(null!=c){const F=(new l.LE).appendAll(c);var g=this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.PRODUCTS,{params:F,headers:h})}else g=this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.PRODUCTS,{headers:h});return g}getProduct(c){var h=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.PRODUCTS+"/"+c,{headers:h})}createProduct(c){var h=this.getHeaders();return this.http.post(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.PRODUCTS,c,{headers:h})}updateProduct(c){var h=this.getHeaders();return this.http.put(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.PRODUCTS+"/"+c.id,c,{headers:h})}}return m.\u0275fac=function(c){return new(c||m)(p.LFG(l.eN),p.LFG(y.i))},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);