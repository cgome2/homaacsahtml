"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[1073],{37425:(k,f,s)=>{s.d(f,{K:()=>a});var r=s(41777);const a=(0,r.X$)("scaleIn",[(0,r.eR)(":enter",[(0,r.oB)({transform:"scale(0)"}),(0,r.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,r.oB)({transform:"scale(1)"}))])])},94927:(k,f,s)=>{s.d(f,{n:()=>N});var r=s(5e3),a=s(23753),m=s(75778),y=s(80013),C=s(69808),p=s(92181),b=s(30277),g=s(25245),x=s(47423),h=s(77446),w=s(93075);const M=["filter"];function E(u,D){if(1&u&&(r.TgZ(0,"div",5),r.TgZ(1,"div",6),r._uU(2),r.qZA(),r.TgZ(3,"div",7),r.TgZ(4,"mat-icon",8),r._uU(5,"search"),r.qZA(),r._UZ(6,"input",9,10),r.qZA(),r.TgZ(8,"button",11),r.TgZ(9,"mat-icon"),r._uU(10,"filter_list"),r.qZA(),r.qZA(),r.Hsn(11,1),r.qZA()),2&u){const t=r.oxw(),d=r.MAs(3);r.xp6(2),r.Oqu(t.name),r.xp6(6),r.Q6J("matMenuTriggerFor",d)}}function O(u,D){if(1&u){const t=r.EpF();r.TgZ(0,"button",12),r.NdJ("click",function(_){const A=r.CHM(t).$implicit;return r.oxw().toggleColumnVisibility(A,_)}),r.TgZ(1,"mat-checkbox",13,14),r.NdJ("ngModelChange",function(_){return r.CHM(t).$implicit.visible=_})("click",function(_){return _.stopPropagation()}),r._uU(3),r.qZA(),r.qZA()}if(2&u){const t=D.$implicit;r.xp6(1),r.Q6J("ngModel",t.visible),r.xp6(2),r.hij(" ",t.name," ")}}const U=["*",[["",8,"actions"]]],T=["*",".actions"];let N=(()=>{class u{constructor(){this.filterChange=new r.vpe}ngAfterViewInit(){this.hideHeader||(0,a.R)(this.filter.nativeElement,"keyup").pipe((0,m.x)(),(0,y.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(t,d){d.stopPropagation(),d.stopImmediatePropagation(),t.visible=!t.visible}}return u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=r.Xpm({type:u,selectors:[["fury-list"]],viewQuery:function(t,d){if(1&t&&r.Gf(M,5),2&t){let _;r.iGM(_=r.CRH())&&(d.filter=_.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:T,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(t,d){1&t&&(r.F$t(U),r.TgZ(0,"div",0),r.YNc(1,E,12,2,"div",1),r.TgZ(2,"mat-menu",2,3),r.YNc(4,O,4,2,"button",4),r.qZA(),r.Hsn(5),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",!d.hideHeader),r.xp6(3),r.Q6J("ngForOf",d.columns))},directives:[C.O5,p.VK,C.sg,b.xw,b.Wh,b.SQ,b.yH,g.Hw,x.lW,p.p6,h.oG,w.JJ,w.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),u})()},4940:(k,f,s)=>{s.d(f,{p:()=>C});var r=s(69808),a=s(93075),m=s(7057),y=s(5e3);let C=(()=>{class p{}return p.\u0275fac=function(g){return new(g||p)},p.\u0275mod=y.oAB({type:p}),p.\u0275inj=y.cJS({imports:[[r.ez,m.q,a.u5]]}),p})()},19165:(k,f,s)=>{s.d(f,{d:()=>a});var r=s(5e3);let a=(()=>{class m{constructor(){}}return m.\u0275fac=function(C){return new(C||m)},m.\u0275dir=r.lG2({type:m,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),m})()},59968:(k,f,s)=>{s.d(f,{i:()=>a});var r=s(5e3);let a=(()=>{class m{constructor(){}}return m.\u0275fac=function(C){return new(C||m)},m.\u0275dir=r.lG2({type:m,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),m})()},81073:(k,f,s)=>{s.r(f),s.d(f,{ContentDistributionsTableModule:()=>wt});var r=s(69808),a=s(93075),m=s(61264),y=s(4940),C=s(7057),p=s(72467),b=s(3299),g=s(86087),x=s(84847),h=s(32075),w=s(96831),M=s(92198),E=s(88914),O=s(14499),U=s(70655),T=s(48966),N=s(37425);class u{constructor(o){this.id=o&&o.id||"",this.time1=o&&o.time1||"",this.time2=o&&o.time2||"",this.time3=o&&o.time3||"",this.time4=o&&o.time4||"",this.time5=o&&o.time5||""}stringToTime(o){let e,i;return i=parseInt(o),e=this.zeroFill(i,4),e=[e.slice(0,2),":",e.slice(2)].join(""),e}timeToString(o){let e;return e=(+o.replace(/:/gi,"")).toString(),e}zeroFill(o,e){return(e-=o.toString().length)>0?new Array(e+1).join("0")+o:o.toString()}}class D{constructor(o){this.id=o&&o.id||null,this.name=o&&o.name||null,this.description=o&&o.description||null,this.recipients_content_summary=o&&o.recipients_content_summary||null,this.times_content_summary=o&&o.times_content_summary||null,this.widgets_content_summary=o&&o.widgets_content_summary||null,this.timestamp=o&&o.timestamp||null,this.monday_times=o&&o.monday_times||new u,this.tuesday_times=o&&o.tuesday_times||new u,this.wednesday_times=o&&o.wednesday_times||new u,this.thursday_times=o&&o.thursday_times||new u,this.friday_times=o&&o.friday_times||new u,this.saturday_times=o&&o.saturday_times||new u,this.sunday_times=o&&o.sunday_times||new u,this.status=o&&o.status||null}}var t=s(5e3),d=s(30277),_=s(67322),I=s(77531),A=s(50974),F=s(47423),L=s(25245);const q=["timesForm"];function B(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"mat-form-field",5),t.TgZ(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",14),t.TgZ(5,"ngx-material-timepicker",7,15),t.NdJ("timeSet",function(l){const v=t.CHM(e).$implicit;return t.oxw(2).onTimeChanged(l,v+2)}),t.qZA(),t.qZA(),t.TgZ(7,"button",12),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).deleteTimepicker(c)}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA(),t._uU(10,"\xa0Eliminar"),t.qZA(),t.qZA()}if(2&n){const e=o.$implicit,i=t.MAs(6),l=t.oxw(2);t.uIk("id","setTimepicker"+e),t.xp6(3),t.hij("Hora ",e+2,""),t.xp6(1),t.MGl("formControlName","time",e+2,""),t.Q6J("ngxTimepicker",i)("format",24),t.xp6(1),t.Q6J("hoursOnly",!0)("ESC",!0)("theme",l.homaacsaTheme)}}function z(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(1,"mat-dialog-content"),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"mat-form-field",5),t.TgZ(5,"mat-label"),t._uU(6,"Hora 1"),t.qZA(),t._UZ(7,"input",6),t.TgZ(8,"ngx-material-timepicker",7,8),t.NdJ("timeSet",function(l){return t.CHM(e),t.oxw().onTimeChanged(l,0)}),t.qZA(),t.qZA(),t.TgZ(10,"button",9),t._uU(11,"\xa0"),t.qZA(),t.qZA(),t.YNc(12,B,11,8,"div",10),t.qZA(),t.TgZ(13,"div"),t._UZ(14,"hr"),t.qZA(),t.TgZ(15,"div",11),t.TgZ(16,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().addTimepicker()}),t.TgZ(17,"mat-icon"),t._uU(18,"add"),t.qZA(),t._uU(19,"\xa0Agregar"),t.qZA(),t.TgZ(20,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(21,"mat-icon"),t._uU(22,"done"),t.qZA(),t._uU(23,"\xa0Aceptar"),t.qZA(),t.TgZ(24,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().close()}),t.TgZ(25,"mat-icon"),t._uU(26,"cancel"),t.qZA(),t._uU(27,"\xa0Cancelar"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(9),i=t.oxw();t.Q6J("formGroup",i.timesForm),t.xp6(3),t.uIk("id","setTimepicker0"),t.xp6(4),t.Q6J("ngxTimepicker",e)("format",24),t.xp6(1),t.Q6J("hoursOnly",!0)("ESC",!0)("theme",i.homaacsaTheme),t.xp6(4),t.Q6J("ngForOf",i.additionalTimepickers),t.xp6(8),t.Q6J("disabled",i.timesForm.invalid)}}let H=(()=>{class n{constructor(e,i){this.data=e,this.dialogRef=i,this.title="Horas para generar contenidos",this.contentDistributionTime=new u,this.timesForm=new a.cw({id:new a.NI,time1:new a.NI("",[a.kI.required]),time2:new a.NI,time3:new a.NI,time4:new a.NI,time5:new a.NI}),this.additionalTimepickers=[],this.homaacsaTheme={container:{bodyBackgroundColor:"#ffffff",buttonColor:"#0f192a",primaryFontFamily:"#ffffff"},dial:{dialBackgroundColor:"#0f192a",dialInactiveColor:"#8c8c8c",dialActiveColor:"#ffffff",dialEditableActiveColor:"#ffffff",dialEditableBackgroundColor:"#ffffff"},clockFace:{clockFaceBackgroundColor:"#0f192a",clockHandColor:"#165ffe",clockFaceTimeActiveColor:"#ffffff",clockFaceTimeInactiveColor:"#8c8c8c",clockFaceInnerTimeInactiveColor:"#8c8c8c",clockFaceTimeDisabledColor:"#d9d9d9"}},i.disableClose=!0}ngOnInit(){console.log("data: ",this.data.contenttDistributionTime),this.contentDistributionTime=null===this.data.contentDistributionTime||void 0===this.data.contenttDistributionTime?new u:new u(this.data.contentDistributionTime),this.timesForm.patchValue(this.contentDistributionTime),console.log("this is the form patched: ",this.timesForm.value);for(var e=1;e<=5;e++)console.log("timesForm.time"+e,this.timesForm.controls["time"+e]),null==this.timesForm.controls["time"+e].value||""===this.timesForm.controls["time"+e].value||e>=2&&(this.additionalTimepickers.push(e-2),this.additionalTimepickers.sort())}onSubmit(){console.log(this.timesForm.value)}save(){""===this.timesForm.value.id?this.add():this.update()}add(){console.log("Adding times");let e=this.timesForm.value;console.log(e),this.dialogRef.close({action:"create",data:e})}update(){console.log("Updating times"),this.dialogRef.close({action:"update",data:this.timesForm.value})}close(){console.log("Canceling doing nothing"),this.dialogRef.close({action:"cancel",data:this.timesForm.value})}addTimepicker(){console.log("Size of additionalTimepickers ["+this.additionalTimepickers.length+"]");let e=this.additionalTimepickers.length;if(this.additionalTimepickers.length<4){for(let i=0;i<=e;i++)if(!(this.additionalTimepickers.indexOf(i)>=0)){console.log("adding timepicker "+i),this.additionalTimepickers.push(i),this.additionalTimepickers.sort();break}}else alert("\xa1No se pueden agregar m\xe1s de 5 intervalos por d\xeda!");console.log("additionalTimepickers: "+this.additionalTimepickers)}deleteTimepicker(e){var i=this.additionalTimepickers.indexOf(e);this.additionalTimepickers.splice(i,1),this.timesForm.controls["time"+(i+2)].setValue(""),console.log(this.timesForm)}onTimeChanged(e,i){console.log(e,i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.WI),t.Y36(T.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,i){if(1&e&&t.Gf(q,5),2&e){let l;t.iGM(l=t.CRH())&&(i._focusMe=l.first)}},decls:3,vars:2,consts:[["mat-dialog-title","",2,"margin","0px 0px 8px"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","8px",1,"result"],["fxLayoutAlign","center center","fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","8px",2,"min-height","75px","height","35px"],["appearance","outline"],["formControlName","time1","matInput","","readonly","",2,"width","200px",3,"ngxTimepicker","format"],[3,"hoursOnly","ESC","theme","timeSet"],["pickerTime0",""],["color","primary","mat-button","","type","button",2,"width","110px"],["fxLayoutAlign","center center","fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","8px","style","min-height: 75px; height: 35px",4,"ngFor","ngForOf"],["fxLayoutAlign","center center","fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","24px"],["color","primary","mat-button","","mat-raised-button","","type","button",3,"click"],["color","primary","mat-button","","mat-raised-button","","type","button",3,"disabled","click"],["matInput","","readonly","",2,"width","200px",3,"ngxTimepicker","format","formControlName"],["pickerTime",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.YNc(2,z,28,9,"form",1)),2&e&&(t.xp6(1),t.Oqu(i.title),t.xp6(1),t.Q6J("ngIf",i.timesForm))},directives:[T.uh,r.O5,a._Y,a.JL,a.sg,T.xY,d.Wh,d.xw,d.SQ,_.KE,_.hX,a.Fj,I.Nt,a.JJ,a.u,A.I2,A.ro,F.lW,r.sg,L.Hw],encapsulation:2}),n})();var G=s(57261),J=s(40520),Z=s(98545),Y=s(33344);let R=(()=>{class n{constructor(e,i){this.http=e,this.tokenStorage=i}getHeaders(){var e=new J.WM,i=this.tokenStorage.getToken();return e.set("token",i||"{}")}getAll(){var e=this.getHeaders();return this.http.get(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.CONTENT_DISTRIBUTIONS,{headers:e})}getContentDistributionsTimes(e){var i=this.getHeaders();return this.http.get(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.CONTENT_DISTRIBUTIONS_TIMES+"/"+e,{headers:i})}create(e){var i=this.getHeaders();return this.http.post(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.CONTENT_DISTRIBUTIONS,e,{headers:i})}update(e){var i=this.getHeaders();return this.http.get(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.CONTENT_DISTRIBUTIONS,{headers:i})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(J.eN),t.LFG(Y.i))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var $=s(12736),K=s(59968),j=s(36551),S=s(92081),V=s(32368),X=s(4834),tt=s(77446);function et(n,o){1&n&&t._uU(0,"Propiedades de distribuci\xf3n de contenido")}function it(n,o){1&n&&t._uU(0,"Programaci\xf3n de dias de distribuci\xf3n")}function nt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-checkbox",27),t.NdJ("change",function(l){t.CHM(e);const c=t.oxw().$implicit;return t.oxw().onCheck(l,c)}),t._uU(2),t.qZA(),t.TgZ(3,"button",28),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).setHours(c.id)}),t.TgZ(4,"mat-icon"),t._uU(5,"access_time"),t.qZA(),t._uU(6,"\xa0Horarios"),t.qZA(),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(1),t.s9C("id",e.id),t.s9C("formControlName",e.id),t.xp6(1),t.Oqu(e.label),t.xp6(1),t.MGl("id","times_+",e.id,""),t.Q6J("disabled",!e.checked)}}function ot(n,o){if(1&n&&(t.TgZ(0,"div",26),t.YNc(1,nt,7,5,"div",23),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e.days)}}function rt(n,o){1&n&&t._uU(0,"Detalle de artilugios")}function st(n,o){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"mat-checkbox",29),t._uU(2),t.qZA(),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.MGl("id","widget_",e.id,""),t.MGl("formControlName","widget_",e.id,""),t.xp6(1),t.Oqu(e.name)}}function at(n,o){1&n&&t._uU(0,"Destinatarios del contenido")}let P=(()=>{class n{constructor(e,i,l,c,v,Q){this.data=e,this.dialogRef=i,this.dialog=l,this.snackbar=c,this._contentDistributionsService=v,this._widgetsService=Q,this.active_label="Activada",this.allowCreateRule=!1,this.days_of_week=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],this.widgets=[],this.generalFormGroup=new a.cw({id:new a.NI,name:new a.NI("",[a.kI.required]),description:new a.NI("",[a.kI.required]),status:new a.NI("",[a.kI.required])}),this.generalFormGroupRO=!1,this.theContentDistribution=new D,this.contentDistributionTime=new u,this.weekDaysCheckboxes=[{group:1,days:[{id:"monday",label:"Lunes",checked:!1},{id:"tuesday",label:"Martes",checked:!1}]},{group:2,days:[{id:"wednesday",label:"Mi\xe9rcoles",checked:!1},{id:"thursday",label:"Jueves",checked:!1}]},{group:3,days:[{id:"friday",label:"Viernes",checked:!1},{id:"saturday",label:"S\xe1bado",checked:!1}]},{group:4,days:[{id:"sunday",label:"Domingo",checked:!1}]}],this.contentDistributionTimesFormGroup=new a.cw({id:new a.NI,monday:new a.NI(this.weekDaysCheckboxes[0].days[0].checked,[a.kI.required]),tuesday:new a.NI(this.weekDaysCheckboxes[0].days[1].checked,[a.kI.required]),wednesday:new a.NI(this.weekDaysCheckboxes[1].days[0].checked,[a.kI.required]),thursday:new a.NI(this.weekDaysCheckboxes[0].days[1].checked,[a.kI.required]),friday:new a.NI(this.weekDaysCheckboxes[2].days[0].checked,[a.kI.required]),saturday:new a.NI(this.weekDaysCheckboxes[2].days[1].checked,[a.kI.required]),sunday:new a.NI(this.weekDaysCheckboxes[3].days[0].checked,[a.kI.required])}),this.widgetsFormGroup=new a.cw({}),this.recipientsFormGroup=new a.cw({})}ngOnInit(){return(0,U.mG)(this,void 0,void 0,function*(){yield this._widgetsService.getAll().toPromise().then(e=>{var i=this;i.widgets=e,this.data?(i.theContentDistribution=i.data,i.widgets.forEach(function(l){i.widgetsFormGroup.addControl("widget_"+l.id,new a.NI(!!i.data.sidenav_items.find(c=>c.id==l.id),[a.kI.required]))})):(i.theContentDistribution=new D,i.widgets.forEach(function(l){i.widgetsFormGroup.addControl("widget_"+l.id,new a.NI(!1,[a.kI.required]))}))}).catch(e=>{this.widgets=[],alert("No hay conexi\xf3n con el servidor no puede cargarse el formulario"+e)}),null!=this.data&&this.setGeneralFormGroup()})}checkEmAll(e){this.weekDaysCheckboxes.forEach(function(i){i.days.forEach(function(l){l.checked=e})}),this.setContentDistributionTimesFormGroup()}integerOnly(e){return/^[1-9][0-9]*?$/.test(e.key)}numericOnly(e){let i=e.target.value+e.key;return!!new RegExp(/^([1-9][0-9]{0,7}||[0]||[0][.][0-9]{0,2}||[1-9][0-9]{0,7}[.][0-9]{0,2})$/).test(i)}onCheck(e,i){let l=this.weekDaysCheckboxes[i.group-1].days.findIndex(c=>c.id==e.source.id);this.weekDaysCheckboxes[i.group-1].days[l].checked=e.checked,this.setContentDistributionTimesFormGroup()}setActive(e){this.active_label=e.checked?"Activada":"Desactivada",this.theContentDistribution.status=e.checked?2:1}setContentDistributionTimesFormGroup(){this.contentDistributionTimesFormGroup.setValue({id:this.theContentDistribution.id,monday:this.weekDaysCheckboxes[0].days[0].checked,tuesday:this.weekDaysCheckboxes[0].days[1].checked,wednesday:this.weekDaysCheckboxes[1].days[0].checked,thursday:this.weekDaysCheckboxes[1].days[1].checked,friday:this.weekDaysCheckboxes[2].days[0].checked,saturday:this.weekDaysCheckboxes[2].days[1].checked,sunday:this.weekDaysCheckboxes[3].days[0].checked})}setGeneralFormGroup(){this.generalFormGroup.setValue({id:this.theContentDistribution.id,name:this.theContentDistribution.name,description:this.theContentDistribution.description,status:2==this.theContentDistribution.status})}setHours(e){let i=new u;for(let l=1;l<=5;l++)""!==this.theContentDistribution[e+"_times"]["time"+l]&&null!=this.theContentDistribution[e+"_times"]["time"+l]&&(this.theContentDistribution[e+"_times"]["time"+l]=this.contentDistributionTime.stringToTime(this.theContentDistribution[e+"_times"]["time"+l]));i=this.theContentDistribution[e+"_times"],this.dialog.open(H,{data:{contentDistributionTime:i}}).afterClosed().subscribe(l=>{for(let c=1;c<=5;c++)""!=l.data["time"+c]&&(l.data["time"+c]=this.contentDistributionTime.timeToString(l.data["time"+c]));this.theContentDistribution[e+"_times"]=l.data,this.theContentDistribution.name=this.generalFormGroup.value.name,this.theContentDistribution.description=this.generalFormGroup.value.description,this.theContentDistribution.status=this.generalFormGroup.value.status?2:1,console.log("After setting hours monday",this.theContentDistribution.monday_times)})}submit(){this.theContentDistribution.name=this.generalFormGroup.value.name,this.theContentDistribution.description=this.generalFormGroup.value.description,this.theContentDistribution.status=this.generalFormGroup.value.status?2:1,console.log("before create or update: ",this.theContentDistribution),this.theContentDistribution.id>0?this.update():this.create()}create(){this._contentDistributionsService.create(this.theContentDistribution).subscribe(e=>{this.theContentDistribution.id=e.id,this.snackbar.open(e.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.theContentDistribution)},e=>{this.snackbar.open(e.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}update(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.WI),t.Y36(T.so),t.Y36(T.uw),t.Y36(G.ux),t.Y36(R),t.Y36($.L))},n.\u0275cmp=t.Xpm({type:n,selectors:[["content-distribution-wizard"]],decls:72,vars:19,consts:[[1,"title"],["svgIcon","newsletter"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[3,"linear"],["stepper","matVerticalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"heading"],[1,"subheading"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxFlex","auto"],["formControlName","name","matInput","","required",""],["formControlName","description","matInput","","required",""],["formControlName","status",3,"change"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-button","","type","button",3,"disabled","click"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled"],["fxLayoutAlign","start center","class","result","fxLayout","row","fxLayoutGap","24px","style","flex-flow: inherit;margin-top: 30px; margin-bottom: 30px;",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center","fxLayoutGap","24px",1,"result",2,"flex-flow","inherit","margin-top","30px","margin-bottom","30px"],["color","primary","mat-button","","mat-raised-button","","type","button",2,"width","110px",3,"click"],[1,"subheading",2,"margin-top","20px"],[4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","start","fxLayoutGap","24px",1,"preview-content",2,"flex-flow","inherit","margin-top","30px","margin-bottom","30px"],["color","primary","mat-raised-button","","matStepperNext","",3,"click"],["fxLayoutAlign","start center","fxLayout","row","fxLayoutGap","24px",1,"result",2,"flex-flow","inherit","margin-top","30px","margin-bottom","30px"],[2,"width","100px",3,"id","formControlName","change"],["color","primary","mat-button","","mat-raised-button","","type","button",2,"width","110px",3,"disabled","id","click"],[3,"id","formControlName"]],template:function(e,i){if(1&e){const l=t.EpF();t.TgZ(0,"fury-page"),t.TgZ(1,"fury-title",0),t._UZ(2,"mat-icon",1),t.TgZ(3,"span"),t._uU(4,"Asistente para crear distribuciones de contenido"),t.qZA(),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"mat-vertical-stepper",4,5),t.TgZ(9,"mat-step",6),t.TgZ(10,"form",7),t.YNc(11,et,1,0,"ng-template",8),t.TgZ(12,"div",9),t._uU(13,"Generales"),t.qZA(),t.TgZ(14,"div",10),t._uU(15,"Indicar propiedades identificadoras de la distribuci\xf3n de contenido."),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"mat-form-field",12),t.TgZ(18,"mat-label"),t._uU(19,"Nombre de la distribuci\xf3n de contenido"),t.qZA(),t._UZ(20,"input",13),t.TgZ(21,"mat-hint"),t._uU(22,"Se\xf1alar con qu\xe9 nombre ser\xe1 identificada la distribuci\xf3n de contenido."),t.qZA(),t.qZA(),t.TgZ(23,"mat-form-field",12),t.TgZ(24,"mat-label"),t._uU(25,"Descripci\xf3n"),t.qZA(),t._UZ(26,"input",14),t.TgZ(27,"mat-hint"),t._uU(28,"Descripci\xf3n breve de la distribuci\xf3n de contenidos."),t.qZA(),t.qZA(),t.TgZ(29,"mat-slide-toggle",15),t.NdJ("change",function(v){return i.setActive(v)}),t._uU(30),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"button",17),t.NdJ("click",function(){return t.CHM(l),t.MAs(8).reset()}),t._uU(33,"LIMPIAR"),t.qZA(),t.TgZ(34,"button",18),t._uU(35,"SIGUIENTE"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"mat-step",6),t.TgZ(37,"form",7),t.YNc(38,it,1,0,"ng-template",8),t.YNc(39,ot,2,1,"div",19),t.TgZ(40,"div",20),t.TgZ(41,"button",21),t.NdJ("click",function(){return i.checkEmAll(!0)}),t.TgZ(42,"mat-icon"),t._uU(43,"check_box"),t.qZA(),t._uU(44,"\xa0Todos"),t.qZA(),t.TgZ(45,"button",21),t.NdJ("click",function(){return i.checkEmAll(!1)}),t.TgZ(46,"mat-icon"),t._uU(47,"check_box_outline_blank"),t.qZA(),t._uU(48,"\xa0Ninguno"),t.qZA(),t.qZA(),t.TgZ(49,"div",16),t.TgZ(50,"button",18),t._uU(51,"SIGUIENTE"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"mat-step",6),t.TgZ(53,"form",7),t.YNc(54,rt,1,0,"ng-template",8),t.TgZ(55,"div",11),t.TgZ(56,"div",22),t._uU(57,"Artilugios disponibles."),t.qZA(),t.YNc(58,st,3,3,"div",23),t.qZA(),t.TgZ(59,"div",16),t.TgZ(60,"button",18),t._uU(61,"SIGUIENTE"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(62,"mat-step",6),t.TgZ(63,"form",7),t.YNc(64,at,1,0,"ng-template",8),t.TgZ(65,"div",10),t._uU(66,"Destinatarios disponibles."),t.qZA(),t._UZ(67,"div",24),t._UZ(68,"mat-divider"),t.TgZ(69,"div",16),t.TgZ(70,"button",25),t.NdJ("click",function(){return i.submit()}),t._uU(71,"GUARDAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(2),t.Q6J("@scaleIn",void 0),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(3),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("linear",!0),t.xp6(2),t.Q6J("stepControl",i.generalFormGroup),t.xp6(1),t.Q6J("formGroup",i.generalFormGroup),t.xp6(20),t.Oqu(i.active_label),t.xp6(2),t.Q6J("disabled",i.generalFormGroup.pristine),t.xp6(2),t.Q6J("disabled",i.generalFormGroup.invalid),t.xp6(2),t.Q6J("stepControl",i.contentDistributionTimesFormGroup),t.xp6(1),t.Q6J("formGroup",i.contentDistributionTimesFormGroup),t.xp6(2),t.Q6J("ngForOf",i.weekDaysCheckboxes),t.xp6(11),t.Q6J("disabled",i.contentDistributionTimesFormGroup.invalid),t.xp6(2),t.Q6J("stepControl",i.widgetsFormGroup),t.xp6(1),t.Q6J("formGroup",i.widgetsFormGroup),t.xp6(5),t.Q6J("ngForOf",i.widgets),t.xp6(2),t.Q6J("disabled",i.widgetsFormGroup.invalid),t.xp6(2),t.Q6J("stepControl",i.recipientsFormGroup),t.xp6(1),t.Q6J("formGroup",i.recipientsFormGroup))},directives:[K.i,j.M,L.Hw,d.xw,d.Wh,S.Vq,S.C0,a._Y,a.JL,a.sg,S.VY,d.SQ,_.KE,d.yH,_.hX,a.Fj,I.Nt,a.JJ,a.u,a.Q7,_.bx,V.Rr,F.lW,S.Ic,r.sg,X.d,tt.oG],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 6px 6px -3px #0003,0 10px 14px 1px #00000024,0 4px 18px 3px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.copyright[_ngcontent-%COMP%]{position:absolute;bottom:24px;right:24px;color:#fff}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}"],data:{animation:[O.X,E.M,N.K]}}),n})();var lt=s(39762),ct=s(53580),ut=s(38932),mt=s(19165),dt=s(94927);function pt(n,o){if(1&n&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function gt(n,o){if(1&n&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2).$implicit,l=t.oxw();t.xp6(1),t.Oqu(l.getLabel(i.name,e[i.property]))}}function ht(n,o){if(1&n&&(t.ynx(0,11),t.YNc(1,pt,2,1,"th",12),t.YNc(2,gt,2,1,"td",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function ft(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ht,3,1,"ng-container",10),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.isModelProperty)}}function _t(n,o){1&n&&t._UZ(0,"tr",16)}function Ct(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().update(c)}),t.qZA()}}const bt=function(){return["Tables"]},yt=[{path:"",component:(()=>{class n{constructor(e,i,l){this.dialog=e,this._contentDistributionsService=i,this.snackbar=l,this.subject$=new w.t(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Id",property:"id",visible:!1,isModelProperty:!0},{name:"Distribuci\xf3n",property:"name",visible:!0,isModelProperty:!0},{name:"Descripci\xf3n",property:"description",visible:!0,isModelProperty:!0},{name:"Resumen horarios",property:"times_content_summary",visible:!0,isModelProperty:!0},{name:"Resumen widgets",property:"widgets_content_summary",visible:!0,isModelProperty:!0},{name:"Resumen destinatarios",property:"recipients_content_summary",visible:!0,isModelProperty:!0},{name:"\xdaltima modificaci\xf3n",property:"timestamp",visible:!0,isModelProperty:!0},{name:"Estatus",property:"status",visible:!0,isModelProperty:!0}],this.pageSize=10}getLabel(e,i){if(null!=e)return"Estatus"==e?2==i?"Activa":"Inactiva":i}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}getData(){this._contentDistributionsService.getAll().subscribe(e=>{this.contentDistributions=e,this.dataSource=new h.by(e)},e=>{console.log(e)})}ngOnInit(){this.dataSource=new h.by,this.getData(),this.data$.pipe((0,M.h)(e=>!!e)).subscribe(e=>{this.contentDistributions=e,this.dataSource.data=e})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}create(){this.dialog.open(P).afterClosed().subscribe(e=>{e&&(this.subject$.next(this.contentDistributions),this.getData(),this.data$.pipe((0,M.h)(i=>!!i)).subscribe(i=>{this.contentDistributions=i,this.dataSource.data=i}))})}update(e){this.dialog.open(P,{data:e}).afterClosed().subscribe(i=>{i&&(this.subject$.next(this.contentDistributions),this.getData(),this.data$.pipe((0,M.h)(l=>!!l)).subscribe(l=>{this.contentDistributions=l,this.dataSource.data=this.contentDistributions}))})}changeRuleStatus(e){}onFilterChange(e){!this.dataSource||(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}ngOnDestroy(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.uw),t.Y36(R),t.Y36(G.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["content-distributions-table"]],viewQuery:function(e,i){if(1&e&&(t.Gf(g.NW,7),t.Gf(x.YE,7)),2&e){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first)}},inputs:{columns:"columns"},decls:14,vars:10,consts:[["mode","card"],["current","Distribuciones de contenido",3,"crumbs"],["name","Distribuciones de contenido",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-header"),t._UZ(2,"fury-breadcrumbs",1),t.qZA(),t.TgZ(3,"fury-page-layout-content"),t.TgZ(4,"fury-list",2),t.NdJ("filterChange",function(c){return i.onFilterChange(c)}),t.TgZ(5,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return i.create()}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"table",5),t.YNc(10,ft,2,1,"ng-container",6),t.YNc(11,_t,1,0,"tr",7),t.YNc(12,Ct,1,0,"tr",8),t.qZA(),t._UZ(13,"mat-paginator",9),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("@fadeInRight",void 0)("crumbs",t.DdM(9,bt)),t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("columns",i.columns),t.xp6(5),t.Q6J("dataSource",i.dataSource),t.xp6(1),t.Q6J("ngForOf",i.columns),t.xp6(1),t.Q6J("matHeaderRowDef",i.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.visibleColumns),t.xp6(1),t.Q6J("pageSize",i.pageSize))},directives:[lt.N,ct.U,ut.n,mt.d,dt.n,F.lW,L.Hw,h.BZ,x.YE,r.sg,h.as,h.nj,g.NW,r.O5,h.w1,h.fO,h.Dz,h.ge,x.nU,h.ev,h.XQ,h.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[E.M,O.X]}}),n})()}];let xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[b.Bz.forChild(yt)],b.Bz]}),n})();const Tt=[{path:"",component:P}];let W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[b.Bz.forChild(Tt)],b.Bz]}),n})(),vt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,W,p.Z,a.UX,C.q]]}),n})();var Dt=s(61620),Zt=s(79814),At=s(74107);let kt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,a.u5,a.UX,Dt.o9,T.Is,I.c,F.ot,L.Ps,Zt.Fk,At.LD,A.rK.setLocale("es-MX")]]}),n})(),wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,xt,a.u5,C.q,p.Z,W,vt,y.p,kt,m.J]]}),n})()},12736:(k,f,s)=>{s.d(f,{L:()=>C});var r=s(40520),a=s(98545),m=s(5e3),y=s(33344);let C=(()=>{class p{constructor(g,x){this.http=g,this.tokenStorage=x}getHeaders(){var g=new r.WM,x=this.tokenStorage.getToken();return g.set("token",x||"{}")}getAll(){var g=this.getHeaders();return this.http.get(a._.settings.apiServer.API_URL_BASE+a._.settings.apiServer.WIDGETS,{headers:g})}getByAcronymous(g,x){var h=this.getHeaders();const w=(new r.LE).appendAll(x);return this.http.get(a._.settings.apiServer.API_URL_BASE+a._.settings.apiServer.WIDGETS+"/"+g,{params:w,headers:h})}}return p.\u0275fac=function(g){return new(g||p)(m.LFG(r.eN),m.LFG(y.i))},p.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);