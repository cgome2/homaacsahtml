"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[9033],{93861:(E,S,i)=>{i.d(S,{e:()=>y});class y{constructor(t){this.id=t&&t.id||null,this.station_name=t&&t.station_name||"",this.status=t&&t.status||0,this.orcudomain=t&&t.orcudomain||"",this.port=t&&t.port||0,this.site_code=t&&t.site_code||0,this.ho_role=t&&t.ho_role||0,this.userws=t&&t.userws||"",this.passwordws=t&&t.passwordws||"",this.sync_every_x_minutes=t&&t.sync_every_x_minutes||0,this.first_sync=t&&t.first_sync||"",this.last_sync=t&&t.last_sync||"",this.userhocommunicator=t&&t.userhocommunicator||"",this.passhocommunicator=t&&t.passhocommunicator||"",this.geolocation=t&&t.geolocation||"",this.sync_status=t&&t.sync_status||0,this.last_fail_update=t&&t.last_fail_update||"",this.max_sync_attempts=t&&t.max_sync_attempts||0,this.current_failed_attempts=t&&t.current_failed_attempts||0,this.map_of_products_done=t&&t.map_of_products_done||0,this.type=t&&t.type||0,this.pump_status_every_x_seconds=t&&t.pump_status_every_x_seconds||0,this.mobile_delivery_mean_id=t&&t.mobile_delivery_mean_id||0,this.mobile_calibration_mean_id=t&&t.mobile_calibration_mean_id||0,this.mobile_initial_inventory=t&&t.mobile_initial_inventory||0,this.mobile_initial_inventory_timestamp=t&&t.mobile_initial_inventory_timestamp||0,this.mobile_unique_product_id=t&&t.mobile_unique_product_id||0,this.accountant_name=t&&t.accountant_name||"",this.accountant_email=t&&t.accountant_email||"",this.weighing_machine=t&&t.weighing_machine||0,this.chemical_analysis_machine=t&&t.chemical_analysis_machine||0,this.delivery_pumps=t&&t.delivery_pumps||[],this.cv_configuration_id=t&&t.cv_configuration_id||0,this.controller_type=t&&t.controller_type||0}}},63314:(E,S,i)=>{i.d(S,{q:()=>x});var y=i(48966),u=i(5e3),t=i(30277),p=i(20773);let x=(()=>{class f{constructor(d,_){this.dialog=d,this.data=_,d.disableClose=!0}ngOnInit(){}}return f.\u0275fac=function(d){return new(d||f)(u.Y36(y.so),u.Y36(y.WI))},f.\u0275cmp=u.Xpm({type:f,selectors:[["progress-dialog"]],decls:7,vars:3,consts:[[1,"progress-dialog-container"],["mat-dialog-title",""],["mat-dialog-content",""],["fxLayout","column","fxLayoutAlign","start center",1,"preview-content"],["diameter","100","strokeWidth","12","color","warn","mode","determinate",3,"value"]],template:function(d,_){1&d&&(u.TgZ(0,"div",0),u.TgZ(1,"h1",1),u._uU(2),u.qZA(),u.TgZ(3,"div",2),u._uU(4),u.qZA(),u.TgZ(5,"div",3),u._UZ(6,"mat-progress-spinner",4),u.qZA(),u.qZA()),2&d&&(u.xp6(2),u.Oqu(_.data.title),u.xp6(2),u.Oqu(_.data.message),u.xp6(2),u.Q6J("value",_.data.percent))},directives:[y.uh,y.xY,t.xw,t.Wh,p.Ou],styles:[".progress-dialog-container[_ngcontent-%COMP%]{width:300px;height:290px;overflow:unset;padding:0}.progress-dialog-container[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{margin-bottom:-20px;padding:0;text-align:center;font-size:20px}.progress-dialog-container[_ngcontent-%COMP%]   .mat-dialog-title[_ngcontent-%COMP%]{background:#0f192a;font-size:24px;text-align:center;color:#f5f5f5;width:auto;padding:20px}.progress-dialog-container[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{padding:60px}"]}),f})()},99033:(E,S,i)=>{i.d(S,{M:()=>xt});var y=i(93861),u=i(63314),t=i(5e3),p=i(3299),x=i(48966),f=i(52190),C=i(57261),d=i(59968),_=i(30277),s=i(70655),r=i(69808),m=i(14499),F=i(88914),b=i(48240),w=i(31819),N=i(26387),g=i(97199),M=i(47423),O=i(25245),Z=i(92181),q=i(75972);let J=(()=>{class a{constructor(e,n,c){this.platformId=e,this._stationsService=n,this.zone=c,this.tanksStatus=[]}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.tanksStatus=yield this.getData(),b.FgM(N.Z),b.YMi.autoDispose=!0;let e=b.Ue8("tanks_status_chartdiv",w.B4);e.paddingRight=20;let n=0;this.tanksStatus.forEach(function(h){let W=Math.round(+h.capacity),R=Math.round(+h.fuel_volume),Pt={color:b.$_Y(h.color),tank_name:h.name+"\nCapacidad: "+W+"Lts\nExistencia: "+R,details:"Tanque: "+h.name+"\nTemperatura: "+Math.round(h.temperature)+"\nVolumen: "+Math.round(h.fuel_volume)+"Lts\nAltura: "+Math.round(h.fuel_height)+"\nVolumen agua: "+Math.round(h.water_volume)+"Lts\nAltura agua: "+Math.round(h.water_height)+"\nMerma: "+Math.round(h.ullage)+"Lts\nProducto: "+h.local_product_name+"\nFecha de medici\xf3n: "+h.date,value1:R/W*100,value2:100-R/W*100};e.data[n]=Pt,n++});let c=e.xAxes.push(new w.$l);c.dataFields.category="tank_name",c.renderer.grid.template.strokeOpacity=0,c.fontSize="12px";let A=e.yAxes.push(new w.mn);A.renderer.grid.template.strokeOpacity=0,A.min=-20,A.max=130,A.strictMinMax=!0,A.renderer.baseGrid.disabled=!1,A.renderer.labels.template.adapter.add("text",function(h){return Number(h)>100||Number(h)<0?"":h+"%"});let T=e.series.push(new w.En);T.dataFields.valueY="value1",T.dataFields.categoryX="tank_name",T.columns.template.fillOpacity=.9,T.columns.template.strokeOpacity=1,T.columns.template.strokeWidth=1,T.columns.template.propertyFields.stroke="color",T.columns.template.propertyFields.fill="color",T.columns.template.propertyFields.tooltipText="details",T.columns.template.maxWidth=160;let v=e.series.push(new w.En);v.dataFields.valueY="value2",v.dataFields.categoryX="tank_name",v.stacked=!0,v.columns.template.fill=b.$_Y("#f4f4f4"),v.columns.template.fillOpacity=.5,v.columns.template.stroke=b.$_Y("#f4f4f4"),v.columns.template.strokeOpacity=.2,v.columns.template.strokeWidth=1,v.columns.template.maxWidth=160,this.chart=e})}getData(){return(0,s.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getTanksStatus(this.station_id).toPromise()})}browserOnly(e){(0,r.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{e()})}ngOnDestroy(){b.ODi()}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.Lbi),t.Y36(f.w),t.Y36(t.R0b))},a.\u0275cmp=t.Xpm({type:a,selectors:[["fury-tanks-status-widget"]],inputs:{station_id:"station_id",station_name:"station_name",sync_status:"sync_status",type:"type",pump_status_every_x_seconds:"pump_status_every_x_seconds"},decls:31,vars:3,consts:[["fxFlex","auto"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"card-content"],["id","tanks_status_chartdiv",2,"width","100%","height","100%"],[3,"isLoading"],["menu","matMenu"],["mat-menu-item",""],["mat-menu-item","","disabled",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"fury-card",0),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3),t.qZA(),t.TgZ(4,"fury-card-header-actions"),t.TgZ(5,"button",1),t.NdJ("click",function(){return n.reload()}),t.TgZ(6,"mat-icon"),t._uU(7,"refresh"),t.qZA(),t.qZA(),t.TgZ(8,"button",2),t.TgZ(9,"mat-icon"),t._uU(10,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"fury-card-content",3),t._UZ(12,"div",4),t.qZA(),t._UZ(13,"fury-loading-overlay",5),t.qZA(),t.TgZ(14,"mat-menu",null,6),t.TgZ(16,"button",7),t.TgZ(17,"mat-icon"),t._uU(18,"settings"),t.qZA(),t.TgZ(19,"span"),t._uU(20," Configurar "),t.qZA(),t.qZA(),t.TgZ(21,"button",8),t.TgZ(22,"mat-icon"),t._uU(23," more"),t.qZA(),t.TgZ(24,"span"),t._uU(25," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(26,"button",7),t.TgZ(27,"mat-icon"),t._uU(28," remove_circle"),t.qZA(),t.TgZ(29,"span"),t._uU(30," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&e){const c=t.MAs(15);t.xp6(3),t.hij(" Estatus de tanques: ",n.station_name," "),t.xp6(5),t.Q6J("matMenuTriggerFor",c),t.xp6(5),t.Q6J("isLoading",n.isLoading)}},directives:[g.i0,_.yH,g.$X,g.eP,g.OA,M.lW,O.Hw,Z.p6,g.z8,q.d,Z.VK,Z.OP],styles:["[_nghost-%COMP%]{height:100%}.fury-card-header[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{padding:24px;cursor:pointer;border-top:4px solid transparent}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);padding-bottom:6px}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-headline)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]{font:var(--font-caption)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:13px;height:13px;width:13px;vertical-align:middle}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .compared[_ngcontent-%COMP%]{font:var(--font-caption);visibility:hidden}.card-content[_ngcontent-%COMP%]{min-height:350px}.actions[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{margin-top:-24px;margin-bottom:-1.34375em;font-size:14px}"],data:{animation:[F.M,m.X]}}),a})();var D=i(9224);function B(a,o){if(1&a&&(t.TgZ(0,"mat-card",7),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-icon",8),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-title"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content"),t.TgZ(9,"div",9),t.TgZ(10,"span"),t._uU(11,"Importe"),t.qZA(),t._UZ(12,"span",10),t.TgZ(13,"span",11),t._uU(14),t.ALo(15,"currency"),t.qZA(),t.qZA(),t.TgZ(16,"div",9),t.TgZ(17,"span"),t._uU(18,"Litros"),t.qZA(),t._UZ(19,"span",10),t.TgZ(20,"span",11),t._uU(21),t.ALo(22,"number"),t.qZA(),t.qZA(),t.TgZ(23,"div",9),t.TgZ(24,"span"),t._uU(25,"Manguera"),t.qZA(),t._UZ(26,"span",10),t.TgZ(27,"span",11),t._uU(28),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a){const e=o.$implicit,n=t.oxw();t.xp6(3),t.Oqu(n.status[e.status].icon),t.xp6(2),t.hij("Bomba ",e.pump_num,""),t.xp6(2),t.Oqu(n.status[e.status].name),t.xp6(7),t.Oqu(t.lcZ(15,6,e.fuel_sale)),t.xp6(7),t.Oqu(t.xi3(22,8,e.fuel_volume,"1.3-3")),t.xp6(7),t.Oqu(+e.nozzle_id||"")}}let Y=(()=>{class a{constructor(e){this._stationsService=e,this.status={49:{name:"Idle",icon:"local_gas_station"},53:{name:"Call",icon:"phone_in_talk"},50:{name:"Fueling",icon:"opacity"},55:{name:"Offline",icon:"report_problem"},56:{name:"Stopped",icon:"pan_tool"},57:{name:"Paying",icon:"paid"}},this.pumps=[],this.trackByFn=n=>n}ngOnInit(){this.initPumps()}initPumps(){return(0,s.mG)(this,void 0,void 0,function*(){for(;!this.destroyed;){try{this.pumps=yield this._stationsService.getPumpsStatus(this.station_id).toPromise()}catch(e){this.pumps=[]}yield new Promise(e=>setTimeout(e,1e3*this.pump_status_every_x_seconds))}})}ngOnDestroy(){this.destroyed=!0}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.w))},a.\u0275cmp=t.Xpm({type:a,selectors:[["fury-pumps-status-widget"]],inputs:{station_id:"station_id",station_name:"station_name",sync_status:"sync_status",type:"type",pump_status_every_x_seconds:"pump_status_every_x_seconds"},decls:32,vars:4,consts:[["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[2,"display","flex","flex-direction","row","flex-wrap","wrap"],["class","pump-box",4,"ngFor","ngForOf","ngForTrackBy"],["menu","matMenu"],["mat-menu-item",""],["mat-menu-item","","disabled",""],[1,"pump-box"],[1,"icon-display"],[2,"display","flex","flex-direction","row","justify-content","space-between"],[1,"filler"],[1,"mat-body-strong"]],template:function(e,n){if(1&e&&(t.TgZ(0,"fury-card"),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3),t.qZA(),t.TgZ(4,"fury-card-header-subheading"),t._uU(5,"Estatus de bombas"),t.qZA(),t.TgZ(6,"fury-card-header-actions"),t.TgZ(7,"button",0),t.NdJ("click",function(){return n.reload()}),t.TgZ(8,"mat-icon"),t._uU(9,"refresh"),t.qZA(),t.qZA(),t.TgZ(10,"button",1),t.TgZ(11,"mat-icon"),t._uU(12,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",2),t.YNc(14,B,29,11,"mat-card",3),t.qZA(),t.qZA(),t.TgZ(15,"mat-menu",null,4),t.TgZ(17,"button",5),t.TgZ(18,"mat-icon"),t._uU(19,"settings"),t.qZA(),t.TgZ(20,"span"),t._uU(21," Configurar "),t.qZA(),t.qZA(),t.TgZ(22,"button",6),t.TgZ(23,"mat-icon"),t._uU(24," more"),t.qZA(),t.TgZ(25,"span"),t._uU(26," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(27,"button",5),t.TgZ(28,"mat-icon"),t._uU(29," remove_circle"),t.qZA(),t.TgZ(30,"span"),t._uU(31," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&e){const c=t.MAs(16);t.xp6(3),t.hij("Estaci\xf3n de servicio: ",n.station_name,""),t.xp6(7),t.Q6J("matMenuTriggerFor",c),t.xp6(4),t.Q6J("ngForOf",n.pumps)("ngForTrackBy",n.trackByFn)}},directives:[g.i0,g.$X,g.eP,g.lO,g.OA,M.lW,O.Hw,Z.p6,r.sg,Z.VK,Z.OP,D.a8,D.dk,D.n5,D.$j,D.dn],pipes:[r.H9,r.JJ],styles:["[_nghost-%COMP%]{height:100%}.fade-out-overlay[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;height:100%;width:50px}.fury-card-header[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.fury-card-header[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}.icon-display[_ngcontent-%COMP%]{transform:scale(1.5)}.pump-box[_ngcontent-%COMP%]{margin:8px;flex-basis:190px;box-sizing:border-box}"]}),a})();var U=i(86087),P=i(84847),l=i(32075),k=i(96831),I=i(92198),H=i(2728);function z(a,o){if(1&a&&(t.TgZ(0,"th",16),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function $(a,o){if(1&a&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&a){const e=o.$implicit,n=t.oxw(2).$implicit,c=t.oxw();t.xp6(1),t.Oqu(c.getLabel(n.name,e[n.property]))}}function G(a,o){if(1&a&&(t.ynx(0,13),t.YNc(1,z,2,1,"th",14),t.YNc(2,$,2,1,"td",15),t.BQk()),2&a){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function K(a,o){if(1&a&&(t.ynx(0),t.YNc(1,G,3,1,"ng-container",12),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.isModelProperty)}}function j(a,o){1&a&&t._UZ(0,"tr",18)}function V(a,o){1&a&&t._UZ(0,"tr",19)}let X=(()=>{class a{constructor(e,n){this._transactionsService=e,this.snackbar=n,this.subject$=new k.t(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Id",property:"transaction_id",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Veh\xedculo",property:"mean_name",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Producto",property:"product_name",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Cantidad",property:"quantity",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Inicio de transacci\xf3n",property:"start_flow",visible:!0,isModelProperty:!0,displayFn:!1},{name:"PPV",property:"ppv",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Total",property:"total_price",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Bomba",property:"pump",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Manguera",property:"nozzle",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Fecha y hora de registro",property:"timestamp",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Temperatura",property:"temperature",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Volumen por CT",property:"transaction_vtc",visible:!0,isModelProperty:!0,displayFn:!0}],this.pageSize=10,this.stop=!1}getLabel(e,n){if(null!=e)return n}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}getData(){return(0,s.mG)(this,void 0,void 0,function*(){for(;!this.stop;)this._transactionsService.getAll({stations:this.station_id,n:1,from_temperature:0,to_temperature:40,limit:20}).subscribe(n=>{this.lastTransactions=n.details,this.dataSource=new l.by(this.lastTransactions),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},n=>{this.snackbar.open(n,null,{duration:3e3,panelClass:["red-snackbar"]})}),yield new Promise(n=>setTimeout(n,1e4))})}ngOnInit(){this.dataSource=new l.by,this.getData(),this.data$.pipe((0,I.h)(e=>!!e)).subscribe(e=>{this.lastTransactions=e,this.dataSource.data=e})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onFilterChange(e){!this.dataSource||(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}ngOnDestroy(){this.stop=!0}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(H.v),t.Y36(C.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["fury-last-transactions-widget"]],viewQuery:function(e,n){if(1&e&&(t.Gf(U.NW,7),t.Gf(P.YE,7)),2&e){let c;t.iGM(c=t.CRH())&&(n.paginator=c.first),t.iGM(c=t.CRH())&&(n.sort=c.first)}},inputs:{station_id:"station_id",station_name:"station_name",sync_status:"sync_status",type:"type",pump_status_every_x_seconds:"pump_status_every_x_seconds",columns:"columns"},decls:37,vars:8,consts:[["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"card-content"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"isLoading"],["menu","matMenu"],["mat-menu-item",""],["mat-menu-item","","disabled",""],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"fury-card"),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3),t.qZA(),t.TgZ(4,"fury-card-header-subheading"),t._uU(5," \xdaltimos despachos "),t.qZA(),t.TgZ(6,"fury-card-header-actions"),t.TgZ(7,"button",0),t.NdJ("click",function(){return n.reload()}),t.TgZ(8,"mat-icon"),t._uU(9,"refresh"),t.qZA(),t.qZA(),t.TgZ(10,"button",1),t.TgZ(11,"mat-icon"),t._uU(12,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"fury-card-content",2),t.TgZ(14,"table",3),t.YNc(15,K,2,1,"ng-container",4),t.YNc(16,j,1,0,"tr",5),t.YNc(17,V,1,0,"tr",6),t.qZA(),t._UZ(18,"mat-paginator",7),t.qZA(),t._UZ(19,"fury-loading-overlay",8),t.qZA(),t.TgZ(20,"mat-menu",null,9),t.TgZ(22,"button",10),t.TgZ(23,"mat-icon"),t._uU(24,"settings"),t.qZA(),t.TgZ(25,"span"),t._uU(26," Configurar "),t.qZA(),t.qZA(),t.TgZ(27,"button",11),t.TgZ(28,"mat-icon"),t._uU(29," more"),t.qZA(),t.TgZ(30,"span"),t._uU(31," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(32,"button",10),t.TgZ(33,"mat-icon"),t._uU(34," remove_circle"),t.qZA(),t.TgZ(35,"span"),t._uU(36," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&e){const c=t.MAs(21);t.xp6(3),t.hij(" Estaci\xf3n de servicio: ",n.station_name," "),t.xp6(7),t.Q6J("matMenuTriggerFor",c),t.xp6(4),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("ngForOf",n.columns),t.xp6(1),t.Q6J("matHeaderRowDef",n.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.visibleColumns),t.xp6(1),t.Q6J("pageSize",n.pageSize),t.xp6(1),t.Q6J("isLoading",n.isLoading)}},directives:[g.i0,g.$X,g.eP,g.lO,g.OA,M.lW,O.Hw,Z.p6,g.z8,l.BZ,P.YE,r.sg,l.as,l.nj,U.NW,q.d,Z.VK,Z.OP,r.O5,l.w1,l.fO,l.Dz,l.ge,P.nU,l.ev,l.XQ,l.Gk],styles:[".fury-card[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.fury-card[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}.gain[_ngcontent-%COMP%]{margin-left:8px;font:var(--font-caption)}.gain[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;line-height:18px}.card-content[_ngcontent-%COMP%]{padding:0;overflow:scroll}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]{padding:0 24px 24px}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);text-transform:uppercase}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-display-1)}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{margin-left:3px;font-size:32px;height:32px;width:32px}.card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:170px;max-width:100%;display:flex;flex:1;position:relative}"]}),a})();function tt(a,o){if(1&a&&(t.TgZ(0,"th",16),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function et(a,o){if(1&a&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&a){const e=o.$implicit,n=t.oxw(2).$implicit,c=t.oxw();t.xp6(1),t.Oqu(c.getLabel(n.name,e[n.property]))}}function nt(a,o){if(1&a&&(t.ynx(0,13),t.YNc(1,tt,2,1,"th",14),t.YNc(2,et,2,1,"td",15),t.BQk()),2&a){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function at(a,o){if(1&a&&(t.ynx(0),t.YNc(1,nt,3,1,"ng-container",12),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.isModelProperty)}}function st(a,o){1&a&&t._UZ(0,"tr",18)}function it(a,o){1&a&&t._UZ(0,"tr",19)}let ot=(()=>{class a{constructor(e,n){this._stationsService=e,this.snackbar=n,this.stop=!1,this.subject$=new k.t(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Nombre de dispositivo",property:"Name",visible:!0,isModelProperty:!0},{name:"Tipo",property:"Type",visible:!0,isModelProperty:!0},{name:"Estatus",property:"Status",visible:!0,isModelProperty:!0},{name:"C\xf3digo",property:"StatusCode",visible:!0,isModelProperty:!0}],this.pageSize=5}getLabel(e,n){if(null!=e)return n}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}getData(){return(0,s.mG)(this,void 0,void 0,function*(){for(;!this.stop;)this._stationsService.getDevicesStatus(this.station_id).subscribe(e=>{this.devicesStatus=e,this.dataSource=new l.by(e),this.dataSource=new l.by(this.devicesStatus),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},e=>{this.snackbar.open(e,null,{duration:5e3,panelClass:["red-snackbar"]}),console.log(e)}),yield new Promise(e=>setTimeout(e,1e4))})}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.dataSource=new l.by,this.getData(),this.data$.pipe((0,I.h)(e=>!!e)).subscribe(e=>{this.devicesStatus=e,this.dataSource.data=e})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onFilterChange(e){!this.dataSource||(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}ngOnDestroy(){this.stop=!0}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.w),t.Y36(C.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["fury-devices-status-widget"]],viewQuery:function(e,n){if(1&e&&(t.Gf(U.NW,7),t.Gf(P.YE,7)),2&e){let c;t.iGM(c=t.CRH())&&(n.paginator=c.first),t.iGM(c=t.CRH())&&(n.sort=c.first)}},inputs:{station_id:"station_id",station_name:"station_name",sync_status:"sync_status",type:"type",pump_status_every_x_seconds:"pump_status_every_x_seconds",columns:"columns"},decls:37,vars:8,consts:[["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"card-content"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"isLoading"],["menu","matMenu"],["mat-menu-item",""],["mat-menu-item","","disabled",""],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"fury-card"),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3),t.qZA(),t.TgZ(4,"fury-card-header-subheading"),t._uU(5," Estatus de dispositivos de comunicaci\xf3n "),t.qZA(),t.TgZ(6,"fury-card-header-actions"),t.TgZ(7,"button",0),t.NdJ("click",function(){return n.reload()}),t.TgZ(8,"mat-icon"),t._uU(9,"refresh"),t.qZA(),t.qZA(),t.TgZ(10,"button",1),t.TgZ(11,"mat-icon"),t._uU(12,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"fury-card-content",2),t.TgZ(14,"table",3),t.YNc(15,at,2,1,"ng-container",4),t.YNc(16,st,1,0,"tr",5),t.YNc(17,it,1,0,"tr",6),t.qZA(),t._UZ(18,"mat-paginator",7),t.qZA(),t._UZ(19,"fury-loading-overlay",8),t.qZA(),t.TgZ(20,"mat-menu",null,9),t.TgZ(22,"button",10),t.TgZ(23,"mat-icon"),t._uU(24,"settings"),t.qZA(),t.TgZ(25,"span"),t._uU(26," Configurar "),t.qZA(),t.qZA(),t.TgZ(27,"button",11),t.TgZ(28,"mat-icon"),t._uU(29," more"),t.qZA(),t.TgZ(30,"span"),t._uU(31," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(32,"button",10),t.TgZ(33,"mat-icon"),t._uU(34," remove_circle"),t.qZA(),t.TgZ(35,"span"),t._uU(36," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&e){const c=t.MAs(21);t.xp6(3),t.hij(" Estaci\xf3n de servicio: ",n.station_name," "),t.xp6(7),t.Q6J("matMenuTriggerFor",c),t.xp6(4),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("ngForOf",n.columns),t.xp6(1),t.Q6J("matHeaderRowDef",n.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.visibleColumns),t.xp6(1),t.Q6J("pageSize",n.pageSize),t.xp6(1),t.Q6J("isLoading",n.isLoading)}},directives:[g.i0,g.$X,g.eP,g.lO,g.OA,M.lW,O.Hw,Z.p6,g.z8,l.BZ,P.YE,r.sg,l.as,l.nj,U.NW,q.d,Z.VK,Z.OP,r.O5,l.w1,l.fO,l.Dz,l.ge,P.nU,l.ev,l.XQ,l.Gk],styles:[".fury-card[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.fury-card[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}.gain[_ngcontent-%COMP%]{margin-left:8px;font:var(--font-caption)}.gain[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;line-height:18px}.card-content[_ngcontent-%COMP%]{padding:0;overflow:scroll}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]{padding:0 24px 24px}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);text-transform:uppercase}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-display-1)}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{margin-left:3px;font-size:32px;height:32px;width:32px}.card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:170px;max-width:100%;display:flex;flex:1;position:relative}"]}),a})();var Q=i(40520),L=i(98545),rt=i(33344);let ct=(()=>{class a{constructor(e,n){this.http=e,this.tokenStorage=n}getHeaders(){var e=new Q.WM,n=this.tokenStorage.getToken();return e.set("token",n||"{}")}getAll(){var e=this.getHeaders();return this.http.get(L._.settings.apiServer.API_URL_BASE+L._.settings.apiServer.STATUS_TANKS,{headers:e})}getTanksByStation(e){var n=this.getHeaders();return this.http.get(L._.settings.apiServer.API_URL_BASE+L._.settings.apiServer.STATUS_TANKS+"/"+e,{headers:n})}getLastTankDeliveryReadings(e){var n=this.getHeaders();return this.http.get(L._.settings.apiServer.API_URL_BASE+L._.settings.apiServer.DELIVERIES+"?"+e,{headers:n})}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(Q.eN),t.LFG(rt.i))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var pt=i(24784);function lt(a,o){if(1&a&&(t.TgZ(0,"th",17),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function ut(a,o){if(1&a&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&a){const e=o.$implicit,n=t.oxw(2).$implicit,c=t.oxw();t.xp6(1),t.Oqu(c.getLabel(n.name,e[n.property]))}}function dt(a,o){if(1&a&&(t.ynx(0,14),t.YNc(1,lt,2,1,"th",15),t.YNc(2,ut,2,1,"td",16),t.BQk()),2&a){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function gt(a,o){if(1&a&&(t.TgZ(0,"th",17),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function _t(a,o){if(1&a&&(t.TgZ(0,"td",20),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=o.$implicit,n=t.oxw(2).$implicit,c=t.oxw();t.xp6(1),t.Oqu(t.xi3(2,1,c.getLabel(n.name,e[n.property]),"1.0-0"))}}function mt(a,o){if(1&a&&(t.ynx(0,14),t.YNc(1,gt,2,1,"th",15),t.YNc(2,_t,3,4,"td",19),t.BQk()),2&a){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function ht(a,o){if(1&a&&(t.TgZ(0,"th",17),t._uU(1),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}const ft=function(a){return{"background-color":a}};function yt(a,o){if(1&a&&(t.TgZ(0,"td",18),t._UZ(1,"button",22),t.qZA()),2&a){const e=o.$implicit,n=t.oxw(2).$implicit,c=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(1,ft,c.getLabel(n.name,e[n.property])))}}function vt(a,o){1&a&&(t.ynx(0,21),t.YNc(1,ht,2,1,"th",15),t.YNc(2,yt,2,3,"td",16),t.BQk())}function Zt(a,o){if(1&a&&(t.ynx(0),t.YNc(1,dt,3,1,"ng-container",12),t.YNc(2,mt,3,1,"ng-container",12),t.YNc(3,vt,3,0,"ng-container",13),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.isModelProperty&&"color"!=e.property&&"volume"!=e.property&&"end_temp"!=e.property&&"start_volume"!=e.property&&"end_volume"!=e.property),t.xp6(1),t.Q6J("ngIf",e.isModelProperty&&"color"!=e.property&&("volume"==e.property||"end_temp"==e.property||"start_volume"==e.property||"end_volume"==e.property)),t.xp6(1),t.Q6J("ngIf",e.isModelProperty&&"color"==e.property)}}function Tt(a,o){1&a&&t._UZ(0,"tr",23)}function Ct(a,o){1&a&&t._UZ(0,"tr",24)}let At=(()=>{class a{constructor(e,n){this._tanksService=e,this.snackbar=n,this.stop=!1,this.subject$=new k.t(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Id",property:"tank_delivery_reading_id",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Volumen inicio",property:"start_volume",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Volumen fin",property:"end_volume",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Volumen recibido",property:"volume",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Fecha y hora",property:"end_delivery_timestamp",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Temperatura",property:"end_temp",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Tanque",property:"tank_name",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Producto",property:"product_name",visible:!0,isModelProperty:!0,displayFn:!0},{name:"Recepci\xf3n",property:"reception_id",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Color",property:"color",visible:!0,isModelProperty:!0,displayFn:!1}],this.pageSize=10}getLabel(e,n){if(null!=e)return n}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}getData(){return(0,s.mG)(this,void 0,void 0,function*(){for(;!this.stop;)this._tanksService.getLastTankDeliveryReadings("stations="+this.station_id+"&n=5").subscribe(n=>{this.lastRecords=n,this.dataSource=new l.by(n),this.dataSource=new l.by(this.lastRecords),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},n=>{this.snackbar.open(n,null,{duration:5e3,panelClass:["red-snackbar"]}),console.log(n)}),yield new Promise(n=>setTimeout(n,1e4))})}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.dataSource=new l.by,this.getData(),this.data$.pipe((0,I.h)(e=>!!e)).subscribe(e=>{this.lastRecords=e,this.dataSource.data=e})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onFilterChange(e){!this.dataSource||(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}ngOnDestroy(){this.stop=!0}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(ct),t.Y36(C.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["fury-last-deliveries-widget"]],viewQuery:function(e,n){if(1&e&&(t.Gf(U.NW,7),t.Gf(P.YE,7)),2&e){let c;t.iGM(c=t.CRH())&&(n.paginator=c.first),t.iGM(c=t.CRH())&&(n.sort=c.first)}},inputs:{station_id:"station_id",station_name:"station_name",sync_status:"sync_status",type:"type",pump_status_every_x_seconds:"pump_status_every_x_seconds",columns:"columns"},decls:37,vars:8,consts:[["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"card-content"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"isLoading"],["menu","matMenu"],["mat-menu-item",""],["mat-menu-item","","disabled",""],[3,"matColumnDef",4,"ngIf"],["matColumnDef","color",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["style","text-align: right; padding-right: 20px;","mat-cell","",4,"matCellDef"],["mat-cell","",2,"text-align","right","padding-right","20px"],["matColumnDef","color"],["type","buton","mat-mini-fab","",2,"cursor","auto","height","20px","width","20px",3,"ngStyle"],["mat-header-row",""],["mat-row",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"fury-card"),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3),t.qZA(),t.TgZ(4,"fury-card-header-subheading"),t._uU(5," \xdaltimas recepciones de combustible "),t.qZA(),t.TgZ(6,"fury-card-header-actions"),t.TgZ(7,"button",0),t.NdJ("click",function(){return n.reload()}),t.TgZ(8,"mat-icon"),t._uU(9,"refresh"),t.qZA(),t.qZA(),t.TgZ(10,"button",1),t.TgZ(11,"mat-icon"),t._uU(12,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"fury-card-content",2),t.TgZ(14,"table",3),t.YNc(15,Zt,4,3,"ng-container",4),t.YNc(16,Tt,1,0,"tr",5),t.YNc(17,Ct,1,0,"tr",6),t.qZA(),t._UZ(18,"mat-paginator",7),t.qZA(),t._UZ(19,"fury-loading-overlay",8),t.qZA(),t.TgZ(20,"mat-menu",null,9),t.TgZ(22,"button",10),t.TgZ(23,"mat-icon"),t._uU(24,"settings"),t.qZA(),t.TgZ(25,"span"),t._uU(26," Configurar "),t.qZA(),t.qZA(),t.TgZ(27,"button",11),t.TgZ(28,"mat-icon"),t._uU(29," more"),t.qZA(),t.TgZ(30,"span"),t._uU(31," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(32,"button",10),t.TgZ(33,"mat-icon"),t._uU(34," remove_circle"),t.qZA(),t.TgZ(35,"span"),t._uU(36," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&e){const c=t.MAs(21);t.xp6(3),t.hij(" Estaci\xf3n de servicio: ",n.station_name," "),t.xp6(7),t.Q6J("matMenuTriggerFor",c),t.xp6(4),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("ngForOf",n.columns),t.xp6(1),t.Q6J("matHeaderRowDef",n.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.visibleColumns),t.xp6(1),t.Q6J("pageSize",n.pageSize),t.xp6(1),t.Q6J("isLoading",n.isLoading)}},directives:[g.i0,g.$X,g.eP,g.lO,g.OA,M.lW,O.Hw,Z.p6,g.z8,l.BZ,P.YE,r.sg,l.as,l.nj,U.NW,q.d,Z.VK,Z.OP,r.O5,l.w1,l.fO,l.Dz,l.ge,P.nU,l.ev,r.PC,pt.Zl,l.XQ,l.Gk],pipes:[r.JJ],styles:[".fury-card[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.fury-card[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}.gain[_ngcontent-%COMP%]{margin-left:8px;font:var(--font-caption)}.gain[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;line-height:18px}.card-content[_ngcontent-%COMP%]{padding:0;overflow:scroll}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]{padding:0 24px 24px}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);text-transform:uppercase}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-display-1)}.card-content[_ngcontent-%COMP%]   .sections[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{margin-left:3px;font-size:32px;height:32px;width:32px}.card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:170px;max-width:100%;display:flex;flex:1;position:relative}"]}),a})();var St=i(87238);let xt=(()=>{class a{constructor(e,n,c,A,T){this.router=e,this.route=n,this.progressDialog=c,this._stationsService=A,this.snackbar=T,this.station=new y.e,this.isLoading=!1,this.progress_message="wtf%",this._gap=16,this.gap=`${this._gap}px`,/Edge/.test(navigator.userAgent)&&a.isInitialLoad&&(this.router.navigate(["/apps/chat"]).then(()=>{this.router.navigate(["/"])}),a.isInitialLoad=!1)}col(e){return`1 1 calc(${100/e}% - ${this._gap-this._gap/e}px)`}ngOnInit(){this.route.params.subscribe(e=>{this.station.id=e.id,this.station.station_name=e.station_name,this.station.sync_status=e.sync_status,this.station.type=e.type,this.station.pump_status_every_x_seconds=e.pump_status_every_x_seconds,this.station.site_code=e.site_code})}goToStationsSyncStatus(){this.router.navigate(["/charts/sync-status"])}syncStation(){let e=this.station,n=[{name:"models",percent:0,label:"Modelos"},{name:"fleets",percent:10,label:"Flotas"},{name:"departments",percent:20,label:"Departamentos"},{name:"limits_rules",percent:25,label:"Reglas de l\xedmites"},{name:"fuels_rules",percent:30,label:"Reglas de combustible"},{name:"visits_rules",percent:35,label:"Reglas de visita"},{name:"times_rules",percent:40,label:"Reglas de tiempos"},{name:"group_rules",percent:45,label:"Reglas grupales"},{name:"wireless_programmers",percent:50,label:"WPs"},{name:"means",percent:60,label:"Dispositivos/veh\xedculos"},{name:"transactions",percent:70,label:"Transacciones"}];1==e.type?(n.push({name:"inventories",percent:80,label:"Inventarios"}),n.push({name:"deliveries",percent:90,label:"Incrementos de TLS"})):n.push({name:"deliveries",percent:90,label:"Incrementos de TLS"}),console.log(this.station),console.log(n);let c=this.progressDialog.open(u.q,{data:{title:"Transfiriendo",message:"Cargando...",percent:0}}),A=T=>{c.componentInstance.data={title:"Transfiriendo",message:T.label,percent:T.percent},this._stationsService.syncSingle(e.site_code,T.name).subscribe(v=>{this.snackbar.open(v.message,null,0==v.rc?{duration:5e3,panelClass:["green-snackbar"]}:{duration:5e3,panelClass:["red-snackbar"]}),n.length&&0==v.rc?A(n.shift()):(c.close(),n.length?(e.sync_status=1,this._stationsService.update(e).subscribe(h=>{this.snackbar.open("La estaci\xf3n no se pudo sincronizar en su totalidad",null,{duration:8e3,panelClass:["red-snackbar"]})})):(e.sync_status=2,e.current_failed_attempts=0,this._stationsService.update(e).subscribe(h=>{this.snackbar.open("Estaci\xf3n sincronizada con \xe9xito",null,{duration:8e3,panelClass:["green-snackbar"]})})),this.ngOnInit())},v=>{this.snackbar.open(v,null,{duration:5e3,panelClass:["red-snackbar"]}),c.close(),e.sync_status=1,this._stationsService.update(e).subscribe(h=>{this.snackbar.open("La estaci\xf3n no se pudo sincronizar en su totalidad",null,{duration:8e3,panelClass:["red-snackbar"]})})})};A(n.shift())}ngOnDestroy(){console.log("destroying child...")}}return a.isInitialLoad=!0,a.\u0275fac=function(e){return new(e||a)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(x.uw),t.Y36(f.w),t.Y36(C.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["fury-dashboard"]],decls:18,vars:37,consts:[["fxLayout","column",1,"dashboard",3,"fxLayoutGap"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-lg","row",3,"fxLayoutGap"],["fxLayout","row",3,"fxLayoutGap","fxFlex"],["fxFlex","auto",3,"fxFlex.gt-sm"],[1,"fullheight",3,"station_id","station_name","sync_status","type","pump_status_every_x_seconds"],[1,"route-animations-elements",3,"station_id","station_name","sync_status","type","pump_status_every_x_seconds","fxFlex"],["fxFlex","grow",1,"route-animations-elements"],["mat-fab","","type","button","matTooltip","Estatus de sincronizaci\xf3n de estaciones",1,"config-panel-toggle",3,"click"],["svgIcon","ho_network"],["mat-fab","","type","button","matTooltip","Sincronizar estaci\xf3n",1,"config-panel-toggle-sync",3,"click"],["svgIcon","sync"]],template:function(e,n){1&e&&(t.TgZ(0,"fury-page",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._UZ(4,"fury-tanks-status-widget",4),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"fury-pumps-status-widget",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",1),t.TgZ(8,"div",6),t._UZ(9,"fury-last-transactions-widget",4),t.qZA(),t.qZA(),t.TgZ(10,"div",1),t.TgZ(11,"div",2),t._UZ(12,"fury-devices-status-widget",4),t._UZ(13,"fury-last-deliveries-widget",5),t.qZA(),t.qZA(),t.TgZ(14,"button",7),t.NdJ("click",function(){return n.goToStationsSyncStatus()}),t._UZ(15,"mat-icon",8),t.qZA(),t.TgZ(16,"button",9),t.NdJ("click",function(){return n.syncStation()}),t._UZ(17,"mat-icon",10),t.qZA(),t.qZA()),2&e&&(t.Q6J("fxLayoutGap",n.gap),t.xp6(1),t.Q6J("fxLayoutGap",n.gap),t.xp6(1),t.Q6J("fxLayoutGap",n.gap)("fxFlex",n.col(4)),t.xp6(1),t.Q6J("fxFlex.gt-sm",n.col(4)),t.xp6(1),t.Q6J("station_id",n.station.id)("station_name",n.station.station_name)("sync_status",n.station.sync_status)("type",n.station.type)("pump_status_every_x_seconds",n.station.pump_status_every_x_seconds),t.xp6(1),t.Q6J("fxFlex.gt-sm",n.col(4)),t.xp6(1),t.Q6J("station_id",n.station.id)("station_name",n.station.station_name)("sync_status",n.station.sync_status)("type",n.station.type)("pump_status_every_x_seconds",n.station.pump_status_every_x_seconds)("fxFlex",n.col(2)),t.xp6(1),t.Q6J("fxLayoutGap",n.gap),t.xp6(2),t.Q6J("station_id",n.station.id)("station_name",n.station.station_name)("sync_status",n.station.sync_status)("type",n.station.type)("pump_status_every_x_seconds",n.station.pump_status_every_x_seconds),t.xp6(1),t.Q6J("fxLayoutGap",n.gap),t.xp6(1),t.Q6J("fxLayoutGap",n.gap)("fxFlex",n.col(2)),t.xp6(1),t.Q6J("station_id",n.station.id)("station_name",n.station.station_name)("sync_status",n.station.sync_status)("type",n.station.type)("pump_status_every_x_seconds",n.station.pump_status_every_x_seconds),t.xp6(1),t.Q6J("station_id",n.station.id)("station_name",n.station.station_name)("sync_status",n.station.sync_status)("type",n.station.type)("pump_status_every_x_seconds",n.station.pump_status_every_x_seconds)("fxFlex",n.col(2)))},directives:[d.i,_.xw,_.SQ,_.yH,J,Y,X,ot,At,M.lW,St.gM,O.Hw],styles:[".config-panel-toggle[_ngcontent-%COMP%]{position:fixed;bottom:140px;right:24px;z-index:100;background-color:#000}.config-panel-toggle-sync[_ngcontent-%COMP%]{position:fixed;bottom:240px;right:24px;z-index:100;background-color:#000}.config-panel-toggle-sync[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:35px;width:35px}"]}),a})()},52190:(E,S,i)=>{i.d(S,{w:()=>C});var y=i(40520),u=i(46227),t=i(27221),p=i(98545),x=i(5e3),f=i(33344);let C=(()=>{class d{constructor(s,r){this.http=s,this.tokenStorage=r}getHeaders(){var s=new y.WM,r=this.tokenStorage.getToken();return s.set("token",r||"{}")}getAll(s){var r=this.getHeaders();const m=(new y.LE).appendAll(s?{type:s}:{});return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS,{params:m,headers:r})}getAllWithoutCV(){let s=this.getHeaders();const r=(new y.LE).appendAll({withcv:0});return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS,{params:r,headers:s})}create(s){var r=this.getHeaders();return this.http.post(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS,s,{headers:r}).pipe((0,u.V)(1e4),(0,t.K)(m=>{throw"Error de conexi\xf3n. Detalles: "+m}))}update(s){var r=this.getHeaders();return this.http.put(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS+"/"+s.site_code,s,{headers:r}).pipe((0,u.V)(1e4),(0,t.K)(m=>{throw"Error de conexi\xf3n. Detalles: "+m}))}delete(s){var r=this.getHeaders();return this.http.delete(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATIONS+"/"+s.site_code,{headers:r})}getRemoteProducts(s){var r=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.REMOTE_PRODUCTS+"/"+s.site_code,{headers:r}).pipe((0,u.V)(1e4),(0,t.K)(m=>{throw"Error de conexi\xf3n. Detalles: "+m}))}getRemoteTanks(s){var r=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+"/remoteTanks/"+s.site_code,{headers:r}).pipe((0,u.V)(1e4),(0,t.K)(m=>{throw"Error de conexi\xf3n. Detalles: "+m}))}getMapOfProducts(s){var r=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.PRODUCTS_MAPS+"/"+s.site_code,{headers:r})}setMapOfProducts(s,r){var m=this.getHeaders();return this.http.post(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.PRODUCTS_MAPS+"/"+r,s,{headers:m})}setTanksT(s){var r=this.getHeaders();return console.log(typeof s),this.http.post(p._.settings.apiServer.API_URL_BASE+"/remoteTanks",s,{headers:r})}getDevicesStatus(s){var r=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.DEVICES_STATUS+"?site_code="+s,{headers:r})}getAllTanksStatus(){var s=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATUS_TANKS,{headers:s})}getTanksStatus(s){var r=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATUS_TANKS+"/"+s,{headers:r})}getPumpsStatus(s){var r=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.STATUS_PUMPS+"/"+s,{headers:r})}getPumps(s){var r=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.PUMPS+"/"+s,{headers:r})}syncSingle(s,r){var m=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.SYNC+"?site_code="+s+"&stub="+r,{headers:m}).pipe((0,u.V)(6e5),(0,t.K)(F=>{throw"Error de conexi\xf3n. Detalles: "+F}))}getMarimbas(){var s=this.getHeaders();return this.http.get(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.MARIMBAS,{headers:s})}updateIndexes(s){var r=this.getHeaders();return console.log(r),this.http.put(p._.settings.apiServer.API_URL_BASE+p._.settings.apiServer.INDEXES,s,{headers:r})}}return d.\u0275fac=function(s){return new(s||d)(x.LFG(y.eN),x.LFG(f.i))},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},2728:(E,S,i)=>{i.d(S,{v:()=>x});var y=i(40520),u=i(98545),t=i(5e3),p=i(33344);let x=(()=>{class f{constructor(d,_){this.http=d,this.tokenStorage=_}getHeaders(){var d=new y.WM,_=this.tokenStorage.getToken();return d.set("token",_||"{}")}getAll(d){var _=this.getHeaders();const s=(new y.LE).appendAll(d);return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.TRANSACTIONS,{params:s,headers:_})}getServerTimestamp(){var d=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.CURRENT_TIMESTAMP,{headers:d})}setCharged(d){var _=this.getHeaders();return this.http.patch(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.TRANSACTIONS,d,{headers:_})}getTinySummary(d){var _=this.getHeaders();const s=(new y.LE).appendAll(d);return this.http.get(u._.settings.apiServer.API_URL_BASE+"/transactions_tiny_summary",{params:s,headers:_})}}return f.\u0275fac=function(d){return new(d||f)(t.LFG(y.eN),t.LFG(p.i))},f.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);