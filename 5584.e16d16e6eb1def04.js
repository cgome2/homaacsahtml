"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[5584],{59968:(D,O,a)=>{a.d(O,{i:()=>i});var s=a(5e3);let i=(()=>{class C{constructor(){}}return C.\u0275fac=function(b){return new(b||C)},C.\u0275dir=s.lG2({type:C,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),C})()},15584:(D,O,a)=>{a.r(O),a.d(O,{ConsumosModule:()=>at});var s=a(69808),i=a(93075),C=a(61264),m=a(4940),b=a(7057),f=a(72467),E=a(3299),o=a(70655),d=a(48966),c=a(86087),h=a(84847),M=a(32075),U=a(96831),J=a(92198),L=a(88914),R=a(14499),q=a(96166),k=a(12983),W=a.n(k),e=a(5e3),Q=a(2223),z=a(33344),B=a(2728),S=a(74002),y=a(60198),u=a(57261),T=a(53580),A=a(30277),K=a(36551),G=a(47423),H=a(25245),re=a(19165),ae=a(94927),V=a(92181);function ie(r,p){if(1&r&&(e.TgZ(0,"th",23),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function se(r,p){if(1&r&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&r){const t=p.$implicit,n=e.oxw(2).$implicit,l=e.oxw();e.xp6(1),e.Oqu(l.getLabel(n.name,t[n.property]))}}function le(r,p){1&r&&e._UZ(0,"td",25)}function de(r,p){if(1&r&&(e.ynx(0,19),e.YNc(1,ie,2,1,"th",20),e.YNc(2,se,2,1,"td",21),e.YNc(3,le,1,0,"td",22),e.BQk()),2&r){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function ce(r,p){if(1&r&&(e.TgZ(0,"th",23),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.name)}}function pe(r,p){if(1&r&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&r){const t=p.$implicit,n=e.oxw(2).$implicit,l=e.oxw();e.xp6(1),e.Oqu(l.getLabel(n.name,t[n.property]))}}function me(r,p){1&r&&(e.TgZ(0,"td",25),e._uU(1,"Total"),e.qZA())}function ge(r,p){if(1&r&&(e.ynx(0,19),e.YNc(1,ce,2,1,"th",20),e.YNc(2,pe,2,1,"td",21),e.YNc(3,me,2,0,"td",22),e.BQk()),2&r){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function ue(r,p){if(1&r&&(e.TgZ(0,"th",23),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function he(r,p){if(1&r&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&r){const t=p.$implicit,n=e.oxw(2).$implicit,l=e.oxw();e.xp6(1),e.Oqu(l.getLabel(n.name,l.round(t[n.property])))}}function _e(r,p){if(1&r&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.getTotals(t.property))}}function fe(r,p){if(1&r&&(e.ynx(0,19),e.YNc(1,ue,2,1,"th",20),e.YNc(2,he,2,1,"td",26),e.YNc(3,_e,2,1,"td",27),e.BQk()),2&r){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function ve(r,p){if(1&r&&(e.ynx(0),e.YNc(1,de,4,1,"ng-container",18),e.YNc(2,ge,4,1,"ng-container",18),e.YNc(3,fe,4,1,"ng-container",18),e.BQk()),2&r){const t=p.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty&&!t.displayFn),e.xp6(1),e.Q6J("ngIf",t.isModelProperty&&t.displayFn&&"id"===t.property),e.xp6(1),e.Q6J("ngIf",t.isModelProperty&&t.displayFn&&"id"!==t.property)}}function Ce(r,p){1&r&&e._UZ(0,"th",30)}function Me(r,p){if(1&r&&(e.TgZ(0,"td",31),e.TgZ(1,"button",32),e.NdJ("click",function(n){return n.stopPropagation()}),e.TgZ(2,"mat-icon"),e._uU(3,"more_horiz"),e.qZA(),e.qZA(),e._UZ(4,"mat-menu",33,34),e.qZA()),2&r){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function Se(r,p){1&r&&e._UZ(0,"tr",35)}function xe(r,p){if(1&r){const t=e.EpF();e.TgZ(0,"tr",36),e.NdJ("click",function(){const _=e.CHM(t).$implicit;return e.oxw().alert(_)}),e.qZA()}}function Te(r,p){1&r&&e._UZ(0,"tr",37)}let $=(()=>{class r{constructor(t,n,l,_,g,x,v){this.data=t,this._excelerService=n,this._tokenStorageService=l,this._transactionsService=_,this._generalSettingsService=g,this._filesUploaderService=x,this.snackbar=v,this.generalLogoString="",this.subject$=new U.t(1),this.data$=this.subject$.asObservable(),this.bloqueable=!0,this.columns=[{name:"Id",property:"id",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Id transacci\xf3n",property:"transaction_id",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Id estaci\xf3n",property:"site_code",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Estaci\xf3n",property:"station_name",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Id flota",property:"fleet_id",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Flota",property:"fleet",visible:!0,isModelProperty:!0,displayFn:!1},{name:"\xc1rea",property:"area_path",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Centro de cobro",property:"ccobro",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Modelo",property:"model",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Clase",property:"class",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Id veh\xedculo",property:"mean_id",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Veh\xedculo",property:"mean_name",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Fecha",property:"date",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Hora",property:"time",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Litros",property:"quantity",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Total",property:"total_price",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Producto",property:"product_name",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Od\xf3metro",property:"odometer",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Hor\xf3metro",property:"engine_hours",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Tanque",property:"tank_name",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Inicio de transacci\xf3n",property:"start_flow",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Fin de transacci\xf3n",property:"end_flow",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Bomba",property:"pump",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Manguera",property:"nozzle",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Precio unitario",property:"ppv",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Timestamp",property:"timestamp",visible:!0,isModelProperty:!0,displayFn:!1},{name:"Temperatura",property:"temperature",visible:!1,isModelProperty:!0,displayFn:!1},{name:"SG",property:"transaction_sg",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Volumen por compensaci\xf3n de temperatura",property:"transaction_vtc",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Es de ingreso",property:"is_refill_transaction",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Cobrado",property:"charged",visible:!1,isModelProperty:!0,displayFn:!1},{name:"Id ERP",property:"cust_id",visible:!1,isModelProperty:!0,displayFn:!1}],this.pageSize=200}getLabel(t,n){if(null!=t)return"Cobrada"==t?1==n?"Cobrada":"No cobrada":n}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){this.dataSource=new M.by(this.data.report.details),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnInit(){this.pageSize=this.data.filter.page_size,this._generalSettingsService.getAll().subscribe(t=>{this.generalSettings=t,console.log(t),this._filesUploaderService.getFileBase64(t.logo_filename).subscribe(n=>{this.generalLogoString=n.file},n=>{console.log(n)})},t=>{console.log(t)}),this.dataSource=new M.by,this._transactionsService.getServerTimestamp().subscribe(t=>{this.datetime=t.message}),this.getData(),this.data$.pipe((0,J.h)(t=>!!t)).subscribe(t=>{this.dataSource.data=t})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onFilterChange(t){!this.dataSource||(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}getTotals(t){return(Math.round(100*this.data.report.details.map(n=>n[t]).reduce((n,l)=>n+l,0))/100).toFixed(2)}round(t){return(Math.round(100*t)/100).toFixed(2)}pdfMe(){var t=[],n=[],l=[],_=[];this.columns.forEach(N=>{N.visible&&(n.push({title:N.name,dataKey:N.property}),l.push(N.property),_.push(N.name))});var g=0,x={quantity:0,total_price:0};this.dataSource.filteredData.forEach(N=>{t[g]={},l.forEach(I=>{x[I]="id"==I?"Totales":"quantity"==I||"total_price"==I?this.round(+x[I]+N[I]):"",t[g][I]=N[I]}),g++}),t[g]=x;var v=new q.jsPDF({orientation:"landscape",unit:"mm",format:"letter"});v.setFillColor("#152235"),v.roundedRect(14,15,251,30,2,2,"DF"),v.setFontSize(11),v.setTextColor("white"),v.text(this.data.filter.report_title,20,38),v.setFontSize(9),v.text("Desde: "+this.data.filter.from_date+" hasta: "+this.data.filter.to_date,20,43),console.log(this.generalLogoString),v.addImage("./../../../../../assets/img/maacsa.png","PNG",20,20,62,10.3),""!==this.generalLogoString&&v.addImage(this.generalLogoString,"PNG",221.1,20,38.9,13.22),v.setFontSize(7),v.text("Generado por "+this._tokenStorageService.getUser().user+"("+this._tokenStorageService.getUser().name+") "+this.datetime,190,43),W()(v,{body:t,columns:n,startY:50,headStyles:{fontStyle:"bold",fillColor:"#152235",halign:"center"},willDrawCell:function(N){var I=N.doc,oe=N.table.body;1===oe.length||N.row.index===oe.length-1&&(I.setFillColor("#152235"),I.setTextColor("white"),I.setFont(I.getFont().fontName,"bold"))}});let Z=v.lastAutoTable.finalY;Z+=10,v.output("dataurlnewwindow")}orderDataset(t,n){var l=[],_=[],g=[],x=[];n.forEach(P=>{l.push({title:P,dataKey:P}),_.push(P),g.push(P)});var v=0;return t.forEach(P=>{x[v]={},_.forEach(Z=>{x[v][Z]=P[Z]}),v++}),x}excelMe(){return(0,o.mG)(this,void 0,void 0,function*(){var t=0,n={},l=[];n.quantity=0,n.total_price=0,this.data.report.details.forEach(v=>{l[t]={},this.data.report.hdetails.forEach(P=>{n[P]="id"==P?"Totales":"quantity"==P||"total_price"==P?this.round(+n[P]+v[P]):"",l[t][P]=v[P]}),t++}),l[t]=n;var _=this.orderDataset(l,this.data.report.hdetails),g=[];this.data.report.hdetails.forEach(function(v,P){"transaction_id"==v?(this[P]="Id transacci\xf3n",g.push({width:20,style:{numFmt:""},font:{name:"Verdana",size:10,bold:!1,color:{argb:"000000"}}})):"TIMESTAMP"==v?(this[P]="Fecha y hora",g.push({width:20,style:{numFmt:""},font:{name:"Verdana",size:10,bold:!1,color:{argb:"000000"}}})):"quantity"==v?(this[P]="Cantidad",g.push({width:20,style:{numFmt:"#,##0.00;[Red]-#,##0.00"},font:{name:"Verdana",size:10,bold:!1,color:{argb:"000000"}}})):"total_price"==v?(this[P]="Costo",g.push({width:20,style:{numFmt:"$#,##0.00;[Red]-$#,##0.00"},font:{name:"Verdana",size:10,bold:!1,color:{argb:"000000"}}})):g.push({width:20,style:{numFmt:"#,##0.00;[Red]-#,##0.00"},font:{name:"Verdana",size:10,bold:!1,color:{argb:"000000"}}})},this.data.report.hdetails),this._excelerService.excelIt([{worksheet:"detalle",datas:[{title:{vector:["Reporte de movimientos"],font:{name:"Verdana",size:14,bold:!0,color:{argb:"000000"}},border:{top:{style:"double",color:{argb:"000000"}},left:{style:"double",color:{argb:"000000"}},bottom:{style:"double",color:{argb:"000000"}},right:{style:"double",color:{argb:"000000"}}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"ffffff"}}},header:{filter:!1,vector:this.data.report.hdetails,font:{name:"Verdana",size:10,bold:!0,color:{argb:"000000"}},border:{top:{style:"double",color:{argb:"000000"}},left:{style:"double",color:{argb:"000000"}},bottom:{style:"double",color:{argb:"000000"}},right:{style:"double",color:{argb:"000000"}}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"e6e5e5"}}},body:{matrix:_,fill:{odd_rows:{type:"pattern",pattern:"solid",fgColor:{argb:"ffffff"}},even_rows:{type:"pattern",pattern:"solid",fgColor:{argb:"ffffff"}}},font:{name:"Verdana",size:10,bold:!1,color:{argb:"000000"}},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}}},columns_types:g}}]}],"consumos_"+this.data.filter.from_date+"_"+this.data.filter.to_date)})}markMe(){var t={},n=[];this.dataSource.filteredData.forEach(l=>{n.push(l.transaction_id)}),t.transactions=n,this._transactionsService.setCharged(t).subscribe(l=>{this.snackbar.open(l.message,null,{duration:5e3,panelClass:["green-snackbar"]})},l=>{this.snackbar.open(l.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}ngOnDestroy(){}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.WI),e.Y36(Q.N),e.Y36(z.i),e.Y36(B.v),e.Y36(S.b),e.Y36(y.a),e.Y36(u.ux))},r.\u0275cmp=e.Xpm({type:r,selectors:[["consumos-modal-table"]],viewQuery:function(t,n){if(1&t&&(e.Gf(c.NW,7),e.Gf(h.YE,7)),2&t){let l;e.iGM(l=e.CRH())&&(n.paginator=l.first),e.iGM(l=e.CRH())&&(n.sort=l.first)}},inputs:{columns:"columns"},decls:26,vars:11,consts:[["fxLayout","row","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end",1,"buttons-set"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["svgIcon","excel"],["svgIcon","pdf"],[2,"font-size","40px"],[1,"page-modal"],["name","Consumos",3,"columns","filterChange"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-footer-cell",""],["class","numerical","mat-cell","",4,"matCellDef"],["class","numerical","mat-footer-cell","",4,"matFooterCellDef"],["mat-cell","",1,"numerical"],["mat-footer-cell","",1,"numerical"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"],["mat-footer-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"fury-page-layout-header"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"fury-title"),e._uU(4),e.qZA(),e.TgZ(5,"fury-title"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",2),e.TgZ(8,"button",3),e.NdJ("click",function(){return n.excelMe()}),e._UZ(9,"mat-icon",4),e.qZA(),e.TgZ(10,"button",3),e.NdJ("click",function(){return n.pdfMe()}),e._UZ(11,"mat-icon",5),e.qZA(),e.TgZ(12,"button",3),e.NdJ("click",function(){return n.markMe()}),e.TgZ(13,"mat-icon",6),e._uU(14,"attach_money"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"fury-page-layout-content",7),e.TgZ(16,"fury-list",8),e.NdJ("filterChange",function(_){return n.onFilterChange(_)}),e.TgZ(17,"table",9),e.YNc(18,ve,4,3,"ng-container",10),e.ynx(19,11),e.YNc(20,Ce,1,0,"th",12),e.YNc(21,Me,6,1,"td",13),e.BQk(),e.YNc(22,Se,1,0,"tr",14),e.YNc(23,xe,1,0,"tr",15),e.YNc(24,Te,1,0,"tr",16),e.qZA(),e._UZ(25,"mat-paginator",17),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.data.filter.report_title),e.xp6(2),e.AsE("Periodo de ",n.data.filter.from_date," a ",n.data.filter.to_date,""),e.xp6(9),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",n.columns),e.xp6(1),e.Q6J("dataSource",n.dataSource),e.xp6(1),e.Q6J("ngForOf",n.columns),e.xp6(4),e.Q6J("matHeaderRowDef",n.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.visibleColumns),e.xp6(1),e.Q6J("matFooterRowDef",n.visibleColumns),e.xp6(1),e.Q6J("pageSize",n.pageSize))},directives:[T.U,A.xw,A.SQ,K.M,A.Wh,G.lW,H.Hw,re.d,ae.n,M.BZ,h.YE,s.sg,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ke,c.NW,s.O5,M.mD,M.ge,h.nU,M.ev,M.yh,V.p6,V.VK,M.XQ,M.Gk,M.Q2],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}.title[_ngcontent-%COMP%]{color:#000}.page-modal[_ngcontent-%COMP%]{overflow:scroll;max-height:600px;margin:24px;padding:2px;box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f}.page-modal[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.page-modal[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.page-modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.page-modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px}.page-modal[_ngcontent-%COMP%]   .information-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:100%}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]{border-radius:10px;padding:10px;border:solid gray;border-top-width:thin;border-right-width:thin;border-bottom-width:thin;border-left-width:thin;width:410px}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;width:245px}.page-modal[_ngcontent-%COMP%]   .validation-block[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:0;width:245px}.page-modal[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.page-modal[_ngcontent-%COMP%]   .indented-right[_ngcontent-%COMP%]{margin-left:40px}.page-modal[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}.numerical[_ngcontent-%COMP%]{text-align:end}.fury-title[_ngcontent-%COMP%]{color:#f5f5f5}.buttons-set[_ngcontent-%COMP%]{margin-left:60px}.buttons-set[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{text-align:center;width:70px;height:70px}.buttons-set[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:40px;height:40px}"],data:{animation:[L.M,R.X]}}),r})();var Pe=a(20449),Ae=a(28258),F=a(90149),ye=a(591),be=a(37425),j=a(58527),Ee=a(59968),Oe=a(77446);const Ze=["cancelbtn"];function Ie(r,p){if(1&r){const t=e.EpF();e.TgZ(0,"mat-tree-node",10),e._UZ(1,"button",11),e.TgZ(2,"mat-checkbox",12),e.NdJ("change",function(){const _=e.CHM(t).$implicit;return e.oxw().todoLeafItemSelectionToggle(_)}),e._uU(3),e.qZA(),e.qZA()}if(2&r){const t=p.$implicit,n=e.oxw();e.xp6(2),e.Q6J("checked",n.checklistSelection.isSelected(t)),e.xp6(1),e.Oqu(t.name)}}function Ne(r,p){if(1&r){const t=e.EpF();e.TgZ(0,"mat-tree-node",13),e.TgZ(1,"button",14),e.TgZ(2,"mat-icon",15),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"mat-checkbox",16),e.NdJ("change",function(){const _=e.CHM(t).$implicit;return e.oxw().todoItemSelectionToggle(_)}),e._uU(5),e.qZA(),e.qZA()}if(2&r){const t=p.$implicit,n=e.oxw();e.xp6(1),e.uIk("aria-label","Toggle "+t.item),e.xp6(2),e.Oqu(n.treeControl.isExpanded(t)?"expand_more":"chevron_right"),e.xp6(1),e.Q6J("checked",n.descendantsAllSelected(t))("indeterminate",n.descendantsPartiallySelected(t)),e.xp6(1),e.Oqu(t.name)}}class De{}let X=(()=>{class r{constructor(){this.dataChange=new ye.X([]),this.initialize()}get data(){return this.dataChange.value}initialize(){this.dataChange.next([])}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})(),Fe=(()=>{class r{constructor(t,n,l,_){this.dialog=t,this._database=n,this._areasService=l,this.data=_,this.title="\xc1reas y centros de cobro",this.areas_filter=[],this.ccs=[],this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.checklistSelection=new Pe.Ov(!0),this.getLevel=g=>g.level,this.getId=g=>g.id,this.isExpandable=g=>g.expandable,this.getChildren=g=>g.children,this.hasChild=(g,x)=>x.expandable,this.hasNoContent=(g,x)=>""===x.name,this.transformer=(g,x)=>{var v;const P=this.nestedNodeMap.get(g),Z=P&&P.name===g.name?P:new De;return Z.id=g.id,Z.name=g.name,Z.level=x,Z.is_cc=g.is_cc,Z.fleet_id=g.fleet_id,Z.expandable=!!(null===(v=g.children)||void 0===v?void 0:v.length),this.flatNodeMap.set(Z,g),this.nestedNodeMap.set(g,Z),Z},this.treeFlattener=new F.JZ(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new Ae.C2(this.getLevel,this.isExpandable),this.dataSource=new F.kc(this.treeControl,this.treeFlattener),this._database.dataChange.subscribe(g=>{this.dataSource.data=g}),this.dialog.disableClose=!0}ngOnInit(){console.log(this.data),this._areasService.getAll(this.data).subscribe(t=>{this.dataSource.data=t,this.data.areas.length>0&&this.treeControl.dataNodes.forEach(n=>{void 0!==this.data.areas.find(l=>l===n.id)&&this.checklistSelection.select(n)})})}ngAfterViewInit(){this.cancelButton.nativeElement.focus()}descendantsAllSelected(t){const n=this.treeControl.getDescendants(t);return n.length>0&&n.every(_=>this.checklistSelection.isSelected(_))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(_=>this.checklistSelection.isSelected(_))&&!this.descendantsAllSelected(t)}todoItemSelectionToggle(t){this.checklistSelection.toggle(t);const n=this.treeControl.getDescendants(t);this.checklistSelection.isSelected(t)?this.checklistSelection.select(...n):this.checklistSelection.deselect(...n),n.forEach(l=>this.checklistSelection.isSelected(l)),this.checkAllParentsSelection(t)}todoLeafItemSelectionToggle(t){this.checklistSelection.toggle(t),this.checkAllParentsSelection(t)}checkAllParentsSelection(t){let n=this.getParentNode(t);for(;n;)this.checkRootNodeSelection(n),n=this.getParentNode(n)}checkRootNodeSelection(t){const n=this.checklistSelection.isSelected(t),l=this.treeControl.getDescendants(t),_=l.length>0&&l.every(g=>this.checklistSelection.isSelected(g));n&&!_?this.checklistSelection.deselect(t):!n&&_&&this.checklistSelection.select(t)}getParentNode(t){const n=this.getLevel(t);if(n<1)return null;for(let _=this.treeControl.dataNodes.indexOf(t)-1;_>=0;_--){const g=this.treeControl.dataNodes[_];if(this.getLevel(g)<n)return g}return null}getAllParents(t){let n=t,l=[];for(;this.getParentNode(n);)n=this.getParentNode(n),void 0!==n&&l.push(n);return l}apply(){this.dialog.close(this.checklistSelection.selected)}close(){this.dialog.close([])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.so),e.Y36(X),e.Y36(j.E),e.Y36(d.WI))},r.\u0275cmp=e.Xpm({type:r,selectors:[["tree-dialog"]],contentQueries:function(t,n,l){if(1&t&&e.Suo(l,Ze,7),2&t){let _;e.iGM(_=e.CRH())&&(n.cancelButton=_.first)}},features:[e._Bn([X])],decls:15,vars:5,consts:[[1,"small_modal"],[1,"title"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"],["cancelbtn",""],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"]],template:function(t,n){1&t&&(e.TgZ(0,"fury-page",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._uU(3,"Areas y centros de cobro **"),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e.TgZ(6,"mat-tree",4),e.YNc(7,Ie,4,2,"mat-tree-node",5),e.YNc(8,Ne,6,5,"mat-tree-node",6),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"button",8,9),e.NdJ("click",function(){return n.close()}),e._uU(12,"CANCELAR"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.apply()}),e._uU(14,"APLICAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@fadeInRight",void 0),e.xp6(3),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("dataSource",n.dataSource)("treeControl",n.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",n.hasChild))},directives:[Ee.i,A.xw,A.Wh,F.gi,F.fQ,A.SQ,G.lW,F.uo,F.eu,F.ah,Oe.oG,H.Hw],styles:[".fury-card-header-heading[_ngcontent-%COMP%]{font-weight:700!important}.mat-dialog-title[_ngcontent-%COMP%]{font-size:x-large}.small_modal[_ngcontent-%COMP%]{width:500px;padding:5px;border-radius:8px}.card[_ngcontent-%COMP%]{overflow:scroll;margin:5px;width:490px;height:300px;border-radius:8px;padding:8px}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:14px;padding:24px 8px 0}.example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:40px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:20px}.mat-tree[_ngcontent-%COMP%]{border-style:solid;border-width:thin;border-color:#dededecc;border-radius:8px}.mat-tree[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]{min-height:15px!important}.title[_ngcontent-%COMP%]{font-size:large;font-weight:700;background-color:#1e2739;color:#f5f5f5;height:50px;border-radius:8px;padding:10px}"],data:{animation:[R.X,L.M,be.K]}}),r})();var Ue=a(82593),Le=a(15702),Re=a(17846),we=a(9360),Be=a(52190),Ge=a(39762),He=a(38932),Y=a(67322),ee=a(77531),Je=a(74107),w=a(70024),te=a(86856),ne=a(59429),ke=a(90508);const Qe=["dateFrom"];function Ye(r,p){if(1&r&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&r){const t=p.$implicit;e.Q6J("value",t.site_code),e.xp6(1),e.hij(" ",t.station_name,"")}}function qe(r,p){if(1&r&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&r){const t=p.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function We(r,p){if(1&r&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&r){const t=p.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.NAME)}}function ze(r,p){if(1&r&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&r){const t=p.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.NAME)}}function Ke(r,p){if(1&r&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&r){const t=p.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.NAME)}}function Ve(r,p){if(1&r){const t=e.EpF();e.TgZ(0,"form",5),e.TgZ(1,"div",6),e.TgZ(2,"div",7),e.TgZ(3,"mat-form-field",8),e.TgZ(4,"mat-label"),e._uU(5,"T\xedtulo de reporte:"),e.qZA(),e._UZ(6,"input",9),e.qZA(),e.TgZ(7,"mat-form-field",8),e.TgZ(8,"mat-label"),e._uU(9,"Registros por p\xe1gina:"),e.qZA(),e._UZ(10,"input",10),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"mat-form-field",8),e.TgZ(13,"mat-label"),e._uU(14,"Estaci\xf3n:"),e.qZA(),e.TgZ(15,"mat-select",11),e.NdJ("closed",function(){return e.CHM(t),e.oxw().onChangeStation()}),e.YNc(16,Ye,2,2,"mat-option",12),e.qZA(),e.qZA(),e.TgZ(17,"mat-form-field",8),e.TgZ(18,"mat-label"),e._uU(19,"Producto:"),e.qZA(),e.TgZ(20,"mat-select",13),e.NdJ("focus",function(){return e.CHM(t),e.oxw().onFocusProducts()}),e.YNc(21,qe,2,2,"mat-option",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",7),e.TgZ(23,"mat-form-field",8),e.TgZ(24,"mat-label"),e._uU(25,"Desde fecha:"),e.qZA(),e._UZ(26,"input",14),e.TgZ(27,"mat-datepicker-toggle",15),e.TgZ(28,"mat-icon",16),e._uU(29,"date_range"),e.qZA(),e.qZA(),e._UZ(30,"ngx-mat-datetime-picker",null,17),e.qZA(),e.TgZ(32,"mat-form-field",8),e.TgZ(33,"mat-label"),e._uU(34,"Hasta fecha:"),e.qZA(),e._UZ(35,"input",18),e.TgZ(36,"mat-datepicker-toggle",15),e.TgZ(37,"mat-icon",16),e._uU(38,"date_range"),e.qZA(),e.qZA(),e._UZ(39,"ngx-mat-datetime-picker",null,19),e.qZA(),e.qZA(),e.TgZ(41,"div",7),e.TgZ(42,"mat-form-field",20),e.TgZ(43,"mat-label"),e._uU(44,"Flota:"),e.qZA(),e.TgZ(45,"mat-select",21),e.NdJ("closed",function(){return e.CHM(t),e.oxw().onChangeFleet()}),e.YNc(46,We,2,2,"mat-option",12),e.qZA(),e.qZA(),e.TgZ(47,"mat-form-field",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectAreas()}),e.TgZ(48,"mat-label"),e._uU(49,"Areas y centros de cobro:"),e.qZA(),e._UZ(50,"input",23),e.TgZ(51,"mat-icon",24),e._uU(52,"unfold_more"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",7),e.TgZ(54,"mat-form-field",8),e.TgZ(55,"mat-label"),e._uU(56,"Modelos:"),e.qZA(),e.TgZ(57,"mat-select",25),e.NdJ("focus",function(){return e.CHM(t),e.oxw().onFocusModels()})("selectionChange",function(l){return e.CHM(t),e.oxw().onChangeModel(l)}),e.YNc(58,ze,2,2,"mat-option",12),e.qZA(),e.qZA(),e.TgZ(59,"mat-form-field",8),e.TgZ(60,"mat-label"),e._uU(61,"Veh\xedculo:"),e.qZA(),e.TgZ(62,"mat-select",26),e.YNc(63,Ke,2,2,"mat-option",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(64,"div",7),e.TgZ(65,"div",27),e.TgZ(66,"ngx-slider",28),e.NdJ("valueChange",function(l){return e.CHM(t),e.oxw().valueTemp=l})("highValueChange",function(l){return e.CHM(t),e.oxw().highValueTemp=l}),e.qZA(),e.TgZ(67,"label",29),e._uU(68,"Rango de temperatura del tanque:"),e.qZA(),e.qZA(),e.TgZ(69,"mat-form-field",30),e.TgZ(70,"mat-label"),e._uU(71,"M\xednimo de litros:"),e.qZA(),e._UZ(72,"input",31),e.qZA(),e.TgZ(73,"mat-form-field",30),e.TgZ(74,"mat-label"),e._uU(75,"M\xe1ximo de litros:"),e.qZA(),e._UZ(76,"input",32),e.qZA(),e.qZA(),e.TgZ(77,"div",7),e.TgZ(78,"mat-form-field",8),e.TgZ(79,"mat-label"),e._uU(80,"Desde la transacci\xf3n:"),e.qZA(),e._UZ(81,"input",33),e.qZA(),e.TgZ(82,"mat-form-field",8),e.TgZ(83,"mat-label"),e._uU(84,"Hasta la transacci\xf3n:"),e.qZA(),e._UZ(85,"input",34),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",35),e.TgZ(87,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._uU(88,"CONSULTAR"),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=e.MAs(31),n=e.MAs(40),l=e.oxw();e.Q6J("formGroup",l.filterFormGroup),e.xp6(16),e.Q6J("ngForOf",l.stations),e.xp6(5),e.Q6J("ngForOf",l.products),e.xp6(5),e.Q6J("ngxMatDatetimePicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(8),e.Q6J("ngxMatDatetimePicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(10),e.Q6J("ngForOf",l.fleets),e.xp6(12),e.Q6J("ngForOf",l.models),e.xp6(5),e.Q6J("ngForOf",l.means),e.xp6(3),e.Q6J("value",l.valueTemp)("highValue",l.highValueTemp)("options",l.optionsTemp),e.xp6(21),e.Q6J("disabled",l.filterFormGroup.invalid)}}const $e=function(){return["Tables"]},je=[{path:"",component:(()=>{class r{constructor(t,n,l,_,g,x,v,P,Z){this.dialog=t,this.treeDialog=n,this._areasService=l,this._fleetsService=_,this._meansService=g,this._modelsService=x,this._productsService=v,this._stationsService=P,this._transactionsService=Z,this.areas=[],this.areasfilter=[],this.areasnamesfilter=[],this.currentArea={name:"Seleccione \xe1rea",id:"",children:[]},this.centrosCosto=[],this.centrosCostofilter=[],this.centrosCostonamesfilter=[],this.currentCentroCosto={name:"Selecccione centro de costo",id:"",children:[]},this.fleets=[],this.highValueTemp=60,this.means=[],this.models=[],this.modelsfilter=[],this.products=[],this.stations=[],this.report={details:[],hdetails:[]},this.valueTemp=15,this.filter={areas:"",centros_costo:"",fleets:"",models:"",means:"",products:"",stations:"",from_temperature:"",to_temperature:"",from_date:"",to_date:"",from_transaction:"",to_transaction:"",from_quantity:"",to_quantity:""},this.optionsTemp={floor:0,ceil:40,ticksArray:[0,5,10,15,20,25,30,35,40],translate:N=>N+" \u2103"},this.filterFormGroup=new i.cw({page_size:new i.NI(100,[i.kI.required]),report_title:new i.NI("Reporte de consumos"),stations:new i.NI([]),from_date:new i.NI(null,[i.kI.required]),to_date:new i.NI(null,[i.kI.required]),products:new i.NI([]),from_transaction:new i.NI(""),to_transaction:new i.NI(""),from_quantity:new i.NI(""),to_quantity:new i.NI(""),temperature_range:new i.NI,fleets:new i.NI([]),areas:new i.NI(""),centrosCosto:new i.NI([]),models:new i.NI([]),means:new i.NI([])})}fillFilterAreas(t){return t.map(n=>{this.areasfilter.push(n.value),this.areasnamesfilter.push(n.name),n.children.length>0&&this.fillFilterAreas(n.children)})}fillFilterCentrosCosto(t){return t.map(n=>{this.centrosCostofilter.push(n.value),this.centrosCostonamesfilter.push(n.name),n.children.length>0&&this.fillFilterCentrosCosto(n.children)})}ngOnInit(){return(0,o.mG)(this,void 0,void 0,function*(){this.fleets=yield this.getFleets(),this.models=yield this.getModels(),this.means=yield this.getMeans(),this.products=yield this.getProducts(),this.stations=yield this.getStations()})}submit(){return(0,o.mG)(this,void 0,void 0,function*(){var t=[];this.filterFormGroup.controls.models.value.forEach(x=>{t.push(this.models.find(v=>v.id===x).NAME)});var n=[];this.filterFormGroup.controls.fleets.value.forEach(x=>{n.push(this.fleets.find(v=>v.id===x).NAME)});var l=[];this.filterFormGroup.controls.means.value.forEach(x=>{l.push(this.means.find(v=>v.id===x).NAME)});var _=[];this.filterFormGroup.controls.products.value.forEach(x=>{_.push(this.products.find(v=>v.id===x).name)}),this.filter={},this.filter={areas:this.areasfilter.toString(),areas_names:this.areasnamesfilter,centros_costo:this.centrosCostofilter.toString(),centros_costo_names:this.centrosCostonamesfilter,fleets:this.filterFormGroup.controls.fleets.value.toString(),fleets_names:n.toString(),models:this.filterFormGroup.controls.models.value.toString(),models_names:t.toString(),means:this.filterFormGroup.controls.means.value.toString(),means_names:l.toString(),products:this.filterFormGroup.controls.products.value.toString(),products_names:_.toString(),stations:this.filterFormGroup.controls.stations.value.toString(),from_temperature:this.filterFormGroup.controls.temperature_range.value[0],to_temperature:this.filterFormGroup.controls.temperature_range.value[1],from_date:this.getMysqlDatetime(this.filterFormGroup.controls.from_date.value),to_date:this.getMysqlDatetime(this.filterFormGroup.controls.to_date.value),from_transaction:this.filterFormGroup.controls.from_transaction.value,to_transaction:this.filterFormGroup.controls.to_transaction.value,from_quantity:this.filterFormGroup.controls.from_quantity.value,to_quantity:this.filterFormGroup.controls.to_quantity.value},console.log("El filter definitivo que se envia a getTransactions",this.filter),this.report=yield this.getReport(),console.log(this.report);var g={filter:{report_title:this.filterFormGroup.controls.report_title.value,page_size:this.filterFormGroup.controls.page_size.value,from_date:this.getMysqlDatetime(this.filterFormGroup.controls.from_date.value),to_date:this.getMysqlDatetime(this.filterFormGroup.controls.to_date.value),fleets_names:this.filter.fleets_names,areas_names:this.filter.areas_names,centros_costo_names:this.filter.centros_costo_names,models_names:this.filter.models_names,means_names:this.filter.means_names,products_names:this.filter.products_names},report:this.report};this.dialog.open($,{data:g}).afterClosed().subscribe(x=>{x&&console.log("Cerrada la tabla reporte"+x)})})}getFleets(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._fleetsService.getAll().toPromise()})}getModels(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._modelsService.getAllModelsByAreas(this.filter).toPromise()})}getMeans(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._meansService.getFiltered(this.filter).toPromise()})}getReport(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._transactionsService.getAll(this.filter).toPromise()})}getStations(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getAll().toPromise()})}getProducts(){return(0,o.mG)(this,void 0,void 0,function*(){return yield this._productsService.getAll(this.filter).toPromise()})}onChangeFleet(){return(0,o.mG)(this,void 0,void 0,function*(){this.filter.fleets=this.filterFormGroup.controls.fleets.value.toString(),this.areasfilter=[],this.filter.areas="",this.filter.centros_costo="",this.filter.models="",this.filter.means="",this.filterFormGroup.controls.areas.setValue(""),this.filterFormGroup.controls.models.setValue([]),this.filterFormGroup.controls.means.setValue([]),this.models=[],this.means=[],this.models=yield this.getModels(),this.means=yield this.getMeans(),console.log(this.filter)})}onChangeStation(){return(0,o.mG)(this,void 0,void 0,function*(){this.filter.stations=this.filterFormGroup.controls.stations.value.toString(),this.filter.products="",this.products=[],this.products=yield this.getProducts()})}onChangeModel(){return(0,o.mG)(this,void 0,void 0,function*(){this.filter.models=this.filterFormGroup.controls.models.value.toString(),this.filterFormGroup.controls.means.setValue([]),this.means=[],this.means=yield this.getMeans()})}getMysqlDatetime(t){return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":00"}onFocusMeans(){return(0,o.mG)(this,void 0,void 0,function*(){})}onFocusModels(){return(0,o.mG)(this,void 0,void 0,function*(){})}onFocusProducts(){return(0,o.mG)(this,void 0,void 0,function*(){this.products=[],this.products=yield this.getProducts()})}selectAreas(){this.treeDialog.open(Fe,{data:{areas:this.areasfilter,fleets:this.filter.fleets}}).afterClosed().subscribe(t=>{this.areasfilter=[],this.areasnamesfilter=[],this.centrosCostofilter=[],this.centrosCostonamesfilter=[];var n=this;t.forEach(function(l){1==l.is_cc&&(n.centrosCostofilter.push(l.id),n.centrosCostonamesfilter.push(l.name)),n.areasfilter.push(l.id),n.areasnamesfilter.push(l.name)}),this.areasfilter=n.areasfilter,this.areasnamesfilter=n.areasnamesfilter,this.centrosCostofilter=n.centrosCostofilter,this.centrosCostonamesfilter=n.centrosCostonamesfilter,this.filterFormGroup.controls.areas.setValue(this.areasnamesfilter.toString()),this.filterFormGroup.controls.models.setValue([]),this.filterFormGroup.controls.means.setValue([]),this.filter.areas=this.areasfilter.toString(),this.filter.centros_costo=this.centrosCostofilter.toString(),this.filter.models="",this.filter.means="",this.models=[],this.means=[],this._modelsService.getAllModelsByAreas(this.filter).subscribe(l=>{this.models=l,this.filterFormGroup.controls.models.setValue([]),this._meansService.getFiltered(this.filter).subscribe(_=>{this.means=_,this.filterFormGroup.controls.means.setValue([])})})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.uw),e.Y36(d.uw),e.Y36(j.E),e.Y36(Ue.V),e.Y36(Le._),e.Y36(Re.c),e.Y36(we.s),e.Y36(Be.w),e.Y36(B.v))},r.\u0275cmp=e.Xpm({type:r,selectors:[["fury-consumos"]],viewQuery:function(t,n){if(1&t&&e.Gf(Qe,5),2&t){let l;e.iGM(l=e.CRH())&&(n.dateFrom=l.first)}},decls:7,vars:5,consts:[["mode","card"],["current","Reporte de consumos",3,"crumbs"],[1,"card"],[1,"heading"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["fxLayout","column",1,"content"],["fxLayout","row","fxLayoutGap","8px",1,"content"],["appearance","outline","fxFlex","auto"],["formControlName","report_title","required","","matInput",""],["type","number","formControlName","page_size","required","","matInput",""],["formControlName","stations","multiple","",3,"closed"],[3,"value",4,"ngFor","ngForOf"],["formControlName","products","multiple","",3,"focus"],["matInput","","formControlName","from_date",3,"ngxMatDatetimePicker"],["matPrefix","",3,"for"],["matDatepickerToggleIcon",""],["fromDate",""],["matInput","","formControlName","to_date",3,"ngxMatDatetimePicker"],["toDate",""],["appearance","outline","fxFlex","auto",2,"width","50%"],["formControlName","fleets","multiple","",3,"closed"],["appearance","outline","fxFlex","auto",2,"cursor","pointer","width","50%",3,"click"],["formControlName","areas","matInput","","readonly",""],["matPrefix","",2,"display","contents"],["formControlName","models","multiple","",3,"focus","selectionChange"],["formControlName","means","multiple",""],[1,"custom-slider","div-temperature"],["matInput","","formControlName","temperature_range",3,"value","highValue","options","valueChange","highValueChange"],[1,"label-temperature"],["appearance","outline","fxFlex","auto",1,"field"],["formControlName","from_quantity","type","number","matInput",""],["formControlName","to_quantity","type","number","matInput",""],["formControlName","from_transaction","type","number","matInput",""],["formControlName","to_transaction","type","number","matInput",""],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","",3,"disabled","click"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-header"),e._UZ(2,"fury-breadcrumbs",1),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._uU(5,"Configurar reporte:"),e.qZA(),e.YNc(6,Ve,89,14,"form",4),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@fadeInRight",void 0)("crumbs",e.DdM(4,$e)),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(3),e.Q6J("ngIf",n.filterFormGroup))},directives:[Ge.N,T.U,He.n,s.O5,i._Y,i.JL,i.sg,A.xw,A.SQ,Y.KE,A.yH,Y.hX,i.Fj,ee.Nt,i.JJ,i.u,i.Q7,i.wV,Je.gD,s.sg,w.g2,te.nW,Y.qo,H.Hw,te.Q0,w.AB,ne.w5,A.Wh,G.lW,ke.ey],styles:[".title[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:scroll;padding:20px;box-shadow:0 6px 6px -3px #0003,0 10px 14px 1px #00000024,0 4px 18px 3px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:3px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px;width:50%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{max-width:33%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.div-area[_ngcontent-%COMP%]{display:inline-grid;margin-right:0;min-width:33%;max-width:33%}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}  .custom-slider{text-align:center;border-width:thin;border-style:solid;border-radius:5px;border-color:#e0e0e0;color:#5b5b5b;max-width:33%;min-width:33%}  .custom-slider .ngx-slider{width:95%}  .custom-slider .ngx-slider .ngx-slider-bar{background:#006acb;height:2px}  .custom-slider .ngx-slider .ngx-slider-selection{background:#006acb}  .custom-slider .ngx-slider .ngx-slider-pointer{width:8px;height:14px;top:auto;bottom:0;background-color:#006acb;border-top-left-radius:3px;border-top-right-radius:3px}  .custom-slider .ngx-slider .ngx-slider-pointer:after{display:none}  .custom-slider .ngx-slider .ngx-slider-bubble{font-size:13px;bottom:14px}  .custom-slider .ngx-slider .ngx-slider-limit{font-weight:400;color:#006acb}  .custom-slider .ngx-slider .ngx-slider-tick{width:1px;height:10px;margin-left:4px;border-radius:0;background:#006acb;top:-1px}  .custom-slider .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#006acb}.div-temperature[_ngcontent-%COMP%]{display:inline-grid;height:51px;padding-left:20px;margin-top:4px!important}.label-area[_ngcontent-%COMP%]{position:relative;font-size:11px;font-family:Roboto;font-weight:400;top:10px;color:#0009;background:white;z-index:1;width:35px;margin:-92px 10px 0!important;height:15px;padding-left:5px}.label-temperature[_ngcontent-%COMP%]{position:relative;font-size:11px;font-family:Roboto;font-weight:400;top:10px;color:#0009;background:white;z-index:1;width:170px;margin:-73px 0 0 -15px;height:12px}.tree-filter[_ngcontent-%COMP%]{display:inline-grid;width:100%;padding:0}.tree-filter[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{border:none}.tree-filter[_ngcontent-%COMP%]   .mat-select-placeholder[_ngcontent-%COMP%]{color:#000;margin-bottom:15px}.tree-filter[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{display:none}.tree-filter[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{text-align:left}"],data:{animation:[L.M,R.X]}}),r})()}];let Xe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[E.Bz.forChild(je)],E.Bz]}),r})();var et=a(61620);const tt=[{path:"",component:$}];let nt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[E.Bz.forChild(tt)],E.Bz]}),r})(),ot=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[s.ez,i.u5,i.UX,b.q,et.o9,d.Is,ee.c,G.ot,H.Ps,nt,f.Z,m.p]]}),r})();var rt=a(79207);let at=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[s.ez,Xe,i.u5,i.UX,b.q,f.Z,ot,w.EC,w.Yy,w.K,ne.kx,m.p,C.J,rt.rU,F.dp]]}),r})()},58527:(D,O,a)=>{a.d(O,{E:()=>b});var s=a(40520),i=a(98545),C=a(5e3),m=a(33344);let b=(()=>{class f{constructor(o,d){this.http=o,this.tokenStorage=d}getHeaders(){var o=new s.WM,d=this.tokenStorage.getToken();return o.set("token",d||"{}")}getAll(o){var d=this.getHeaders();const c=(new s.LE).appendAll(o);return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.AREAS,{params:c,headers:d})}getArea(o){var d=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.AREAS+"/"+o,{headers:d})}createArea(o){var d=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.AREAS,o,{headers:d})}updateArea(o){var d=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.AREAS+"/"+o.id,o,{headers:d})}deleteArea(o){var d=this.getHeaders();return this.http.delete(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.AREAS+"/"+o.id,{headers:d})}getCostCenters(o){var d=this.getHeaders();const c=(new s.LE).appendAll(o);return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.COST_CENTERS,{params:c,headers:d})}}return f.\u0275fac=function(o){return new(o||f)(C.LFG(s.eN),C.LFG(m.i))},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},82593:(D,O,a)=>{a.d(O,{V:()=>b});var s=a(40520),i=a(98545),C=a(5e3),m=a(33344);let b=(()=>{class f{constructor(o,d){this.http=o,this.tokenStorage=d,this.baseendpoint=i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.FLEETS}getHeaders(){var o=new s.WM,d=this.tokenStorage.getToken();return o.set("token",d||"{}")}getAll(){var o=this.getHeaders();return this.http.get(this.baseendpoint,{headers:o})}getFiltered(o){var d=this.getHeaders();const c=(new s.LE).appendAll(o);return this.http.get(this.baseendpoint,{headers:d,params:c})}create(o){var d=this.getHeaders();return this.http.post(this.baseendpoint,o,{headers:d})}update(o){var d=this.getHeaders();return this.http.put(this.baseendpoint+"/"+o.id,o,{headers:d})}updateCvConfiguration(o){var d=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.CV_CONFIGURATIONS,o,{headers:d})}}return f.\u0275fac=function(o){return new(o||f)(C.LFG(s.eN),C.LFG(m.i))},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},15702:(D,O,a)=>{a.d(O,{_:()=>b});var s=a(40520),i=a(98545),C=a(5e3),m=a(33344);let b=(()=>{class f{constructor(o,d){this.http=o,this.tokenStorage=d}getHeaders(){var o=new s.WM,d=this.tokenStorage.getToken();return o.set("token",d||"{}")}getFromId(o){var d=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MEANS+"/"+o,{headers:d})}getFiltered(o){var d=this.getHeaders();const c=(new s.LE).appendAll(o);return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MEANS,{params:c,headers:d})}getAll(){var o=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MEANS,{headers:o})}getEfficiencies(o){var d=this.getHeaders();const c=(new s.LE).appendAll(o);return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MEANS_EFFICIENCIES,{params:c,headers:d})}getEfficienciesFromId(o,d){var c=this.getHeaders();const h=(new s.LE).appendAll(d);return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MEANS_EFFICIENCIES+"/"+o,{params:h,headers:c})}create(o){var d=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MEANS,o,{headers:d})}update(o){var d=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MEANS+"/"+o.id,o,{headers:d})}}return f.\u0275fac=function(o){return new(o||f)(C.LFG(s.eN),C.LFG(m.i))},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},17846:(D,O,a)=>{a.d(O,{c:()=>b});var s=a(40520),i=a(98545),C=a(5e3),m=a(33344);let b=(()=>{class f{constructor(o,d){this.http=o,this.tokenStorage=d}getHeaders(){var o=new s.WM,d=this.tokenStorage.getToken();return o.set("token",d||"{}")}getAllModels(){var o=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MODELS,{headers:o})}getAllModelsByCompanyId(o){var d=this.getHeaders();const c=(new s.LE).appendAll({company_id:o});return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MODELS,{params:c,headers:d})}getAllModelsByAreas(o){var d=this.getHeaders();const c=(new s.LE).appendAll(o);return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MODELS,{params:c,headers:d})}getModel(o){var d=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MODELS+"/"+o,{headers:d})}createModel(o){var d=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MODELS,o,{headers:d})}updateModel(o){var d=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.MODELS+"/"+o.id,o,{headers:d})}getAllCompanies(){var o=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.COMPANIES,{headers:o})}createCompany(o){var d=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.COMPANIES,o,{headers:d})}updateCompany(o){var d=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.COMPANIES+"/"+o.id,o,{headers:d})}getAllEquipmentClasses(){var o=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.EQUIPMENT_CLASSES,{headers:o})}createEquipmentClass(o){var d=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.EQUIPMENT_CLASSES,o,{headers:d})}updateEquipmentClass(o){var d=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.EQUIPMENT_CLASSES+"/"+o.id,o,{headers:d})}}return f.\u0275fac=function(o){return new(o||f)(C.LFG(s.eN),C.LFG(m.i))},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},9360:(D,O,a)=>{a.d(O,{s:()=>b});var s=a(40520),i=a(98545),C=a(5e3),m=a(33344);let b=(()=>{class f{constructor(o,d){this.http=o,this.tokenStorage=d}getHeaders(){var o=new s.WM,d=this.tokenStorage.getToken();return o.set("token",d||"{}")}getAll(o){var d=this.getHeaders();if(null!=o){const h=(new s.LE).appendAll(o);var c=this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS,{params:h,headers:d})}else c=this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS,{headers:d});return c}getProduct(o){var d=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS+"/"+o,{headers:d})}createProduct(o){var d=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS,o,{headers:d})}updateProduct(o){var d=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS+"/"+o.id,o,{headers:d})}}return f.\u0275fac=function(o){return new(o||f)(C.LFG(s.eN),C.LFG(m.i))},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},52190:(D,O,a)=>{a.d(O,{w:()=>E});var s=a(40520),i=a(46227),C=a(27221),m=a(98545),b=a(5e3),f=a(33344);let E=(()=>{class o{constructor(c,h){this.http=c,this.tokenStorage=h}getHeaders(){var c=new s.WM,h=this.tokenStorage.getToken();return c.set("token",h||"{}")}getAll(c){var h=this.getHeaders();const M=(new s.LE).appendAll(c?{type:c}:{});return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.STATIONS,{params:M,headers:h})}create(c){var h=this.getHeaders();return this.http.post(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.STATIONS,c,{headers:h}).pipe((0,i.V)(1e4),(0,C.K)(M=>{throw"Error de conexi\xf3n. Detalles: "+M}))}update(c){var h=this.getHeaders();return this.http.put(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.STATIONS+"/"+c.site_code,c,{headers:h}).pipe((0,i.V)(1e4),(0,C.K)(M=>{throw"Error de conexi\xf3n. Detalles: "+M}))}delete(c){var h=this.getHeaders();return this.http.delete(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.STATIONS+"/"+c.site_code,{headers:h})}getRemoteProducts(c){var h=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.REMOTE_PRODUCTS+"/"+c.site_code,{headers:h}).pipe((0,i.V)(1e4),(0,C.K)(M=>{throw"Error de conexi\xf3n. Detalles: "+M}))}getRemoteTanks(c){var h=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+"/remoteTanks/"+c.site_code,{headers:h}).pipe((0,i.V)(1e4),(0,C.K)(M=>{throw"Error de conexi\xf3n. Detalles: "+M}))}getMapOfProducts(c){var h=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.PRODUCTS_MAPS+"/"+c.site_code,{headers:h})}setMapOfProducts(c,h){var M=this.getHeaders();return this.http.post(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.PRODUCTS_MAPS+"/"+h,c,{headers:M})}setTanksT(c){var h=this.getHeaders();return console.log(typeof c),this.http.post(m._.settings.apiServer.API_URL_BASE+"/remoteTanks",c,{headers:h})}getDevicesStatus(c){var h=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.DEVICES_STATUS+"?site_code="+c,{headers:h})}getAllTanksStatus(){var c=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.STATUS_TANKS,{headers:c})}getTanksStatus(c){var h=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.STATUS_TANKS+"/"+c,{headers:h})}getPumpsStatus(c){var h=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.STATUS_PUMPS+"/"+c,{headers:h})}getPumps(c){var h=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.PUMPS+"/"+c,{headers:h})}syncSingle(c,h){var M=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.SYNC+"?site_code="+c+"&stub="+h,{headers:M}).pipe((0,i.V)(6e5),(0,C.K)(U=>{throw"Error de conexi\xf3n. Detalles: "+U}))}getMarimbas(){var c=this.getHeaders();return this.http.get(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.MARIMBAS,{headers:c})}updateIndexes(c){var h=this.getHeaders();return console.log(h),this.http.put(m._.settings.apiServer.API_URL_BASE+m._.settings.apiServer.INDEXES,c,{headers:h})}}return o.\u0275fac=function(c){return new(c||o)(b.LFG(s.eN),b.LFG(f.i))},o.\u0275prov=b.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},79207:(D,O,a)=>{a.d(O,{bl:()=>Q,rU:()=>B});var s=a(5e3),i=a(28258),C=a(93075),m=a(90149),b=a(21086),f=a(67322),E=a(74107),o=a(90508),d=a(47423),c=a(25245),h=a(69808),M=a(77531);function U(S,y){if(1&S&&(s.TgZ(0,"mat-tree-node",5),s.TgZ(1,"mat-option",6),s.TgZ(2,"p",7),s._uU(3),s.qZA(),s.qZA(),s.qZA()),2&S){const u=y.$implicit;s.xp6(1),s.Q6J("title",u.name)("value",u),s.xp6(2),s.hij(" ",u.name," ")}}function J(S,y){if(1&S&&(s.TgZ(0,"p",14),s._uU(1),s.qZA()),2&S){const u=s.oxw().$implicit,T=s.oxw();s.xp6(1),s.hij(" ",T.heading+" "+u.name,"")}}function L(S,y){if(1&S&&(s.TgZ(0,"mat-nested-tree-node"),s.TgZ(1,"div",8),s.TgZ(2,"button",9),s.TgZ(3,"mat-icon",10),s._uU(4),s.qZA(),s.qZA(),s.TgZ(5,"mat-option",11),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"ul"),s.YNc(8,J,2,1,"p",12),s.GkF(9,13),s.qZA(),s.qZA()),2&S){const u=y.$implicit,T=s.oxw();s.xp6(2),s.uIk("aria-label","toggle "+u.name),s.xp6(2),s.hij(" ",T.nestedTreeControl.isExpanded(u)?"expand_more":"chevron_right"," "),s.xp6(1),s.Q6J("title",u.name)("disabled",!T.canSelectParentNode)("value",u),s.xp6(1),s.hij(" ",u.name," "),s.xp6(1),s.ekj("example-tree-invisible",!T.nestedTreeControl.isExpanded(u)),s.xp6(1),s.Q6J("ngIf",""!==T.heading)}}const R=["*"];let Q=(()=>{class S{constructor(){this.controlName={},this.options=[],this.placeholder="",this.multiple=!1,this.heading="",this.canSelectParentNode=!0,this._getChildren=u=>(0,b.of)(u.children),this.hasNestedChild=(u,T)=>{var A;return(null===(A=T.children)||void 0===A?void 0:A.length)>0},this.nestedTreeControl=new i.VY(this._getChildren),this.nestedDataSource=new m.WX}ngOnInit(){this.nestedDataSource.data=this.options}ngOnChanges(u){var T,A;(null===(T=u.options)||void 0===T?void 0:T.currentValue)!==(null===(A=u.options)||void 0===A?void 0:A.previousValue)&&(this.nestedDataSource.data=this.options)}}return S.\u0275fac=function(u){return new(u||S)},S.\u0275cmp=s.Xpm({type:S,selectors:[["ngx-mat-tree-select-input"]],inputs:{controlName:"controlName",options:"options",placeholder:"placeholder",multiple:"multiple",heading:"heading",canSelectParentNode:"canSelectParentNode"},features:[s._Bn([],[{provide:C.gN,useExisting:C.sg}]),s.TTD],ngContentSelectors:R,decls:6,vars:7,consts:[["appearance","outline"],[3,"id","placeholder","multiple","formControlName"],[1,"example-tree","mat-tree-position",3,"dataSource","treeControl"],["class","mat-tree-node",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"mat-tree-node"],[3,"title","value"],[1,"tree_text",2,"margin-left","35px"],[2,"display","flex"],["mat-icon-button","","matTreeNodeToggle","",1,"tree-toggle"],[1,"mat-icon-rtl-mirror"],[1,"mat-tree-node",2,"display","flex",3,"title","disabled","value"],["class","title",4,"ngIf"],["matTreeNodeOutlet",""],[1,"title"]],template:function(u,T){1&u&&(s.F$t(),s.TgZ(0,"mat-form-field",0),s.TgZ(1,"mat-select",1),s.Hsn(2),s.TgZ(3,"mat-tree",2),s.YNc(4,U,4,3,"mat-tree-node",3),s.YNc(5,L,10,9,"mat-nested-tree-node",4),s.qZA(),s.qZA(),s.qZA()),2&u&&(s.xp6(1),s.Q6J("id",T.controlName)("placeholder",T.placeholder)("multiple",T.multiple)("formControlName",T.controlName),s.xp6(2),s.Q6J("dataSource",T.nestedDataSource)("treeControl",T.nestedTreeControl),s.xp6(2),s.Q6J("matTreeNodeDefWhen",T.hasNestedChild))},directives:[f.KE,E.gD,C.JJ,C.u,m.gi,m.fQ,m.uo,o.ey,m.GZ,d.lW,m.eu,c.Hw,h.O5,m.Ar],styles:[".example-tree-invisible[_ngcontent-%COMP%] {\n    display: none;\n}\n.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n    margin-top: 0;\n    margin-bottom: 0;\n    list-style-type: none;\n}\n.mat-tree[_ngcontent-%COMP%] {\n    width: 100%;\n    margin-top: 15px;\n    box-sizing: border-box;\n}\n.mat-tree[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    height: 33px;\n    width: 33px;\n    line-height: 33px;\n    color: #777;\n    margin-left: 0px;\n    margin-right: 0px;\n}\n.mattreenodetoggle[_ngcontent-%COMP%] {\n    color: #777;\n}\n.mat-tree-node[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    min-height: 0;\n    position: relative;\n}\n[_nghost-%COMP%]     .mat-option-text {\n    display: flex !important;\n    align-items: center;\n    font-size: 12px;\n    min-height: 0;\n    position: relative;\n}\n.actions[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n    margin-left: 30px;\n}\n.tree-toggle[_ngcontent-%COMP%] {\n    position: relative;\n}\n.title[_ngcontent-%COMP%] {\n    margin-right: auto;\n    margin-bottom: 0;\n    font-weight: 500;\n    color: #777;\n    align-self: flex-end;\n    font-size: 12px;\n    margin-left: 20px;\n    padding-top: 10px;\n}\n.tree_text[_ngcontent-%COMP%] {\n    margin-bottom: 0;\n    width: 100px;\n    line-height: normal;\n}\nul[_ngcontent-%COMP%] {\n    padding: 0px;\n    margin-bottom: 10px !important;\n    margin-left: 51px;\n}\nmat-tree-node[_ngcontent-%COMP%] {\n    position: relative;\n}\nmat-tree-node[_ngcontent-%COMP%]::after {\n    content: '';\n    position: absolute;\n    left: 0;\n    height: 1px;\n    width: 40px;\n}"]}),S})(),B=(()=>{class S{}return S.\u0275fac=function(u){return new(u||S)},S.\u0275mod=s.oAB({type:S}),S.\u0275inj=s.cJS({imports:[[M.c,f.lN,E.LD,m.dp,c.Ps,h.ez,C.UX,C.u5,d.ot]]}),S})()}}]);