"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[4082],{88914:(T,h,n)=>{n.d(h,{M:()=>i});var e=n(41777);const i=(0,e.X$)("fadeInRight",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateX(-2vw)",opacity:0}),(0,e.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(T,h,n)=>{n.d(h,{X:()=>i});var e=n(41777);const i=(0,e.X$)("fadeInUp",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateY(3vh)",opacity:0}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateY(0)",opacity:1}))])])},37425:(T,h,n)=>{n.d(h,{K:()=>i});var e=n(41777);const i=(0,e.X$)("scaleIn",[(0,e.eR)(":enter",[(0,e.oB)({transform:"scale(0)"}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"scale(1)"}))])])},38932:(T,h,n)=>{n.d(h,{n:()=>p});var e=n(5e3),i=n(30277),m=n(3299),u=n(69808),v=n(25245);function f(_,c){if(1&_&&(e.TgZ(0,"div",7),e.TgZ(1,"mat-icon",5),e._uU(2,"chevron_right"),e.qZA(),e.TgZ(3,"div",6),e._uU(4),e.qZA(),e.qZA()),2&_){const a=c.$implicit;e.xp6(4),e.Oqu(a)}}const D=function(){return["/"]};let p=(()=>{class _{constructor(){this.crumbs=[]}ngOnInit(){}}return _.\u0275fac=function(a){return new(a||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(a,g){1&a&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"a",2),e._uU(4,"Home"),e.qZA(),e.YNc(5,f,5,1,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"mat-icon",5),e._uU(8,"chevron_right"),e.qZA(),e.TgZ(9,"div",6),e._uU(10),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Oqu(g.current),e.xp6(2),e.Q6J("routerLink",e.DdM(4,D)),e.xp6(2),e.Q6J("ngForOf",g.crumbs),e.xp6(5),e.Oqu(g.current))},directives:[i.xw,i.Wh,m.yS,u.sg,v.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),_})()},94927:(T,h,n)=>{n.d(h,{n:()=>b});var e=n(5e3),i=n(23753),m=n(75778),u=n(80013),v=n(69808),f=n(92181),D=n(30277),p=n(25245),_=n(47423),c=n(77446),a=n(93075);const g=["filter"];function O(A,S){if(1&A&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"mat-icon",8),e._uU(5,"search"),e.qZA(),e._UZ(6,"input",9,10),e.qZA(),e.TgZ(8,"button",11),e.TgZ(9,"mat-icon"),e._uU(10,"filter_list"),e.qZA(),e.qZA(),e.Hsn(11,1),e.qZA()),2&A){const t=e.oxw(),y=e.MAs(3);e.xp6(2),e.Oqu(t.name),e.xp6(6),e.Q6J("matMenuTriggerFor",y)}}function M(A,S){if(1&A){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(C){const E=e.CHM(t).$implicit;return e.oxw().toggleColumnVisibility(E,C)}),e.TgZ(1,"mat-checkbox",13,14),e.NdJ("ngModelChange",function(C){return e.CHM(t).$implicit.visible=C})("click",function(C){return C.stopPropagation()}),e._uU(3),e.qZA(),e.qZA()}if(2&A){const t=S.$implicit;e.xp6(1),e.Q6J("ngModel",t.visible),e.xp6(2),e.hij(" ",t.name," ")}}const L=["*",[["",8,"actions"]]],I=["*",".actions"];let b=(()=>{class A{constructor(){this.filterChange=new e.vpe}ngAfterViewInit(){this.hideHeader||(0,i.R)(this.filter.nativeElement,"keyup").pipe((0,m.x)(),(0,u.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(t,y){y.stopPropagation(),y.stopImmediatePropagation(),t.visible=!t.visible}}return A.\u0275fac=function(t){return new(t||A)},A.\u0275cmp=e.Xpm({type:A,selectors:[["fury-list"]],viewQuery:function(t,y){if(1&t&&e.Gf(g,5),2&t){let C;e.iGM(C=e.CRH())&&(y.filter=C.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:I,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(t,y){1&t&&(e.F$t(L),e.TgZ(0,"div",0),e.YNc(1,O,12,2,"div",1),e.TgZ(2,"mat-menu",2,3),e.YNc(4,M,4,2,"button",4),e.qZA(),e.Hsn(5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!y.hideHeader),e.xp6(3),e.Q6J("ngForOf",y.columns))},directives:[v.O5,f.VK,v.sg,D.xw,D.Wh,D.SQ,D.yH,p.Hw,_.lW,f.p6,c.oG,a.JJ,a.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),A})()},4940:(T,h,n)=>{n.d(h,{p:()=>v});var e=n(69808),i=n(93075),m=n(7057),u=n(5e3);let v=(()=>{class f{}return f.\u0275fac=function(p){return new(p||f)},f.\u0275mod=u.oAB({type:f}),f.\u0275inj=u.cJS({imports:[[e.ez,m.q,i.u5]]}),f})()},19165:(T,h,n)=>{n.d(h,{d:()=>i});var e=n(5e3);let i=(()=>{class m{constructor(){}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),m})()},53580:(T,h,n)=>{n.d(h,{U:()=>i});var e=n(5e3);let i=(()=>{class m{constructor(){}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),m})()},39762:(T,h,n)=>{n.d(h,{N:()=>i});var e=n(5e3);let i=(()=>{class m{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(v,f){2&v&&e.ekj("fury-page-layout-card",f.isCard)("fury-page-layout-simple",f.isSimple)},inputs:{mode:"mode"}}),m})()},59968:(T,h,n)=>{n.d(h,{i:()=>i});var e=n(5e3);let i=(()=>{class m{constructor(){}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),m})()},84082:(T,h,n)=>{n.r(h),n.d(h,{DictamenesProductoTableModule:()=>At});var e=n(69808),i=n(93075),m=n(61264),u=n(4940),v=n(7057),f=n(72467),D=n(3299),p=n(70655),_=n(86087),c=n(84847),a=n(32075),g=n(18444),O=n(96831),M=n(92198),L=n(88914),I=n(14499),b=n(48966),A=n(37425);class S{constructor(l){this.cv_dictamen_id=l&&l.cv_dictamen_id||null,this.site_code=l&&l.site_code||null,this.station=l&&l.station||null,this.product_id=l&&l.product_id||null,this.product=l&&l.product||null,this.rfc_dictamen=l&&l.rfc_dictamen||null,this.lote_dictamen=l&&l.lote_dictamen||null,this.numero_folio_dictamen=l&&l.numero_folio_dictamen||null,this.fecha_emision_dictamen=l&&l.fecha_emision_dictamen||null,this.resultado_dictamen=l&&l.resultado_dictamen||null,this.user_id=l&&l.user_id||null,this.timestamp=l&&l.timestamp||null,this.status=l&&l.status||null,this.cv_configuration_id=l&&l.cv_configuration_id||null}}var t=n(5e3),y=n(57261),C=n(52190),R=n(9360),E=n(40520),U=n(46227),B=n(27221),x=n(98545),$=n(33344);let G=(()=>{class o{constructor(r,s){this.http=r,this.tokenStorage=s}getHeaders(){var r=new E.WM,s=this.tokenStorage.getToken();return r.set("token",s||"{}")}getAll(){var r=this.getHeaders();return this.http.get(x._.settings.apiServer.API_URL_BASE+x._.settings.apiServer.DICTAMENES_PRODUCTO,{headers:r}).pipe((0,U.V)(1e4),(0,B.K)(s=>{throw"Error de conexi\xf3n. Detalles: "+s}))}create(r){var s=this.getHeaders();return this.http.post(x._.settings.apiServer.API_URL_BASE+x._.settings.apiServer.DICTAMENES_PRODUCTO,r,{headers:s}).pipe((0,U.V)(1e4),(0,B.K)(d=>{throw"Error de conexi\xf3n. Detalles: "+d}))}update(r){var s=this.getHeaders();return this.http.put(x._.settings.apiServer.API_URL_BASE+x._.settings.apiServer.DICTAMENES_PRODUCTO+"/"+r.cv_dictamen_id,r,{headers:s}).pipe((0,U.V)(1e4),(0,B.K)(d=>{throw"Error de conexi\xf3n. Detalles: "+d}))}delete(r){var s=this.getHeaders();return this.http.delete(x._.settings.apiServer.API_URL_BASE+x._.settings.apiServer.DICTAMENES_PRODUCTO+"/"+r.cv_dictamen_id,{headers:s}).pipe((0,U.V)(1e4),(0,B.K)(d=>{throw"Error de conexi\xf3n. Detalles: "+d}))}}return o.\u0275fac=function(r){return new(r||o)(t.LFG(E.eN),t.LFG($.i))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var z=n(59968),j=n(36551),W=n(25245),F=n(92081),N=n(30277),H=n(67322),V=n(74107),X=n(77531),w=n(86856),Q=n(47423),q=n(90508);function tt(o,l){1&o&&t._uU(0,"Datos del dictamen")}function et(o,l){if(1&o&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&o){const r=l.$implicit;t.Q6J("value",r.site_code),t.xp6(1),t.Oqu(r.station_name)}}function rt(o,l){if(1&o&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&o){const r=l.$implicit;t.Q6J("value",r.id),t.xp6(1),t.Oqu(r.name)}}let K=(()=>{class o{constructor(r,s,d,P,Z,k){this.data=r,this.dialogRef=s,this.snackbar=d,this._stationsService=P,this._productsService=Z,this._dictamenesProductoService=k,this.generalFormGroup=new i.cw({cv_dictamen_id:new i.NI,site_code:new i.NI("",[i.kI.required]),product_id:new i.NI("",[i.kI.required]),rfc_dictamen:new i.NI("",[i.kI.required,i.kI.pattern("^([A-Z\xd1]|&){3}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}$")]),lote_dictamen:new i.NI("",[i.kI.required]),numero_folio_dictamen:new i.NI("",[i.kI.required,i.kI.pattern("^([A-Z\xd1]|&){3}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}[0-9]{5}2[0-9]{3}$")]),fecha_emision_dictamen:new i.NI("",[i.kI.required]),resultado_dictamen:new i.NI("",[i.kI.required,i.kI.minLength(10),i.kI.maxLength(300)])}),this.theDictamenProducto=new S,this.stations=[],this.products=[],this.filter={fleets:"",areas:"",models:"",means:"",products:"",stations:"",fleets_names:"",products_names:"",areas_names:"",models_names:"",means_names:"",stations_names:"",from_date:"",to_date:""},this.dialogRef.disableClose=!0}ngOnInit(){return(0,p.mG)(this,void 0,void 0,function*(){this.products=yield this.getProducts(),this.stations=yield this.getStations(),null!=this.data&&(this.theDictamenProducto=this.data,this.generalFormGroup.patchValue({cv_dictamen_id:this.theDictamenProducto.cv_dictamen_id,site_code:this.theDictamenProducto.site_code,product_id:this.theDictamenProducto.product_id.toString(),rfc_dictamen:this.theDictamenProducto.rfc_dictamen,lote_dictamen:this.theDictamenProducto.lote_dictamen,numero_folio_dictamen:this.theDictamenProducto.numero_folio_dictamen,fecha_emision_dictamen:new Date(this.theDictamenProducto.fecha_emision_dictamen),resultado_dictamen:this.theDictamenProducto.resultado_dictamen}))})}getStations(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getAll().toPromise()})}getProducts(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._productsService.getAll(this.filter).toPromise()})}submit(){this.theDictamenProducto.cv_dictamen_id=this.generalFormGroup.controls.cv_dictamen_id.value,this.theDictamenProducto.site_code=this.generalFormGroup.controls.site_code.value,this.theDictamenProducto.product_id=this.generalFormGroup.controls.product_id.value,this.theDictamenProducto.rfc_dictamen=this.generalFormGroup.controls.rfc_dictamen.value,this.theDictamenProducto.lote_dictamen=this.generalFormGroup.controls.lote_dictamen.value,this.theDictamenProducto.numero_folio_dictamen=this.generalFormGroup.controls.numero_folio_dictamen.value,this.theDictamenProducto.fecha_emision_dictamen=this.getMysqlDate(this.generalFormGroup.controls.fecha_emision_dictamen.value),this.theDictamenProducto.resultado_dictamen=this.generalFormGroup.controls.resultado_dictamen.value,this.theDictamenProducto.cv_configuration_id=this.stations.find(r=>r.site_code==this.generalFormGroup.controls.site_code.value).cv_configuration_id,this.theDictamenProducto.cv_dictamen_id>0?this.updateDictamenProducto():this.createDictamenProducto()}close(){this.dialogRef.close()}createDictamenProducto(){this._dictamenesProductoService.create(this.theDictamenProducto).subscribe(r=>{this.snackbar.open(r.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.theDictamenProducto)},r=>{this.snackbar.open(r.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateDictamenProducto(){this._dictamenesProductoService.update(this.theDictamenProducto).subscribe(r=>{this.snackbar.open(r.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.theDictamenProducto)},r=>{this.snackbar.open(r.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}getMysqlDate(r){return null!==r?r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2):""}onChangeStation(r){return(0,p.mG)(this,void 0,void 0,function*(){this.filter.stations=r,this.products=[],this.products=yield this.getProducts()})}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(b.WI),t.Y36(b.so),t.Y36(y.ux),t.Y36(C.w),t.Y36(R.s),t.Y36(G))},o.\u0275cmp=t.Xpm({type:o,selectors:[["dictamenes-productos"]],decls:58,vars:11,consts:[[2,"padding","1px","display","block"],[1,"title"],["svgIcon","dictamen"],[1,"card",2,"overflow","scroll","height","550px","width","600px"],[3,"linear"],["stepper","matVerticalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["fxLayout","row","fxLayoutGap","8px",1,"content"],["appearance","outline","fxFlex","auto"],["formControlName","site_code",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","product_id"],["formControlName","rfc_dictamen","matInput","","required",""],["formControlName","lote_dictamen","matInput","","required",""],["formControlName","numero_folio_dictamen","matInput","","required",""],["matInput","","formControlName","fecha_emision_dictamen","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["color","primary"],["fechaEmisionDictamen",""],["matInput","","placeholder","Resultado del dictamen...","formControlName","resultado_dictamen"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","","type","button",3,"click"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled","click"],[3,"value"]],template:function(r,s){if(1&r&&(t.TgZ(0,"fury-page",0),t.TgZ(1,"fury-title",1),t._UZ(2,"mat-icon",2),t.TgZ(3,"span"),t._uU(4,"Dictamen de producto"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"mat-horizontal-stepper",4,5),t.TgZ(8,"mat-step",6),t.TgZ(9,"form",7),t.YNc(10,tt,1,0,"ng-template",8),t.TgZ(11,"div",9),t.TgZ(12,"mat-form-field",10),t.TgZ(13,"mat-label"),t._uU(14,"Estaci\xf3n donde se deposit\xf3 el combustible:"),t.qZA(),t.TgZ(15,"mat-select",11),t.NdJ("selectionChange",function(P){return s.onChangeStation(P.value)}),t.YNc(16,et,2,2,"mat-option",12),t.qZA(),t.qZA(),t.TgZ(17,"mat-form-field",10),t.TgZ(18,"mat-label"),t._uU(19,"Producto:"),t.qZA(),t.TgZ(20,"mat-select",13),t.YNc(21,rt,2,2,"mat-option",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",9),t.TgZ(23,"mat-form-field",10),t.TgZ(24,"mat-label"),t._uU(25,"RFC del emisor del dictamen:"),t.qZA(),t._UZ(26,"input",14),t.qZA(),t.TgZ(27,"mat-form-field",10),t.TgZ(28,"mat-label"),t._uU(29,"Lote:"),t.qZA(),t._UZ(30,"input",15),t.qZA(),t.qZA(),t.TgZ(31,"div",9),t.TgZ(32,"mat-form-field",10),t.TgZ(33,"mat-label"),t._uU(34,"N\xfamero de folio:"),t.qZA(),t._UZ(35,"input",16),t.TgZ(36,"mat-hint"),t._uU(37,"RFC del proveedor + cinco n\xfameros \xfanicos cronol\xf3gicos + cuatro n\xfameros del a\xf1o de emisi\xf3n. (GEO9506184R6000232022)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",9),t.TgZ(39,"mat-form-field",10),t.TgZ(40,"mat-label"),t._uU(41,"Fecha del dictamen:"),t.qZA(),t._UZ(42,"input",17),t.TgZ(43,"mat-datepicker-toggle",18),t.TgZ(44,"mat-icon",19),t._uU(45,"date_range"),t.qZA(),t.qZA(),t._UZ(46,"mat-datepicker",20,21),t.qZA(),t.qZA(),t.TgZ(48,"div",9),t.TgZ(49,"mat-form-field",10),t.TgZ(50,"mat-label"),t._uU(51,"Resultados:"),t.qZA(),t._UZ(52,"textarea",22),t.qZA(),t.qZA(),t.TgZ(53,"div",23),t.TgZ(54,"button",24),t.NdJ("click",function(){return s.close()}),t._uU(55,"CANCELAR"),t.qZA(),t.TgZ(56,"button",25),t.NdJ("click",function(){return s.submit()}),t._uU(57,"GUARDAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r){const d=t.MAs(47);t.xp6(2),t.Q6J("@scaleIn",void 0),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(2),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("linear",!0),t.xp6(2),t.Q6J("stepControl",s.generalFormGroup),t.xp6(1),t.Q6J("formGroup",s.generalFormGroup),t.xp6(7),t.Q6J("ngForOf",s.stations),t.xp6(5),t.Q6J("ngForOf",s.products),t.xp6(21),t.Q6J("matDatepicker",d),t.xp6(1),t.Q6J("for",d),t.xp6(13),t.Q6J("disabled",s.generalFormGroup.invalid)}},directives:[z.i,j.M,W.Hw,F.Vq,F.C0,i._Y,i.JL,i.sg,F.VY,N.xw,N.SQ,H.KE,N.yH,H.hX,V.gD,i.JJ,i.u,e.sg,i.Fj,X.Nt,i.Q7,H.bx,w.hl,w.nW,H.R9,w.Q0,w.Mq,N.Wh,Q.lW,F.Ic,q.ey],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 10px 13px -6px #0003,0 20px 31px 3px #00000024,0 8px 38px 7px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px;width:50%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}"],data:{animation:[I.X,L.M,A.K]}}),o})();var nt=n(24333),ot=n(39762),it=n(53580),at=n(38932),st=n(19165),ct=n(94927),J=n(92181);function lt(o,l){if(1&o&&(t.TgZ(0,"th",17),t._uU(1),t.qZA()),2&o){const r=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",r.name,"")}}function ut(o,l){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&o){const r=l.$implicit,s=t.oxw(2).$implicit,d=t.oxw();t.xp6(1),t.hij(" ",d.getLabel(s.name,r[s.property])," ")}}function dt(o,l){if(1&o&&(t.ynx(0,14),t.YNc(1,lt,2,1,"th",15),t.YNc(2,ut,2,1,"td",16),t.BQk()),2&o){const r=t.oxw().$implicit;t.Q6J("matColumnDef",r.property)}}function mt(o,l){if(1&o&&(t.ynx(0),t.YNc(1,dt,3,1,"ng-container",13),t.BQk()),2&o){const r=l.$implicit;t.xp6(1),t.Q6J("ngIf",r.isModelProperty)}}function pt(o,l){1&o&&t._UZ(0,"th",19)}function _t(o,l){if(1&o){const r=t.EpF();t.TgZ(0,"td",20),t.TgZ(1,"button",21),t.NdJ("click",function(d){return d.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.TgZ(4,"mat-menu",22,23),t.TgZ(6,"button",24),t.NdJ("click",function(){const P=t.CHM(r).$implicit;return t.oxw().updateDictamenProducto(P)}),t.TgZ(7,"span"),t._uU(8,"Editar"),t.qZA(),t.qZA(),t.TgZ(9,"button",24),t.NdJ("click",function(){const P=t.CHM(r).$implicit;return t.oxw().deleteDictamenProducto(P)}),t.TgZ(10,"span"),t._uU(11,"Eliminar"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const r=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",r)}}function gt(o,l){1&o&&t._UZ(0,"tr",25)}function ht(o,l){if(1&o){const r=t.EpF();t.TgZ(0,"tr",26),t.NdJ("click",function(){const P=t.CHM(r).$implicit;return t.oxw().updateDictamenProducto(P)}),t.qZA()}}const ft=function(){return["Control volumetrico"]},vt=[{path:"",component:(()=>{class o{constructor(r,s,d,P,Z,k,Tt){this.dialog=r,this.confirmationDialog=s,this._stationsService=d,this._usersService=P,this._productsService=Z,this._dictamenesProductoService=k,this.snackbar=Tt,this.subject$=new O.t(1),this.data$=this.subject$.asObservable(),this.stations=[],this.users=[],this.products=[],this.columns=[{name:"Id",property:"cv_dictamen_id",visible:!0,isModelProperty:!0},{name:"Estaci\xf3n",property:"site_code",visible:!0,isModelProperty:!0},{name:"Producto",property:"product_id",visible:!0,isModelProperty:!0},{name:"Rfc dictamen",property:"rfc_dictamen",visible:!0,isModelProperty:!0},{name:"Lote",property:"lote_dictamen",visible:!0,isModelProperty:!0},{name:"N\xfamero folio",property:"numero_folio_dictamen",visible:!1,isModelProperty:!0},{name:"Fecha emisi\xf3n",property:"fecha_emision_dictamen",visible:!1,isModelProperty:!0},{name:"Resultado",property:"resultado_dictamen",visible:!0,isModelProperty:!0},{name:"Creado por",property:"user_id",visible:!0,isModelProperty:!0},{name:"Modificaci\xf3n",property:"timestamp",visible:!0,isModelProperty:!0},{name:"Estatus",property:"status",visible:!1,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(r,s){if(null!=r)return"Estaci\xf3n"===r?this.stations.find(d=>d.site_code==s).station_name:"Producto"===r?this.products.find(d=>d.id==s).name:"Creado por"===r?this.users.find(d=>d.user_id==s).name:s}get visibleColumns(){return this.columns.filter(r=>r.visible).map(r=>r.property)}getData(){this.dataSource=new a.by,this._dictamenesProductoService.getAll().subscribe(r=>{this.dictamenes_documento=r,this.dataSource=new a.by(r),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},r=>{console.log(r)})}ngOnInit(){return(0,p.mG)(this,void 0,void 0,function*(){this.dataSource=new a.by,this.stations=yield this.getStations(),this.users=yield this.getUsers(),this.products=yield this.getProducts(),this.getData(),this.data$.pipe((0,M.h)(r=>!!r)).subscribe(r=>{this.dictamenes_documento=r,this.dataSource.data=this.dictamenes_documento})})}getStations(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getAll().toPromise()})}getUsers(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._usersService.getAll().toPromise()})}getProducts(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._productsService.getAll().toPromise()})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createDictamenProducto(){this.dialog.open(K).afterClosed().subscribe(r=>{r&&(this.subject$.next(this.dictamenes_documento),this.getData(),this.data$.pipe((0,M.h)(s=>!!s)).subscribe(s=>{this.dictamenes_documento=s,this.dataSource.data=s}))})}updateDictamenProducto(r){this.dialog.open(K,{data:r}).afterClosed().subscribe(s=>{s&&(this.subject$.next(this.dictamenes_documento),this.getData(),this.data$.pipe((0,M.h)(d=>!!d)).subscribe(d=>{this.dictamenes_documento=d,this.dataSource.data=d}))})}updateTheDictamenProducto(r){this._dictamenesProductoService.update(r).subscribe(s=>{this.snackbar.open(s.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.subject$.next(this.dictamenes_documento),this.getData(),this.data$.pipe((0,M.h)(d=>!!d)).subscribe(d=>{this.dictamenes_documento=d,this.dataSource.data=d})},s=>{this.snackbar.open(s.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}deleteDictamenProducto(r){this.confirmationDialog.open(g.z,{data:{title:"Confirmaci\xf3n",message:"\xbfDesea eliminar del sistema el registro "+r.numero_folio_dictamen+"?"}}).afterClosed().subscribe(s=>{s&&this._dictamenesProductoService.delete(r).subscribe(d=>{this.dataSource=new a.by,this.getData(),this.data$.pipe((0,M.h)(P=>!!P)).subscribe(P=>{this.dictamenes_documento=P,this.dataSource.data=P}),this.snackbar.open(d.message,null,{duration:5e3,panelClass:["green-snackbar"]})})})}onFilterChange(r){!this.dataSource||(r=(r=r.trim()).toLowerCase(),this.dataSource.filter=r)}ngOnDestroy(){}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(b.uw),t.Y36(b.uw),t.Y36(C.w),t.Y36(nt.f),t.Y36(R.s),t.Y36(G),t.Y36(y.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["dictamenes-producto-table"]],viewQuery:function(r,s){if(1&r&&(t.Gf(_.NW,7),t.Gf(c.YE,7)),2&r){let d;t.iGM(d=t.CRH())&&(s.paginator=d.first),t.iGM(d=t.CRH())&&(s.sort=d.first)}},inputs:{columns:"columns"},decls:17,vars:10,consts:[["mode","card"],["current","Dict\xe1menes de producto",3,"crumbs"],["name","Dict\xe1menes de producto",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(r,s){1&r&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-header"),t._UZ(2,"fury-breadcrumbs",1),t.qZA(),t.TgZ(3,"fury-page-layout-content"),t.TgZ(4,"fury-list",2),t.NdJ("filterChange",function(P){return s.onFilterChange(P)}),t.TgZ(5,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return s.createDictamenProducto()}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"table",5),t.YNc(10,mt,2,1,"ng-container",6),t.ynx(11,7),t.YNc(12,pt,1,0,"th",8),t.YNc(13,_t,12,1,"td",9),t.BQk(),t.YNc(14,gt,1,0,"tr",10),t.YNc(15,ht,1,0,"tr",11),t.qZA(),t._UZ(16,"mat-paginator",12),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(2),t.Q6J("@fadeInRight",void 0)("crumbs",t.DdM(9,ft)),t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("columns",s.columns),t.xp6(5),t.Q6J("dataSource",s.dataSource),t.xp6(1),t.Q6J("ngForOf",s.columns),t.xp6(4),t.Q6J("matHeaderRowDef",s.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.visibleColumns),t.xp6(1),t.Q6J("pageSize",s.pageSize))},directives:[ot.N,it.U,at.n,st.d,ct.n,Q.lW,W.Hw,a.BZ,c.YE,e.sg,a.w1,a.fO,a.Dz,a.as,a.nj,_.NW,e.O5,a.ge,c.nU,a.ev,J.p6,J.VK,J.OP,a.XQ,a.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[L.M,I.X]}}),o})()}];let Pt=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[D.Bz.forChild(vt)],D.Bz]}),o})();const Dt=[{path:"",component:K}];let Y=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[D.Bz.forChild(Dt)],D.Bz]}),o})(),yt=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[e.ez,Y,f.Z,i.UX,v.q]]}),o})(),At=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[e.ez,i.u5,m.J,u.p,v.q,f.Z,Pt,yt,Y]]}),o})()},9360:(T,h,n)=>{n.d(h,{s:()=>v});var e=n(40520),i=n(98545),m=n(5e3),u=n(33344);let v=(()=>{class f{constructor(p,_){this.http=p,this.tokenStorage=_}getHeaders(){var p=new e.WM,_=this.tokenStorage.getToken();return p.set("token",_||"{}")}getAll(p){var _=this.getHeaders();if(null!=p){const a=(new e.LE).appendAll(p);var c=this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS,{params:a,headers:_})}else c=this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS,{headers:_});return c}getProduct(p){var _=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS+"/"+p,{headers:_})}createProduct(p){var _=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS,p,{headers:_})}updateProduct(p){var _=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS+"/"+p.id,p,{headers:_})}}return f.\u0275fac=function(p){return new(p||f)(m.LFG(e.eN),m.LFG(u.i))},f.\u0275prov=m.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},52190:(T,h,n)=>{n.d(h,{w:()=>D});var e=n(40520),i=n(46227),m=n(27221),u=n(98545),v=n(5e3),f=n(33344);let D=(()=>{class p{constructor(c,a){this.http=c,this.tokenStorage=a}getHeaders(){var c=new e.WM,a=this.tokenStorage.getToken();return c.set("token",a||"{}")}getAll(c){var a=this.getHeaders();const g=(new e.LE).appendAll(c?{type:c}:{});return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.STATIONS,{params:g,headers:a})}create(c){var a=this.getHeaders();return this.http.post(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.STATIONS,c,{headers:a}).pipe((0,i.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}update(c){var a=this.getHeaders();return this.http.put(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.STATIONS+"/"+c.site_code,c,{headers:a}).pipe((0,i.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}delete(c){var a=this.getHeaders();return this.http.delete(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.STATIONS+"/"+c.site_code,{headers:a})}getRemoteProducts(c){var a=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.REMOTE_PRODUCTS+"/"+c.site_code,{headers:a}).pipe((0,i.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}getRemoteTanks(c){var a=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+"/remoteTanks/"+c.site_code,{headers:a}).pipe((0,i.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}getMapOfProducts(c){var a=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.PRODUCTS_MAPS+"/"+c.site_code,{headers:a})}setMapOfProducts(c,a){var g=this.getHeaders();return this.http.post(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.PRODUCTS_MAPS+"/"+a,c,{headers:g})}setTanksT(c){var a=this.getHeaders();return console.log(typeof c),this.http.post(u._.settings.apiServer.API_URL_BASE+"/remoteTanks",c,{headers:a})}getDevicesStatus(c){var a=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.DEVICES_STATUS+"?site_code="+c,{headers:a})}getAllTanksStatus(){var c=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.STATUS_TANKS,{headers:c})}getTanksStatus(c){var a=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.STATUS_TANKS+"/"+c,{headers:a})}getPumpsStatus(c){var a=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.STATUS_PUMPS+"/"+c,{headers:a})}getPumps(c){var a=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.PUMPS+"/"+c,{headers:a})}syncSingle(c,a){var g=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.SYNC+"?site_code="+c+"&stub="+a,{headers:g}).pipe((0,i.V)(1e4),(0,m.K)(O=>{throw"Error de conexi\xf3n. Detalles: "+O}))}getMarimbas(){var c=this.getHeaders();return this.http.get(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.MARIMBAS,{headers:c})}updateIndexes(c){var a=this.getHeaders();return console.log(a),this.http.put(u._.settings.apiServer.API_URL_BASE+u._.settings.apiServer.INDEXES,c,{headers:a})}}return p.\u0275fac=function(c){return new(c||p)(v.LFG(e.eN),v.LFG(f.i))},p.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);