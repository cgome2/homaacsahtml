"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[8282],{88282:(Z,p,a)=>{a.r(p),a.d(p,{MaintenanceDashboardModule:()=>J});var h=a(69808),s=a(7057),g=a(3299),t=a(5e3),v=a(59968),c=a(30277),f=a(70655),r=a(14499),o=a(88914),d=a(48240),A=a(31819),T=a(26387),E=a(22767),C=a(57261),m=a(97199),U=a(47423),O=a(25245),M=a(92181),I=a(75972);let L=(()=>{class e{constructor(n,i,l,S){this.platformId=n,this.zone=i,this._meansMaintenanceServicesService=l,this.snackbar=S,this.chartdata=[{status:"No requiere servicio pr\xf3ximo",vehicles:0,color:d.$_Y("green"),STATUS:"darkgreen"},{status:"Pr\xf3ximo a servicio requerido",vehicles:0,color:d.$_Y("yellow"),STATUS:"rgb(227,195,65)"},{status:"Servicio urgente requerido",vehicles:0,color:d.$_Y("red"),STATUS:"rgb(165,36,22)"},{status:"Sin configuraci\xf3n de plan de mantenimiento",vehicles:0,color:d.$_Y("#808080"),STATUS:"gray"},{status:"Fuera de alertas",vehicles:0,color:d.$_Y("#d3d3d3"),STATUS:"lightgray"}]}ngOnInit(){return(0,f.mG)(this,void 0,void 0,function*(){yield this._meansMaintenanceServicesService.getAll().toPromise().then(n=>{n.forEach(S=>{var y=this.chartdata.find($=>$.STATUS===S.STATUS);y&&(y.vehicles=+y.vehicles+1)}),d.FgM(T.Z),d.YMi.autoDispose=!0;let i=d.Ue8("chartdiv",A.uc);i.paddingRight=20,i.data=this.chartdata;let l=i.series.push(new A.fW);l.dataFields.value="vehicles",l.dataFields.category="status",l.slices.template.stroke=d.$_Y("#d3d3d3"),l.slices.template.strokeWidth=1,l.slices.template.strokeOpacity=1,l.slices.template.propertyFields.fill="color",i.innerRadius=d.aQA(0),this.chart=i}).catch(n=>{this.snackbar.open(n,null,{duration:5e3,panelClass:["red-snackbar"]})})})}browserOnly(n){(0,h.NF)(this.platformId)&&this.zone.runOutsideAngular(()=>{n()})}ngOnDestroy(){(void 0!==this.chart||null!==this.chart)&&(this.chart.dispose(),d.ODi())}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.Lbi),t.Y36(t.R0b),t.Y36(E.a),t.Y36(C.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["fury-maintenance-status-widget"]],inputs:{update_every_x_seconds:"update_every_x_seconds"},decls:33,vars:2,consts:[["fxFlex","auto"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"card-content"],["id","chartdiv"],[3,"isLoading"],["menu","matMenu"],["mat-menu-item",""],["mat-menu-item","","disabled",""]],template:function(n,i){if(1&n&&(t.TgZ(0,"fury-card",0),t.TgZ(1,"fury-card-header"),t.TgZ(2,"fury-card-header-heading"),t._uU(3," Estatus de mantenimientos vehiculares "),t.qZA(),t.TgZ(4,"fury-card-header-subheading"),t._uU(5," Distribuci\xf3n de parque vehicular por estatus de mantenimiento "),t.qZA(),t.TgZ(6,"fury-card-header-actions"),t.TgZ(7,"button",1),t.NdJ("click",function(){return i.reload()}),t.TgZ(8,"mat-icon"),t._uU(9,"refresh"),t.qZA(),t.qZA(),t.TgZ(10,"button",2),t.TgZ(11,"mat-icon"),t._uU(12,"more_vert"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"fury-card-content",3),t._UZ(14,"div",4),t.qZA(),t._UZ(15,"fury-loading-overlay",5),t.qZA(),t.TgZ(16,"mat-menu",null,6),t.TgZ(18,"button",7),t.TgZ(19,"mat-icon"),t._uU(20,"settings"),t.qZA(),t.TgZ(21,"span"),t._uU(22," Configurar "),t.qZA(),t.qZA(),t.TgZ(23,"button",8),t.TgZ(24,"mat-icon"),t._uU(25," more"),t.qZA(),t.TgZ(26,"span"),t._uU(27," M\xe1s informaci\xf3n "),t.qZA(),t.qZA(),t.TgZ(28,"button",7),t.TgZ(29,"mat-icon"),t._uU(30," remove_circle"),t.qZA(),t.TgZ(31,"span"),t._uU(32," Eliminar Widget "),t.qZA(),t.qZA(),t.qZA()),2&n){const l=t.MAs(17);t.xp6(10),t.Q6J("matMenuTriggerFor",l),t.xp6(5),t.Q6J("isLoading",i.isLoading)}},directives:[m.i0,c.yH,m.$X,m.eP,m.lO,m.OA,U.lW,O.Hw,M.p6,m.z8,I.d,M.VK,M.OP],styles:['.fury-card-header[_ngcontent-%COMP%]{background:#0f192a;color:#f5f5f5}.fury-card-header[_ngcontent-%COMP%]   .fury-card-header-subheading[_ngcontent-%COMP%]{color:#f5f5f5}body[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}#chartdiv[_ngcontent-%COMP%]{width:100%;height:250px}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:scroll;padding:20px;box-shadow:0 6px 6px -3px #0003,0 10px 14px 1px #00000024,0 4px 18px 3px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1);color:#fff}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:3px 0}'],data:{animation:[o.M,r.X]}}),e})();var P=a(37767);const F=[{path:"",component:(()=>{class e{constructor(n,i){this.router=n,this.route=i,this.update_every_x_seconds=10,this._gap=16,this.gap=`${this._gap}px`,/Edge/.test(navigator.userAgent)&&e.isInitialLoad&&(this.router.navigate(["/apps/chat"]).then(()=>{this.router.navigate(["/"])}),e.isInitialLoad=!1)}col(n){return`1 1 calc(${100/n}% - ${this._gap-this._gap/n}px)`}ngOnInit(){this.route.params.subscribe(n=>{this.update_every_x_seconds=10,console.log(n)})}}return e.isInitialLoad=!0,e.\u0275fac=function(n){return new(n||e)(t.Y36(g.F0),t.Y36(g.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["fury-maintenance-dashboard"]],decls:8,vars:7,consts:[["fxLayout","column",1,"dashboard",3,"fxLayoutGap"],["fxFlex","noshrink","fxLayout","column","fxLayout.gt-lg","row",3,"fxLayoutGap"],["fxLayout","row",3,"fxLayoutGap","fxFlex"],["fxFlex","auto",3,"fxFlex.gt-sm"],[1,"fullheight",3,"update_every_x_seconds"],["fxFlex","grow",1,"route-animations-elements"],[1,"fullheight"]],template:function(n,i){1&n&&(t.TgZ(0,"fury-page",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._UZ(4,"fury-maintenance-status-widget",4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",1),t.TgZ(6,"div",5),t._UZ(7,"fury-earlywarning-maintenance-widget",6),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.Q6J("fxLayoutGap",i.gap),t.xp6(1),t.Q6J("fxLayoutGap",i.gap),t.xp6(1),t.Q6J("fxLayoutGap",i.gap)("fxFlex",i.col(4)),t.xp6(1),t.Q6J("fxFlex.gt-sm",i.col(4)),t.xp6(1),t.Q6J("update_every_x_seconds",10),t.xp6(1),t.Q6J("fxLayoutGap",i.gap))},directives:[v.i,c.xw,c.SQ,c.yH,L,P.w],styles:[".config-panel-toggle[_ngcontent-%COMP%]{position:fixed;bottom:140px;right:24px;z-index:100;background-color:#000}"]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(F)],g.Bz]}),e})();var x=a(72467),b=a(93075),D=a(61264),R=a(4940),W=a(74519),B=a(59159);let _=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.ez,b.u5,s.q,W.O,x.Z,R.p,D.J,B.V]]}),e})();var Y=a(64456);let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.ez,s.q,N,x.Z,_,Y.T]]}),e})()},22767:(Z,p,a)=>{a.d(p,{a:()=>v});var h=a(40520),s=a(98545),g=a(5e3),t=a(33344);let v=(()=>{class c{constructor(r,o){this.http=r,this.tokenStorage=o}getHeaders(){var r=new h.WM,o=this.tokenStorage.getToken();return r.set("token",o||"{}")}getAll(r){var o=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.MEANS_MAINTENANCE_SERVICES+("dashboard"===r?"?filter=dashboard":""),{headers:o})}getAllByMeanId(r){var o=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.MEANS_MAINTENANCE_SERVICES+"/"+r,{headers:o})}create(r){var o=this.getHeaders();return this.http.post(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.MEANS_MAINTENANCE_SERVICES,r,{headers:o})}update(r){var o=this.getHeaders();return this.http.put(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.MEANS_MAINTENANCE_SERVICES+"/"+r.id,r,{headers:o})}delete(r){var o=this.getHeaders();return this.http.delete(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.MEANS_MAINTENANCE_SERVICES+"/"+r.id,{headers:o})}}return c.\u0275fac=function(r){return new(r||c)(g.LFG(h.eN),g.LFG(t.i))},c.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);