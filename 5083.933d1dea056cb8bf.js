"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[5083],{88914:(C,m,o)=>{o.d(m,{M:()=>s});var e=o(41777);const s=(0,e.X$)("fadeInRight",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateX(-2vw)",opacity:0}),(0,e.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(C,m,o)=>{o.d(m,{X:()=>s});var e=o(41777);const s=(0,e.X$)("fadeInUp",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateY(3vh)",opacity:0}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateY(0)",opacity:1}))])])},37425:(C,m,o)=>{o.d(m,{K:()=>s});var e=o(41777);const s=(0,e.X$)("scaleIn",[(0,e.eR)(":enter",[(0,e.oB)({transform:"scale(0)"}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"scale(1)"}))])])},38932:(C,m,o)=>{o.d(m,{n:()=>x});var e=o(5e3),s=o(30277),u=o(3299),p=o(69808),d=o(25245);function g(y,U){if(1&y&&(e.TgZ(0,"div",7),e.TgZ(1,"mat-icon",5),e._uU(2,"chevron_right"),e.qZA(),e.TgZ(3,"div",6),e._uU(4),e.qZA(),e.qZA()),2&y){const c=U.$implicit;e.xp6(4),e.Oqu(c)}}const h=function(){return["/"]};let x=(()=>{class y{constructor(){this.crumbs=[]}ngOnInit(){}}return y.\u0275fac=function(c){return new(c||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(c,Z){1&c&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"a",2),e._uU(4,"Home"),e.qZA(),e.YNc(5,g,5,1,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"mat-icon",5),e._uU(8,"chevron_right"),e.qZA(),e.TgZ(9,"div",6),e._uU(10),e.qZA(),e.qZA(),e.qZA()),2&c&&(e.xp6(1),e.Oqu(Z.current),e.xp6(2),e.Q6J("routerLink",e.DdM(4,h)),e.xp6(2),e.Q6J("ngForOf",Z.crumbs),e.xp6(5),e.Oqu(Z.current))},directives:[s.xw,s.Wh,u.yS,p.sg,d.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),y})()},94927:(C,m,o)=>{o.d(m,{n:()=>F});var e=o(5e3),s=o(23753),u=o(75778),p=o(80013),d=o(69808),g=o(92181),h=o(30277),x=o(25245),y=o(47423),U=o(77446),c=o(93075);const Z=["filter"];function A(b,T){if(1&b&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"mat-icon",8),e._uU(5,"search"),e.qZA(),e._UZ(6,"input",9,10),e.qZA(),e.TgZ(8,"button",11),e.TgZ(9,"mat-icon"),e._uU(10,"filter_list"),e.qZA(),e.qZA(),e.Hsn(11,1),e.qZA()),2&b){const t=e.oxw(),f=e.MAs(3);e.xp6(2),e.Oqu(t.name),e.xp6(6),e.Q6J("matMenuTriggerFor",f)}}function E(b,T){if(1&b){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(v){const P=e.CHM(t).$implicit;return e.oxw().toggleColumnVisibility(P,v)}),e.TgZ(1,"mat-checkbox",13,14),e.NdJ("ngModelChange",function(v){return e.CHM(t).$implicit.visible=v})("click",function(v){return v.stopPropagation()}),e._uU(3),e.qZA(),e.qZA()}if(2&b){const t=T.$implicit;e.xp6(1),e.Q6J("ngModel",t.visible),e.xp6(2),e.hij(" ",t.name," ")}}const D=["*",[["",8,"actions"]]],M=["*",".actions"];let F=(()=>{class b{constructor(){this.filterChange=new e.vpe}ngAfterViewInit(){this.hideHeader||(0,s.R)(this.filter.nativeElement,"keyup").pipe((0,u.x)(),(0,p.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(t,f){f.stopPropagation(),f.stopImmediatePropagation(),t.visible=!t.visible}}return b.\u0275fac=function(t){return new(t||b)},b.\u0275cmp=e.Xpm({type:b,selectors:[["fury-list"]],viewQuery:function(t,f){if(1&t&&e.Gf(Z,5),2&t){let v;e.iGM(v=e.CRH())&&(f.filter=v.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:M,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(t,f){1&t&&(e.F$t(D),e.TgZ(0,"div",0),e.YNc(1,A,12,2,"div",1),e.TgZ(2,"mat-menu",2,3),e.YNc(4,E,4,2,"button",4),e.qZA(),e.Hsn(5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!f.hideHeader),e.xp6(3),e.Q6J("ngForOf",f.columns))},directives:[d.O5,g.VK,d.sg,h.xw,h.Wh,h.SQ,h.yH,x.Hw,y.lW,g.p6,U.oG,c.JJ,c.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),b})()},4940:(C,m,o)=>{o.d(m,{p:()=>d});var e=o(69808),s=o(93075),u=o(7057),p=o(5e3);let d=(()=>{class g{}return g.\u0275fac=function(x){return new(x||g)},g.\u0275mod=p.oAB({type:g}),g.\u0275inj=p.cJS({imports:[[e.ez,u.q,s.u5]]}),g})()},19165:(C,m,o)=>{o.d(m,{d:()=>s});var e=o(5e3);let s=(()=>{class u{constructor(){}}return u.\u0275fac=function(d){return new(d||u)},u.\u0275dir=e.lG2({type:u,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),u})()},53580:(C,m,o)=>{o.d(m,{U:()=>s});var e=o(5e3);let s=(()=>{class u{constructor(){}}return u.\u0275fac=function(d){return new(d||u)},u.\u0275dir=e.lG2({type:u,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),u})()},39762:(C,m,o)=>{o.d(m,{N:()=>s});var e=o(5e3);let s=(()=>{class u{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return u.\u0275fac=function(d){return new(d||u)},u.\u0275dir=e.lG2({type:u,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(d,g){2&d&&e.ekj("fury-page-layout-card",g.isCard)("fury-page-layout-simple",g.isSimple)},inputs:{mode:"mode"}}),u})()},59968:(C,m,o)=>{o.d(m,{i:()=>s});var e=o(5e3);let s=(()=>{class u{constructor(){}}return u.\u0275fac=function(d){return new(d||u)},u.\u0275dir=e.lG2({type:u,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),u})()},95083:(C,m,o)=>{o.r(m),o.d(m,{UsersTableModule:()=>yt});var e=o(69808),s=o(93075),u=o(61264),p=o(4940),d=o(7057),g=o(72467),h=o(3299),x=o(70655),y=o(86087),U=o(84847),c=o(32075),Z=o(96831),A=o(92198),E=o(88914),D=o(14499),M=o(48966),F=o(37425),b=o(84872),t=o(5e3),f=o(57261),v=o(92660),w=o(24333),P=o(59968),W=o(36551),S=o(25245),I=o(92081),L=o(30277),O=o(67322),G=o(77531),B=o(47423),q=o(74107),Q=o(77446),k=o(32368),H=o(90508);function K(n,i){1&n&&t._uU(0,"Datos del usuario")}function Y(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const r=t.oxw();t.xp6(1),t.Oqu(r.generalFormGroup.get("password").errors.weakPassword)}}function $(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const r=t.oxw();t.xp6(1),t.Oqu(r.generalFormGroup.get("confirm_password").errors.differentPasswords)}}function j(n,i){if(1&n&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&n){const r=i.$implicit;t.Q6J("value",r.id),t.xp6(1),t.Oqu(r.name)}}let N=(()=>{class n{constructor(r,a,l,_,J){this.data=r,this.dialogRef=a,this.snackbar=l,this._profilesService=_,this.usersService=J,this.active_label="Activo",this.allowCreateUser=!1,this.hide=!0,this.hidetoo=!0,this.generalFormGroup=new s.cw({user_id:new s.NI,user:new s.NI("",[s.kI.required,s.kI.pattern("^[a-zA-Zd_.@-]{8,}$")]),name:new s.NI("",[s.kI.required]),email:new s.NI("",[s.kI.required,s.kI.email]),phone:new s.NI(""),password:new s.NI(""),confirm_password:new s.NI(""),profile_id:new s.NI("1",[s.kI.required]),employee_id:new s.NI,require_change_password:new s.NI(!0),status:new s.NI(!0)},function T(){return n=>{const i=n.controls.password,r=n.controls.confirm_password;!new RegExp(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/).test(i.value)&&i.value.length>0?i.setErrors({weakPassword:"Al menos 8 caracteres y al menos: 1 n\xfamero, 1 may\xfascula, 1 min\xfascula y un caracter especial"}):i.setErrors(null),r.setErrors(i.value===r.value||""===r.value&&""===i.value?null:{differentPasswords:"Los passwords no coincideen"})}}()),this.theUser=new b.n,this.profiles=[],this.dialogRef.disableClose=!0}ngOnInit(){return(0,x.mG)(this,void 0,void 0,function*(){this.profiles=yield this.getProfiles(),console.log(this.profiles),null!=this.data?(this.theUser=this.data,this.generalFormGroup.patchValue({user_id:this.theUser.user_id,user:this.theUser.user,name:this.theUser.name,email:this.theUser.email,phone:this.theUser.phone,profile_id:this.theUser.profile_id.toString(),employee_id:this.theUser.employee_id,require_change_password:1===this.theUser.require_change_password,status:2===this.theUser.status}),this.generalFormGroup.get("user").disable()):this.generalFormGroup.get("require_change_password").disable()})}getProfiles(){return(0,x.mG)(this,void 0,void 0,function*(){return yield this._profilesService.getAll().toPromise()})}submit(){this.theUser.user=this.generalFormGroup.controls.user.value,this.theUser.name=this.generalFormGroup.controls.name.value,this.theUser.email=this.generalFormGroup.controls.email.value,this.theUser.phone=this.generalFormGroup.controls.phone.value,this.theUser.password=this.generalFormGroup.controls.password.value,this.theUser.profile_id=this.generalFormGroup.controls.profile_id.value,this.theUser.employee_id=this.generalFormGroup.controls.employee_id.value,this.theUser.require_change_password=this.generalFormGroup.controls.require_change_password.value?1:0,this.theUser.status=this.generalFormGroup.controls.status.value?2:1,console.log(this.theUser),this.theUser.user_id>0?(console.log(JSON.stringify(this.theUser)),this.updateUser()):this.createUser()}close(){this.dialogRef.close()}createUser(){this.usersService.create(this.theUser).subscribe(r=>{this.snackbar.open(r.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"create",data:this.theUser})},r=>{this.snackbar.open(r.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateUser(){this.usersService.updateUser(this.theUser).subscribe(r=>{this.snackbar.open(r.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"update",data:this.theUser})},r=>{this.snackbar.open(r.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}setActiveUser(r){this.active_label=r.checked?"Activo":"Inactivo"}onChangeProfile(r){console.log(r)}}return n.\u0275fac=function(r){return new(r||n)(t.Y36(M.WI),t.Y36(M.so),t.Y36(f.ux),t.Y36(v.L),t.Y36(w.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["fury-form-wizard"]],decls:69,vars:19,consts:[[1,"title"],[1,"card"],[3,"linear"],["stepper","matVerticalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["fxLayout","row","fxLayoutGap","8px",1,"content"],["appearance","outline","fxFlex","auto"],["formControlName","name","matInput","","required",""],["formControlName","user","matInput","","required",""],["formControlName","phone","matInput","","required",""],["formControlName","email","matInput","","required",""],["matInput","","formControlName","password","matInput","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],[4,"ngIf"],["matInput","","formControlName","confirm_password","matInput","",3,"type"],["formControlName","profile_id",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","employee_id","matInput",""],["color","primary","formControlName","require_change_password",1,"checkbox"],["color","primary","formControlName","status",1,"slide-toggle",3,"change"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","","type","button",3,"click"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled","click"],[3,"value"]],template:function(r,a){1&r&&(t.TgZ(0,"fury-page"),t.TgZ(1,"fury-title",0),t.TgZ(2,"mat-icon"),t._uU(3,"account_circle"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Asistente para crear usuarios"),t.qZA(),t.qZA(),t.TgZ(6,"div",1),t.TgZ(7,"mat-horizontal-stepper",2,3),t.TgZ(9,"mat-step",4),t.TgZ(10,"form",5),t.YNc(11,K,1,0,"ng-template",6),t.TgZ(12,"div",7),t.TgZ(13,"mat-form-field",8),t.TgZ(14,"mat-label"),t._uU(15,"Nombre:"),t.qZA(),t._UZ(16,"input",9),t.qZA(),t.TgZ(17,"mat-form-field",8),t.TgZ(18,"mat-label"),t._uU(19,"Usuario:"),t.qZA(),t._UZ(20,"input",10),t.TgZ(21,"mat-hint"),t._uU(22,"Debe contener al menos 8 caracteres."),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",7),t.TgZ(24,"mat-form-field",8),t.TgZ(25,"mat-label"),t._uU(26,"Tel\xe9fono:"),t.qZA(),t._UZ(27,"input",11),t.qZA(),t.TgZ(28,"mat-form-field",8),t.TgZ(29,"mat-label"),t._uU(30,"Correo electr\xf3nico:"),t.qZA(),t._UZ(31,"input",12),t.qZA(),t.qZA(),t.TgZ(32,"div",7),t.TgZ(33,"mat-form-field",8),t.TgZ(34,"mat-label"),t._uU(35,"Password:"),t.qZA(),t._UZ(36,"input",13),t.TgZ(37,"button",14),t.NdJ("click",function(){return a.hide=!a.hide}),t.TgZ(38,"mat-icon"),t._uU(39),t.qZA(),t.qZA(),t.YNc(40,Y,2,1,"mat-error",15),t.qZA(),t.TgZ(41,"mat-form-field",8),t.TgZ(42,"mat-label"),t._uU(43,"Confirmar password:"),t.qZA(),t._UZ(44,"input",16),t.TgZ(45,"button",14),t.NdJ("click",function(){return a.hidetoo=!a.hidetoo}),t.TgZ(46,"mat-icon"),t._uU(47),t.qZA(),t.qZA(),t.YNc(48,$,2,1,"mat-error",15),t.qZA(),t.qZA(),t.TgZ(49,"div",7),t.TgZ(50,"mat-form-field",8),t.TgZ(51,"mat-label"),t._uU(52,"Perfil:"),t.qZA(),t.TgZ(53,"mat-select",17),t.NdJ("selectionChange",function(_){return a.onChangeProfile(_)}),t.YNc(54,j,2,2,"mat-option",18),t.qZA(),t.qZA(),t.TgZ(55,"mat-form-field",8),t.TgZ(56,"mat-label"),t._uU(57,"N\xfamero de empleado:"),t.qZA(),t._UZ(58,"input",19),t.qZA(),t.qZA(),t.TgZ(59,"div",7),t.TgZ(60,"mat-checkbox",20),t._uU(61,"Solicitar cambio de password"),t.qZA(),t.TgZ(62,"mat-slide-toggle",21),t.NdJ("change",function(_){return a.setActiveUser(_)}),t._uU(63),t.qZA(),t.qZA(),t.TgZ(64,"div",22),t.TgZ(65,"button",23),t.NdJ("click",function(){return a.close()}),t._uU(66,"CANCELAR"),t.qZA(),t.TgZ(67,"button",24),t.NdJ("click",function(){return a.submit()}),t._uU(68,"GUARDAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(2),t.Q6J("@scaleIn",void 0),t.xp6(2),t.Q6J("@fadeInRight",void 0),t.xp6(2),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("linear",!0),t.xp6(2),t.Q6J("stepControl",a.generalFormGroup),t.xp6(1),t.Q6J("formGroup",a.generalFormGroup),t.xp6(26),t.Q6J("type",a.hide?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",a.hide),t.xp6(2),t.Oqu(a.hide?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",a.generalFormGroup.get("password").errors),t.xp6(4),t.Q6J("type",a.hidetoo?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",a.hidetoo),t.xp6(2),t.Oqu(a.hidetoo?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",a.generalFormGroup.get("confirm_password").errors),t.xp6(6),t.Q6J("ngForOf",a.profiles),t.xp6(9),t.Oqu(a.active_label),t.xp6(4),t.Q6J("disabled",a.generalFormGroup.invalid))},directives:[P.i,W.M,S.Hw,I.Vq,I.C0,s._Y,s.JL,s.sg,I.VY,L.xw,L.SQ,O.KE,L.yH,O.hX,s.Fj,G.Nt,s.JJ,s.u,s.Q7,O.bx,B.lW,O.R9,e.O5,q.gD,e.sg,Q.oG,k.Rr,L.Wh,I.Ic,O.TO,H.ey],styles:[".title[_ngcontent-%COMP%]{color:#000}.fury-page[_ngcontent-%COMP%]{padding:4px}.card[_ngcontent-%COMP%]{margin:10px;max-width:100%;border-radius:8px;overflow:scroll;box-shadow:0 10px 13px -6px #0003,0 20px 31px 3px #00000024,0 8px 38px 7px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px;width:50%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:24px 8px 0}.copyright[_ngcontent-%COMP%]{position:absolute;bottom:24px;right:24px;color:#fff}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}"],data:{animation:[D.X,E.M,F.K]}}),n})();var X=o(39762),V=o(53580),tt=o(38932),et=o(19165),rt=o(94927),R=o(92181);function ot(n,i){if(1&n&&(t.TgZ(0,"th",17),t._uU(1),t.qZA()),2&n){const r=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",r.name,"")}}function nt(n,i){if(1&n&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&n){const r=i.$implicit,a=t.oxw(2).$implicit,l=t.oxw();t.xp6(1),t.hij(" ",l.getLabel(a.name,r[a.property])," ")}}function at(n,i){if(1&n&&(t.ynx(0,14),t.YNc(1,ot,2,1,"th",15),t.YNc(2,nt,2,1,"td",16),t.BQk()),2&n){const r=t.oxw().$implicit;t.Q6J("matColumnDef",r.property)}}function st(n,i){if(1&n&&(t.ynx(0),t.YNc(1,at,3,1,"ng-container",13),t.BQk()),2&n){const r=i.$implicit;t.xp6(1),t.Q6J("ngIf",r.isModelProperty)}}function it(n,i){1&n&&t._UZ(0,"th",19)}function lt(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(r);const l=t.oxw().$implicit;return t.oxw().changeStatusOfUser(l)}),t.TgZ(1,"span"),t._uU(2,"Activar"),t.qZA(),t.qZA()}}function ut(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(r);const l=t.oxw().$implicit;return t.oxw().changeStatusOfUser(l)}),t.TgZ(1,"span"),t._uU(2,"Desactivar"),t.qZA(),t.qZA()}}function ct(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"td",20),t.TgZ(1,"button",21),t.NdJ("click",function(l){return l.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.TgZ(4,"mat-menu",22,23),t.TgZ(6,"button",24),t.NdJ("click",function(){const _=t.CHM(r).$implicit;return t.oxw().updateUser(_)}),t.TgZ(7,"span"),t._uU(8,"Editar"),t.qZA(),t.qZA(),t.YNc(9,lt,3,0,"button",25),t.YNc(10,ut,3,0,"button",25),t.qZA(),t.qZA()}if(2&n){const r=i.$implicit,a=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",a),t.xp6(8),t.Q6J("ngIf",2!==r.status),t.xp6(1),t.Q6J("ngIf",2===r.status)}}function mt(n,i){1&n&&t._UZ(0,"tr",26)}function dt(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"tr",27),t.NdJ("click",function(){const _=t.CHM(r).$implicit;return t.oxw().updateUser(_)}),t.qZA()}}const pt=function(){return["Tables"]},gt=[{path:"",component:(()=>{class n{constructor(r,a,l,_){this.dialog=r,this.usersService=a,this.snackbar=l,this._profilesService=_,this.subject$=new Z.t(1),this.data$=this.subject$.asObservable(),this.profiles=[],this.columns=[{name:"User Id",property:"user_id",visible:!1,isModelProperty:!0},{name:"Nombre",property:"name",visible:!0,isModelProperty:!0},{name:"User",property:"user",visible:!0,isModelProperty:!0},{name:"Perfil",property:"profile_id",visible:!0,isModelProperty:!0},{name:"Estatus",property:"status",visible:!0,isModelProperty:!0},{name:"Creado",property:"created",visible:!1,isModelProperty:!0},{name:"\xdaltima actualizaci\xf3n",property:"last_updated",visible:!1,isModelProperty:!0},{name:"Id empleado",property:"employee_id",visible:!0,isModelProperty:!0},{name:"\xdaltima sesi\xf3n",property:"last_session",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(r,a){if(null!=r)return"Perfil"==r?this.profiles.find(l=>l.id==a).name:"Estatus"==r?2==a?"Activo":"Inactivo":a}get visibleColumns(){return this.columns.filter(r=>r.visible).map(r=>r.property)}getData(){this.usersService.getAll().subscribe(r=>{this.users=r,this.dataSource=new c.by(r),this.dataSource=new c.by(this.users),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},r=>{console.log(r)})}ngOnInit(){return(0,x.mG)(this,void 0,void 0,function*(){this.dataSource=new c.by,this.profiles=yield this.getProfiles(),this.getData(),this.data$.pipe((0,A.h)(r=>!!r)).subscribe(r=>{this.users=this.users,this.dataSource.data=this.users})})}getProfiles(){return(0,x.mG)(this,void 0,void 0,function*(){return yield this._profilesService.getAll().toPromise()})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createUser(){this.dialog.open(N).afterClosed().subscribe(r=>{r&&(this.subject$.next(this.users),this.getData(),this.data$.pipe((0,A.h)(a=>!!a)).subscribe(a=>{this.users=a,this.dataSource.data=a}))})}updateUser(r){this.dialog.open(N,{data:r}).afterClosed().subscribe(a=>{a&&(this.subject$.next(this.users),this.getData(),this.data$.pipe((0,A.h)(l=>!!l)).subscribe(l=>{this.users=l,this.dataSource.data=l}))})}changeStatusOfUser(r){r.status=2==r.status?1:2,r.password="",this.updateTheUser(r)}deleteUser(r){r.status=0,this.updateTheUser(r)}updateTheUser(r){console.log("updateTheUser",r),this.usersService.updateUser(r).subscribe(a=>{this.snackbar.open(a.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.subject$.next(this.users),this.getData(),this.data$.pipe((0,A.h)(l=>!!l)).subscribe(l=>{this.users=l,this.dataSource.data=l})},a=>{this.snackbar.open(a.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}onFilterChange(r){!this.dataSource||(r=(r=r.trim()).toLowerCase(),this.dataSource.filter=r)}ngOnDestroy(){}}return n.\u0275fac=function(r){return new(r||n)(t.Y36(M.uw),t.Y36(w.f),t.Y36(f.ux),t.Y36(v.L))},n.\u0275cmp=t.Xpm({type:n,selectors:[["users-table"]],viewQuery:function(r,a){if(1&r&&(t.Gf(y.NW,7),t.Gf(U.YE,7)),2&r){let l;t.iGM(l=t.CRH())&&(a.paginator=l.first),t.iGM(l=t.CRH())&&(a.sort=l.first)}},inputs:{columns:"columns"},decls:17,vars:10,consts:[["mode","card"],["current","Usuarios",3,"crumbs"],["name","Usuarios",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(r,a){1&r&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-header"),t._UZ(2,"fury-breadcrumbs",1),t.qZA(),t.TgZ(3,"fury-page-layout-content"),t.TgZ(4,"fury-list",2),t.NdJ("filterChange",function(_){return a.onFilterChange(_)}),t.TgZ(5,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return a.createUser()}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"table",5),t.YNc(10,st,2,1,"ng-container",6),t.ynx(11,7),t.YNc(12,it,1,0,"th",8),t.YNc(13,ct,11,3,"td",9),t.BQk(),t.YNc(14,mt,1,0,"tr",10),t.YNc(15,dt,1,0,"tr",11),t.qZA(),t._UZ(16,"mat-paginator",12),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(2),t.Q6J("@fadeInRight",void 0)("crumbs",t.DdM(9,pt)),t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("columns",a.columns),t.xp6(5),t.Q6J("dataSource",a.dataSource),t.xp6(1),t.Q6J("ngForOf",a.columns),t.xp6(4),t.Q6J("matHeaderRowDef",a.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.visibleColumns),t.xp6(1),t.Q6J("pageSize",a.pageSize))},directives:[X.N,V.U,tt.n,et.d,rt.n,B.lW,S.Hw,c.BZ,U.YE,e.sg,c.w1,c.fO,c.Dz,c.as,c.nj,y.NW,e.O5,c.ge,U.nU,c.ev,R.p6,R.VK,R.OP,c.XQ,c.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[E.M,D.X]}}),n})()}];let ft=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.Bz.forChild(gt)],h.Bz]}),n})();const _t=[{path:"",component:N}];let z=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.Bz.forChild(_t)],h.Bz]}),n})(),ht=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[e.ez,z,g.Z,s.UX,d.q]]}),n})(),yt=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[e.ez,s.u5,u.J,p.p,d.q,g.Z,ft,ht,z]]}),n})()}}]);