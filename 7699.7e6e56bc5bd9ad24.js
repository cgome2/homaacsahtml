"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[7699],{88914:(Z,f,n)=>{n.d(f,{M:()=>i});var s=n(41777);const i=(0,s.X$)("fadeInRight",[(0,s.eR)(":enter",[(0,s.oB)({transform:"translateX(-2vw)",opacity:0}),(0,s.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,s.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(Z,f,n)=>{n.d(f,{X:()=>i});var s=n(41777);const i=(0,s.X$)("fadeInUp",[(0,s.eR)(":enter",[(0,s.oB)({transform:"translateY(3vh)",opacity:0}),(0,s.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,s.oB)({transform:"translateY(0)",opacity:1}))])])},38932:(Z,f,n)=>{n.d(f,{n:()=>u});var s=n(5e3),i=n(30277),p=n(3299),h=n(69808),_=n(25245);function g(l,v){if(1&l&&(s.TgZ(0,"div",7),s.TgZ(1,"mat-icon",5),s._uU(2,"chevron_right"),s.qZA(),s.TgZ(3,"div",6),s._uU(4),s.qZA(),s.qZA()),2&l){const m=v.$implicit;s.xp6(4),s.Oqu(m)}}const T=function(){return["/"]};let u=(()=>{class l{constructor(){this.crumbs=[]}ngOnInit(){}}return l.\u0275fac=function(m){return new(m||l)},l.\u0275cmp=s.Xpm({type:l,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(m,b){1&m&&(s.TgZ(0,"div",0),s._uU(1),s.qZA(),s.TgZ(2,"div",1),s.TgZ(3,"a",2),s._uU(4,"Home"),s.qZA(),s.YNc(5,g,5,1,"div",3),s.TgZ(6,"div",4),s.TgZ(7,"mat-icon",5),s._uU(8,"chevron_right"),s.qZA(),s.TgZ(9,"div",6),s._uU(10),s.qZA(),s.qZA(),s.qZA()),2&m&&(s.xp6(1),s.Oqu(b.current),s.xp6(2),s.Q6J("routerLink",s.DdM(4,T)),s.xp6(2),s.Q6J("ngForOf",b.crumbs),s.xp6(5),s.Oqu(b.current))},directives:[i.xw,i.Wh,p.yS,h.sg,_.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),l})()},4940:(Z,f,n)=>{n.d(f,{p:()=>_});var s=n(69808),i=n(93075),p=n(7057),h=n(5e3);let _=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275mod=h.oAB({type:g}),g.\u0275inj=h.cJS({imports:[[s.ez,p.q,i.u5]]}),g})()},53580:(Z,f,n)=>{n.d(f,{U:()=>i});var s=n(5e3);let i=(()=>{class p{constructor(){}}return p.\u0275fac=function(_){return new(_||p)},p.\u0275dir=s.lG2({type:p,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),p})()},39762:(Z,f,n)=>{n.d(f,{N:()=>i});var s=n(5e3);let i=(()=>{class p{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return p.\u0275fac=function(_){return new(_||p)},p.\u0275dir=s.lG2({type:p,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(_,g){2&_&&s.ekj("fury-page-layout-card",g.isCard)("fury-page-layout-simple",g.isSimple)},inputs:{mode:"mode"}}),p})()},47699:(Z,f,n)=>{n.r(f),n.d(f,{ProductsTableModule:()=>It});var s=n(69808),i=n(93075),p=n(61264),h=n(4940),_=n(7057),g=n(72467),T=n(3299),u=n(70655),l=n(86087),v=n(84847),m=n(32075),b=n(96831),U=n(92198),F=n(88914),L=n(14499),P=n(50150),C=n(48966),B=n(37425),x=n(74138);class O{constructor(a){this.cv_producto=new x.f,this.id=a&&a.id||null,this.name=a&&a.name||null,this.type=a&&a.type||null,this.code=a&&a.code||null,this.code2=a&&a.code2||null,this.code3=a&&a.code3||null,this.color=a&&a.color||null,this.sg=a&&a.sg||null,this.sg_temperature=a&&a.sg_temperature||null,this.sg_timestamp=a&&a.sg_timestamp||null,this.sg_user_id=a&&a.sg_user_id||null,this.sg_user=a&&a.sg_user||null,this.sg_observations=a&&a.sg_observations||null,this.cv_producto=a&&a.cv_producto||new x.f}}var t=n(5e3),Y=n(57261),N=n(9360),q=n(33344),w=n(49646),$=n(59968),k=n(36551),E=n(25245),A=n(30277),M=n(67322),R=n(77531),J=n(74107),W=n(4834),I=n(47423),H=n(90508);const G=["productsModalForm"];function K(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.productsModalForm.get("name").getError("nameNotNull"))}}function z(o,a){if(1&o&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function j(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Se\xf1alar c\xf3digo principal de producto."),t.qZA())}function X(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Se\xf1alar c\xf3digo alternativo de combustible."),t.qZA())}function V(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Se\xf1alar c\xf3digo alternativo de combustible."),t.qZA())}function tt(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.productsModalForm.get("sg").getError("numeric"))}}function et(o,a){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.productsModalForm.get("sg_temperature").getError("numeric"))}}let D=(()=>{class o{constructor(e,r,c,d,y,Dt,St){this.data=e,this.dialogRef=r,this.dialogAddCompound=c,this.snackbar=d,this._productsService=y,this._tokenStorageService=Dt,this._typesOfProductService=St,this.title="Productos",this.mode="create",this.types=[],this.product_color=new P.Il(0,0,0),this.product=new O,this.truefalse=[{val:0,label:"No"},{val:1,label:"Si"}],r.disableClose=!0,this.productsModalForm=new i.cw({id:new i.NI(null),name:new i.NI("",[i.kI.required]),type:new i.NI("",[i.kI.required]),code:new i.NI("",[i.kI.required]),code2:new i.NI,code3:new i.NI,color:new i.NI(new P.Il(0,0,0),[i.kI.required]),sg:new i.NI,sg_temperature:new i.NI,sg_user:new i.NI({value:"",disabled:!0}),sg_observations:new i.NI},function Q(){return o=>{const a=o.controls.name,e=o.controls.sg,r=o.controls.sg_temperature,c=new RegExp(/^((0([\.][0-9]{1,})?)||([1-9]([0-9]{1,})?([\.][0-9]{1,})?))$/);if(""==a.value)return a.setErrors({nameNotNull:"El nombre del producto es obligatorio"}),e.setErrors(null),void r.setErrors(null);a.setErrors(null),e.value||r.value?""!==e.value&&""===r.value||""===e.value&&""!==r.value?(e.setErrors({numeric:"Si el factor o la temperatura son definidos, ambos deben ser definidos"}),r.setErrors({numeric:"Si el factor o la temperatura son definidos, ambos deben ser definidos"})):""!=e.value&&""!=r.value?(c.test(e.value)&&+e.value<=1&&+e.value>0?e.setErrors(null):e.setErrors({numeric:"Debe ser num\xe9rico y un valor entre 0 y 1"}),c.test(r.value)&&+r.value>=15&&+r.value<=20?r.setErrors(null):r.setErrors({numeric:"Debe ser num\xe9rico y un valor entre 15 y 20 grados celsius"})):""==e.value&&""==r.value&&(e.setErrors(null),r.setErrors(null)):(e.setErrors(null),r.setErrors(null))}}()),this.productsModalForm.controls.sg_user.disable()}ngOnInit(){return(0,u.mG)(this,void 0,void 0,function*(){this.types=yield this.getTypesOfProduct(),this.data&&(this.mode="update",this.product=this.data,this.product_color=this.hexToColor(this.product.color),this.productsModalForm.setValue({id:this.product.id,name:this.product.name,type:+this.product.type,code:this.product.code,code2:this.product.code2,code3:this.product.code3,color:this.product_color,sg:this.product.sg,sg_temperature:this.product.sg_temperature,sg_user:this.product.sg_user,sg_observations:this.product.sg_observations}),this.productsModalForm.controls.sg_user.disable())})}getTypesOfProduct(){return(0,u.mG)(this,void 0,void 0,function*(){return this._typesOfProductService.getAll().toPromise()})}submit(){this.product.name=this.productsModalForm.value.name,this.product.type=this.productsModalForm.value.type,this.product.code=this.productsModalForm.value.code,this.product.code2=this.productsModalForm.value.code2,this.product.code3=this.productsModalForm.value.code3,this.product.color="#"+this.productsModalForm.value.color.hex,this.product.sg=this.productsModalForm.value.sg,this.product.sg_temperature=this.productsModalForm.value.sg_temperature,this.product.sg_user_id=this.productsModalForm.value.sg_user,this.product.sg_user=this.productsModalForm.value.sg_user,this.product.sg_observations=this.productsModalForm.value.sg_observations;let e=this._tokenStorageService.getUser();this.product.sg_user_id=e.user_id,this.product.sg_user=e.user,console.log(this.product),"create"===this.mode?this.createProduct():this.updateProduct()}createProduct(){this._productsService.createProduct(this.product).subscribe(e=>{this.snackbar.open(e.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.product.id=e.product_id,this.data=this.product,this.ngOnInit()},e=>{this.snackbar.open(e.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateProduct(){this._productsService.updateProduct(this.product).subscribe(e=>{console.log(e),"rc0"===e.code&&(this.snackbar.open(e.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"update",data:this.product}))},e=>{this.snackbar.open(e.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}close(){this.dialogRef.close({action:"cancel",data:this.product})}hexToColor(e){var d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(e),y=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(e);return d?new P.Il(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)):y?new P.Il(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16),parseInt(d[4],16)):new P.Il(0,0,0)}numbersDots(e){let r=e.target.value+e.key,c=new RegExp(/^([1-9][0-9]{0,7}||[0]||[0][.][0-9]{0,6}||[1-9][0-9]{0,7}[.][0-9]{0,6})$/);return console.log("capturado:",r),!!c.test(r)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.WI),t.Y36(C.so),t.Y36(C.uw),t.Y36(Y.ux),t.Y36(N.s),t.Y36(q.i),t.Y36(w.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["products-modal"]],viewQuery:function(e,r){if(1&e&&t.Gf(G,5),2&e){let c;t.iGM(c=t.CRH())&&(r._focusMe=c.first)}},decls:79,vars:17,consts:[[2,"padding","1px","display","block"],[1,"title"],[1,"card"],[1,"product-form",3,"formGroup"],["fxLayout","row","fxLayoutGap","8px",1,"content",2,"margin-top","20px"],["appearance","outline","fxFlex","auto"],["formControlName","name","matInput","","required",""],[4,"ngIf"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",2,"max-width","200px"],["matInput","","formControlName","color",3,"ngxMatColorPicker","readonly"],["matPrefix","",3,"for"],[3,"touchUi","color"],["picker",""],["formControlName","code","matInput","","required",""],["formControlName","code2","matInput",""],["formControlName","code3","matInput",""],["fxLayout","column","fxLayoutGap","8px",1,"content",2,"margin-top","20px"],[1,"subheading",2,"margin-top","20px"],["fxLayout","row","fxLayoutGap","30px",1,"content",2,"margin-top","20px"],["formControlName","sg","matInput","",3,"keypress"],["formControlName","sg_temperature","matInput","",3,"keypress"],["fxLayout","row","fxLayoutGap","20px",1,"content"],["formControlName","sg_observations","matInput",""],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","",3,"click"],["color","primary","mat-raised-button","",3,"disabled","click"],[3,"value"]],template:function(e,r){if(1&e&&(t.TgZ(0,"fury-page",0),t.TgZ(1,"fury-title",1),t.TgZ(2,"mat-icon"),t._uU(3,"water_drop"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Detalle de control volum\xe9trico para productos"),t.qZA(),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"form",3),t.TgZ(8,"div",4),t.TgZ(9,"mat-form-field",5),t.TgZ(10,"mat-label"),t._uU(11,"Nombre"),t.qZA(),t._UZ(12,"input",6),t.TgZ(13,"mat-hint"),t._uU(14,"Se\xf1alar nombre de producto."),t.qZA(),t.YNc(15,K,2,1,"mat-error",7),t.qZA(),t.TgZ(16,"mat-form-field",5),t.TgZ(17,"mat-label"),t._uU(18,"Tipo:"),t.qZA(),t.TgZ(19,"mat-select",8),t.YNc(20,z,2,2,"mat-option",9),t.qZA(),t.qZA(),t.TgZ(21,"mat-form-field",10),t.TgZ(22,"mat-label"),t._uU(23,"Color identificador:"),t.qZA(),t._UZ(24,"input",11),t._UZ(25,"ngx-mat-color-toggle",12),t._UZ(26,"ngx-mat-color-picker",13,14),t.qZA(),t.qZA(),t.TgZ(28,"div",4),t.TgZ(29,"mat-form-field",5),t.TgZ(30,"mat-label"),t._uU(31,"C\xf3digo:"),t.qZA(),t._UZ(32,"input",15),t.TgZ(33,"mat-hint"),t._uU(34,"C\xf3digo principal de producto."),t.qZA(),t.YNc(35,j,2,0,"mat-error",7),t.qZA(),t.TgZ(36,"mat-form-field",5),t.TgZ(37,"mat-label"),t._uU(38,"C\xf3digo 2:"),t.qZA(),t._UZ(39,"input",16),t.TgZ(40,"mat-hint"),t._uU(41,"Se\xf1alar c\xf3digo alternativo de combustible."),t.qZA(),t.YNc(42,X,2,0,"mat-error",7),t.qZA(),t.TgZ(43,"mat-form-field",5),t.TgZ(44,"mat-label"),t._uU(45,"C\xf3digo 3:"),t.qZA(),t._UZ(46,"input",17),t.TgZ(47,"mat-hint"),t._uU(48,"Se\xf1alar c\xf3digo alternativo de combustible."),t.qZA(),t.YNc(49,V,2,0,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(50,"div",18),t._UZ(51,"mat-divider"),t.qZA(),t.TgZ(52,"div",19),t._uU(53,"Propiedades de gravedad espec\xedfica del producto."),t.qZA(),t.TgZ(54,"div",20),t.TgZ(55,"mat-form-field",5),t.TgZ(56,"mat-label"),t._uU(57,"Gravedad espec\xedfica:"),t.qZA(),t.TgZ(58,"input",21),t.NdJ("keypress",function(d){return r.numbersDots(d)}),t.qZA(),t.TgZ(59,"mat-hint"),t._uU(60,"Factor de gravedad espec\xedfica del producto."),t.qZA(),t.YNc(61,tt,2,1,"mat-error",7),t.qZA(),t.TgZ(62,"mat-form-field",5),t.TgZ(63,"mat-label"),t._uU(64,"Temperatura base de c\xe1lculo:"),t.qZA(),t.TgZ(65,"input",22),t.NdJ("keypress",function(d){return r.numbersDots(d)}),t.qZA(),t.TgZ(66,"mat-hint"),t._uU(67,"Se\xf1alar temperatura usada para base de c\xe1lculo."),t.qZA(),t.YNc(68,et,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(69,"div",23),t.TgZ(70,"mat-form-field",5),t.TgZ(71,"mat-label"),t._uU(72,"Observaciones:"),t.qZA(),t._UZ(73,"input",24),t.qZA(),t.qZA(),t.TgZ(74,"div",25),t.TgZ(75,"button",26),t.NdJ("click",function(){return r.close()}),t._uU(76,"CANCELAR"),t.qZA(),t.TgZ(77,"button",27),t.NdJ("click",function(){return r.submit()}),t._uU(78,"GUARDAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const c=t.MAs(27);t.xp6(2),t.Q6J("@scaleIn",void 0),t.xp6(2),t.Q6J("@fadeInRight",void 0),t.xp6(2),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("formGroup",r.productsModalForm),t.xp6(8),t.Q6J("ngIf",r.productsModalForm.get("name").errors),t.xp6(5),t.Q6J("ngForOf",r.types),t.xp6(4),t.Q6J("ngxMatColorPicker",c)("readonly",!0),t.xp6(1),t.Q6J("for",c),t.xp6(1),t.Q6J("touchUi",!1)("color",r.product.color),t.xp6(9),t.Q6J("ngIf",r.productsModalForm.get("code").errors),t.xp6(7),t.Q6J("ngIf",r.productsModalForm.get("code2").errors),t.xp6(7),t.Q6J("ngIf",r.productsModalForm.get("code3").errors),t.xp6(12),t.Q6J("ngIf",r.productsModalForm.get("sg").errors),t.xp6(7),t.Q6J("ngIf",r.productsModalForm.get("sg_temperature").errors),t.xp6(9),t.Q6J("disabled",r.productsModalForm.invalid)}},directives:[$.i,k.M,E.Hw,i._Y,i.JL,i.sg,A.xw,A.SQ,M.KE,A.yH,M.hX,i.Fj,R.Nt,i.JJ,i.u,i.Q7,M.bx,s.O5,J.gD,s.sg,P._f,P.p2,M.qo,P._C,W.d,A.Wh,I.lW,M.TO,H.ey],styles:[".title[_ngcontent-%COMP%]{color:#000}mat-form-field[hidden][_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;max-height:550px;border-radius:8px;overflow:scroll;box-shadow:0 10px 13px -6px #0003,0 20px 31px 3px #00000024,0 8px 38px 7px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}.product-form[_ngcontent-%COMP%]{padding:20px}"],data:{animation:[L.X,F.M,B.K]}}),o})();var ot=n(95332),rt=n(39762),nt=n(53580),at=n(38932),st=n(19165),it=n(94927),ct=n(24784),S=n(92181);function ut(o,a){if(1&o&&(t.TgZ(0,"th",19),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function lt(o,a){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=a.$implicit,r=t.oxw(2).$implicit,c=t.oxw();t.xp6(1),t.hij(" ",c.getLabel(r.name,e[r.property])," ")}}function dt(o,a){if(1&o&&(t.ynx(0,16),t.YNc(1,ut,2,1,"th",17),t.YNc(2,lt,2,1,"td",18),t.BQk()),2&o){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function mt(o,a){if(1&o&&(t.TgZ(0,"th",19),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function pt(o,a){if(1&o&&(t.TgZ(0,"td",20),t.TgZ(1,"mat-icon",22),t._uU(2),t.qZA(),t.qZA()),2&o){const e=a.$implicit,r=t.oxw(2).$implicit,c=t.oxw();t.xp6(2),t.Oqu(c.getLabel(r.name,e[r.property]))}}function gt(o,a){1&o&&(t.ynx(0,21),t.YNc(1,mt,2,1,"th",17),t.YNc(2,pt,3,1,"td",18),t.BQk())}function ft(o,a){if(1&o&&(t.TgZ(0,"th",19),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.name,"")}}const _t=function(o){return{"background-color":o}};function ht(o,a){if(1&o&&(t.TgZ(0,"td",20),t._UZ(1,"button",24),t._uU(2),t.qZA()),2&o){const e=a.$implicit,r=t.oxw(2).$implicit,c=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(2,_t,c.getLabel(r.name,e[r.property]))),t.xp6(1),t.hij(" ",c.getLabel(r.name,e[r.property])," ")}}function vt(o,a){1&o&&(t.ynx(0,23),t.YNc(1,ft,2,1,"th",17),t.YNc(2,ht,3,4,"td",18),t.BQk())}function yt(o,a){if(1&o&&(t.ynx(0),t.YNc(1,dt,3,1,"ng-container",13),t.YNc(2,gt,3,0,"ng-container",14),t.YNc(3,vt,3,0,"ng-container",15),t.BQk()),2&o){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isModelProperty&&"color"!=e.property&&"cv_producto"!=e.property),t.xp6(1),t.Q6J("ngIf",e.isModelProperty&&"cv_producto"==e.property),t.xp6(1),t.Q6J("ngIf",e.isModelProperty&&"color"==e.property)}}function Pt(o,a){1&o&&t._UZ(0,"th",25)}function Tt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",26),t.TgZ(1,"button",27),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.TgZ(4,"mat-menu",28,29),t.TgZ(6,"button",30),t.NdJ("click",function(){const d=t.CHM(e).$implicit;return t.oxw().updateProduct(d)}),t.TgZ(7,"span"),t._uU(8,"Editar"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",e)}}function Zt(o,a){1&o&&t._UZ(0,"tr",31)}function bt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",32),t.NdJ("click",function(){const d=t.CHM(e).$implicit;return t.oxw().updateProduct(d)}),t.qZA()}}const Ct=function(){return["Tables"]},Mt=[{path:"",component:(()=>{class o{constructor(e,r,c,d){this.dialog=e,this._typesOfProductService=r,this._cvProductosService=c,this.productsService=d,this.subject$=new b.t(1),this.data$=this.subject$.asObservable(),this.types=[],this.columns=[{name:"Id",property:"id",visible:!1,isModelProperty:!0},{name:"Nombre",property:"name",visible:!0,isModelProperty:!0},{name:"Tipo",property:"type",visible:!0,isModelProperty:!0},{name:"C\xf3digo",property:"code",visible:!0,isModelProperty:!0},{name:"C\xf3digo 2",property:"code2",visible:!1,isModelProperty:!0},{name:"C\xf3digo 3",property:"code3",visible:!1,isModelProperty:!0},{name:"Color",property:"color",visible:!0,isModelProperty:!0},{name:"Gravedad espec\xedfica",property:"sg",visible:!1,isModelProperty:!0},{name:"Temperatura para factor de gravedad espec\xedfica",property:"sg_temperature",visible:!1,isModelProperty:!0},{name:"Fecha de modificaci\xf3n",property:"sg_timestamp",visible:!0,isModelProperty:!0},{name:"Usuario",property:"sg_user",visible:!0,isModelProperty:!0},{name:"Observaciones",property:"sg_observations",visible:!0,isModelProperty:!0},{name:"Detalle CV",property:"cv_producto",visible:!0,isModelProperty:!0},{name:"Acciones",property:"actions",visible:!0}],this.pageSize=10}getLabel(e,r){if(null!=e)return"Tipo"===e?this.types.find(c=>c.id==r).name:"Detalle CV"===e?null!==r.product_id&&void 0!==r?"check_circle_outline":"":r}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}getData(){this.productsService.getAll().subscribe(e=>{this.products=e,this.dataSource=new m.by(e),this.dataSource=new m.by(this.products),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},e=>{console.log(e)})}ngOnInit(){return(0,u.mG)(this,void 0,void 0,function*(){this.dataSource=new m.by,this.types=yield this.getTypesOfProduct(),this.getData(),this.data$.pipe((0,U.h)(e=>!!e)).subscribe(e=>{this.products=e,this.dataSource.data=e})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getTypesOfProduct(){return(0,u.mG)(this,void 0,void 0,function*(){return this._typesOfProductService.getAll().toPromise()})}createProduct(){this.dialog.open(D).afterClosed().subscribe(e=>{"cancel"!==e.action&&e.data&&(this.products.unshift(new O(e.data)),this.subject$.next(this.products),this.getData(),this.data$.pipe((0,U.h)(r=>!!r)).subscribe(r=>{this.products=r,this.dataSource.data=r}))})}updateProduct(e){this._cvProductosService.getCvProducto(e.id).subscribe(r=>{e.cv_producto=r?new x.f(r):new x.f,this.dialog.open(D,{data:e}).afterClosed().subscribe(c=>{if(c){const d=this.products.findIndex(y=>y.id===c.id);this.products[d]=new O(c),this.subject$.next(this.products),this.getData(),this.data$.pipe((0,U.h)(y=>!!y)).subscribe(y=>{this.products=y,this.dataSource.data=y})}})})}onFilterChange(e){!this.dataSource||(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}ngOnDestroy(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.uw),t.Y36(w.z),t.Y36(ot.F),t.Y36(N.s))},o.\u0275cmp=t.Xpm({type:o,selectors:[["products-table"]],viewQuery:function(e,r){if(1&e&&(t.Gf(l.NW,7),t.Gf(v.YE,7)),2&e){let c;t.iGM(c=t.CRH())&&(r.paginator=c.first),t.iGM(c=t.CRH())&&(r.sort=c.first)}},inputs:{columns:"columns"},decls:17,vars:10,consts:[["mode","card"],["current","Productos",3,"crumbs"],["name","Productos",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],["matColumnDef","cv_producto",4,"ngIf"],["matColumnDef","color",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matColumnDef","cv_producto"],[2,"color","darkblue"],["matColumnDef","color"],["type","buton","mat-mini-fab","",2,"cursor","auto","height","20px","width","20px",3,"ngStyle"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-header"),t._UZ(2,"fury-breadcrumbs",1),t.qZA(),t.TgZ(3,"fury-page-layout-content"),t.TgZ(4,"fury-list",2),t.NdJ("filterChange",function(d){return r.onFilterChange(d)}),t.TgZ(5,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return r.createProduct()}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"table",5),t.YNc(10,yt,4,3,"ng-container",6),t.ynx(11,7),t.YNc(12,Pt,1,0,"th",8),t.YNc(13,Tt,9,1,"td",9),t.BQk(),t.YNc(14,Zt,1,0,"tr",10),t.YNc(15,bt,1,0,"tr",11),t.qZA(),t._UZ(16,"mat-paginator",12),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("@fadeInRight",void 0)("crumbs",t.DdM(9,Ct)),t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("columns",r.columns),t.xp6(5),t.Q6J("dataSource",r.dataSource),t.xp6(1),t.Q6J("ngForOf",r.columns),t.xp6(4),t.Q6J("matHeaderRowDef",r.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.visibleColumns),t.xp6(1),t.Q6J("pageSize",r.pageSize))},directives:[rt.N,nt.U,at.n,st.d,it.n,I.lW,E.Hw,m.BZ,v.YE,s.sg,m.w1,m.fO,m.Dz,m.as,m.nj,l.NW,s.O5,m.ge,v.nU,m.ev,s.PC,ct.Zl,S.p6,S.VK,S.OP,m.XQ,m.Gk],encapsulation:2,data:{animation:[F.M,L.X]}}),o})()}];let xt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[T.Bz.forChild(Mt)],T.Bz]}),o})();var At=n(61620);const Ut=[{path:"",component:D}];let Ot=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[T.Bz.forChild(Ut)],T.Bz]}),o})(),Et=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[{provide:P.KU,useValue:P.OP}],imports:[[s.ez,i.u5,i.UX,_.q,At.o9,C.Is,R.c,I.ot,E.Ps,J.LD,Ot,g.Z,P.v3]]}),o})(),It=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.ez,xt,i.u5,_.q,g.Z,Et,h.p,p.J]]}),o})()},9360:(Z,f,n)=>{n.d(f,{s:()=>_});var s=n(40520),i=n(98545),p=n(5e3),h=n(33344);let _=(()=>{class g{constructor(u,l){this.http=u,this.tokenStorage=l}getHeaders(){var u=new s.WM,l=this.tokenStorage.getToken();return u.set("token",l||"{}")}getAll(u){var l=this.getHeaders();if(null!=u){const m=(new s.LE).appendAll(u);var v=this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS,{params:m,headers:l})}else v=this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS,{headers:l});return v}getProduct(u){var l=this.getHeaders();return this.http.get(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS+"/"+u,{headers:l})}createProduct(u){var l=this.getHeaders();return this.http.post(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS,u,{headers:l})}updateProduct(u){var l=this.getHeaders();return this.http.put(i._.settings.apiServer.API_URL_BASE+i._.settings.apiServer.PRODUCTS+"/"+u.id,u,{headers:l})}}return g.\u0275fac=function(u){return new(u||g)(p.LFG(s.eN),p.LFG(h.i))},g.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);