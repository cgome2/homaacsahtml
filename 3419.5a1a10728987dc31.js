"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[3419],{88914:(T,_,r)=>{r.d(_,{M:()=>o});var e=r(41777);const o=(0,e.X$)("fadeInRight",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateX(-2vw)",opacity:0}),(0,e.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(T,_,r)=>{r.d(_,{X:()=>o});var e=r(41777);const o=(0,e.X$)("fadeInUp",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateY(3vh)",opacity:0}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateY(0)",opacity:1}))])])},37425:(T,_,r)=>{r.d(_,{K:()=>o});var e=r(41777);const o=(0,e.X$)("scaleIn",[(0,e.eR)(":enter",[(0,e.oB)({transform:"scale(0)"}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"scale(1)"}))])])},38932:(T,_,r)=>{r.d(_,{n:()=>p});var e=r(5e3),o=r(30277),m=r(3299),d=r(69808),v=r(25245);function h(f,c){if(1&f&&(e.TgZ(0,"div",7),e.TgZ(1,"mat-icon",5),e._uU(2,"chevron_right"),e.qZA(),e.TgZ(3,"div",6),e._uU(4),e.qZA(),e.qZA()),2&f){const s=c.$implicit;e.xp6(4),e.Oqu(s)}}const S=function(){return["/"]};let p=(()=>{class f{constructor(){this.crumbs=[]}ngOnInit(){}}return f.\u0275fac=function(s){return new(s||f)},f.\u0275cmp=e.Xpm({type:f,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(s,g){1&s&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"a",2),e._uU(4,"Home"),e.qZA(),e.YNc(5,h,5,1,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"mat-icon",5),e._uU(8,"chevron_right"),e.qZA(),e.TgZ(9,"div",6),e._uU(10),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(1),e.Oqu(g.current),e.xp6(2),e.Q6J("routerLink",e.DdM(4,S)),e.xp6(2),e.Q6J("ngForOf",g.crumbs),e.xp6(5),e.Oqu(g.current))},directives:[o.xw,o.Wh,m.yS,d.sg,v.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),f})()},94927:(T,_,r)=>{r.d(_,{n:()=>b});var e=r(5e3),o=r(23753),m=r(75778),d=r(80013),v=r(69808),h=r(92181),S=r(30277),p=r(25245),f=r(47423),c=r(77446),s=r(93075);const g=["filter"];function O(y,x){if(1&y&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"mat-icon",8),e._uU(5,"search"),e.qZA(),e._UZ(6,"input",9,10),e.qZA(),e.TgZ(8,"button",11),e.TgZ(9,"mat-icon"),e._uU(10,"filter_list"),e.qZA(),e.qZA(),e.Hsn(11,1),e.qZA()),2&y){const t=e.oxw(),A=e.MAs(3);e.xp6(2),e.Oqu(t.name),e.xp6(6),e.Q6J("matMenuTriggerFor",A)}}function E(y,x){if(1&y){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(P){const Z=e.CHM(t).$implicit;return e.oxw().toggleColumnVisibility(Z,P)}),e.TgZ(1,"mat-checkbox",13,14),e.NdJ("ngModelChange",function(P){return e.CHM(t).$implicit.visible=P})("click",function(P){return P.stopPropagation()}),e._uU(3),e.qZA(),e.qZA()}if(2&y){const t=x.$implicit;e.xp6(1),e.Q6J("ngModel",t.visible),e.xp6(2),e.hij(" ",t.name," ")}}const L=["*",[["",8,"actions"]]],U=["*",".actions"];let b=(()=>{class y{constructor(){this.filterChange=new e.vpe}ngAfterViewInit(){this.hideHeader||(0,o.R)(this.filter.nativeElement,"keyup").pipe((0,m.x)(),(0,d.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(t,A){A.stopPropagation(),A.stopImmediatePropagation(),t.visible=!t.visible}}return y.\u0275fac=function(t){return new(t||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["fury-list"]],viewQuery:function(t,A){if(1&t&&e.Gf(g,5),2&t){let P;e.iGM(P=e.CRH())&&(A.filter=P.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:U,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(t,A){1&t&&(e.F$t(L),e.TgZ(0,"div",0),e.YNc(1,O,12,2,"div",1),e.TgZ(2,"mat-menu",2,3),e.YNc(4,E,4,2,"button",4),e.qZA(),e.Hsn(5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!A.hideHeader),e.xp6(3),e.Q6J("ngForOf",A.columns))},directives:[v.O5,h.VK,v.sg,S.xw,S.Wh,S.SQ,S.yH,p.Hw,f.lW,h.p6,c.oG,s.JJ,s.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),y})()},4940:(T,_,r)=>{r.d(_,{p:()=>v});var e=r(69808),o=r(93075),m=r(7057),d=r(5e3);let v=(()=>{class h{}return h.\u0275fac=function(p){return new(p||h)},h.\u0275mod=d.oAB({type:h}),h.\u0275inj=d.cJS({imports:[[e.ez,m.q,o.u5]]}),h})()},19165:(T,_,r)=>{r.d(_,{d:()=>o});var e=r(5e3);let o=(()=>{class m{constructor(){}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),m})()},53580:(T,_,r)=>{r.d(_,{U:()=>o});var e=r(5e3);let o=(()=>{class m{constructor(){}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),m})()},39762:(T,_,r)=>{r.d(_,{N:()=>o});var e=r(5e3);let o=(()=>{class m{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(v,h){2&v&&e.ekj("fury-page-layout-card",h.isCard)("fury-page-layout-simple",h.isSimple)},inputs:{mode:"mode"}}),m})()},59968:(T,_,r)=>{r.d(_,{i:()=>o});var e=r(5e3);let o=(()=>{class m{constructor(){}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),m})()},3419:(T,_,r)=>{r.r(_),r.d(_,{CertificadosSistemaTableModule:()=>yt});var e=r(69808),o=r(93075),m=r(61264),d=r(4940),v=r(7057),h=r(72467),S=r(3299),p=r(70655),f=r(86087),c=r(84847),s=r(32075),g=r(18444),O=r(96831),E=r(92198),L=r(88914),U=r(14499),b=r(48966),y=r(37425);class x{constructor(l){this.cv_certificado_id=l&&l.cv_certificado_id||null,this.site_code=l&&l.site_code||null,this.station=l&&l.station||null,this.product_id=l&&l.product_id||null,this.product=l&&l.product||null,this.rfc_certificado=l&&l.rfc_certificado||null,this.numero_folio_certificado=l&&l.numero_folio_certificado||null,this.fecha_emision_certificado=l&&l.fecha_emision_certificado||null,this.resultado_certificado=l&&l.resultado_certificado||null,this.user_id=l&&l.user_id||null,this.timestamp=l&&l.timestamp||null,this.status=l&&l.status||null}}var t=r(5e3),A=r(57261),P=r(52190),R=r(9360),Z=r(40520),I=r(46227),B=r(27221),M=r(98545),$=r(33344);let k=(()=>{class a{constructor(i,n){this.http=i,this.tokenStorage=n}getHeaders(){var i=new Z.WM,n=this.tokenStorage.getToken();return i.set("token",n||"{}")}getAll(){var i=this.getHeaders();return this.http.get(M._.settings.apiServer.API_URL_BASE+M._.settings.apiServer.CERTIFICADOS_SISTEMA,{headers:i}).pipe((0,I.V)(1e4),(0,B.K)(n=>{throw"Error de conexi\xf3n. Detalles: "+n}))}create(i){var n=this.getHeaders();return this.http.post(M._.settings.apiServer.API_URL_BASE+M._.settings.apiServer.CERTIFICADOS_SISTEMA,i,{headers:n}).pipe((0,I.V)(1e4),(0,B.K)(u=>{throw"Error de conexi\xf3n. Detalles: "+u}))}update(i){var n=this.getHeaders();return this.http.put(M._.settings.apiServer.API_URL_BASE+M._.settings.apiServer.CERTIFICADOS_SISTEMA+"/"+i.cv_certificado_id,i,{headers:n}).pipe((0,I.V)(1e4),(0,B.K)(u=>{throw"Error de conexi\xf3n. Detalles: "+u}))}delete(i){var n=this.getHeaders();return this.http.delete(M._.settings.apiServer.API_URL_BASE+M._.settings.apiServer.CERTIFICADOS_SISTEMA+"/"+i.cv_certificado_id,{headers:n}).pipe((0,I.V)(1e4),(0,B.K)(u=>{throw"Error de conexi\xf3n. Detalles: "+u}))}}return a.\u0275fac=function(i){return new(i||a)(t.LFG(Z.eN),t.LFG($.i))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var z=r(59968),j=r(36551),G=r(25245),F=r(92081),H=r(30277),N=r(67322),V=r(74107),X=r(77531),w=r(86856),Q=r(47423),q=r(90508);function tt(a,l){1&a&&t._uU(0,"Datos del certificado")}function et(a,l){if(1&a&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&a){const i=l.$implicit;t.Q6J("value",i.site_code),t.xp6(1),t.Oqu(i.station_name)}}function it(a,l){if(1&a&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&a){const i=l.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}let K=(()=>{class a{constructor(i,n,u,C,D,W){this.data=i,this.dialogRef=n,this.snackbar=u,this._stationsService=C,this._productsService=D,this._certificadosSistemaService=W,this.generalFormGroup=new o.cw({cv_certificado_id:new o.NI,site_code:new o.NI("",[o.kI.required]),product_id:new o.NI("",[o.kI.required]),rfc_certificado:new o.NI("",[o.kI.required,o.kI.pattern("^([A-Z\xd1]|&){3}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}$")]),numero_folio_certificado:new o.NI("",[o.kI.required,o.kI.pattern("^([A-Z\xd1]|&){3}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}[0-9]{5}2[0-9]{3}$")]),fecha_emision_certificado:new o.NI("",[o.kI.required]),resultado_certificado:new o.NI("",[o.kI.required,o.kI.minLength(10),o.kI.maxLength(300)])}),this.theCertificadoSistema=new x,this.stations=[],this.products=[],this.filter={fleets:"",areas:"",models:"",means:"",products:"",stations:"",fleets_names:"",products_names:"",areas_names:"",models_names:"",means_names:"",stations_names:"",from_date:"",to_date:""},this.dialogRef.disableClose=!0}ngOnInit(){return(0,p.mG)(this,void 0,void 0,function*(){this.products=yield this.getProducts(),this.stations=yield this.getStations(),null!=this.data&&(this.theCertificadoSistema=this.data,this.generalFormGroup.patchValue({cv_certificado_id:this.theCertificadoSistema.cv_certificado_id,site_code:this.theCertificadoSistema.site_code,product_id:this.theCertificadoSistema.product_id.toString(),rfc_certificado:this.theCertificadoSistema.rfc_certificado,numero_folio_certificado:this.theCertificadoSistema.numero_folio_certificado,fecha_emision_certificado:new Date(this.theCertificadoSistema.fecha_emision_certificado),resultado_certificado:this.theCertificadoSistema.resultado_certificado}))})}getStations(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getAll().toPromise()})}getProducts(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._productsService.getAll(this.filter).toPromise()})}submit(){this.theCertificadoSistema.cv_certificado_id=this.generalFormGroup.controls.cv_certificado_id.value,this.theCertificadoSistema.site_code=this.generalFormGroup.controls.site_code.value,this.theCertificadoSistema.product_id=this.generalFormGroup.controls.product_id.value,this.theCertificadoSistema.rfc_certificado=this.generalFormGroup.controls.rfc_certificado.value,this.theCertificadoSistema.numero_folio_certificado=this.generalFormGroup.controls.numero_folio_certificado.value,this.theCertificadoSistema.fecha_emision_certificado=this.getMysqlDate(this.generalFormGroup.controls.fecha_emision_certificado.value),this.theCertificadoSistema.resultado_certificado=this.generalFormGroup.controls.resultado_certificado.value,this.theCertificadoSistema.cv_certificado_id>0?this.updateCertificadoSistema():this.createCertificadoSistema()}close(){this.dialogRef.close()}createCertificadoSistema(){this._certificadosSistemaService.create(this.theCertificadoSistema).subscribe(i=>{this.snackbar.open(i.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.theCertificadoSistema)},i=>{this.snackbar.open(i.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateCertificadoSistema(){this._certificadosSistemaService.update(this.theCertificadoSistema).subscribe(i=>{this.snackbar.open(i.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.theCertificadoSistema)},i=>{this.snackbar.open(i.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}getMysqlDate(i){return null!==i?i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2):""}onChangeStation(i){return(0,p.mG)(this,void 0,void 0,function*(){this.filter.stations=i,this.products=[],this.products=yield this.getProducts()})}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(b.WI),t.Y36(b.so),t.Y36(A.ux),t.Y36(P.w),t.Y36(R.s),t.Y36(k))},a.\u0275cmp=t.Xpm({type:a,selectors:[["certificados-sistema"]],decls:54,vars:11,consts:[[2,"padding","1px","display","block"],[1,"title"],["svgIcon","dictamen"],[1,"card",2,"overflow","scroll","height","550px","width","600px"],[3,"linear"],["stepper","matVerticalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["fxLayout","row","fxLayoutGap","8px",1,"content"],["appearance","outline","fxFlex","auto"],["formControlName","site_code",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","product_id"],["formControlName","rfc_certificado","matInput","","required",""],["formControlName","numero_folio_certificado","matInput","","required",""],["matInput","","formControlName","fecha_emision_certificado","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["color","primary"],["fechaEmisionCertificado",""],["matInput","","placeholder","Resultado del certificado...","formControlName","resultado_certificado"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","","type","button",3,"click"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled","click"],[3,"value"]],template:function(i,n){if(1&i&&(t.TgZ(0,"fury-page",0),t.TgZ(1,"fury-title",1),t._UZ(2,"mat-icon",2),t.TgZ(3,"span"),t._uU(4,"Certificado de sistema de control volum\xe9trico"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"mat-horizontal-stepper",4,5),t.TgZ(8,"mat-step",6),t.TgZ(9,"form",7),t.YNc(10,tt,1,0,"ng-template",8),t.TgZ(11,"div",9),t.TgZ(12,"mat-form-field",10),t.TgZ(13,"mat-label"),t._uU(14,"Estaci\xf3n donde se deposit\xf3 el combustible:"),t.qZA(),t.TgZ(15,"mat-select",11),t.NdJ("selectionChange",function(C){return n.onChangeStation(C.value)}),t.YNc(16,et,2,2,"mat-option",12),t.qZA(),t.qZA(),t.TgZ(17,"mat-form-field",10),t.TgZ(18,"mat-label"),t._uU(19,"Producto:"),t.qZA(),t.TgZ(20,"mat-select",13),t.YNc(21,it,2,2,"mat-option",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",9),t.TgZ(23,"mat-form-field",10),t.TgZ(24,"mat-label"),t._uU(25,"RFC del emisor del certificado:"),t.qZA(),t._UZ(26,"input",14),t.qZA(),t.qZA(),t.TgZ(27,"div",9),t.TgZ(28,"mat-form-field",10),t.TgZ(29,"mat-label"),t._uU(30,"N\xfamero de folio:"),t.qZA(),t._UZ(31,"input",15),t.TgZ(32,"mat-hint"),t._uU(33,"RFC del proveedor + cinco n\xfameros \xfanicos cronol\xf3gicos + cuatro n\xfameros del a\xf1o de emisi\xf3n. (GEO9506184R6000232022)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",9),t.TgZ(35,"mat-form-field",10),t.TgZ(36,"mat-label"),t._uU(37,"Fecha del certificado:"),t.qZA(),t._UZ(38,"input",16),t.TgZ(39,"mat-datepicker-toggle",17),t.TgZ(40,"mat-icon",18),t._uU(41,"date_range"),t.qZA(),t.qZA(),t._UZ(42,"mat-datepicker",19,20),t.qZA(),t.qZA(),t.TgZ(44,"div",9),t.TgZ(45,"mat-form-field",10),t.TgZ(46,"mat-label"),t._uU(47,"Resultados:"),t.qZA(),t._UZ(48,"textarea",21),t.qZA(),t.qZA(),t.TgZ(49,"div",22),t.TgZ(50,"button",23),t.NdJ("click",function(){return n.close()}),t._uU(51,"CANCELAR"),t.qZA(),t.TgZ(52,"button",24),t.NdJ("click",function(){return n.submit()}),t._uU(53,"GUARDAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const u=t.MAs(43);t.xp6(2),t.Q6J("@scaleIn",void 0),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(2),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("linear",!0),t.xp6(2),t.Q6J("stepControl",n.generalFormGroup),t.xp6(1),t.Q6J("formGroup",n.generalFormGroup),t.xp6(7),t.Q6J("ngForOf",n.stations),t.xp6(5),t.Q6J("ngForOf",n.products),t.xp6(17),t.Q6J("matDatepicker",u),t.xp6(1),t.Q6J("for",u),t.xp6(13),t.Q6J("disabled",n.generalFormGroup.invalid)}},directives:[z.i,j.M,G.Hw,F.Vq,F.C0,o._Y,o.JL,o.sg,F.VY,H.xw,H.SQ,N.KE,H.yH,N.hX,V.gD,o.JJ,o.u,e.sg,o.Fj,X.Nt,o.Q7,N.bx,w.hl,w.nW,N.R9,w.Q0,w.Mq,H.Wh,Q.lW,F.Ic,q.ey],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 10px 13px -6px #0003,0 20px 31px 3px #00000024,0 8px 38px 7px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px;width:50%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}"],data:{animation:[U.X,L.M,y.K]}}),a})();var rt=r(24333),at=r(39762),ot=r(53580),st=r(38932),nt=r(19165),ct=r(94927),J=r(92181);function lt(a,l){if(1&a&&(t.TgZ(0,"th",17),t._uU(1),t.qZA()),2&a){const i=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",i.name,"")}}function dt(a,l){if(1&a&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&a){const i=l.$implicit,n=t.oxw(2).$implicit,u=t.oxw();t.xp6(1),t.hij(" ",u.getLabel(n.name,i[n.property])," ")}}function ut(a,l){if(1&a&&(t.ynx(0,14),t.YNc(1,lt,2,1,"th",15),t.YNc(2,dt,2,1,"td",16),t.BQk()),2&a){const i=t.oxw().$implicit;t.Q6J("matColumnDef",i.property)}}function mt(a,l){if(1&a&&(t.ynx(0),t.YNc(1,ut,3,1,"ng-container",13),t.BQk()),2&a){const i=l.$implicit;t.xp6(1),t.Q6J("ngIf",i.isModelProperty)}}function pt(a,l){1&a&&t._UZ(0,"th",19)}function ft(a,l){if(1&a){const i=t.EpF();t.TgZ(0,"td",20),t.TgZ(1,"button",21),t.NdJ("click",function(u){return u.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.TgZ(4,"mat-menu",22,23),t.TgZ(6,"button",24),t.NdJ("click",function(){const C=t.CHM(i).$implicit;return t.oxw().updateCertificadoSistema(C)}),t.TgZ(7,"span"),t._uU(8,"Editar"),t.qZA(),t.qZA(),t.TgZ(9,"button",24),t.NdJ("click",function(){const C=t.CHM(i).$implicit;return t.oxw().deleteCertificadoSistema(C)}),t.TgZ(10,"span"),t._uU(11,"Eliminar"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const i=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",i)}}function gt(a,l){1&a&&t._UZ(0,"tr",25)}function _t(a,l){if(1&a){const i=t.EpF();t.TgZ(0,"tr",26),t.NdJ("click",function(){const C=t.CHM(i).$implicit;return t.oxw().updateCertificadoSistema(C)}),t.qZA()}}const ht=function(){return["Control volumetrico"]},vt=[{path:"",component:(()=>{class a{constructor(i,n,u,C,D,W,Tt){this.dialog=i,this.confirmationDialog=n,this._stationsService=u,this._usersService=C,this._productsService=D,this._certificadosSistemaService=W,this.snackbar=Tt,this.subject$=new O.t(1),this.data$=this.subject$.asObservable(),this.stations=[],this.users=[],this.products=[],this.columns=[{name:"Id",property:"cv_certificado_id",visible:!0,isModelProperty:!0},{name:"Estaci\xf3n",property:"site_code",visible:!0,isModelProperty:!0},{name:"Producto",property:"product_id",visible:!0,isModelProperty:!0},{name:"Rfc certificado",property:"rfc_certificado",visible:!0,isModelProperty:!0},{name:"N\xfamero folio",property:"numero_folio_certificado",visible:!1,isModelProperty:!0},{name:"Fecha emisi\xf3n",property:"fecha_emision_certificado",visible:!1,isModelProperty:!0},{name:"Resultado",property:"resultado_certificado",visible:!1,isModelProperty:!0},{name:"Creado por",property:"user_id",visible:!0,isModelProperty:!0},{name:"Modificaci\xf3n",property:"timestamp",visible:!0,isModelProperty:!0},{name:"Estatus",property:"status",visible:!1,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(i,n){if(null!=i)return"Estaci\xf3n"===i?this.stations.find(u=>u.site_code==n).station_name:"Producto"===i?this.products.find(u=>u.id==n).name:"Creado por"===i?this.users.find(u=>u.user_id==n).name:n}get visibleColumns(){return this.columns.filter(i=>i.visible).map(i=>i.property)}getData(){this.dataSource=new s.by,this._certificadosSistemaService.getAll().subscribe(i=>{this.certificados_sistema=i,this.dataSource=new s.by(i),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},i=>{console.log(i)})}ngOnInit(){return(0,p.mG)(this,void 0,void 0,function*(){this.dataSource=new s.by,this.stations=yield this.getStations(),this.users=yield this.getUsers(),this.products=yield this.getProducts(),this.getData(),this.data$.pipe((0,E.h)(i=>!!i)).subscribe(i=>{this.certificados_sistema=i,this.dataSource.data=this.certificados_sistema})})}getStations(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getAll().toPromise()})}getUsers(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._usersService.getAll().toPromise()})}getProducts(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._productsService.getAll().toPromise()})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createCertificadoSistema(){this.dialog.open(K).afterClosed().subscribe(i=>{i&&(this.subject$.next(this.certificados_sistema),this.getData(),this.data$.pipe((0,E.h)(n=>!!n)).subscribe(n=>{this.certificados_sistema=n,this.dataSource.data=n}))})}updateCertificadoSistema(i){this.dialog.open(K,{data:i}).afterClosed().subscribe(n=>{n&&(this.subject$.next(this.certificados_sistema),this.getData(),this.data$.pipe((0,E.h)(u=>!!u)).subscribe(u=>{this.certificados_sistema=u,this.dataSource.data=u}))})}updateTheCertificadoSistema(i){this._certificadosSistemaService.update(i).subscribe(n=>{this.snackbar.open(n.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.subject$.next(this.certificados_sistema),this.getData(),this.data$.pipe((0,E.h)(u=>!!u)).subscribe(u=>{this.certificados_sistema=u,this.dataSource.data=u})},n=>{this.snackbar.open(n.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}deleteCertificadoSistema(i){this.confirmationDialog.open(g.z,{data:{title:"Confirmaci\xf3n",message:"\xbfDesea eliminar del sistema el registro "+i.numero_folio_certificado+"?"}}).afterClosed().subscribe(n=>{n&&this._certificadosSistemaService.delete(i).subscribe(u=>{this.dataSource=new s.by,this.getData(),this.data$.pipe((0,E.h)(C=>!!C)).subscribe(C=>{this.certificados_sistema=C,this.dataSource.data=C}),this.snackbar.open(u.message,null,{duration:5e3,panelClass:["green-snackbar"]})})})}onFilterChange(i){!this.dataSource||(i=(i=i.trim()).toLowerCase(),this.dataSource.filter=i)}ngOnDestroy(){}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(b.uw),t.Y36(b.uw),t.Y36(P.w),t.Y36(rt.f),t.Y36(R.s),t.Y36(k),t.Y36(A.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["certificados-sistema-table"]],viewQuery:function(i,n){if(1&i&&(t.Gf(f.NW,7),t.Gf(c.YE,7)),2&i){let u;t.iGM(u=t.CRH())&&(n.paginator=u.first),t.iGM(u=t.CRH())&&(n.sort=u.first)}},inputs:{columns:"columns"},decls:17,vars:10,consts:[["mode","card"],["current","Certificados de sistema de control volum\xe9trico",3,"crumbs"],["name","Certificados de sistema de control volum\xe9trico",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-header"),t._UZ(2,"fury-breadcrumbs",1),t.qZA(),t.TgZ(3,"fury-page-layout-content"),t.TgZ(4,"fury-list",2),t.NdJ("filterChange",function(C){return n.onFilterChange(C)}),t.TgZ(5,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.createCertificadoSistema()}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"table",5),t.YNc(10,mt,2,1,"ng-container",6),t.ynx(11,7),t.YNc(12,pt,1,0,"th",8),t.YNc(13,ft,12,1,"td",9),t.BQk(),t.YNc(14,gt,1,0,"tr",10),t.YNc(15,_t,1,0,"tr",11),t.qZA(),t._UZ(16,"mat-paginator",12),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.Q6J("@fadeInRight",void 0)("crumbs",t.DdM(9,ht)),t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("columns",n.columns),t.xp6(5),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("ngForOf",n.columns),t.xp6(4),t.Q6J("matHeaderRowDef",n.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.visibleColumns),t.xp6(1),t.Q6J("pageSize",n.pageSize))},directives:[at.N,ot.U,st.n,nt.d,ct.n,Q.lW,G.Hw,s.BZ,c.YE,e.sg,s.w1,s.fO,s.Dz,s.as,s.nj,f.NW,e.O5,s.ge,c.nU,s.ev,J.p6,J.VK,J.OP,s.XQ,s.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[L.M,U.X]}}),a})()}];let Ct=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[S.Bz.forChild(vt)],S.Bz]}),a})();const St=[{path:"",component:K}];let Y=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[S.Bz.forChild(St)],S.Bz]}),a})(),At=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[e.ez,Y,h.Z,o.UX,v.q]]}),a})(),yt=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[e.ez,o.u5,m.J,d.p,v.q,h.Z,Ct,At,Y]]}),a})()},9360:(T,_,r)=>{r.d(_,{s:()=>v});var e=r(40520),o=r(98545),m=r(5e3),d=r(33344);let v=(()=>{class h{constructor(p,f){this.http=p,this.tokenStorage=f}getHeaders(){var p=new e.WM,f=this.tokenStorage.getToken();return p.set("token",f||"{}")}getAll(p){var f=this.getHeaders();if(null!=p){const s=(new e.LE).appendAll(p);var c=this.http.get(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS,{params:s,headers:f})}else c=this.http.get(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS,{headers:f});return c}getProduct(p){var f=this.getHeaders();return this.http.get(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS+"/"+p,{headers:f})}createProduct(p){var f=this.getHeaders();return this.http.post(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS,p,{headers:f})}updateProduct(p){var f=this.getHeaders();return this.http.put(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS+"/"+p.id,p,{headers:f})}}return h.\u0275fac=function(p){return new(p||h)(m.LFG(e.eN),m.LFG(d.i))},h.\u0275prov=m.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},52190:(T,_,r)=>{r.d(_,{w:()=>S});var e=r(40520),o=r(46227),m=r(27221),d=r(98545),v=r(5e3),h=r(33344);let S=(()=>{class p{constructor(c,s){this.http=c,this.tokenStorage=s}getHeaders(){var c=new e.WM,s=this.tokenStorage.getToken();return c.set("token",s||"{}")}getAll(c){var s=this.getHeaders();const g=(new e.LE).appendAll(c?{type:c}:{});return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATIONS,{params:g,headers:s})}create(c){var s=this.getHeaders();return this.http.post(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATIONS,c,{headers:s}).pipe((0,o.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}update(c){var s=this.getHeaders();return this.http.put(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATIONS+"/"+c.site_code,c,{headers:s}).pipe((0,o.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}delete(c){var s=this.getHeaders();return this.http.delete(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATIONS+"/"+c.site_code,{headers:s})}getRemoteProducts(c){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.REMOTE_PRODUCTS+"/"+c.site_code,{headers:s}).pipe((0,o.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}getRemoteTanks(c){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+"/remoteTanks/"+c.site_code,{headers:s}).pipe((0,o.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}getMapOfProducts(c){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.PRODUCTS_MAPS+"/"+c.site_code,{headers:s})}setMapOfProducts(c,s){var g=this.getHeaders();return this.http.post(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.PRODUCTS_MAPS+"/"+s,c,{headers:g})}setTanksT(c){var s=this.getHeaders();return console.log(typeof c),this.http.post(d._.settings.apiServer.API_URL_BASE+"/remoteTanks",c,{headers:s})}getDevicesStatus(c){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.DEVICES_STATUS+"?site_code="+c,{headers:s})}getAllTanksStatus(){var c=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATUS_TANKS,{headers:c})}getTanksStatus(c){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATUS_TANKS+"/"+c,{headers:s})}getPumpsStatus(c){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATUS_PUMPS+"/"+c,{headers:s})}getPumps(c){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.PUMPS+"/"+c,{headers:s})}syncSingle(c,s){var g=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.SYNC+"?site_code="+c+"&stub="+s,{headers:g}).pipe((0,o.V)(1e4),(0,m.K)(O=>{throw"Error de conexi\xf3n. Detalles: "+O}))}getMarimbas(){var c=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.MARIMBAS,{headers:c})}updateIndexes(c){var s=this.getHeaders();return console.log(s),this.http.put(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.INDEXES,c,{headers:s})}}return p.\u0275fac=function(c){return new(c||p)(v.LFG(e.eN),v.LFG(h.i))},p.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);