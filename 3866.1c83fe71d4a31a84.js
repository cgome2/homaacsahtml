"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[3866],{88914:(x,_,i)=>{i.d(_,{M:()=>s});var t=i(41777);const s=(0,t.X$)("fadeInRight",[(0,t.eR)(":enter",[(0,t.oB)({transform:"translateX(-2vw)",opacity:0}),(0,t.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,t.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(x,_,i)=>{i.d(_,{X:()=>s});var t=i(41777);const s=(0,t.X$)("fadeInUp",[(0,t.eR)(":enter",[(0,t.oB)({transform:"translateY(3vh)",opacity:0}),(0,t.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,t.oB)({transform:"translateY(0)",opacity:1}))])])},37425:(x,_,i)=>{i.d(_,{K:()=>s});var t=i(41777);const s=(0,t.X$)("scaleIn",[(0,t.eR)(":enter",[(0,t.oB)({transform:"scale(0)"}),(0,t.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,t.oB)({transform:"scale(1)"}))])])},38932:(x,_,i)=>{i.d(_,{n:()=>m});var t=i(5e3),s=i(30277),c=i(3299),h=i(69808),g=i(25245);function d(u,p){if(1&u&&(t.TgZ(0,"div",7),t.TgZ(1,"mat-icon",5),t._uU(2,"chevron_right"),t.qZA(),t.TgZ(3,"div",6),t._uU(4),t.qZA(),t.qZA()),2&u){const M=p.$implicit;t.xp6(4),t.Oqu(M)}}const P=function(){return["/"]};let m=(()=>{class u{constructor(){this.crumbs=[]}ngOnInit(){}}return u.\u0275fac=function(M){return new(M||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(M,T){1&M&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"a",2),t._uU(4,"Home"),t.qZA(),t.YNc(5,d,5,1,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"mat-icon",5),t._uU(8,"chevron_right"),t.qZA(),t.TgZ(9,"div",6),t._uU(10),t.qZA(),t.qZA(),t.qZA()),2&M&&(t.xp6(1),t.Oqu(T.current),t.xp6(2),t.Q6J("routerLink",t.DdM(4,P)),t.xp6(2),t.Q6J("ngForOf",T.crumbs),t.xp6(5),t.Oqu(T.current))},directives:[s.xw,s.Wh,c.yS,h.sg,g.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),u})()},94927:(x,_,i)=>{i.d(_,{n:()=>U});var t=i(5e3),s=i(23753),c=i(75778),h=i(80013),g=i(69808),d=i(92181),P=i(30277),m=i(25245),u=i(47423),p=i(77446),M=i(93075);const T=["filter"];function F(C,e){if(1&C&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7),t.TgZ(4,"mat-icon",8),t._uU(5,"search"),t.qZA(),t._UZ(6,"input",9,10),t.qZA(),t.TgZ(8,"button",11),t.TgZ(9,"mat-icon"),t._uU(10,"filter_list"),t.qZA(),t.qZA(),t.Hsn(11,1),t.qZA()),2&C){const f=t.oxw(),v=t.MAs(3);t.xp6(2),t.Oqu(f.name),t.xp6(6),t.Q6J("matMenuTriggerFor",v)}}function I(C,e){if(1&C){const f=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(b){const Z=t.CHM(f).$implicit;return t.oxw().toggleColumnVisibility(Z,b)}),t.TgZ(1,"mat-checkbox",13,14),t.NdJ("ngModelChange",function(b){return t.CHM(f).$implicit.visible=b})("click",function(b){return b.stopPropagation()}),t._uU(3),t.qZA(),t.qZA()}if(2&C){const f=e.$implicit;t.xp6(1),t.Q6J("ngModel",f.visible),t.xp6(2),t.hij(" ",f.name," ")}}const E=["*",[["",8,"actions"]]],A=["*",".actions"];let U=(()=>{class C{constructor(){this.filterChange=new t.vpe}ngAfterViewInit(){this.hideHeader||(0,s.R)(this.filter.nativeElement,"keyup").pipe((0,c.x)(),(0,h.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(f,v){v.stopPropagation(),v.stopImmediatePropagation(),f.visible=!f.visible}}return C.\u0275fac=function(f){return new(f||C)},C.\u0275cmp=t.Xpm({type:C,selectors:[["fury-list"]],viewQuery:function(f,v){if(1&f&&t.Gf(T,5),2&f){let b;t.iGM(b=t.CRH())&&(v.filter=b.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:A,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(f,v){1&f&&(t.F$t(E),t.TgZ(0,"div",0),t.YNc(1,F,12,2,"div",1),t.TgZ(2,"mat-menu",2,3),t.YNc(4,I,4,2,"button",4),t.qZA(),t.Hsn(5),t.qZA()),2&f&&(t.xp6(1),t.Q6J("ngIf",!v.hideHeader),t.xp6(3),t.Q6J("ngForOf",v.columns))},directives:[g.O5,d.VK,g.sg,P.xw,P.Wh,P.SQ,P.yH,m.Hw,u.lW,d.p6,p.oG,M.JJ,M.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),C})()},4940:(x,_,i)=>{i.d(_,{p:()=>g});var t=i(69808),s=i(93075),c=i(7057),h=i(5e3);let g=(()=>{class d{}return d.\u0275fac=function(m){return new(m||d)},d.\u0275mod=h.oAB({type:d}),d.\u0275inj=h.cJS({imports:[[t.ez,c.q,s.u5]]}),d})()},19165:(x,_,i)=>{i.d(_,{d:()=>s});var t=i(5e3);let s=(()=>{class c{constructor(){}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275dir=t.lG2({type:c,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),c})()},53580:(x,_,i)=>{i.d(_,{U:()=>s});var t=i(5e3);let s=(()=>{class c{constructor(){}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275dir=t.lG2({type:c,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),c})()},39762:(x,_,i)=>{i.d(_,{N:()=>s});var t=i(5e3);let s=(()=>{class c{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275dir=t.lG2({type:c,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(g,d){2&g&&t.ekj("fury-page-layout-card",d.isCard)("fury-page-layout-simple",d.isSimple)},inputs:{mode:"mode"}}),c})()},59968:(x,_,i)=>{i.d(_,{i:()=>s});var t=i(5e3);let s=(()=>{class c{constructor(){}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275dir=t.lG2({type:c,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),c})()},53866:(x,_,i)=>{i.r(_),i.d(_,{CrePermissionsTableModule:()=>Ce});var t=i(69808),s=i(93075),c=i(61264),h=i(4940),g=i(7057),d=i(3299),P=i(70655),m=i(86087),u=i(84847),p=i(32075),M=i(96831),T=i(92198),F=i(88914),I=i(14499),E=i(19383),A=i(48966),U=i(37425),e=i(5e3),f=i(57261),v=i(95288),b=i(59968),D=i(36551),Z=i(25245),O=i(30277),L=i(67322),w=i(77531),B=i(74107),Q=i(32368),H=i(4834),S=i(47423),j=i(90508);const G=["crePermissionsModalForm"];function W(o,a){if(1&o&&(e.TgZ(0,"loading"),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij("",r.isLoading," Conectando...")}}function k(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw(2);e.xp6(1),e.Oqu(r.crePermissionsModalForm.get("rfc").errors.invalidPattern)}}function K(o,a){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const r=a.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.cre_permission_type)}}function Y(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw(2);e.xp6(1),e.Oqu(r.crePermissionsModalForm.get("permission").errors.invalidPattern)}}function $(o,a){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const r=a.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.value)}}function z(o,a){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const r=a.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.currency)}}function V(o,a){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const r=a.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.unit_of_measure)}}function X(o,a){if(1&o){const r=e.EpF();e.TgZ(0,"form",6),e.TgZ(1,"div",7),e._uU(2,"Generales"),e.qZA(),e.TgZ(3,"div",8),e.TgZ(4,"div",9),e.TgZ(5,"mat-form-field",10),e.TgZ(6,"mat-label"),e._uU(7,"Raz\xf3n social:"),e.qZA(),e._UZ(8,"input",11),e.qZA(),e.TgZ(9,"mat-form-field",10),e.TgZ(10,"mat-label"),e._uU(11,"RFC:"),e.qZA(),e._UZ(12,"input",12),e.YNc(13,k,2,1,"mat-error",2),e.qZA(),e.qZA(),e.TgZ(14,"div",9),e.TgZ(15,"mat-form-field",10),e.TgZ(16,"mat-label"),e._uU(17,"Tipo de permiso:"),e.qZA(),e.TgZ(18,"mat-select",13),e.NdJ("selectionChange",function(l){return e.CHM(r),e.oxw().crePermissionTypeChange(l.value)}),e.YNc(19,K,2,2,"mat-option",14),e.qZA(),e.TgZ(20,"mat-hint"),e._uU(21,"Seleccionar el tipo de permiso."),e.qZA(),e.qZA(),e.TgZ(22,"mat-form-field",10),e.TgZ(23,"mat-label"),e._uU(24,"Permiso"),e.qZA(),e._UZ(25,"input",15),e.YNc(26,Y,2,1,"mat-error",2),e.qZA(),e.qZA(),e.TgZ(27,"div",9),e.TgZ(28,"mat-form-field",10),e.TgZ(29,"mat-label"),e._uU(30,"Terminal de Almacenamiento y distribuci\xf3n:"),e.qZA(),e._UZ(31,"input",16),e.qZA(),e.qZA(),e.TgZ(32,"div",17),e.TgZ(33,"div",18),e.TgZ(34,"mat-label",19),e._uU(35,"Origen proveedor:*"),e.qZA(),e.TgZ(36,"mat-slide-toggle",20),e.NdJ("change",function(l){return e.CHM(r),e.oxw().extranjeroChange(l)}),e._uU(37),e.qZA(),e.qZA(),e.TgZ(38,"mat-form-field",10),e.TgZ(39,"mat-label"),e._uU(40,"Permiso de importaci\xf3n o exportaci\xf3n:"),e.qZA(),e._UZ(41,"input",21),e.qZA(),e.qZA(),e.TgZ(42,"div",17),e.TgZ(43,"div",18),e.TgZ(44,"mat-label",19),e._uU(45,"Estatus:*"),e.qZA(),e.TgZ(46,"mat-slide-toggle",22),e.NdJ("change",function(l){return e.CHM(r),e.oxw().setActiveCrePermission(l)}),e._uU(47),e.qZA(),e.qZA(),e.TgZ(48,"mat-form-field",10),e.TgZ(49,"mat-label"),e._uU(50,"Documentos para rastreo de entregas de combustible:"),e.qZA(),e.TgZ(51,"mat-select",23),e.YNc(52,$,2,2,"mat-option",14),e.qZA(),e.TgZ(53,"mat-hint"),e._uU(54,"Seleccionar tipos de documentos utilizados para comprobar entregas de proveedor."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"div",9),e.TgZ(56,"mat-form-field",10),e.TgZ(57,"mat-label"),e._uU(58,"Moneda:"),e.qZA(),e.TgZ(59,"mat-select",24),e.YNc(60,z,2,2,"mat-option",14),e.qZA(),e.qZA(),e.TgZ(61,"mat-form-field",10),e.TgZ(62,"mat-label"),e._uU(63,"Unidad de medida:"),e.qZA(),e.TgZ(64,"mat-select",25),e.YNc(65,V,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",8),e._UZ(67,"mat-divider"),e.qZA(),e.TgZ(68,"div",26),e.TgZ(69,"button",27),e.NdJ("click",function(){return e.CHM(r),e.oxw().close()}),e._uU(70,"CANCELAR"),e.qZA(),e.TgZ(71,"button",28),e.NdJ("click",function(){return e.CHM(r),e.oxw().submit()}),e._uU(72,"GUARDAR"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const r=e.oxw();e.Q6J("formGroup",r.crePermissionsModalForm),e.xp6(13),e.Q6J("ngIf",r.crePermissionsModalForm.get("rfc").errors),e.xp6(6),e.Q6J("ngForOf",r.cre_permission_types),e.xp6(7),e.Q6J("ngIf",r.crePermissionsModalForm.get("permission").errors),e.xp6(11),e.Oqu(r.extranjero_label),e.xp6(10),e.Oqu(r.active_label),e.xp6(5),e.Q6J("ngForOf",r.documentation_tracking_types),e.xp6(8),e.Q6J("ngForOf",r.currencies),e.xp6(5),e.Q6J("ngForOf",r.units_of_measure),e.xp6(6),e.Q6J("disabled",r.crePermissionsModalForm.invalid)}}let R=(()=>{class o{constructor(r,n,l,y){this.data=r,this.dialogRef=n,this.snackbar=l,this._crePermissionsService=y,this.title="Permisos CRE",this.status=!1,this.crePermission=new E._,this.isLoading=!1,this.currencies=[],this.units_of_measure=[],this.active_label="Activo",this.extranjero_label="Nacional",this.cre_permission_types=[],this.documentation_tracking_types=[{id:1,value:"Factura y remisi\xf3n"},{id:2,value:"Solo factura"},{id:3,value:"Solo remisi\xf3n"}],this.hide=!0,this.isLoading=!0,n.disableClose=!0,this.crePermissionsModalForm=new s.cw({permission_id:new s.NI,provider_name:new s.NI("",[s.kI.required]),rfc:new s.NI("",[s.kI.required,s.kI.pattern("^([A-Z\xd1]|&){3,4}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}$")]),permission:new s.NI("",[s.kI.required,s.kI.pattern("^((H|PL|PQ|G|P|GN|LP)/[0-9]{5}(/P)?/[A-Z]{2,5}(/[A-Z]{2,3}){0,2}/[0-9]{4}|(SENER)-(REF|TP|CPG)-[0-9]{3}-[0-9]{4})$")]),documentation_tracking_type:new s.NI(1,[s.kI.required]),default_currency:new s.NI(1,[s.kI.required]),default_volume_unit_of_measure:new s.NI(1,[s.kI.required]),cre_permission_type:new s.NI("",[s.kI.required]),terminal_alm_y_dist:new s.NI(""),extranjero:new s.NI(!1),permiso_importacion_o_exportacion:new s.NI(""),status:new s.NI(2)},function C(){return o=>{const a=o.controls.rfc,r=o.controls.permission;let n=new RegExp(/^([A-Z\xd1]|\&){3,4}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}$/),l=new RegExp(/^((H|PL|PQ|G|P|GN|LP)\/[0-9]{5}(\/P)?\/[A-Z]{2,5}(\/[A-Z]{2,3}){0,2}\/[0-9]{4}|(SENER)-(REF|TP|CPG)-[0-9]{3}-[0-9]{4})$/);!n.test(a.value)&&a.value.length>0?a.setErrors({invalidPattern:"Formato de RFC inv\xe1lido"}):a.setErrors(null),!l.test(r.value)&&r.value.length>0?r.setErrors({invalidPattern:"Formato de permiso inv\xe1lido"}):r.setErrors(null)}}())}ngOnInit(){return(0,P.mG)(this,void 0,void 0,function*(){this.currencies=yield this.getCurrencies(),this.units_of_measure=yield this.getUnitsOfMeasure(),this.cre_permission_types=yield this.getCrePermissionTypes(),console.log(this.data),this.data?(this.crePermission=this.data,this.crePermissionsModalForm.patchValue({permission_id:this.crePermission.permission_id,provider_name:this.crePermission.provider_name,rfc:this.crePermission.rfc,permission:this.crePermission.permission,documentation_tracking_type:this.crePermission.documentation_tracking_type,default_currency:this.crePermission.default_currency,default_volume_unit_of_measure:this.crePermission.default_volume_unit_of_measure,cre_permission_type:this.crePermission.cre_permission_type,terminal_alm_y_dist:this.crePermission.terminal_alm_y_dist,extranjero:1===this.crePermission.extranjero,permiso_importacion_o_exportacion:this.crePermission.permiso_importacion_o_exportacion,status:2===this.crePermission.status}),this.status=2===this.crePermission.status,this.active_label=this.status?"Activo":"Inactivo",1===this.crePermission.extranjero?(this.crePermissionsModalForm.controls.rfc.setValue(""),this.crePermissionsModalForm.controls.permission.setValue(""),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValue(""),this.crePermissionsModalForm.controls.rfc.disable(),this.crePermissionsModalForm.controls.permission.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.enable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.setValidators([s.kI.required]),this.extranjero_label="Extranjero"):(this.crePermissionsModalForm.controls.rfc.enable(),this.crePermissionsModalForm.controls.permission.enable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.setValue(""),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.disable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.clearValidators(),this.extranjero_label="Nacional",1===this.crePermission.cre_permission_type||2===this.crePermission.cre_permission_type?(this.crePermissionsModalForm.controls.terminal_alm_y_dist.enable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValidators([s.kI.required])):(this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators()))):(this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators()),this.isLoading=!1})}getCurrencies(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCurrencies().toPromise()})}getUnitsOfMeasure(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("volume").toPromise()})}getCrePermissionTypes(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCrePermissionTypes().toPromise()})}submit(){this.crePermission.provider_name=this.crePermissionsModalForm.controls.provider_name.value,this.crePermission.rfc=this.crePermissionsModalForm.controls.rfc.value,this.crePermission.permission=this.crePermissionsModalForm.controls.permission.value,this.crePermission.documentation_tracking_type=this.crePermissionsModalForm.controls.documentation_tracking_type.value,this.crePermission.default_currency=this.crePermissionsModalForm.controls.default_currency.value,this.crePermission.default_volume_unit_of_measure=this.crePermissionsModalForm.controls.default_volume_unit_of_measure.value,this.crePermission.cre_permission_type=this.crePermissionsModalForm.controls.cre_permission_type.value,this.crePermission.terminal_alm_y_dist=this.crePermissionsModalForm.controls.terminal_alm_y_dist.value,this.crePermission.status=this.crePermissionsModalForm.controls.status.value?2:1,this.crePermission.extranjero=this.crePermissionsModalForm.controls.extranjero.value?1:0,this.crePermission.permiso_importacion_o_exportacion=this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.value,null===this.crePermission.permission_id?this.createCrePermission():this.updateCrePermission()}createCrePermission(){this.isLoading=!0,this._crePermissionsService.create(this.crePermission).subscribe(r=>{this.snackbar.open(r.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"create",data:this.crePermission})},r=>{this.snackbar.open(r,null,{duration:5e3,panelClass:["red-snackbar"]})}),this.isLoading=!1}updateCrePermission(){this.isLoading=!0,this._crePermissionsService.update(this.crePermission).subscribe(r=>{this.snackbar.open(r.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"update",data:this.crePermission})},r=>{this.snackbar.open(r,null,{duration:5e3,panelClass:["green-snackbar"]})}),this.isLoading=!1}close(){this.dialogRef.close({action:"cancel",data:this.crePermission})}setActiveCrePermission(r){this.active_label=r.checked?"Activo":"Inactivo",this.status=r.checked}crePermissionTypeChange(r){1===r||2===r?(this.crePermissionsModalForm.controls.terminal_alm_y_dist.enable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValidators([s.kI.required])):(this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValue(""),this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators())}extranjeroChange(r){r.checked?(this.crePermissionsModalForm.controls.rfc.setValue(""),this.crePermissionsModalForm.controls.rfc.disable(),this.crePermissionsModalForm.controls.permission.setValue(""),this.crePermissionsModalForm.controls.permission.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValue(""),this.crePermissionsModalForm.controls.terminal_alm_y_dist.disable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.clearValidators(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.enable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.setValidators([s.kI.required]),this.extranjero_label="Extranjero"):(this.crePermissionsModalForm.controls.rfc.enable(),this.crePermissionsModalForm.controls.permission.enable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.setValue(""),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.disable(),this.crePermissionsModalForm.controls.permiso_importacion_o_exportacion.clearValidators(),this.extranjero_label="Nacional",(1===this.crePermissionsModalForm.controls.cre_permission_type.value||2===this.crePermissionsModalForm.controls.cre_permission_type.value)&&(this.crePermissionsModalForm.controls.terminal_alm_y_dist.enable(),this.crePermissionsModalForm.controls.terminal_alm_y_dist.setValidators([s.kI.required])))}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(A.WI),e.Y36(A.so),e.Y36(f.ux),e.Y36(v.w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["fury-form-wizard"]],viewQuery:function(r,n){if(1&r&&e.Gf(G,5),2&r){let l;e.iGM(l=e.CRH())&&(n._focusMe=l.first)}},decls:9,vars:6,consts:[[1,"title"],["svgIcon","permission"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"heading"],["fxLayout","column","fxLayoutGap","8px",1,"content",2,"margin-top","20px"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutGap.gt-sm","24px"],["appearance","outline","fxFlex","",1,"field"],["type","text","formControlName","provider_name","required","","matInput",""],["type","text","formControlName","rfc","required","","matInput",""],["formControlName","cre_permission_type","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","permission","required","","matInput",""],["type","text","formControlName","terminal_alm_y_dist","required","","matInput",""],["fxLayout","column","fxLayout.gt-sm","row"],[1,"toggle"],[1,"label-toggle"],["color","primary","formControlName","extranjero",3,"change"],["type","text","formControlName","permiso_importacion_o_exportacion","required","","matInput",""],["color","primary","formControlName","status",3,"change"],["formControlName","documentation_tracking_type","required",""],["formControlName","default_currency","required",""],["formControlName","default_volume_unit_of_measure","required",""],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"],["color","primary","mat-raised-button","",3,"disabled","click"],[3,"value"]],template:function(r,n){1&r&&(e.TgZ(0,"fury-page"),e.TgZ(1,"fury-title",0),e._UZ(2,"mat-icon",1),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.YNc(5,W,2,1,"loading",2),e.TgZ(6,"div",3),e.TgZ(7,"div",4),e.YNc(8,X,73,10,"form",5),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(1),e.Oqu(n.title),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(2),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("ngIf",n.crePermissionsModalForm))},directives:[b.i,D.M,Z.Hw,t.O5,O.xw,O.Wh,s._Y,s.JL,s.sg,O.SQ,L.KE,O.yH,L.hX,s.Fj,w.Nt,s.JJ,s.u,s.Q7,B.gD,t.sg,L.bx,Q.Rr,H.d,S.lW,L.TO,j.ey],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{overflow:scroll;margin:5px;max-width:600px;max-height:100%;border-radius:8px;padding:8px}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{max-width:800px;width:250px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:14px;padding:24px 8px 0}.toggle[_ngcontent-%COMP%]{padding:.8em .75em 0;border-style:solid;border-width:1px;border-radius:6px;max-width:800px;height:52px;width:250px;border-color:#e0e0e0;margin:5px 24px 0 0;display:inline-grid}.label-toggle[_ngcontent-%COMP%]{position:relative;font-size:11px;font-family:Roboto;font-weight:400;top:10px;color:#0009;background:white;z-index:1;max-width:100px;min-width:50px;margin:-31px 10px 0 0;height:10px;padding-left:5px}"],data:{animation:[I.X,F.M,U.K]}}),o})();var ee=i(39762),te=i(53580),re=i(38932),ie=i(19165),oe=i(94927),N=i(92181);function se(o,a){if(1&o&&(e.TgZ(0,"th",17),e._uU(1),e.qZA()),2&o){const r=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",r.name," ")}}function ne(o,a){if(1&o&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&o){const r=a.$implicit,n=e.oxw(2).$implicit,l=e.oxw();e.xp6(1),e.hij(" ",l.getLabel(n.name,r[n.property])," ")}}function ae(o,a){if(1&o&&(e.ynx(0,14),e.YNc(1,se,2,1,"th",15),e.YNc(2,ne,2,1,"td",16),e.BQk()),2&o){const r=e.oxw().$implicit;e.Q6J("matColumnDef",r.property)}}function le(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ae,3,1,"ng-container",13),e.BQk()),2&o){const r=a.$implicit;e.xp6(1),e.Q6J("ngIf",r.isModelProperty)}}function ce(o,a){1&o&&e._UZ(0,"th",19)}function me(o,a){if(1&o){const r=e.EpF();e.TgZ(0,"td",20),e.TgZ(1,"button",21),e.NdJ("click",function(l){return l.stopPropagation()}),e.TgZ(2,"mat-icon"),e._uU(3,"more_horiz"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",22,23),e.TgZ(6,"button",24),e.NdJ("click",function(){const y=e.CHM(r).$implicit;return e.oxw().updateCrePermission(y)}),e.TgZ(7,"span"),e._uU(8,"Editar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const r=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",r)}}function ue(o,a){1&o&&e._UZ(0,"tr",25)}function de(o,a){if(1&o){const r=e.EpF();e.TgZ(0,"tr",26),e.NdJ("click",function(){const y=e.CHM(r).$implicit;return e.oxw().updateCrePermission(y)}),e.qZA()}}const _e=function(){return["Tables"]},pe=[{path:"",component:(()=>{class o{constructor(r,n){this.dialog=r,this._crePermissionsService=n,this.subject$=new M.t(1),this.data$=this.subject$.asObservable(),this.currencies=[],this.unitsOfMeasure=[],this.cre_permission_types=[],this.documentation_tracking_types=[{id:1,value:"Factura y remisi\xf3n"},{id:2,value:"Solo factura"},{id:3,value:"Solo remisi\xf3n"}],this.columns=[{name:"Nombre o raz\xf3n social",property:"provider_name",visible:!0,isModelProperty:!0},{name:"RFC",property:"rfc",visible:!0,isModelProperty:!0},{name:"Permiso",property:"permission",visible:!0,isModelProperty:!0},{name:"Moneda",property:"default_currency",visible:!0,isModelProperty:!0},{name:"Unidad de medida de volumen",property:"default_volume_unit_of_measure",visible:!0,isModelProperty:!0},{name:"Documentos para rastreo",property:"documentation_tracking_type",visible:!0,isModelProperty:!0},{name:"Tipo de permiso",property:"cre_permission_type",visible:!0,isModelProperty:!0},{name:"Fecha de creaci\xf3n",property:"timestamp",visible:!1,isModelProperty:!0},{name:"TAD",property:"terminal_alm_y_dist",visible:!0,isModelProperty:!0},{name:"Extranjero",property:"extranjero",visible:!0,isModelProperty:!0},{name:"Permiso importaci\xf3n",property:"permiso_importacion_o_exportacion",visible:!1,isModelProperty:!0},{name:"Estatus",property:"status",visible:!1,isModelProperty:!0},{name:"Acciones",property:"actions",visible:!0}],this.pageSize=10}getLabel(r,n){if(null!=r)return"Estatus"===r?2===n?"Activo":"Inactivo":"Moneda"===r?this.currencies.find(l=>l.id===n).currency:"Unidad de medida de volumen"===r?this.unitsOfMeasure.find(l=>l.id===n).unit_of_measure:"Tipo de permiso"===r?this.cre_permission_types.find(l=>l.id===n).cre_permission_type:"Documentos para rastreo"===r?this.documentation_tracking_types.find(l=>l.id===n).value:"Extranjero"===r?1==n?"Si":"No":n}get visibleColumns(){return this.columns.filter(r=>r.visible).map(r=>r.property)}getData(){this._crePermissionsService.getAll().subscribe(r=>{this.crePermissions=r,this.dataSource=new p.by(r),this.dataSource=new p.by(this.crePermissions),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},r=>{console.log(r)})}ngOnInit(){return(0,P.mG)(this,void 0,void 0,function*(){this.dataSource=new p.by,this.currencies=yield this.getCurrencies(),this.unitsOfMeasure=yield this.getUnitsOfMeasure(),this.cre_permission_types=yield this.getCrePermissionTypes(),this.getData(),this.data$.pipe((0,T.h)(r=>!!r)).subscribe(r=>{this.crePermissions=r,this.dataSource.data=r})})}getCurrencies(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCurrencies().toPromise()})}getUnitsOfMeasure(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getUnitsOfMeasure("volume").toPromise()})}getCrePermissionTypes(){return(0,P.mG)(this,void 0,void 0,function*(){return yield this._crePermissionsService.getCrePermissionTypes().toPromise()})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createCrePermission(){this.dialog.open(R).afterClosed().subscribe(r=>{r&&(this.crePermissions.unshift(new E._(r)),this.subject$.next(this.crePermissions),this.getData(),this.data$.pipe((0,T.h)(n=>!!n)).subscribe(n=>{this.crePermissions=n,this.dataSource.data=n}))})}updateCrePermission(r){this.dialog.open(R,{data:r}).afterClosed().subscribe(n=>{if(n){const l=this.crePermissions.findIndex(y=>y.permission_id===n.permission_id);this.crePermissions[l]=new E._(n),this.subject$.next(this.crePermissions),this.getData(),this.data$.pipe((0,T.h)(y=>!!y)).subscribe(y=>{this.crePermissions=y,this.dataSource.data=y})}})}onFilterChange(r){!this.dataSource||(r=(r=r.trim()).toLowerCase(),this.dataSource.filter=r)}ngOnDestroy(){}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(A.uw),e.Y36(v.w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["cre-permissions-table"]],viewQuery:function(r,n){if(1&r&&(e.Gf(m.NW,7),e.Gf(u.YE,7)),2&r){let l;e.iGM(l=e.CRH())&&(n.paginator=l.first),e.iGM(l=e.CRH())&&(n.sort=l.first)}},inputs:{columns:"columns"},decls:17,vars:10,consts:[["mode","card"],["current","Permisos CRE",3,"crumbs"],["name","Permisos CRE",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(r,n){1&r&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-header"),e._UZ(2,"fury-breadcrumbs",1),e.qZA(),e.TgZ(3,"fury-page-layout-content"),e.TgZ(4,"fury-list",2),e.NdJ("filterChange",function(y){return n.onFilterChange(y)}),e.TgZ(5,"div",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.createCrePermission()}),e.TgZ(7,"mat-icon"),e._uU(8,"add"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"table",5),e.YNc(10,le,2,1,"ng-container",6),e.ynx(11,7),e.YNc(12,ce,1,0,"th",8),e.YNc(13,me,9,1,"td",9),e.BQk(),e.YNc(14,ue,1,0,"tr",10),e.YNc(15,de,1,0,"tr",11),e.qZA(),e._UZ(16,"mat-paginator",12),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.xp6(2),e.Q6J("@fadeInRight",void 0)("crumbs",e.DdM(9,_e)),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",n.columns),e.xp6(5),e.Q6J("dataSource",n.dataSource),e.xp6(1),e.Q6J("ngForOf",n.columns),e.xp6(4),e.Q6J("matHeaderRowDef",n.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.visibleColumns),e.xp6(1),e.Q6J("pageSize",n.pageSize))},directives:[ee.N,te.U,re.n,ie.d,oe.n,S.lW,Z.Hw,p.BZ,u.YE,t.sg,p.w1,p.fO,p.Dz,p.as,p.nj,m.NW,t.O5,p.ge,u.nU,p.ev,N.p6,N.VK,N.OP,p.XQ,p.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[F.M,I.X]}}),o})()}];let ge=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(pe)],d.Bz]}),o})();var J=i(72467);const fe=[{path:"",component:R}];let q=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(fe)],d.Bz]}),o})();var he=i(61620),Pe=i(91079),ye=i(79814);let ve=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[t.ez,he.o9,s.u5,s.UX,Pe.Bb,S.ot,A.Is,Z.Ps,w.c,ye.Fk,B.LD,g.q,J.Z,q]]}),o})(),Ce=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[t.ez,s.u5,c.J,h.p,g.q,ge,J.Z,q,ve]]}),o})()},95288:(x,_,i)=>{i.d(_,{w:()=>g});var t=i(40520),s=i(98545),c=i(5e3),h=i(33344);let g=(()=>{class d{constructor(m,u){this.http=m,this.tokenStorage=u}getHeaders(){var m=new t.WM,u=this.tokenStorage.getToken();return m.set("token",u||"{}")}getAll(){var m=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSIONS,{headers:m})}create(m){var u=this.getHeaders();return this.http.post(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSIONS,m,{headers:u})}update(m){var u=this.getHeaders();return this.http.put(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSIONS+"/"+m.permission_id,m,{headers:u})}getCurrencies(){var m=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CURRENCIES,{headers:m})}getUnitsOfMeasure(m){var u=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.UNITS_OF_MEASURE+"?type="+m,{headers:u})}getCrePermissionTypes(){var m=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSION_TYPES,{headers:m})}getAllByType(m){var u=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSIONS+"?cre_permission_type="+m,{headers:u})}getCrePermission(m){var u=this.getHeaders();return this.http.get(s._.settings.apiServer.API_URL_BASE+s._.settings.apiServer.CRE_PERMISSIONS+"/"+m,{headers:u})}}return d.\u0275fac=function(m){return new(m||d)(c.LFG(t.eN),c.LFG(h.i))},d.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);