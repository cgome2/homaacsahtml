"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[3419],{88914:(T,h,i)=>{i.d(h,{M:()=>o});var e=i(41777);const o=(0,e.X$)("fadeInRight",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateX(-2vw)",opacity:0}),(0,e.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(T,h,i)=>{i.d(h,{X:()=>o});var e=i(41777);const o=(0,e.X$)("fadeInUp",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateY(3vh)",opacity:0}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateY(0)",opacity:1}))])])},37425:(T,h,i)=>{i.d(h,{K:()=>o});var e=i(41777);const o=(0,e.X$)("scaleIn",[(0,e.eR)(":enter",[(0,e.oB)({transform:"scale(0)"}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"scale(1)"}))])])},38932:(T,h,i)=>{i.d(h,{n:()=>p});var e=i(5e3),o=i(30277),m=i(3299),d=i(69808),v=i(25245);function _(f,n){if(1&f&&(e.TgZ(0,"div",7),e.TgZ(1,"mat-icon",5),e._uU(2,"chevron_right"),e.qZA(),e.TgZ(3,"div",6),e._uU(4),e.qZA(),e.qZA()),2&f){const s=n.$implicit;e.xp6(4),e.Oqu(s)}}const C=function(){return["/"]};let p=(()=>{class f{constructor(){this.crumbs=[]}ngOnInit(){}}return f.\u0275fac=function(s){return new(s||f)},f.\u0275cmp=e.Xpm({type:f,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(s,g){1&s&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"a",2),e._uU(4,"Home"),e.qZA(),e.YNc(5,_,5,1,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"mat-icon",5),e._uU(8,"chevron_right"),e.qZA(),e.TgZ(9,"div",6),e._uU(10),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(1),e.Oqu(g.current),e.xp6(2),e.Q6J("routerLink",e.DdM(4,C)),e.xp6(2),e.Q6J("ngForOf",g.crumbs),e.xp6(5),e.Oqu(g.current))},directives:[o.xw,o.Wh,m.yS,d.sg,v.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),f})()},94927:(T,h,i)=>{i.d(h,{n:()=>Z});var e=i(5e3),o=i(23753),m=i(75778),d=i(80013),v=i(69808),_=i(92181),C=i(30277),p=i(25245),f=i(47423),n=i(77446),s=i(93075);const g=["filter"];function O(y,P){if(1&y&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"mat-icon",8),e._uU(5,"search"),e.qZA(),e._UZ(6,"input",9,10),e.qZA(),e.TgZ(8,"button",11),e.TgZ(9,"mat-icon"),e._uU(10,"filter_list"),e.qZA(),e.qZA(),e.Hsn(11,1),e.qZA()),2&y){const t=e.oxw(),A=e.MAs(3);e.xp6(2),e.Oqu(t.name),e.xp6(6),e.Q6J("matMenuTriggerFor",A)}}function b(y,P){if(1&y){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(x){const M=e.CHM(t).$implicit;return e.oxw().toggleColumnVisibility(M,x)}),e.TgZ(1,"mat-checkbox",13,14),e.NdJ("ngModelChange",function(x){return e.CHM(t).$implicit.visible=x})("click",function(x){return x.stopPropagation()}),e._uU(3),e.qZA(),e.qZA()}if(2&y){const t=P.$implicit;e.xp6(1),e.Q6J("ngModel",t.visible),e.xp6(2),e.hij(" ",t.name," ")}}const L=["*",[["",8,"actions"]]],U=["*",".actions"];let Z=(()=>{class y{constructor(){this.filterChange=new e.vpe}ngAfterViewInit(){this.hideHeader||(0,o.R)(this.filter.nativeElement,"keyup").pipe((0,m.x)(),(0,d.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(t,A){A.stopPropagation(),A.stopImmediatePropagation(),t.visible=!t.visible}}return y.\u0275fac=function(t){return new(t||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["fury-list"]],viewQuery:function(t,A){if(1&t&&e.Gf(g,5),2&t){let x;e.iGM(x=e.CRH())&&(A.filter=x.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:U,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(t,A){1&t&&(e.F$t(L),e.TgZ(0,"div",0),e.YNc(1,O,12,2,"div",1),e.TgZ(2,"mat-menu",2,3),e.YNc(4,b,4,2,"button",4),e.qZA(),e.Hsn(5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!A.hideHeader),e.xp6(3),e.Q6J("ngForOf",A.columns))},directives:[v.O5,_.VK,v.sg,C.xw,C.Wh,C.SQ,C.yH,p.Hw,f.lW,_.p6,n.oG,s.JJ,s.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),y})()},4940:(T,h,i)=>{i.d(h,{p:()=>v});var e=i(69808),o=i(93075),m=i(7057),d=i(5e3);let v=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=d.oAB({type:_}),_.\u0275inj=d.cJS({imports:[[e.ez,m.q,o.u5]]}),_})()},19165:(T,h,i)=>{i.d(h,{d:()=>o});var e=i(5e3);let o=(()=>{class m{constructor(){}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),m})()},53580:(T,h,i)=>{i.d(h,{U:()=>o});var e=i(5e3);let o=(()=>{class m{constructor(){}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),m})()},39762:(T,h,i)=>{i.d(h,{N:()=>o});var e=i(5e3);let o=(()=>{class m{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(v,_){2&v&&e.ekj("fury-page-layout-card",_.isCard)("fury-page-layout-simple",_.isSimple)},inputs:{mode:"mode"}}),m})()},59968:(T,h,i)=>{i.d(h,{i:()=>o});var e=i(5e3);let o=(()=>{class m{constructor(){}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275dir=e.lG2({type:m,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),m})()},3419:(T,h,i)=>{i.r(h),i.d(h,{CertificadosSistemaTableModule:()=>St});var e=i(69808),o=i(93075),m=i(61264),d=i(4940),v=i(7057),_=i(72467),C=i(3299),p=i(70655),f=i(86087),n=i(84847),s=i(32075),g=i(18444),O=i(96831),b=i(92198),L=i(88914),U=i(14499),Z=i(48966),y=i(37425);class P{constructor(l){this.cv_certificado_id=l&&l.cv_certificado_id||null,this.site_code=l&&l.site_code||null,this.station=l&&l.station||null,this.cv_configuration_id=l&&l.cv_configuration_id||null,this.product=l&&l.product||null,this.rfc_certificado=l&&l.rfc_certificado||null,this.numero_folio_certificado=l&&l.numero_folio_certificado||null,this.fecha_emision_certificado=l&&l.fecha_emision_certificado||null,this.resultado_certificado=l&&l.resultado_certificado||null,this.user_id=l&&l.user_id||null,this.timestamp=l&&l.timestamp||null,this.status=l&&l.status||null}}var t=i(5e3),A=i(57261),x=i(52190),R=i(40520),M=i(46227),I=i(27221),E=i(98545),Q=i(33344);let W=(()=>{class a{constructor(r,c){this.http=r,this.tokenStorage=c}getHeaders(){var r=new R.WM,c=this.tokenStorage.getToken();return r.set("token",c||"{}")}getAll(){var r=this.getHeaders();return this.http.get(E._.settings.apiServer.API_URL_BASE+E._.settings.apiServer.CERTIFICADOS_SISTEMA,{headers:r}).pipe((0,M.V)(1e4),(0,I.K)(c=>{throw"Error de conexi\xf3n. Detalles: "+c}))}create(r){var c=this.getHeaders();return this.http.post(E._.settings.apiServer.API_URL_BASE+E._.settings.apiServer.CERTIFICADOS_SISTEMA,r,{headers:c}).pipe((0,M.V)(1e4),(0,I.K)(u=>{throw"Error de conexi\xf3n. Detalles: "+u}))}update(r){var c=this.getHeaders();return this.http.put(E._.settings.apiServer.API_URL_BASE+E._.settings.apiServer.CERTIFICADOS_SISTEMA+"/"+r.cv_certificado_id,r,{headers:c}).pipe((0,M.V)(1e4),(0,I.K)(u=>{throw"Error de conexi\xf3n. Detalles: "+u}))}delete(r){var c=this.getHeaders();return this.http.delete(E._.settings.apiServer.API_URL_BASE+E._.settings.apiServer.CERTIFICADOS_SISTEMA+"/"+r.cv_certificado_id,{headers:c}).pipe((0,M.V)(1e4),(0,I.K)(u=>{throw"Error de conexi\xf3n. Detalles: "+u}))}}return a.\u0275fac=function(r){return new(r||a)(t.LFG(R.eN),t.LFG(Q.i))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Y=i(59968),$=i(36551),J=i(25245),B=i(92081),F=i(30277),H=i(67322),z=i(74107),j=i(77531),w=i(86856),k=i(47423),V=i(90508);function X(a,l){1&a&&t._uU(0,"Datos del certificado")}function q(a,l){if(1&a&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&a){const r=l.$implicit;t.Q6J("value",r.site_code),t.xp6(1),t.Oqu(r.station_name)}}let K=(()=>{class a{constructor(r,c,u,S,D){this.data=r,this.dialogRef=c,this.snackbar=u,this._stationsService=S,this._certificadosSistemaService=D,this.generalFormGroup=new o.cw({cv_certificado_id:new o.NI,site_code:new o.NI("",[o.kI.required]),rfc_certificado:new o.NI("",[o.kI.required,o.kI.pattern("^([A-Z\xd1]|&){3}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}$")]),numero_folio_certificado:new o.NI("",[o.kI.required,o.kI.pattern("^([A-Z\xd1]|&){3}[0-9]{2}(0[1-9]|1[0-2])([12][0-9]|0[1-9]|3[01])[A-Z0-9]{3}[0-9]{5}2[0-9]{3}$")]),fecha_emision_certificado:new o.NI("",[o.kI.required]),resultado_certificado:new o.NI("",[o.kI.required,o.kI.minLength(10),o.kI.maxLength(300)])}),this.theCertificadoSistema=new P,this.stations=[],this.dialogRef.disableClose=!0}ngOnInit(){return(0,p.mG)(this,void 0,void 0,function*(){this.stations=yield this.getStations(),null!=this.data&&(this.theCertificadoSistema=this.data,this.generalFormGroup.patchValue({cv_certificado_id:this.theCertificadoSistema.cv_certificado_id,site_code:this.theCertificadoSistema.site_code,rfc_certificado:this.theCertificadoSistema.rfc_certificado,numero_folio_certificado:this.theCertificadoSistema.numero_folio_certificado,fecha_emision_certificado:new Date(this.theCertificadoSistema.fecha_emision_certificado),resultado_certificado:this.theCertificadoSistema.resultado_certificado}))})}getStations(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getAll().toPromise()})}submit(){this.theCertificadoSistema.cv_certificado_id=this.generalFormGroup.controls.cv_certificado_id.value,this.theCertificadoSistema.site_code=this.generalFormGroup.controls.site_code.value,this.theCertificadoSistema.cv_configuration_id=this.stations.find(r=>+r.site_code==+this.generalFormGroup.controls.site_code.value).cv_configuration_id,this.theCertificadoSistema.rfc_certificado=this.generalFormGroup.controls.rfc_certificado.value,this.theCertificadoSistema.numero_folio_certificado=this.generalFormGroup.controls.numero_folio_certificado.value,this.theCertificadoSistema.fecha_emision_certificado=this.getMysqlDate(this.generalFormGroup.controls.fecha_emision_certificado.value),this.theCertificadoSistema.resultado_certificado=this.generalFormGroup.controls.resultado_certificado.value,this.theCertificadoSistema.cv_certificado_id>0?this.updateCertificadoSistema():this.createCertificadoSistema()}close(){this.dialogRef.close()}createCertificadoSistema(){this._certificadosSistemaService.create(this.theCertificadoSistema).subscribe(r=>{this.snackbar.open(r.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.theCertificadoSistema)},r=>{this.snackbar.open(r.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateCertificadoSistema(){this._certificadosSistemaService.update(this.theCertificadoSistema).subscribe(r=>{this.snackbar.open(r.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.theCertificadoSistema)},r=>{this.snackbar.open(r.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}getMysqlDate(r){return null!==r?r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2):""}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(Z.WI),t.Y36(Z.so),t.Y36(A.ux),t.Y36(x.w),t.Y36(W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["certificados-sistema"]],decls:49,vars:10,consts:[[2,"padding","1px","display","block"],[1,"title"],["svgIcon","dictamen"],[1,"card",2,"overflow","scroll","height","550px","width","600px"],[3,"linear"],["stepper","matVerticalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["fxLayout","row","fxLayoutGap","8px",1,"content"],["appearance","outline","fxFlex","auto"],["formControlName","site_code"],[3,"value",4,"ngFor","ngForOf"],["formControlName","rfc_certificado","matInput","","required",""],["formControlName","numero_folio_certificado","matInput","","required",""],["matInput","","formControlName","fecha_emision_certificado","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["color","primary"],["fechaEmisionCertificado",""],["matInput","","placeholder","Resultado del certificado...","formControlName","resultado_certificado"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","","type","button",3,"click"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled","click"],[3,"value"]],template:function(r,c){if(1&r&&(t.TgZ(0,"fury-page",0),t.TgZ(1,"fury-title",1),t._UZ(2,"mat-icon",2),t.TgZ(3,"span"),t._uU(4,"Certificado de sistema de control volum\xe9trico"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"mat-horizontal-stepper",4,5),t.TgZ(8,"mat-step",6),t.TgZ(9,"form",7),t.YNc(10,X,1,0,"ng-template",8),t.TgZ(11,"div",9),t.TgZ(12,"mat-form-field",10),t.TgZ(13,"mat-label"),t._uU(14,"Estaci\xf3n donde se deposit\xf3 el combustible:"),t.qZA(),t.TgZ(15,"mat-select",11),t.YNc(16,q,2,2,"mat-option",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"mat-form-field",10),t.TgZ(19,"mat-label"),t._uU(20,"RFC del emisor del certificado:"),t.qZA(),t._UZ(21,"input",13),t.qZA(),t.qZA(),t.TgZ(22,"div",9),t.TgZ(23,"mat-form-field",10),t.TgZ(24,"mat-label"),t._uU(25,"N\xfamero de folio:"),t.qZA(),t._UZ(26,"input",14),t.TgZ(27,"mat-hint"),t._uU(28,"RFC del proveedor + cinco n\xfameros \xfanicos cronol\xf3gicos + cuatro n\xfameros del a\xf1o de emisi\xf3n. (GEO9506184R6000232022)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"mat-form-field",10),t.TgZ(31,"mat-label"),t._uU(32,"Fecha del certificado:"),t.qZA(),t._UZ(33,"input",15),t.TgZ(34,"mat-datepicker-toggle",16),t.TgZ(35,"mat-icon",17),t._uU(36,"date_range"),t.qZA(),t.qZA(),t._UZ(37,"mat-datepicker",18,19),t.qZA(),t.qZA(),t.TgZ(39,"div",9),t.TgZ(40,"mat-form-field",10),t.TgZ(41,"mat-label"),t._uU(42,"Resultados:"),t.qZA(),t._UZ(43,"textarea",20),t.qZA(),t.qZA(),t.TgZ(44,"div",21),t.TgZ(45,"button",22),t.NdJ("click",function(){return c.close()}),t._uU(46,"CANCELAR"),t.qZA(),t.TgZ(47,"button",23),t.NdJ("click",function(){return c.submit()}),t._uU(48,"GUARDAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r){const u=t.MAs(38);t.xp6(2),t.Q6J("@scaleIn",void 0),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(2),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("linear",!0),t.xp6(2),t.Q6J("stepControl",c.generalFormGroup),t.xp6(1),t.Q6J("formGroup",c.generalFormGroup),t.xp6(7),t.Q6J("ngForOf",c.stations),t.xp6(17),t.Q6J("matDatepicker",u),t.xp6(1),t.Q6J("for",u),t.xp6(13),t.Q6J("disabled",c.generalFormGroup.invalid)}},directives:[Y.i,$.M,J.Hw,B.Vq,B.C0,o._Y,o.JL,o.sg,B.VY,F.xw,F.SQ,H.KE,F.yH,H.hX,z.gD,o.JJ,o.u,e.sg,o.Fj,j.Nt,o.Q7,H.bx,w.hl,w.nW,H.R9,w.Q0,w.Mq,F.Wh,k.lW,B.Ic,V.ey],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 10px 13px -6px #0003,0 20px 31px 3px #00000024,0 8px 38px 7px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px;width:50%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}"],data:{animation:[U.X,L.M,y.K]}}),a})();var tt=i(24333),et=i(9360),it=i(39762),rt=i(53580),at=i(38932),ot=i(19165),st=i(94927),N=i(92181);function nt(a,l){if(1&a&&(t.TgZ(0,"th",17),t._uU(1),t.qZA()),2&a){const r=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",r.name,"")}}function ct(a,l){if(1&a&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2).$implicit,u=t.oxw();t.xp6(1),t.hij(" ",u.getLabel(c.name,r[c.property])," ")}}function lt(a,l){if(1&a&&(t.ynx(0,14),t.YNc(1,nt,2,1,"th",15),t.YNc(2,ct,2,1,"td",16),t.BQk()),2&a){const r=t.oxw().$implicit;t.Q6J("matColumnDef",r.property)}}function dt(a,l){if(1&a&&(t.ynx(0),t.YNc(1,lt,3,1,"ng-container",13),t.BQk()),2&a){const r=l.$implicit;t.xp6(1),t.Q6J("ngIf",r.isModelProperty)}}function ut(a,l){1&a&&t._UZ(0,"th",19)}function mt(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"td",20),t.TgZ(1,"button",21),t.NdJ("click",function(u){return u.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.TgZ(4,"mat-menu",22,23),t.TgZ(6,"button",24),t.NdJ("click",function(){const S=t.CHM(r).$implicit;return t.oxw().updateCertificadoSistema(S)}),t.TgZ(7,"span"),t._uU(8,"Editar"),t.qZA(),t.qZA(),t.TgZ(9,"button",24),t.NdJ("click",function(){const S=t.CHM(r).$implicit;return t.oxw().deleteCertificadoSistema(S)}),t.TgZ(10,"span"),t._uU(11,"Eliminar"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const r=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",r)}}function pt(a,l){1&a&&t._UZ(0,"tr",25)}function ft(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"tr",26),t.NdJ("click",function(){const S=t.CHM(r).$implicit;return t.oxw().updateCertificadoSistema(S)}),t.qZA()}}const gt=function(){return["Control volumetrico"]},ht=[{path:"",component:(()=>{class a{constructor(r,c,u,S,D,At,yt){this.dialog=r,this.confirmationDialog=c,this._stationsService=u,this._usersService=S,this._productsService=D,this._certificadosSistemaService=At,this.snackbar=yt,this.subject$=new O.t(1),this.data$=this.subject$.asObservable(),this.stations=[],this.users=[],this.products=[],this.columns=[{name:"Id",property:"cv_certificado_id",visible:!0,isModelProperty:!0},{name:"Estaci\xf3n",property:"site_code",visible:!0,isModelProperty:!0},{name:"Rfc certificado",property:"rfc_certificado",visible:!0,isModelProperty:!0},{name:"N\xfamero folio",property:"numero_folio_certificado",visible:!1,isModelProperty:!0},{name:"Fecha emisi\xf3n",property:"fecha_emision_certificado",visible:!1,isModelProperty:!0},{name:"Resultado",property:"resultado_certificado",visible:!1,isModelProperty:!0},{name:"Creado por",property:"user_id",visible:!0,isModelProperty:!0},{name:"Modificaci\xf3n",property:"timestamp",visible:!0,isModelProperty:!0},{name:"Estatus",property:"status",visible:!1,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(r,c){if(null!=r)return"Estaci\xf3n"===r?this.stations.find(u=>u.site_code==c).station_name:"Producto"===r?this.products.find(u=>u.id==c).name:"Creado por"===r?this.users.find(u=>u.user_id==c).name:c}get visibleColumns(){return this.columns.filter(r=>r.visible).map(r=>r.property)}getData(){this.dataSource=new s.by,this._certificadosSistemaService.getAll().subscribe(r=>{this.certificados_sistema=r,this.dataSource=new s.by(r),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},r=>{console.log(r)})}ngOnInit(){return(0,p.mG)(this,void 0,void 0,function*(){this.dataSource=new s.by,this.stations=yield this.getStations(),this.users=yield this.getUsers(),this.products=yield this.getProducts(),this.getData(),this.data$.pipe((0,b.h)(r=>!!r)).subscribe(r=>{this.certificados_sistema=r,this.dataSource.data=this.certificados_sistema})})}getStations(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._stationsService.getAll().toPromise()})}getUsers(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._usersService.getAll().toPromise()})}getProducts(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._productsService.getAll().toPromise()})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createCertificadoSistema(){this.dialog.open(K).afterClosed().subscribe(r=>{r&&(this.subject$.next(this.certificados_sistema),this.getData(),this.data$.pipe((0,b.h)(c=>!!c)).subscribe(c=>{this.certificados_sistema=c,this.dataSource.data=c}))})}updateCertificadoSistema(r){this.dialog.open(K,{data:r}).afterClosed().subscribe(c=>{c&&(this.subject$.next(this.certificados_sistema),this.getData(),this.data$.pipe((0,b.h)(u=>!!u)).subscribe(u=>{this.certificados_sistema=u,this.dataSource.data=u}))})}updateTheCertificadoSistema(r){this._certificadosSistemaService.update(r).subscribe(c=>{this.snackbar.open(c.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.subject$.next(this.certificados_sistema),this.getData(),this.data$.pipe((0,b.h)(u=>!!u)).subscribe(u=>{this.certificados_sistema=u,this.dataSource.data=u})},c=>{this.snackbar.open(c.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}deleteCertificadoSistema(r){this.confirmationDialog.open(g.z,{data:{title:"Confirmaci\xf3n",message:"\xbfDesea eliminar del sistema el registro "+r.numero_folio_certificado+"?"}}).afterClosed().subscribe(c=>{c&&this._certificadosSistemaService.delete(r).subscribe(u=>{this.dataSource=new s.by,this.getData(),this.data$.pipe((0,b.h)(S=>!!S)).subscribe(S=>{this.certificados_sistema=S,this.dataSource.data=S}),this.snackbar.open(u.message,null,{duration:5e3,panelClass:["green-snackbar"]})})})}onFilterChange(r){!this.dataSource||(r=(r=r.trim()).toLowerCase(),this.dataSource.filter=r)}ngOnDestroy(){}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(Z.uw),t.Y36(Z.uw),t.Y36(x.w),t.Y36(tt.f),t.Y36(et.s),t.Y36(W),t.Y36(A.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["certificados-sistema-table"]],viewQuery:function(r,c){if(1&r&&(t.Gf(f.NW,7),t.Gf(n.YE,7)),2&r){let u;t.iGM(u=t.CRH())&&(c.paginator=u.first),t.iGM(u=t.CRH())&&(c.sort=u.first)}},inputs:{columns:"columns"},decls:17,vars:10,consts:[["mode","card"],["current","Certificados de sistema de control volum\xe9trico",3,"crumbs"],["name","Certificados de sistema de control volum\xe9trico",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(r,c){1&r&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-header"),t._UZ(2,"fury-breadcrumbs",1),t.qZA(),t.TgZ(3,"fury-page-layout-content"),t.TgZ(4,"fury-list",2),t.NdJ("filterChange",function(S){return c.onFilterChange(S)}),t.TgZ(5,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return c.createCertificadoSistema()}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"table",5),t.YNc(10,dt,2,1,"ng-container",6),t.ynx(11,7),t.YNc(12,ut,1,0,"th",8),t.YNc(13,mt,12,1,"td",9),t.BQk(),t.YNc(14,pt,1,0,"tr",10),t.YNc(15,ft,1,0,"tr",11),t.qZA(),t._UZ(16,"mat-paginator",12),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(2),t.Q6J("@fadeInRight",void 0)("crumbs",t.DdM(9,gt)),t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("columns",c.columns),t.xp6(5),t.Q6J("dataSource",c.dataSource),t.xp6(1),t.Q6J("ngForOf",c.columns),t.xp6(4),t.Q6J("matHeaderRowDef",c.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.visibleColumns),t.xp6(1),t.Q6J("pageSize",c.pageSize))},directives:[it.N,rt.U,at.n,ot.d,st.n,k.lW,J.Hw,s.BZ,n.YE,e.sg,s.w1,s.fO,s.Dz,s.as,s.nj,f.NW,e.O5,s.ge,n.nU,s.ev,N.p6,N.VK,N.OP,s.XQ,s.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[L.M,U.X]}}),a})()}];let _t=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[C.Bz.forChild(ht)],C.Bz]}),a})();const vt=[{path:"",component:K}];let G=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[C.Bz.forChild(vt)],C.Bz]}),a})(),Ct=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[e.ez,G,_.Z,o.UX,v.q]]}),a})(),St=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[e.ez,o.u5,m.J,d.p,v.q,_.Z,_t,Ct,G]]}),a})()},9360:(T,h,i)=>{i.d(h,{s:()=>v});var e=i(40520),o=i(98545),m=i(5e3),d=i(33344);let v=(()=>{class _{constructor(p,f){this.http=p,this.tokenStorage=f}getHeaders(){var p=new e.WM,f=this.tokenStorage.getToken();return p.set("token",f||"{}")}getAll(p){var f=this.getHeaders();if(null!=p){const s=(new e.LE).appendAll(p);var n=this.http.get(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS,{params:s,headers:f})}else n=this.http.get(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS,{headers:f});return n}getProduct(p){var f=this.getHeaders();return this.http.get(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS+"/"+p,{headers:f})}createProduct(p){var f=this.getHeaders();return this.http.post(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS,p,{headers:f})}updateProduct(p){var f=this.getHeaders();return this.http.put(o._.settings.apiServer.API_URL_BASE+o._.settings.apiServer.PRODUCTS+"/"+p.id,p,{headers:f})}}return _.\u0275fac=function(p){return new(p||_)(m.LFG(e.eN),m.LFG(d.i))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},52190:(T,h,i)=>{i.d(h,{w:()=>C});var e=i(40520),o=i(46227),m=i(27221),d=i(98545),v=i(5e3),_=i(33344);let C=(()=>{class p{constructor(n,s){this.http=n,this.tokenStorage=s}getHeaders(){var n=new e.WM,s=this.tokenStorage.getToken();return n.set("token",s||"{}")}getAll(n){var s=this.getHeaders();const g=(new e.LE).appendAll(n?{type:n}:{});return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATIONS,{params:g,headers:s})}create(n){var s=this.getHeaders();return this.http.post(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATIONS,n,{headers:s}).pipe((0,o.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}update(n){var s=this.getHeaders();return this.http.put(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATIONS+"/"+n.site_code,n,{headers:s}).pipe((0,o.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}delete(n){var s=this.getHeaders();return this.http.delete(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATIONS+"/"+n.site_code,{headers:s})}getRemoteProducts(n){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.REMOTE_PRODUCTS+"/"+n.site_code,{headers:s}).pipe((0,o.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}getRemoteTanks(n){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+"/remoteTanks/"+n.site_code,{headers:s}).pipe((0,o.V)(1e4),(0,m.K)(g=>{throw"Error de conexi\xf3n. Detalles: "+g}))}getMapOfProducts(n){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.PRODUCTS_MAPS+"/"+n.site_code,{headers:s})}setMapOfProducts(n,s){var g=this.getHeaders();return this.http.post(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.PRODUCTS_MAPS+"/"+s,n,{headers:g})}setTanksT(n){var s=this.getHeaders();return console.log(typeof n),this.http.post(d._.settings.apiServer.API_URL_BASE+"/remoteTanks",n,{headers:s})}getDevicesStatus(n){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.DEVICES_STATUS+"?site_code="+n,{headers:s})}getAllTanksStatus(){var n=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATUS_TANKS,{headers:n})}getTanksStatus(n){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATUS_TANKS+"/"+n,{headers:s})}getPumpsStatus(n){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.STATUS_PUMPS+"/"+n,{headers:s})}getPumps(n){var s=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.PUMPS+"/"+n,{headers:s})}syncSingle(n,s){var g=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.SYNC+"?site_code="+n+"&stub="+s,{headers:g}).pipe((0,o.V)(1e4),(0,m.K)(O=>{throw"Error de conexi\xf3n. Detalles: "+O}))}getMarimbas(){var n=this.getHeaders();return this.http.get(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.MARIMBAS,{headers:n})}updateIndexes(n){var s=this.getHeaders();return console.log(s),this.http.put(d._.settings.apiServer.API_URL_BASE+d._.settings.apiServer.INDEXES,n,{headers:s})}}return p.\u0275fac=function(n){return new(n||p)(v.LFG(e.eN),v.LFG(_.i))},p.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);