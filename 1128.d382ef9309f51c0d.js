"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[1128],{88914:(b,h,n)=>{n.d(h,{M:()=>l});var o=n(41777);const l=(0,o.X$)("fadeInRight",[(0,o.eR)(":enter",[(0,o.oB)({transform:"translateX(-2vw)",opacity:0}),(0,o.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,o.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(b,h,n)=>{n.d(h,{X:()=>l});var o=n(41777);const l=(0,o.X$)("fadeInUp",[(0,o.eR)(":enter",[(0,o.oB)({transform:"translateY(3vh)",opacity:0}),(0,o.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,o.oB)({transform:"translateY(0)",opacity:1}))])])},38932:(b,h,n)=>{n.d(h,{n:()=>c});var o=n(5e3),l=n(30277),u=n(3299),g=n(69808),p=n(25245);function m(f,M){if(1&f&&(o.TgZ(0,"div",7),o.TgZ(1,"mat-icon",5),o._uU(2,"chevron_right"),o.qZA(),o.TgZ(3,"div",6),o._uU(4),o.qZA(),o.qZA()),2&f){const _=M.$implicit;o.xp6(4),o.Oqu(_)}}const y=function(){return["/"]};let c=(()=>{class f{constructor(){this.crumbs=[]}ngOnInit(){}}return f.\u0275fac=function(_){return new(_||f)},f.\u0275cmp=o.Xpm({type:f,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(_,E){1&_&&(o.TgZ(0,"div",0),o._uU(1),o.qZA(),o.TgZ(2,"div",1),o.TgZ(3,"a",2),o._uU(4,"Home"),o.qZA(),o.YNc(5,m,5,1,"div",3),o.TgZ(6,"div",4),o.TgZ(7,"mat-icon",5),o._uU(8,"chevron_right"),o.qZA(),o.TgZ(9,"div",6),o._uU(10),o.qZA(),o.qZA(),o.qZA()),2&_&&(o.xp6(1),o.Oqu(E.current),o.xp6(2),o.Q6J("routerLink",o.DdM(4,y)),o.xp6(2),o.Q6J("ngForOf",E.crumbs),o.xp6(5),o.Oqu(E.current))},directives:[l.xw,l.Wh,u.yS,g.sg,p.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),f})()},94927:(b,h,n)=>{n.d(h,{n:()=>B});var o=n(5e3),l=n(23753),u=n(75778),g=n(80013),p=n(69808),m=n(92181),y=n(30277),c=n(25245),f=n(47423),M=n(77446),_=n(93075);const E=["filter"];function R(T,Z){if(1&T&&(o.TgZ(0,"div",5),o.TgZ(1,"div",6),o._uU(2),o.qZA(),o.TgZ(3,"div",7),o.TgZ(4,"mat-icon",8),o._uU(5,"search"),o.qZA(),o._UZ(6,"input",9,10),o.qZA(),o.TgZ(8,"button",11),o.TgZ(9,"mat-icon"),o._uU(10,"filter_list"),o.qZA(),o.qZA(),o.Hsn(11,1),o.qZA()),2&T){const v=o.oxw(),x=o.MAs(3);o.xp6(2),o.Oqu(v.name),o.xp6(6),o.Q6J("matMenuTriggerFor",x)}}function F(T,Z){if(1&T){const v=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(S){const A=o.CHM(v).$implicit;return o.oxw().toggleColumnVisibility(A,S)}),o.TgZ(1,"mat-checkbox",13,14),o.NdJ("ngModelChange",function(S){return o.CHM(v).$implicit.visible=S})("click",function(S){return S.stopPropagation()}),o._uU(3),o.qZA(),o.qZA()}if(2&T){const v=Z.$implicit;o.xp6(1),o.Q6J("ngModel",v.visible),o.xp6(2),o.hij(" ",v.name," ")}}const U=["*",[["",8,"actions"]]],L=["*",".actions"];let B=(()=>{class T{constructor(){this.filterChange=new o.vpe}ngAfterViewInit(){this.hideHeader||(0,l.R)(this.filter.nativeElement,"keyup").pipe((0,u.x)(),(0,g.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(v,x){x.stopPropagation(),x.stopImmediatePropagation(),v.visible=!v.visible}}return T.\u0275fac=function(v){return new(v||T)},T.\u0275cmp=o.Xpm({type:T,selectors:[["fury-list"]],viewQuery:function(v,x){if(1&v&&o.Gf(E,5),2&v){let S;o.iGM(S=o.CRH())&&(x.filter=S.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:L,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(v,x){1&v&&(o.F$t(U),o.TgZ(0,"div",0),o.YNc(1,R,12,2,"div",1),o.TgZ(2,"mat-menu",2,3),o.YNc(4,F,4,2,"button",4),o.qZA(),o.Hsn(5),o.qZA()),2&v&&(o.xp6(1),o.Q6J("ngIf",!x.hideHeader),o.xp6(3),o.Q6J("ngForOf",x.columns))},directives:[p.O5,m.VK,p.sg,y.xw,y.Wh,y.SQ,y.yH,c.Hw,f.lW,m.p6,M.oG,_.JJ,_.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),T})()},4940:(b,h,n)=>{n.d(h,{p:()=>p});var o=n(69808),l=n(93075),u=n(7057),g=n(5e3);let p=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=g.oAB({type:m}),m.\u0275inj=g.cJS({imports:[[o.ez,u.q,l.u5]]}),m})()},19165:(b,h,n)=>{n.d(h,{d:()=>l});var o=n(5e3);let l=(()=>{class u{constructor(){}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275dir=o.lG2({type:u,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),u})()},53580:(b,h,n)=>{n.d(h,{U:()=>l});var o=n(5e3);let l=(()=>{class u{constructor(){}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275dir=o.lG2({type:u,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),u})()},39762:(b,h,n)=>{n.d(h,{N:()=>l});var o=n(5e3);let l=(()=>{class u{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275dir=o.lG2({type:u,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(p,m){2&p&&o.ekj("fury-page-layout-card",m.isCard)("fury-page-layout-simple",m.isSimple)},inputs:{mode:"mode"}}),u})()},59968:(b,h,n)=>{n.d(h,{i:()=>l});var o=n(5e3);let l=(()=>{class u{constructor(){}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275dir=o.lG2({type:u,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),u})()},71128:(b,h,n)=>{n.r(h),n.d(h,{ProfilesTableModule:()=>He});var o=n(69808),l=n(93075),u=n(61264),g=n(4940),p=n(7057),m=n(72467),y=n(3299),c=n(70655),f=n(86087),M=n(84847),_=n(32075),E=n(96831),R=n(92198),F=n(88914),U=n(14499),L=n(48966),B=n(37425),T=n(54822),Z=n(74204);class v{constructor(a){this.id=a&&a.id||null,this.name=a&&a.name||null,this.observations=a&&a.observations||null,this.status=a&&a.status||null,this.sidenav_items=a&&a.sidenav_items||[],this.fleets=a&&a.fleets||[],this.ccs=a&&a.ccs||[]}}class x{constructor(a){this.id=a&&a.id||null,this.name=a&&a.name||null,this.position=a&&a.position||null,this.type=a&&a.type||null,this.custom_class=a&&a.custom_class||null,this.icon=a&&a.icon||null,this.parent=a&&a.parent||null,this.route_or_function=a&&a.route_or_function||null,this.badge=a&&a.badge||null,this.badge_color=a&&a.badge_color||null,this.level=a&&a.level||null,this.assignable=a&&a.assignable||null,this.status=a&&a.status||null}}var S=n(20449),k=n(28258),A=n(90149),z=n(591),e=n(5e3),te=n(57261),oe=n(58527),ne=n(82593),$=n(92660),ie=n(59968),re=n(36551),J=n(25245),N=n(30277),w=n(67322),j=n(77531),ae=n(4834),V=n(74107),H=n(47423),se=n(90508),le=n(77446);const ce=["allSelected"],de=["allCCs"],ue=["profilesModalForm"];function fe(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",23,24),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleAllSelection()}),e._uU(2,"Todas"),e.qZA()}2&r&&e.Q6J("value",0)}function me(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.tosslePerOne(s.allSelected.viewValue)}),e._uU(1),e.qZA()}if(2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.NAME)}}function he(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",23,25),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleAllSelectionCC()}),e._uU(2,"Todos"),e.qZA()}2&r&&e.Q6J("value",0)}function pe(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.tosslePerOneCC(s.allCCs.viewValue)}),e._uU(1),e.qZA()}if(2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.fleet_name,"-",t.name,"")}}function ge(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-tree-node",26),e._UZ(1,"button",27),e.TgZ(2,"mat-checkbox",28),e.NdJ("change",function(){const d=e.CHM(t).$implicit;return e.oxw().todoLeafItemSelectionToggle(d)}),e._uU(3),e.qZA(),e.qZA()}if(2&r){const t=a.$implicit,i=e.oxw();e.xp6(2),e.Q6J("checked",i.checklistSelection.isSelected(t)),e.xp6(1),e.Oqu(t.name)}}function _e(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"mat-tree-node",29),e.TgZ(1,"button",30),e.TgZ(2,"mat-icon",31),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"mat-checkbox",32),e.NdJ("change",function(){const d=e.CHM(t).$implicit;return e.oxw().todoItemSelectionToggle(d)}),e._uU(5),e.qZA(),e.qZA()}if(2&r){const t=a.$implicit,i=e.oxw();e.xp6(1),e.uIk("aria-label","Toggle "+t.item),e.xp6(2),e.Oqu(i.treeControl.isExpanded(t)?"expand_more":"chevron_right"),e.xp6(1),e.Q6J("checked",i.descendantsAllSelected(t))("indeterminate",i.descendantsPartiallySelected(t)),e.xp6(1),e.Oqu(t.name)}}class ve{}let X=(()=>{class r{constructor(){this.dataChange=new z.X([]),this.initialize()}get data(){return this.dataChange.value}initialize(){this.dataChange.next([])}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})(),W=(()=>{class r{constructor(t,i,s,d,C,D,G){this.data=t,this._database=i,this.dialogRef=s,this.snackbar=d,this._areasService=C,this._fleetsService=D,this._profilesService=G,this.title="Perfiles",this.mode="create",this.profile=new v,this.fleets=[],this.ccs=[],this.assignedFleets="",this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.checklistSelection=new S.Ov(!0),this.getLevel=P=>P.level,this.getId=P=>P.id,this.isExpandable=P=>P.expandable,this.getChildren=P=>P.children,this.hasChild=(P,I)=>I.expandable,this.hasNoContent=(P,I)=>""===I.name,this.transformer=(P,I)=>{var K;const Y=this.nestedNodeMap.get(P),O=Y&&Y.name===P.name?Y:new ve;return O.name=P.name,O.id=P.id,O.level=I,O.expandable=!!(null===(K=P.children)||void 0===K?void 0:K.length),this.flatNodeMap.set(O,P),this.nestedNodeMap.set(P,O),O},this.treeFlattener=new A.JZ(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new k.C2(this.getLevel,this.isExpandable),this.dataSource=new A.kc(this.treeControl,this.treeFlattener),i.dataChange.subscribe(P=>{this.dataSource.data=P}),s.disableClose=!0,this.profilesModalForm=new l.cw({id:new l.NI,name:new l.NI("",[l.kI.required]),observations:new l.NI(""),status:new l.NI(!0,[l.kI.required]),fleets:new l.NI([],[l.kI.required]),ccs:new l.NI([],[l.kI.required])})}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){if(this.dataSource.data=this.data.sidenav_items,this.fleets=yield this.getFleets(),this.data.profile){this.profile=this.data.profile;var t=[];this.profile.fleets.forEach(s=>{t.push(+s.id)}),this.profile.fleets.length===this.fleets.length&&t.push(0),this.assignedFleets=t.toString(),this.ccs=yield this.getCCs();var i=[];this.profile.ccs.forEach(s=>{i.push(+s.id)}),this.profile.ccs.length===this.ccs.length&&i.push(0),this.mode="update",this.profile=this.data.profile,this.profilesModalForm.setValue({id:this.profile.id,name:this.profile.name,observations:this.profile.observations,status:2==this.profile.status,fleets:t,ccs:i}),this.treeControl.dataNodes.forEach(s=>{void 0!==this.profile.sidenav_items.find(d=>d.id===s.id)&&this.checklistSelection.select(s)})}})}getFleets(){return(0,c.mG)(this,void 0,void 0,function*(){return yield this._fleetsService.getAll().toPromise()})}getCCs(){return(0,c.mG)(this,void 0,void 0,function*(){return yield this._areasService.getCostCenters({fleets:this.assignedFleets}).toPromise()})}descendantsAllSelected(t){const i=this.treeControl.getDescendants(t);return i.length>0&&i.every(d=>this.checklistSelection.isSelected(d))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(d=>this.checklistSelection.isSelected(d))&&!this.descendantsAllSelected(t)}todoItemSelectionToggle(t){this.checklistSelection.toggle(t);const i=this.treeControl.getDescendants(t);this.checklistSelection.isSelected(t)?this.checklistSelection.select(...i):this.checklistSelection.deselect(...i),i.forEach(s=>this.checklistSelection.isSelected(s)),this.checkAllParentsSelection(t)}todoLeafItemSelectionToggle(t){this.checklistSelection.toggle(t),this.checkAllParentsSelection(t)}checkAllParentsSelection(t){let i=this.getParentNode(t);for(;i;)this.checkRootNodeSelection(i),i=this.getParentNode(i)}checkRootNodeSelection(t){const i=this.checklistSelection.isSelected(t),s=this.treeControl.getDescendants(t),d=s.length>0&&s.every(C=>this.checklistSelection.isSelected(C));i&&!d?this.checklistSelection.deselect(t):!i&&d&&this.checklistSelection.select(t)}getParentNode(t){const i=this.getLevel(t);if(i<1)return null;for(let d=this.treeControl.dataNodes.indexOf(t)-1;d>=0;d--){const C=this.treeControl.dataNodes[d];if(this.getLevel(C)<i)return C}return null}getAllParents(t){let i=t,s=[];for(;this.getParentNode(i);)i=this.getParentNode(i),void 0!==i&&s.push(i);return s}submit(){this.profile.id=this.profilesModalForm.controls.id.value,this.profile.name=this.profilesModalForm.controls.name.value,this.profile.observations=this.profilesModalForm.controls.observations.value,this.profile.status=this.profilesModalForm.controls.status.value?2:1,this.profile.sidenav_items=[];var i=[];this.profilesModalForm.controls.fleets.value.forEach(d=>{0!=d&&i.push(new Z.i({id:d}))}),this.profile.fleets=i;var s=[];this.profilesModalForm.controls.ccs.value.forEach(d=>{0!=d&&s.push(new T.t({id:d,fleet_id:this.ccs.find(C=>C.id==d).fleet_id}))}),this.profile.ccs=s,this.checklistSelection.selected.forEach(d=>{this.profile.sidenav_items.push(new x({id:d.id,name:d.name})),this.getAllParents(d).forEach(D=>{void 0===this.profile.sidenav_items.find(G=>G.id===D.id)&&this.profile.sidenav_items.push(new x({id:D.id,name:D.name}))})}),"create"===this.mode?this.createProfile():this.updateProfile()}createProfile(){this._profilesService.createProfile(this.profile).subscribe(t=>{this.snackbar.open(t.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"create",data:this.profile})},t=>{this.snackbar.open(t.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateProfile(){this._profilesService.updateProfile(this.profile).subscribe(t=>{this.snackbar.open(t.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close({action:"update",data:this.profile})},t=>{this.snackbar.open(t.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}close(){this.dialogRef.close({action:"cancel",data:this.profile})}onFocusCCs(){return(0,c.mG)(this,void 0,void 0,function*(){this.assignedFleets=this.profilesModalForm.controls.fleets.value.length>0?this.profilesModalForm.controls.fleets.value.toString():"-1",this.ccs=yield this.getCCs()})}onChangeFleet(){return(0,c.mG)(this,void 0,void 0,function*(){this.profilesModalForm.controls.ccs.setValue([])})}tosslePerOne(t){if(this.allSelected.selected)return this.allSelected.deselect(),!1;this.profilesModalForm.controls.fleets.value.length==this.fleets.length&&this.allSelected.select()}toggleAllSelection(){this.profilesModalForm.controls.fleets.patchValue(this.allSelected.selected?[...this.fleets.map(t=>t.id),0]:[])}tosslePerOneCC(t){if(this.allCCs.selected)return this.allCCs.deselect(),!1;this.profilesModalForm.controls.ccs.value.length==this.ccs.length&&this.allCCs.select()}toggleAllSelectionCC(){this.profilesModalForm.controls.ccs.patchValue(this.allCCs.selected?[...this.ccs.map(t=>t.id),0]:[])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(L.WI),e.Y36(X),e.Y36(L.so),e.Y36(te.ux),e.Y36(oe.E),e.Y36(ne.V),e.Y36($.L))},r.\u0275cmp=e.Xpm({type:r,selectors:[["fury-form-wizard"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ce,5),e.Gf(de,5),e.Gf(ue,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.allSelected=s.first),e.iGM(s=e.CRH())&&(i.allCCs=s.first),e.iGM(s=e.CRH())&&(i._focusMe=s.first)}},features:[e._Bn([X])],decls:52,vars:11,consts:[[1,"small_modal"],[1,"title"],["svgIcon","profile"],["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],[3,"formGroup"],[1,"subheading"],["fxLayout","column","fxLayoutGap","8px",1,"content",2,"margin-top","20px"],["fxFlex","auto","appearance","outline"],["formControlName","name","matInput","","required",""],["appearance","outline","fxFlex","auto"],["formControlName","observations","matInput",""],[1,"subheading",2,"margin-top","20px"],["appearance","outline",1,"field"],["formControlName","fleets","multiple","",3,"selectionChange"],[3,"value","click",4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","ccs","multiple","",3,"focus"],[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"],[3,"value","click"],["allSelected",""],["allCCs",""],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"]],template:function(t,i){1&t&&(e.TgZ(0,"fury-page",0),e.TgZ(1,"fury-title",1),e._UZ(2,"mat-icon",2),e.TgZ(3,"span"),e._uU(4,"Perfiles"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"form",5),e.TgZ(8,"div",6),e._uU(9,"Indicar propiedades del perfil."),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"mat-form-field",8),e.TgZ(12,"mat-label"),e._uU(13,"Nombre:"),e.qZA(),e._UZ(14,"input",9),e.TgZ(15,"mat-hint"),e._uU(16,"Se\xf1alar nombre de perfil"),e.qZA(),e.qZA(),e.TgZ(17,"mat-form-field",10),e.TgZ(18,"mat-label"),e._uU(19,"Observaciones:"),e.qZA(),e._UZ(20,"input",11),e.TgZ(21,"mat-hint"),e._uU(22,"Indicar observaciones descriptivas del perfil"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",7),e._UZ(24,"mat-divider"),e.qZA(),e.TgZ(25,"div",12),e._uU(26,"Flotas."),e.qZA(),e.TgZ(27,"div",7),e.TgZ(28,"mat-form-field",13),e.TgZ(29,"mat-label"),e._uU(30,"Flotas:"),e.qZA(),e.TgZ(31,"mat-select",14),e.NdJ("selectionChange",function(){return i.onChangeFleet()}),e.YNc(32,fe,3,1,"mat-option",15),e.YNc(33,me,2,2,"mat-option",16),e.qZA(),e.qZA(),e.TgZ(34,"mat-form-field",13),e.TgZ(35,"mat-label"),e._uU(36,"Centros de cobro:"),e.qZA(),e.TgZ(37,"mat-select",17),e.NdJ("focus",function(){return i.onFocusCCs()}),e.YNc(38,he,3,1,"mat-option",15),e.YNc(39,pe,2,3,"mat-option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",7),e._UZ(41,"mat-divider"),e.qZA(),e.TgZ(42,"div",12),e._uU(43,"Permisos del perfil."),e.qZA(),e.TgZ(44,"mat-tree",18),e.YNc(45,ge,4,2,"mat-tree-node",19),e.YNc(46,_e,6,5,"mat-tree-node",20),e.qZA(),e.TgZ(47,"div",21),e.TgZ(48,"button",22),e.NdJ("click",function(){return i.close()}),e._uU(49,"CANCELAR"),e.qZA(),e.TgZ(50,"button",22),e.NdJ("click",function(){return i.submit()}),e._uU(51,"GUARDAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(3),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("formGroup",i.profilesModalForm),e.xp6(25),e.Q6J("ngIf",i.fleets.length>0),e.xp6(1),e.Q6J("ngForOf",i.fleets),e.xp6(5),e.Q6J("ngIf",i.ccs.length>0),e.xp6(1),e.Q6J("ngForOf",i.ccs),e.xp6(5),e.Q6J("dataSource",i.dataSource)("treeControl",i.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",i.hasChild))},directives:[ie.i,re.M,J.Hw,N.xw,N.Wh,l._Y,l.JL,l.sg,N.SQ,w.KE,N.yH,w.hX,l.Fj,j.Nt,l.JJ,l.u,l.Q7,w.bx,ae.d,V.gD,o.O5,o.sg,A.gi,A.fQ,H.lW,se.ey,A.uo,A.eu,A.ah,le.oG],styles:[".fury-card-header-heading[_ngcontent-%COMP%]{font-weight:700!important}.small_modal[_ngcontent-%COMP%]{width:500px;padding:5px}.small_modal[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{overflow:scroll;margin:5px;width:490px;max-height:450px;border-radius:8px;padding:24px}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px}.card[_ngcontent-%COMP%]   .text-icon[_ngcontent-%COMP%]{max-width:49.5%}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:14px;padding:24px 8px 0}.example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:40px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:40px}"],data:{animation:[U.X,F.M,B.K]}}),r})();var q=n(40520),ee=n(98545),Ce=n(33344);let Pe=(()=>{class r{constructor(t,i){this.http=t,this.tokenStorage=i}getHeaders(){var t=new q.WM,i=this.tokenStorage.getToken();return t.set("token",i||"{}")}getAll(){var t=this.getHeaders();return this.http.get(ee._.settings.apiServer.API_URL_BASE+ee._.settings.apiServer.SIDENAV_ITEMS,{headers:t})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(q.eN),e.LFG(Ce.i))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var ye=n(39762),Me=n(53580),xe=n(38932),Te=n(19165),Ae=n(94927),Q=n(92181);function be(r,a){if(1&r&&(e.TgZ(0,"th",17),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Se(r,a){if(1&r&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&r){const t=a.$implicit,i=e.oxw(2).$implicit,s=e.oxw();e.xp6(1),e.hij(" ",s.getLabel(i.name,t[i.property]).length>40?s.getLabel(i.name,t[i.property]).slice(0,40)+"...":s.getLabel(i.name,t[i.property])," ")}}function Ze(r,a){if(1&r&&(e.ynx(0,14),e.YNc(1,be,2,1,"th",15),e.YNc(2,Se,2,1,"td",16),e.BQk()),2&r){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function Ee(r,a){if(1&r&&(e.ynx(0),e.YNc(1,Ze,3,1,"ng-container",13),e.BQk()),2&r){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty)}}function Oe(r,a){1&r&&e._UZ(0,"th",19)}function Le(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"td",20),e.TgZ(1,"button",21),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(2,"mat-icon"),e._uU(3,"more_horiz"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",22,23),e.TgZ(6,"button",24),e.NdJ("click",function(){const d=e.CHM(t).$implicit;return e.oxw().updateProfile(d)}),e.TgZ(7,"span"),e._uU(8,"Editar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function De(r,a){1&r&&e._UZ(0,"tr",25)}function Ie(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"tr",26),e.NdJ("click",function(){const d=e.CHM(t).$implicit;return e.oxw().updateProfile(d)}),e.qZA()}}const Fe=function(){return["Tables"]},Ue=[{path:"",component:(()=>{class r{constructor(t,i,s){this.dialog=t,this._sidenavItemsService=i,this._profilesService=s,this.subject$=new E.t(1),this.data$=this.subject$.asObservable(),this.columns=[{name:"Id",property:"id",visible:!1,isModelProperty:!0},{name:"Nombre",property:"name",visible:!0,isModelProperty:!0},{name:"Estatus",property:"status",visible:!0,isModelProperty:!0},{name:"Observaciones",property:"observations",visible:!0,isModelProperty:!0},{name:"Items",property:"sidenav_items",visible:!1,isModelProperty:!0},{name:"Flotas",property:"fleets",visible:!0,isModelProperty:!0},{name:"Centros de cobro",property:"ccs",visible:!0,isModelProperty:!0},{name:"Acciones",property:"actions",visible:!0}],this.pageSize=10}getLabel(t,i){var s="",d="";if(null!=t)return"Estatus"===t?2==i?"Activo":"Inactivo":"Flotas"===t?(i.forEach(C=>{d=d.length>0?d+", "+C.NAME:C.NAME}),d):"Centros de cobro"===t?(i.forEach(C=>{null!==C.name&&(s=""!==s?s+","+C.name:C.name)}),s):i}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){this._profilesService.getAll().subscribe(t=>{this.profiles=t,this.dataSource=new _.by(t),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},t=>{console.log(t)})}ngOnInit(){this.dataSource=new _.by,this.getData(),this.data$.pipe((0,R.h)(t=>!!t)).subscribe(t=>{this.profiles=t,this.dataSource.data=t})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getSidenavItemsTree(){return(0,c.mG)(this,void 0,void 0,function*(){return yield this._sidenavItemsService.getAll().toPromise()})}createProfile(){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.getSidenavItemsTree();this.dialog.open(W,{data:{sidenav_items:t}}).afterClosed().subscribe(()=>{this.ngOnInit()})})}updateProfile(t){return(0,c.mG)(this,void 0,void 0,function*(){const i=yield this.getSidenavItemsTree();this.dialog.open(W,{data:{sidenav_items:i,profile:t}}).afterClosed().subscribe(()=>{this.ngOnInit()})})}onFilterChange(t){!this.dataSource||(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(L.uw),e.Y36(Pe),e.Y36($.L))},r.\u0275cmp=e.Xpm({type:r,selectors:[["profiles-table"]],viewQuery:function(t,i){if(1&t&&(e.Gf(f.NW,7),e.Gf(M.YE,7)),2&t){let s;e.iGM(s=e.CRH())&&(i.paginator=s.first),e.iGM(s=e.CRH())&&(i.sort=s.first)}},inputs:{columns:"columns"},decls:17,vars:10,consts:[["mode","card"],["current","Perfiles",3,"crumbs"],["name","Perfiles",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-header"),e._UZ(2,"fury-breadcrumbs",1),e.qZA(),e.TgZ(3,"fury-page-layout-content"),e.TgZ(4,"fury-list",2),e.NdJ("filterChange",function(d){return i.onFilterChange(d)}),e.TgZ(5,"div",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return i.createProfile()}),e.TgZ(7,"mat-icon"),e._uU(8,"add"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"table",5),e.YNc(10,Ee,2,1,"ng-container",6),e.ynx(11,7),e.YNc(12,Oe,1,0,"th",8),e.YNc(13,Le,9,1,"td",9),e.BQk(),e.YNc(14,De,1,0,"tr",10),e.YNc(15,Ie,1,0,"tr",11),e.qZA(),e._UZ(16,"mat-paginator",12),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@fadeInRight",void 0)("crumbs",e.DdM(9,Fe)),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",i.columns),e.xp6(5),e.Q6J("dataSource",i.dataSource),e.xp6(1),e.Q6J("ngForOf",i.columns),e.xp6(4),e.Q6J("matHeaderRowDef",i.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.visibleColumns),e.xp6(1),e.Q6J("pageSize",i.pageSize))},directives:[ye.N,Me.U,xe.n,Te.d,Ae.n,H.lW,J.Hw,_.BZ,M.YE,o.sg,_.w1,_.fO,_.Dz,_.as,_.nj,f.NW,o.O5,_.ge,M.nU,_.ev,Q.p6,Q.VK,Q.OP,_.XQ,_.Gk],encapsulation:2,data:{animation:[F.M,U.X]}}),r})()}];let Ne=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[y.Bz.forChild(Ue)],y.Bz]}),r})();var Re=n(61620),Be=n(74519);const ke=[{path:"",component:W}];let Je=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[y.Bz.forChild(ke)],y.Bz]}),r})(),we=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[o.ez,Re.o9,l.u5,l.UX,Be.O,m.Z,g.p,H.ot,L.Is,p.q,J.Ps,j.c,V.LD,A.dp,Je]]}),r})(),He=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[o.ez,Ne,l.u5,p.q,m.Z,we,g.p,u.J]]}),r})()},58527:(b,h,n)=>{n.d(h,{E:()=>p});var o=n(40520),l=n(98545),u=n(5e3),g=n(33344);let p=(()=>{class m{constructor(c,f){this.http=c,this.tokenStorage=f}getHeaders(){var c=new o.WM,f=this.tokenStorage.getToken();return c.set("token",f||"{}")}getAll(c){var f=this.getHeaders();const M=(new o.LE).appendAll(c);return this.http.get(l._.settings.apiServer.API_URL_BASE+l._.settings.apiServer.AREAS,{params:M,headers:f})}getArea(c){var f=this.getHeaders();return this.http.get(l._.settings.apiServer.API_URL_BASE+l._.settings.apiServer.AREAS+"/"+c,{headers:f})}createArea(c){var f=this.getHeaders();return this.http.post(l._.settings.apiServer.API_URL_BASE+l._.settings.apiServer.AREAS,c,{headers:f})}updateArea(c){var f=this.getHeaders();return this.http.put(l._.settings.apiServer.API_URL_BASE+l._.settings.apiServer.AREAS+"/"+c.id,c,{headers:f})}deleteArea(c){var f=this.getHeaders();return this.http.delete(l._.settings.apiServer.API_URL_BASE+l._.settings.apiServer.AREAS+"/"+c.id,{headers:f})}getCostCenters(c){var f=this.getHeaders();const M=(new o.LE).appendAll(c);return this.http.get(l._.settings.apiServer.API_URL_BASE+l._.settings.apiServer.COST_CENTERS,{params:M,headers:f})}}return m.\u0275fac=function(c){return new(c||m)(u.LFG(o.eN),u.LFG(g.i))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},82593:(b,h,n)=>{n.d(h,{V:()=>p});var o=n(40520),l=n(98545),u=n(5e3),g=n(33344);let p=(()=>{class m{constructor(c,f){this.http=c,this.tokenStorage=f,this.baseendpoint=l._.settings.apiServer.API_URL_BASE+l._.settings.apiServer.FLEETS}getHeaders(){var c=new o.WM,f=this.tokenStorage.getToken();return c.set("token",f||"{}")}getAll(){var c=this.getHeaders();return this.http.get(this.baseendpoint,{headers:c})}create(c){var f=this.getHeaders();return this.http.post(this.baseendpoint,c,{headers:f})}update(c){var f=this.getHeaders();return this.http.put(this.baseendpoint+"/"+c.id,c,{headers:f})}updateCvConfiguration(c){var f=this.getHeaders();return this.http.post(l._.settings.apiServer.API_URL_BASE+l._.settings.apiServer.CV_CONFIGURATIONS,c,{headers:f})}}return m.\u0275fac=function(c){return new(c||m)(u.LFG(o.eN),u.LFG(g.i))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);