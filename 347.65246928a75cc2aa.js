"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[347],{94927:(N,v,o)=>{o.d(v,{n:()=>e});var r=o(5e3),c=o(23753),d=o(75778),_=o(80013),u=o(69808),f=o(92181),h=o(30277),w=o(25245),P=o(47423),x=o(77446),l=o(93075);const F=["filter"];function C(M,T){if(1&M&&(r.TgZ(0,"div",5),r.TgZ(1,"div",6),r._uU(2),r.qZA(),r.TgZ(3,"div",7),r.TgZ(4,"mat-icon",8),r._uU(5,"search"),r.qZA(),r._UZ(6,"input",9,10),r.qZA(),r.TgZ(8,"button",11),r.TgZ(9,"mat-icon"),r._uU(10,"filter_list"),r.qZA(),r.qZA(),r.Hsn(11,1),r.qZA()),2&M){const p=r.oxw(),g=r.MAs(3);r.xp6(2),r.Oqu(p.name),r.xp6(6),r.Q6J("matMenuTriggerFor",g)}}function O(M,T){if(1&M){const p=r.EpF();r.TgZ(0,"button",12),r.NdJ("click",function(b){const E=r.CHM(p).$implicit;return r.oxw().toggleColumnVisibility(E,b)}),r.TgZ(1,"mat-checkbox",13,14),r.NdJ("ngModelChange",function(b){return r.CHM(p).$implicit.visible=b})("click",function(b){return b.stopPropagation()}),r._uU(3),r.qZA(),r.qZA()}if(2&M){const p=T.$implicit;r.xp6(1),r.Q6J("ngModel",p.visible),r.xp6(2),r.hij(" ",p.name," ")}}const I=["*",[["",8,"actions"]]],y=["*",".actions"];let e=(()=>{class M{constructor(){this.filterChange=new r.vpe}ngAfterViewInit(){this.hideHeader||(0,c.R)(this.filter.nativeElement,"keyup").pipe((0,d.x)(),(0,_.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(p,g){g.stopPropagation(),g.stopImmediatePropagation(),p.visible=!p.visible}}return M.\u0275fac=function(p){return new(p||M)},M.\u0275cmp=r.Xpm({type:M,selectors:[["fury-list"]],viewQuery:function(p,g){if(1&p&&r.Gf(F,5),2&p){let b;r.iGM(b=r.CRH())&&(g.filter=b.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:y,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(p,g){1&p&&(r.F$t(I),r.TgZ(0,"div",0),r.YNc(1,C,12,2,"div",1),r.TgZ(2,"mat-menu",2,3),r.YNc(4,O,4,2,"button",4),r.qZA(),r.Hsn(5),r.qZA()),2&p&&(r.xp6(1),r.Q6J("ngIf",!g.hideHeader),r.xp6(3),r.Q6J("ngForOf",g.columns))},directives:[u.O5,f.VK,u.sg,h.xw,h.Wh,h.SQ,h.yH,w.Hw,P.lW,f.p6,x.oG,l.JJ,l.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),M})()},75972:(N,v,o)=>{o.d(v,{d:()=>d});var r=o(5e3),c=o(85899);let d=(()=>{class _{constructor(){}ngOnInit(){}}return _.\u0275fac=function(f){return new(f||_)},_.\u0275cmp=r.Xpm({type:_,selectors:[["fury-loading-overlay"]],inputs:{isLoading:"isLoading"},decls:2,vars:2,consts:[[1,"loading-overlay"],["mode","indeterminate"]],template:function(f,h){1&f&&(r.TgZ(0,"div",0),r._UZ(1,"mat-progress-bar",1),r.qZA()),2&f&&r.ekj("show",h.isLoading)},directives:[c.pW],styles:[".loading-overlay[_ngcontent-%COMP%]{background-color:#ffffffb3;position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;transition:all .25s ease-in-out;opacity:0;visibility:hidden}.loading-overlay.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}"]}),_})()},59159:(N,v,o)=>{o.d(v,{V:()=>_});var r=o(69808),c=o(7057),d=o(5e3);let _=(()=>{class u{}return u.\u0275fac=function(h){return new(h||u)},u.\u0275mod=d.oAB({type:u}),u.\u0275inj=d.cJS({imports:[[r.ez,c.q]]}),u})()},19165:(N,v,o)=>{o.d(v,{d:()=>c});var r=o(5e3);let c=(()=>{class d{constructor(){}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275dir=r.lG2({type:d,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),d})()},59968:(N,v,o)=>{o.d(v,{i:()=>c});var r=o(5e3);let c=(()=>{class d{constructor(){}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275dir=r.lG2({type:d,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),d})()},347:(N,v,o)=>{o.r(v),o.d(v,{MeansMaintenanceServicesTableModule:()=>Ve});var r=o(69808),c=o(93075),d=o(61264),_=o(4940),u=o(7057),f=o(72467),h=o(3299),w=o(70655),P=o(86087),x=o(84847),l=o(32075),F=o(96831),C=o(92198),O=o(88914),I=o(14499),y=o(48966),e=o(5e3),M=o(75972),T=o(75440),p=o(4624);function g(n,i){if(1&n&&e._UZ(0,"kms-fuel-efficiency-widget",2),2&n){const t=e.oxw();e.Q6J("mean",t.Mean)}}function b(n,i){if(1&n&&e._UZ(0,"hours-fuel-efficiency-widget",2),2&n){const t=e.oxw();e.Q6J("mean",t.Mean)}}let J=(()=>{class n{constructor(t,a){this.data=t,this.dialogRef=a}getData(){this.Mean=this.data}ngOnInit(){this.getData()}close(){this.dialogRef.close()}reload(){this.isLoading=!0,this.ngOnInit(),this.isLoading=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.WI),e.Y36(y.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["performance-modal"]],decls:3,vars:3,consts:[[3,"mean",4,"ngIf"],[3,"isLoading"],[3,"mean"]],template:function(t,a){1&t&&(e.YNc(0,g,1,1,"kms-fuel-efficiency-widget",0),e.YNc(1,b,1,1,"hours-fuel-efficiency-widget",0),e._UZ(2,"fury-loading-overlay",1)),2&t&&(e.Q6J("ngIf",1==a.Mean.control_type),e.xp6(1),e.Q6J("ngIf",2==a.Mean.control_type),e.xp6(1),e.Q6J("isLoading",a.isLoading))},directives:[r.O5,M.d,T.A,p.G],styles:["[_nghost-%COMP%]{height:100%}.fury-card[_ngcontent-%COMP%]{width:800px}.fury-card-header[_ngcontent-%COMP%]{background:black;color:#f5f5f5}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{padding:24px;cursor:pointer;border-top:4px solid transparent}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font:var(--font-body-1);padding-bottom:6px}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font:var(--font-headline)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]{font:var(--font-caption)}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:13px;height:13px;width:13px;vertical-align:middle}.header[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   .compared[_ngcontent-%COMP%]{font:var(--font-caption);visibility:hidden}.card-content[_ngcontent-%COMP%]{min-height:500px;max-width:800px}.card-content[_ngcontent-%COMP%]   #seritrac_chartdiv[_ngcontent-%COMP%]{width:100%;height:50%;margin-left:-10px}.actions[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{margin-top:-24px;margin-bottom:-1.34375em;font-size:14px}"],data:{animation:[O.M,I.X]}}),n})();var E=o(37425),Y=o(36144);class H{constructor(i){this.mean_id=i&&i.mean_id||null,this.model_maintenance_type_id=i&&i.model_maintenance_type_id||null,this.active_for_statistics=i&&i.active_for_statistics||null,this.user_id=i&&i.user_id||null,this.timestamp=i&&i.timestamp||null}}class ae{constructor(i){this.id=i&&i.id||null,this.mean_id=i&&i.mean_id||null,this.maintenance_type_id=i&&i.maintenance_type_id||null,this.maintenance_control_value=i&&i.maintenance_control_value||null,this.maintenance_date=i&&i.maintenance_date||null,this.next_maintenance_control_value=i&&i.next_maintenance_control_value||null,this.timestamp=i&&i.timestamp||null,this.observations=i&&i.observations||null,this.user_id=i&&i.user_id||null}}var ie=o(84872),B=o(57261),$=o(22767),W=o(40520),Z=o(98545),oe=o(33344);let j=(()=>{class n{constructor(t,a){this.http=t,this.tokenStorage=a}getHeaders(){var t=new W.WM,a=this.tokenStorage.getToken();return t.set("token",a||"{}")}getByMeanId(t){var a=this.getHeaders();return this.http.get(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.MEANS_MAINTENANCE_SETTINGS+"/"+t,{headers:a})}create(t){var a=this.getHeaders();return this.http.post(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.MEANS_MAINTENANCE_SETTINGS,t,{headers:a})}update(t){var a=this.getHeaders();return this.http.put(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.MEANS_MAINTENANCE_SETTINGS+"/"+t.mean_id,t,{headers:a})}delete(t){var a=this.getHeaders();return this.http.delete(Z._.settings.apiServer.API_URL_BASE+Z._.settings.apiServer.MEANS_MAINTENANCE_SETTINGS+"/"+t,{headers:a})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(W.eN),e.LFG(oe.i))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var re=o(48024),se=o(24333),z=o(59968),K=o(36551),k=o(25245),R=o(92081),A=o(30277),U=o(67322),V=o(77531),ce=o(74107),le=o(32368),G=o(47423),X=o(94927),me=o(90508),D=o(92181),L=o(86856),de=o(4834);function ue(n,i){1&n&&e._uU(0,"Configuraci\xf3n de mantenimiento")}function pe(n,i){if(1&n&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.type_name)}}function _e(n,i){1&n&&e._uU(0,"Mantenimientos realizados al veh\xedculo")}function ge(n,i){if(1&n&&(e.TgZ(0,"th",34),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function fe(n,i){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=i.$implicit,a=e.oxw(2).$implicit,s=e.oxw();e.xp6(1),e.hij("",s.getLabel(a.name,t[a.property])," ")}}function he(n,i){if(1&n&&(e.ynx(0,31),e.YNc(1,ge,2,1,"th",32),e.YNc(2,fe,2,1,"td",33),e.BQk()),2&n){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function Me(n,i){if(1&n&&(e.ynx(0),e.YNc(1,he,3,1,"ng-container",30),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty)}}function ve(n,i){1&n&&e._UZ(0,"th",36)}function ye(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",37),e.TgZ(1,"button",38),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(2,"mat-icon"),e._uU(3,"more_horiz"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",39,40),e.TgZ(6,"button",41),e.NdJ("click",function(){const m=e.CHM(t).$implicit;return e.oxw().updateMeanMaintenanceHistory(m)}),e.TgZ(7,"span"),e._uU(8,"Editar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function be(n,i){1&n&&e._UZ(0,"tr",42)}function xe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",43),e.NdJ("click",function(){const m=e.CHM(t).$implicit;return e.oxw().updateMeanMaintenanceHistory(m)}),e.qZA()}}let ee=(()=>{class n{constructor(t,a,s,m,S,q,Xe,et){this.data=t,this.dialogRef=a,this.dialogAddItem=s,this.snackbar=m,this._meansMaintenanceServicesService=S,this._meansMaintenanceSettingsService=q,this._modelMaintenanceTypesService=Xe,this._usersService=et,this.subject$=new F.t(1),this.data$=this.subject$.asObservable(),this.included_for_dashboard_label="Incluido en estad\xedsticas",this.mean=new Y.q,this.mean_maintenance_settings=new H,this.mean_maintenance_history=[],this.models_maintenance_types=[],this.user=new ie.n,this.users=[],this.settingsFormGroup=new c.cw({mean_id:new c.NI("",[c.kI.required]),NAME:new c.NI(""),model:new c.NI(""),model_maintenance_type_id:new c.NI("",[c.kI.required]),active_for_statistics:new c.NI("",[c.kI.required])}),this.columns=[{name:"Id",property:"id",visible:!0,isModelProperty:!0},{name:"Fecha de mantenimiento",property:"maintenance_date",visible:!0,isModelProperty:!0},{name:"Factor de control",property:"maintenance_control_value",visible:!0,isModelProperty:!0},{name:"Pr\xf3ximo factor de control m\xe1ximo",property:"next_maintenance_control_value",visible:!0,isModelProperty:!0},{name:"Fecha de registro",property:"timestamp",visible:!0,isModelProperty:!0},{name:"Usuario",property:"user_id",visible:!0,isModelProperty:!0},{name:"Observaciones",property:"observations",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10,this.dialogRef.disableClose=!0}getLabel(t,a){if(null!=t){if("Usuario"==t){for(var s=0;s<this.users.length;s++)if(a==this.users[s].user_id)return this.users[s].user;return"Regla no definida"}return a}}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){this._meansMaintenanceServicesService.getAllByMeanId(this.data.mean_id).subscribe(t=>{this.mean_maintenance_history=t,this.dataSource=new l.by(t),this.dataSource=new l.by(this.mean_maintenance_history),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},t=>{console.log(t)})}ngOnInit(){return(0,w.mG)(this,void 0,void 0,function*(){this.dataSource=new l.by,this.getUsers(),this.getData(),this.data$.pipe((0,C.h)(t=>!!t)).subscribe(t=>{this.mean_maintenance_history=t,this.dataSource.data=this.mean_maintenance_history}),yield this._modelMaintenanceTypesService.getAllModelMaintenanceTypesByModelId(this.data.model_id).toPromise().then(t=>{this.models_maintenance_types=t,null!=this.data?(this.settingsFormGroup.patchValue({mean_id:this.data.mean_id,NAME:this.data.NAME,model:this.data.model,model_maintenance_type_id:this.data.model_maintenance_type_id,active_for_statistics:1==this.data.active_for_statistics}),this.settingsFormGroup.controls.mean_id.disable(),this.settingsFormGroup.controls.NAME.disable(),this.settingsFormGroup.controls.model.disable(),this.label=1==this.data.active_for_statistics?"Incluido en estad\xedsticas":"Excluido en estad\xedsticas"):(this.snackbar.open("No data available",null,{duration:5e3,panelClass:["red-snackbar"]}),this.close())}).catch(t=>{this.models_maintenance_types=[],alert("No hay conexi\xf3n con el servidor no puede cargarse el formulario"+t)})})}getUsers(){this._usersService.getAll().subscribe(t=>{this.users=t},t=>{console.log(t)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createMeanMaintenanceHistory(){this.dialogAddItem.open(te,{data:{id:"",mean_id:this.data.mean_id,mean:this.data.NAME,model:this.data.model,maintenance_type_id:this.data.model_maintenance_type_id,maintenance_type:this.data.maintenance_type,periodicity:this.data.periodicity,control_type:this.data.control_type,observations:this.data.observations}}).afterClosed().subscribe(t=>{t&&(this._meansMaintenanceServicesService.create(t).subscribe(a=>{this.snackbar.open(a.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.mean_maintenance_settings)},a=>{this.snackbar.open(a.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})}),this.dataSource=new l.by,this.getUsers(),this.getData(),this.data$.pipe((0,C.h)(a=>!!a)).subscribe(a=>{this.mean_maintenance_history=a,this.dataSource.data=this.mean_maintenance_history}))})}updateMeanMaintenanceHistory(t){this.dialogAddItem.open(te,{data:{id:t.id,mean_id:this.data.mean_id,mean:this.data.NAME,model:this.data.model,maintenance_type_id:this.data.model_maintenance_type_id,maintenance_type:this.data.maintenance_type,periodicity:this.data.periodicity,control_type:this.data.control_type,maintenance_control_value:t.maintenance_control_value,maintenance_date:t.maintenance_date,next_maintenance_control_value:t.next_maintenance_control_value,observations:t.observations}}).afterClosed().subscribe(a=>{a&&(console.log("This is the updated objecct",a),this._meansMaintenanceServicesService.update(a).subscribe(s=>{this.snackbar.open(s.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.mean_maintenance_settings)},s=>{this.snackbar.open(s.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})}),this.dataSource=new l.by,this.getUsers(),this.getData(),this.data$.pipe((0,C.h)(s=>!!s)).subscribe(s=>{this.mean_maintenance_history=s,this.dataSource.data=this.mean_maintenance_history}))})}onFilterChange(t){!this.dataSource||(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}submit(){this.mean_maintenance_settings.mean_id=this.settingsFormGroup.controls.mean_id.value,this.mean_maintenance_settings.model_maintenance_type_id=this.settingsFormGroup.controls.model_maintenance_type_id.value,this.mean_maintenance_settings.active_for_statistics=this.settingsFormGroup.controls.active_for_statistics.value?1:0,this.mean_maintenance_settings.model_maintenance_type_id>0?this.updateMeanMaintenanceSettings():this.createMeanMaintenanceSettings()}close(){this.dialogRef.close()}createMeanMaintenanceSettings(){this._meansMaintenanceSettingsService.create(this.mean_maintenance_settings).subscribe(t=>{this.snackbar.open(t.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.mean_maintenance_settings)},t=>{this.snackbar.open(t.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}updateMeanMaintenanceSettings(){this._meansMaintenanceSettingsService.update(this.mean_maintenance_settings).subscribe(t=>{this.snackbar.open(t.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.dialogRef.close(this.mean_maintenance_settings)},t=>{this.snackbar.open(t.error.message,null,{duration:5e3,panelClass:["red-snackbar"]})})}setActiveForStatistics(t){this.included_for_dashboard_label=t.checked?"Incluido en estad\xedsticas":"Excluido en estad\xedsticas"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.WI),e.Y36(y.so),e.Y36(y.uw),e.Y36(B.ux),e.Y36($.a),e.Y36(j),e.Y36(re.t),e.Y36(se.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fury-form-wizard"]],viewQuery:function(t,a){if(1&t&&(e.Gf(P.NW,7),e.Gf(x.YE,7)),2&t){let s;e.iGM(s=e.CRH())&&(a.paginator=s.first),e.iGM(s=e.CRH())&&(a.sort=s.first)}},inputs:{columns:"columns"},decls:51,vars:16,consts:[[1,"title"],["svgIcon","maintenance_settings"],[1,"card",2,"overflow","scroll","height","550px","width","95%"],[3,"linear"],["stepper","matVerticalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["fxLayout","row","fxLayoutGap","5px",1,"content"],["appearance","outline","fxFlex","auto"],["formControlName","NAME","matInput","","required",""],["formControlName","model","matInput","","required",""],["formControlName","model_maintenance_type_id"],[3,"value",4,"ngFor","ngForOf"],["color","primary","formControlName","active_for_statistics",1,"slide-toggle",3,"change"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-raised-button","","type","button",3,"click"],["color","primary","mat-raised-button","",3,"disabled","click"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["name","Mantenimientos",3,"columns","filterChange"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"value"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"fury-page"),e.TgZ(1,"fury-title",0),e._UZ(2,"mat-icon",1),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"mat-horizontal-stepper",3,4),e.TgZ(8,"mat-step",5),e.TgZ(9,"form",6),e.YNc(10,ue,1,0,"ng-template",7),e.TgZ(11,"div",8),e.TgZ(12,"mat-form-field",9),e.TgZ(13,"mat-label"),e._uU(14,"Veh\xedculo:"),e.qZA(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"mat-form-field",9),e.TgZ(17,"mat-label"),e._uU(18,"Modelo:"),e.qZA(),e._UZ(19,"input",11),e.qZA(),e.qZA(),e.TgZ(20,"div",8),e.TgZ(21,"mat-form-field",9),e.TgZ(22,"mat-label"),e._uU(23,"Tipo de mantenimiento:"),e.qZA(),e.TgZ(24,"mat-select",12),e.YNc(25,pe,2,2,"mat-option",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"mat-slide-toggle",14),e.NdJ("change",function(m){return a.setActiveForStatistics(m)}),e._uU(27),e.qZA(),e.TgZ(28,"div",15),e.TgZ(29,"button",16),e.NdJ("click",function(){return a.close()}),e._uU(30,"CANCELAR"),e.qZA(),e.TgZ(31,"button",17),e.NdJ("click",function(){return a.submit()}),e._uU(32,"GUARDAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"mat-step"),e.YNc(34,_e,1,0,"ng-template",7),e.TgZ(35,"div",18),e.TgZ(36,"button",19),e.NdJ("click",function(){return a.createMeanMaintenanceHistory()}),e.TgZ(37,"mat-icon"),e._uU(38,"add"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"fury-list",20),e.NdJ("filterChange",function(m){return a.onFilterChange(m)}),e.TgZ(40,"table",21),e.YNc(41,Me,2,1,"ng-container",22),e.ynx(42,23),e.YNc(43,ve,1,0,"th",24),e.YNc(44,ye,9,1,"td",25),e.BQk(),e.YNc(45,be,1,0,"tr",26),e.YNc(46,xe,1,0,"tr",27),e.qZA(),e._UZ(47,"mat-paginator",28),e.qZA(),e.TgZ(48,"div",15),e.TgZ(49,"button",16),e.NdJ("click",function(){return a.close()}),e._uU(50,"CERRAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(1),e.hij("Mantenimientos de veh\xedculo ",a.data.NAME,""),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("linear",!0),e.xp6(2),e.Q6J("stepControl",a.settingsFormGroup),e.xp6(1),e.Q6J("formGroup",a.settingsFormGroup),e.xp6(16),e.Q6J("ngForOf",a.models_maintenance_types),e.xp6(2),e.hij(" ",a.included_for_dashboard_label,""),e.xp6(4),e.Q6J("disabled",a.settingsFormGroup.invalid),e.xp6(8),e.Q6J("columns",a.columns),e.xp6(1),e.Q6J("dataSource",a.dataSource),e.xp6(1),e.Q6J("ngForOf",a.columns),e.xp6(4),e.Q6J("matHeaderRowDef",a.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.visibleColumns),e.xp6(1),e.Q6J("pageSize",a.pageSize))},directives:[z.i,K.M,k.Hw,R.Vq,R.C0,c._Y,c.JL,c.sg,R.VY,A.xw,A.SQ,U.KE,A.yH,U.hX,c.Fj,V.Nt,c.JJ,c.u,c.Q7,ce.gD,r.sg,le.Rr,A.Wh,G.lW,X.n,l.BZ,x.YE,l.w1,l.fO,l.Dz,l.as,l.nj,P.NW,me.ey,r.O5,l.ge,x.nU,l.ev,D.p6,D.VK,D.OP,l.XQ,l.Gk],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{margin:24px;max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 10px 13px -6px #0003,0 20px 31px 3px #00000024,0 8px 38px 7px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px;width:50%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:24px;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}"],data:{animation:[I.X,O.M,E.K]}}),n})(),te=(()=>{class n{constructor(t,a){this.mean_maintenance_status=t,this.dialogRef=a,this.header="Agregar mantenimiento",this.measure_unit="Od\xf3metro",this.maintenanceFormGroup=new c.cw({id:new c.NI(""),mean_id:new c.NI("",[c.kI.required]),mean:new c.NI(""),model:new c.NI(""),maintenance_type_id:new c.NI("",[c.kI.required]),maintenance_type:new c.NI("",[c.kI.required]),maintenance_control_value:new c.NI("",[c.kI.required]),maintenance_date:new c.NI("",[c.kI.required]),next_maintenance_control_value:new c.NI("",[c.kI.required]),observations:new c.NI("")}),a.disableClose=!0}ngOnInit(){this.measure_unit=1==this.mean_maintenance_status.control_type?"Od\xf3metro":"Hor\xf3metro",void 0===this.mean_maintenance_status.maintenance_control_value?(this.header="Agregar mantenimiento",this.maintenanceFormGroup.patchValue({id:"",mean_id:this.mean_maintenance_status.mean_id,mean:this.mean_maintenance_status.mean,model:this.mean_maintenance_status.model,maintenance_type_id:this.mean_maintenance_status.maintenance_type_id,maintenance_type:this.mean_maintenance_status.maintenance_type,maintenance_control_value:this.mean_maintenance_status.maintenance_control_value,maintenance_date:this.mean_maintenance_status.maintenance_date,next_maintenance_control_value:this.mean_maintenance_status.next_maintenance_control_value,observations:this.mean_maintenance_status.observations})):(this.header="Editar mantenimiento",console.log("This is the starter object to edit",this.mean_maintenance_status),this.maintenanceFormGroup.patchValue({id:this.mean_maintenance_status.id,mean_id:this.mean_maintenance_status.mean_id,mean:this.mean_maintenance_status.mean,model:this.mean_maintenance_status.model,maintenance_type_id:this.mean_maintenance_status.maintenance_type_id,maintenance_type:this.mean_maintenance_status.maintenance_type,maintenance_control_value:this.mean_maintenance_status.maintenance_control_value,maintenance_date:new Date(this.mean_maintenance_status.maintenance_date),next_maintenance_control_value:this.mean_maintenance_status.next_maintenance_control_value,observations:this.mean_maintenance_status.observations})),this.maintenanceFormGroup.controls.mean.disable(),this.maintenanceFormGroup.controls.model.disable(),this.maintenanceFormGroup.controls.maintenance_type.disable(),this.maintenanceFormGroup.controls.next_maintenance_control_value.disable()}onAddClick(){var t=new ae;t.id=this.mean_maintenance_status.id,t.mean_id=this.mean_maintenance_status.mean_id,t.maintenance_control_value=this.maintenanceFormGroup.controls.maintenance_control_value.value,t.maintenance_type_id=this.mean_maintenance_status.maintenance_type_id,t.next_maintenance_control_value=this.maintenanceFormGroup.controls.next_maintenance_control_value.value,t.maintenance_date=this.getMysqlDate(this.maintenanceFormGroup.controls.maintenance_date.value),t.observations=this.maintenanceFormGroup.controls.observations.value,this.dialogRef.close(t)}onCancelClick(){this.dialogRef.close()}getMysqlDate(t){return null!==t?t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2):""}numericOnly(t){let a=t.target.value+t.key;return new RegExp(/^([1-9][0-9]{0,7}||[0]||[0][.][0-9]{0,2}||[1-9][0-9]{0,7}[.][0-9]{0,2})$/).test(a)?(this.maintenanceFormGroup.controls.next_maintenance_control_value.setValue(+this.mean_maintenance_status.periodicity+ +this.maintenanceFormGroup.controls.maintenance_control_value.value),!0):(this.maintenanceFormGroup.controls.next_maintenance_control_value.setValue(+this.mean_maintenance_status.periodicity+ +this.maintenanceFormGroup.controls.maintenance_control_value.value),!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.WI),e.Y36(y.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["fury-form-wizard"]],decls:53,vars:10,consts:[[1,"title"],["svgIcon","maintenance",2,"height","44px !important","width","44px !important"],["fxLayout","column","fxLayoutAlign","start center"],[3,"formGroup"],[1,"card"],["fxLayout","row","fxLayoutGap","8px",1,"content",2,"margin-top","30px"],["fxFlex","auto","appearance","outline"],["formControlName","mean","matInput","","required",""],["formControlName","model","matInput","","required",""],["fxLayout","row","fxLayoutGap","8px",1,"content",2,"margin-top","6px"],["formControlName","maintenance_type","matInput","","required",""],["appearance","outline","fxFlex","auto",1,"field"],["matInput","","formControlName","maintenance_date","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["color","primary"],["maintenanceDate",""],["fxFlex","auto","appearance","outline",3,"keyup"],["formControlName","maintenance_control_value","matInput","","required",""],["formControlName","next_maintenance_control_value","matInput","","required",""],["formControlName","observations","matInput","","rows","3"],["fxLayout","column","fxLayoutGap","8px",1,"content",2,"margin-top","6px"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"],["color","primary","mat-raised-button","",3,"disabled","click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"fury-page"),e.TgZ(1,"fury-title",0),e._UZ(2,"mat-icon",1),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"form",3),e.TgZ(7,"div",4),e.TgZ(8,"div",5),e.TgZ(9,"mat-form-field",6),e.TgZ(10,"mat-label"),e._uU(11,"Veh\xedculo:"),e.qZA(),e._UZ(12,"input",7),e.qZA(),e.TgZ(13,"mat-form-field",6),e.TgZ(14,"mat-label"),e._uU(15,"Modelo:"),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.qZA(),e.TgZ(17,"div",9),e.TgZ(18,"mat-form-field",6),e.TgZ(19,"mat-label"),e._uU(20,"Tipo de mantenimiento:"),e.qZA(),e._UZ(21,"input",10),e.qZA(),e.qZA(),e.TgZ(22,"div",9),e.TgZ(23,"mat-form-field",11),e.TgZ(24,"mat-label"),e._uU(25,"Fecha del mantenimiento:"),e.qZA(),e._UZ(26,"input",12),e.TgZ(27,"mat-datepicker-toggle",13),e.TgZ(28,"mat-icon",14),e._uU(29,"date_range"),e.qZA(),e.qZA(),e._UZ(30,"mat-datepicker",15,16),e.qZA(),e.qZA(),e.TgZ(32,"div",9),e.TgZ(33,"mat-form-field",17),e.NdJ("keyup",function(m){return a.numericOnly(m)}),e.TgZ(34,"mat-label"),e._uU(35),e.qZA(),e._UZ(36,"input",18),e.qZA(),e.TgZ(37,"mat-form-field",6),e.TgZ(38,"mat-label"),e._uU(39),e.qZA(),e._UZ(40,"input",19),e.qZA(),e.qZA(),e.TgZ(41,"div",9),e.TgZ(42,"mat-form-field",6),e.TgZ(43,"mat-label"),e._uU(44,"Observaciones:"),e.qZA(),e._UZ(45,"textarea",20),e.qZA(),e.qZA(),e.TgZ(46,"div",21),e._UZ(47,"mat-divider"),e.qZA(),e.TgZ(48,"div",22),e.TgZ(49,"button",23),e.NdJ("click",function(){return a.onCancelClick()}),e._uU(50,"CANCELAR"),e.qZA(),e.TgZ(51,"button",24),e.NdJ("click",function(){return a.onAddClick()}),e._uU(52,"GUARDAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const s=e.MAs(31);e.xp6(2),e.Q6J("@scaleIn",void 0),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(1),e.Oqu(a.header),e.xp6(2),e.Q6J("formGroup",a.maintenanceFormGroup),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(19),e.Q6J("matDatepicker",s),e.xp6(1),e.Q6J("for",s),e.xp6(8),e.hij("",a.measure_unit," al mantenimiento"),e.xp6(4),e.hij("M\xe1ximo ",a.measure_unit," antes de pr\xf3ximo mantenimiento:"),e.xp6(12),e.Q6J("disabled",a.maintenanceFormGroup.invalid)}},directives:[z.i,K.M,k.Hw,A.xw,A.Wh,c._Y,c.JL,c.sg,A.SQ,U.KE,A.yH,U.hX,c.Fj,V.Nt,c.JJ,c.u,c.Q7,L.hl,L.nW,U.R9,L.Q0,L.Mq,de.d,G.lW],encapsulation:2,data:{animation:[I.X,O.M,E.K]}}),n})();var Ce=o(39762),Te=o(53580),Ze=o(38932),Ae=o(19165),Se=o(24784);function Pe(n,i){1&n&&(e.TgZ(0,"th",13),e._uU(1,"Rendimiento"),e.qZA())}function Oe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",14),e.TgZ(1,"button",15),e.NdJ("click",function(s){const S=e.CHM(t).$implicit,q=e.oxw();return s.stopPropagation(),q.openGauge(S)}),e._UZ(2,"mat-icon",16),e.qZA(),e.qZA()}}function Ie(n,i){if(1&n&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}function Ee(n,i){if(1&n&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&n){const t=i.$implicit,a=e.oxw(2).$implicit,s=e.oxw();e.xp6(1),e.Oqu(s.getLabel(a.name,t[a.property]))}}function De(n,i){if(1&n&&(e.ynx(0,19),e.YNc(1,Ie,2,1,"th",5),e.YNc(2,Ee,2,1,"td",20),e.BQk()),2&n){const t=e.oxw().$implicit;e.Q6J("matColumnDef",t.property)}}function Ne(n,i){if(1&n&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.name,"")}}const Ue=function(n){return{"background-color":n}};function we(n,i){if(1&n&&(e.TgZ(0,"td",21),e._UZ(1,"button",23),e.qZA()),2&n){const t=i.$implicit,a=e.oxw(2).$implicit,s=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(1,Ue,s.getLabel(a.name,t[a.property])))}}function Fe(n,i){1&n&&(e.ynx(0,22),e.YNc(1,Ne,2,1,"th",5),e.YNc(2,we,2,3,"td",20),e.BQk())}function Le(n,i){if(1&n&&(e.ynx(0),e.YNc(1,De,3,1,"ng-container",17),e.YNc(2,Fe,3,0,"ng-container",18),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.isModelProperty&&"STATUS"!=t.property),e.xp6(1),e.Q6J("ngIf",t.isModelProperty&&"STATUS"==t.property)}}function Je(n,i){1&n&&e._UZ(0,"th",24)}function ke(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",14),e.TgZ(1,"button",25),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(2,"mat-icon"),e._uU(3,"more_horiz"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",26,27),e.TgZ(6,"button",28),e.NdJ("click",function(){const m=e.CHM(t).$implicit;return e.oxw().updateMeanMaintenanceSettings(m)}),e.TgZ(7,"span"),e._uU(8,"Editar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function Re(n,i){1&n&&e._UZ(0,"tr",29)}function Ge(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",30),e.NdJ("click",function(){const m=e.CHM(t).$implicit;return e.oxw().updateMeanMaintenanceSettings(m)}),e.qZA()}}const Qe=function(){return["Tables"]},qe=[{path:"",component:(()=>{class n{constructor(t,a,s,m){this.dialog=t,this._meansMaintenanceServicesService=a,this._meansMaintenanceSettingsService=s,this.snackbar=m,this.subject$=new F.t(1),this.data$=this.subject$.asObservable(),this.sufix="kms",this.columns=[{name:"GAUGE",property:"gauge",visible:!0},{name:"Estatus",property:"STATUS",visible:!0,isModelProperty:!0},{name:"MeanId",property:"mean_id",visible:!1,isModelProperty:!0},{name:"Veh\xedculo",property:"NAME",visible:!0,isModelProperty:!0},{name:"Marca",property:"company",visible:!0,isModelProperty:!0},{name:"IdModelo",property:"model_id",visible:!1,isModelProperty:!0},{name:"Modelo",property:"model",visible:!0,isModelProperty:!0},{name:"Par\xe1metros de mantenimiento",property:"mean_maintenance_set",visible:!1,isModelProperty:!0},{name:"Id tipo de mantenimiento",property:"model_maintenance_type_id",visible:!1,isModelProperty:!0},{name:"Tipo de mantenimiento",property:"maintenance_type",visible:!0,isModelProperty:!0},{name:"A\xf1o",property:"YEAR",visible:!1,isModelProperty:!0},{name:"\xc1rea",property:"area",visible:!1,isModelProperty:!0},{name:"Tipo de control",property:"control_type",visible:!0,isModelProperty:!0},{name:"Factor al mantenimiento",property:"last_factor",visible:!0,isModelProperty:!0},{name:"M\xe1ximo factor pr\xf3ximo",property:"next_factor",visible:!0,isModelProperty:!0},{name:"\xdaltimo mantenimiento",property:"last_maintenance_date",visible:!0,isModelProperty:!0},{name:"Periodicidad de factor",property:"periodicity",visible:!0,isModelProperty:!0},{name:"Factor de tolerancia",property:"threshold",visible:!0,isModelProperty:!0},{name:"\xdaltimo factor registrado",property:"last_factor_reading",visible:!0,isModelProperty:!0},{name:"Observaciones",property:"observations",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(t,a){if(null!=t)return"Tipo de control"===t?(this.sufix=1==a?"kms":"hrs.",1==a?"Od\xf3metro":2==a?"Hor\xf3metro":""):"Factor al mantenimiento"!==t&&"M\xe1ximo factor pr\xf3ximo"!==t&&"Periodicidad de factor"!==t&&"Factor de tolerancia"!==t&&"\xdaltimo factor registrado"!==t||null===a?a:a+" "+this.sufix}get visibleColumns(){return this.columns.filter(t=>t.visible).map(t=>t.property)}getData(){this._meansMaintenanceServicesService.getAll().subscribe(t=>{this.means_maintenance_status=t,this.dataSource=new l.by(t),this.dataSource=new l.by(this.means_maintenance_status),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},t=>{console.log(t)})}ngOnInit(){return(0,w.mG)(this,void 0,void 0,function*(){this.dataSource=new l.by,this.getData(),this.data$.pipe((0,C.h)(t=>!!t)).subscribe(t=>{this.means_maintenance_status=t,this.dataSource.data=this.means_maintenance_status})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}updateMeanMaintenanceSettings(t){this.dialog.open(ee,{data:t}).afterClosed().subscribe(a=>{a&&(this.subject$.next(this.means_maintenance_status),this.getData(),this.data$.pipe((0,C.h)(s=>!!s)).subscribe(s=>{this.means_maintenance_status=s,this.dataSource.data=s}))})}includeMeanIntoDashboards(t){var a=new H;a.mean_id=t.mean_id,a.model_maintenance_type_id=t.model_maintenance_type_id,a.active_for_statistics=t.active_for_statistics?1:2,this._meansMaintenanceSettingsService.update(a).subscribe(s=>{this.snackbar.open(s.message,null,{duration:5e3,panelClass:["green-snackbar"]}),this.subject$.next(this.means_maintenance_status),this.getData(),this.data$.pipe((0,C.h)(m=>!!m)).subscribe(m=>{this.means_maintenance_status=m,this.dataSource.data=m})})}onFilterChange(t){!this.dataSource||(t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t)}ngOnDestroy(){}openGauge(t){this.dialog.open(J,{data:t}).afterClosed().subscribe(()=>{this.ngOnInit()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.uw),e.Y36($.a),e.Y36(j),e.Y36(B.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["means-maintenance-services-table"]],viewQuery:function(t,a){if(1&t&&(e.Gf(P.NW,7),e.Gf(x.YE,7)),2&t){let s;e.iGM(s=e.CRH())&&(a.paginator=s.first),e.iGM(s=e.CRH())&&(a.sort=s.first)}},inputs:{columns:"columns"},decls:16,vars:10,consts:[["mode","card"],["current","Mantenimiento de veh\xedculos",3,"crumbs"],["name","Mantenimiento de veh\xedculos",3,"columns","filterChange"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","gauge"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"click"],["svgIcon","gauge"],[3,"matColumnDef",4,"ngIf"],["matColumnDef","STATUS",4,"ngIf"],[3,"matColumnDef"],["mat-cell","",4,"matCellDef"],["mat-cell",""],["matColumnDef","STATUS"],["type","buton","mat-mini-fab","",2,"cursor","auto","height","20px","width","20px",3,"ngStyle"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"fury-page-layout",0),e.TgZ(1,"fury-page-layout-header"),e._UZ(2,"fury-breadcrumbs",1),e.qZA(),e.TgZ(3,"fury-page-layout-content"),e.TgZ(4,"fury-list",2),e.NdJ("filterChange",function(m){return a.onFilterChange(m)}),e.TgZ(5,"table",3),e.ynx(6,4),e.YNc(7,Pe,2,0,"th",5),e.YNc(8,Oe,3,0,"td",6),e.BQk(),e.YNc(9,Le,3,2,"ng-container",7),e.ynx(10,8),e.YNc(11,Je,1,0,"th",9),e.YNc(12,ke,9,1,"td",6),e.BQk(),e.YNc(13,Re,1,0,"tr",10),e.YNc(14,Ge,1,0,"tr",11),e.qZA(),e._UZ(15,"mat-paginator",12),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@fadeInRight",void 0)("crumbs",e.DdM(9,Qe)),e.xp6(1),e.Q6J("@fadeInUp",void 0),e.xp6(1),e.Q6J("columns",a.columns),e.xp6(1),e.Q6J("dataSource",a.dataSource),e.xp6(4),e.Q6J("ngForOf",a.columns),e.xp6(4),e.Q6J("matHeaderRowDef",a.visibleColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.visibleColumns),e.xp6(1),e.Q6J("pageSize",a.pageSize))},directives:[Ce.N,Te.U,Ze.n,Ae.d,X.n,l.BZ,x.YE,l.w1,l.fO,l.Dz,r.sg,l.as,l.nj,P.NW,l.ge,x.nU,l.ev,G.lW,k.Hw,r.O5,r.PC,Se.Zl,D.p6,D.VK,D.OP,l.XQ,l.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[O.M,I.X]}}),n})()}];let Ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.Bz.forChild(qe)],h.Bz]}),n})();const He=[{path:"",component:ee}];let ne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.Bz.forChild(He)],h.Bz]}),n})();var Q=o(70024);let Be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.ez,c.u5,c.UX,d.J,_.p,u.q,ne,f.Z,Q.EC,Q.Yy,Q.K]]}),n})();var $e=o(74519),We=o(59159),je=o(20120),ze=o(25331);let Ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.ez,u.q,$e.O,f.Z,We.V,je.j,ze.f]]}),n})(),Ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.ez,c.u5,d.J,_.p,u.q,f.Z,Ye,Be,ne,Ke]]}),n})()}}]);