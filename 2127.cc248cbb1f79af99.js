"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[2127],{88914:(b,d,o)=>{o.d(d,{M:()=>r});var e=o(41777);const r=(0,e.X$)("fadeInRight",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateX(-2vw)",opacity:0}),(0,e.jt)("0.4s cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateX(0)",opacity:1}))])])},14499:(b,d,o)=>{o.d(d,{X:()=>r});var e=o(41777);const r=(0,e.X$)("fadeInUp",[(0,e.eR)(":enter",[(0,e.oB)({transform:"translateY(3vh)",opacity:0}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"translateY(0)",opacity:1}))])])},37425:(b,d,o)=>{o.d(d,{K:()=>r});var e=o(41777);const r=(0,e.X$)("scaleIn",[(0,e.eR)(":enter",[(0,e.oB)({transform:"scale(0)"}),(0,e.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,e.oB)({transform:"scale(1)"}))])])},38932:(b,d,o)=>{o.d(d,{n:()=>p});var e=o(5e3),r=o(30277),c=o(3299),h=o(69808),_=o(25245);function g(u,v){if(1&u&&(e.TgZ(0,"div",7),e.TgZ(1,"mat-icon",5),e._uU(2,"chevron_right"),e.qZA(),e.TgZ(3,"div",6),e._uU(4),e.qZA(),e.qZA()),2&u){const y=v.$implicit;e.xp6(4),e.Oqu(y)}}const x=function(){return["/"]};let p=(()=>{class u{constructor(){this.crumbs=[]}ngOnInit(){}}return u.\u0275fac=function(y){return new(y||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(y,m){1&y&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"a",2),e._uU(4,"Home"),e.qZA(),e.YNc(5,g,5,1,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"mat-icon",5),e._uU(8,"chevron_right"),e.qZA(),e.TgZ(9,"div",6),e._uU(10),e.qZA(),e.qZA(),e.qZA()),2&y&&(e.xp6(1),e.Oqu(m.current),e.xp6(2),e.Q6J("routerLink",e.DdM(4,x)),e.xp6(2),e.Q6J("ngForOf",m.crumbs),e.xp6(5),e.Oqu(m.current))},directives:[r.xw,r.Wh,c.yS,h.sg,_.Hw],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}"]}),u})()},94927:(b,d,o)=>{o.d(d,{n:()=>S});var e=o(5e3),r=o(23753),c=o(75778),h=o(80013),_=o(69808),g=o(92181),x=o(30277),p=o(25245),u=o(47423),v=o(77446),y=o(93075);const m=["filter"];function D(C,I){if(1&C&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"mat-icon",8),e._uU(5,"search"),e.qZA(),e._UZ(6,"input",9,10),e.qZA(),e.TgZ(8,"button",11),e.TgZ(9,"mat-icon"),e._uU(10,"filter_list"),e.qZA(),e.qZA(),e.Hsn(11,1),e.qZA()),2&C){const f=e.oxw(),t=e.MAs(3);e.xp6(2),e.Oqu(f.name),e.xp6(6),e.Q6J("matMenuTriggerFor",t)}}function L(C,I){if(1&C){const f=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(A){const T=e.CHM(f).$implicit;return e.oxw().toggleColumnVisibility(T,A)}),e.TgZ(1,"mat-checkbox",13,14),e.NdJ("ngModelChange",function(A){return e.CHM(f).$implicit.visible=A})("click",function(A){return A.stopPropagation()}),e._uU(3),e.qZA(),e.qZA()}if(2&C){const f=I.$implicit;e.xp6(1),e.Q6J("ngModel",f.visible),e.xp6(2),e.hij(" ",f.name," ")}}const P=["*",[["",8,"actions"]]],Z=["*",".actions"];let S=(()=>{class C{constructor(){this.filterChange=new e.vpe}ngAfterViewInit(){this.hideHeader||(0,r.R)(this.filter.nativeElement,"keyup").pipe((0,c.x)(),(0,h.b)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(f,t){t.stopPropagation(),t.stopImmediatePropagation(),f.visible=!f.visible}}return C.\u0275fac=function(f){return new(f||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["fury-list"]],viewQuery:function(f,t){if(1&f&&e.Gf(m,5),2&f){let A;e.iGM(A=e.CRH())&&(t.filter=A.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:Z,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(f,t){1&f&&(e.F$t(P),e.TgZ(0,"div",0),e.YNc(1,D,12,2,"div",1),e.TgZ(2,"mat-menu",2,3),e.YNc(4,L,4,2,"button",4),e.qZA(),e.Hsn(5),e.qZA()),2&f&&(e.xp6(1),e.Q6J("ngIf",!t.hideHeader),e.xp6(3),e.Q6J("ngForOf",t.columns))},directives:[_.O5,g.VK,_.sg,x.xw,x.Wh,x.SQ,x.yH,p.Hw,u.lW,g.p6,v.oG,y.JJ,y.On],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-header-row .mat-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-cell.image-cell,.fury-list-table .mat-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-cell.image-cell img,.fury-list-table .mat-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-cell,.fury-list-table .mat-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-cell.actions-cell,.fury-list-table .mat-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}\n"],encapsulation:2}),C})()},4940:(b,d,o)=>{o.d(d,{p:()=>_});var e=o(69808),r=o(93075),c=o(7057),h=o(5e3);let _=(()=>{class g{}return g.\u0275fac=function(p){return new(p||g)},g.\u0275mod=h.oAB({type:g}),g.\u0275inj=h.cJS({imports:[[e.ez,c.q,r.u5]]}),g})()},19165:(b,d,o)=>{o.d(d,{d:()=>r});var e=o(5e3);let r=(()=>{class c{constructor(){}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275dir=e.lG2({type:c,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]}),c})()},53580:(b,d,o)=>{o.d(d,{U:()=>r});var e=o(5e3);let r=(()=>{class c{constructor(){}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275dir=e.lG2({type:c,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]}),c})()},39762:(b,d,o)=>{o.d(d,{N:()=>r});var e=o(5e3);let r=(()=>{class c{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275dir=e.lG2({type:c,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(_,g){2&_&&e.ekj("fury-page-layout-card",g.isCard)("fury-page-layout-simple",g.isSimple)},inputs:{mode:"mode"}}),c})()},59968:(b,d,o)=>{o.d(d,{i:()=>r});var e=o(5e3);let r=(()=>{class c{constructor(){}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275dir=e.lG2({type:c,selectors:[["","furyPage",""],["fury-page"]],hostAttrs:[1,"fury-page"]}),c})()},32127:(b,d,o)=>{o.r(d),o.d(d,{MeansIepsTableModule:()=>vt});var e=o(69808),r=o(93075),c=o(61264),h=o(4940),_=o(7057),g=o(72467),x=o(3299),p=o(70655),u=o(48966),v=o(86087),y=o(84847),m=o(32075),D=o(96831),L=o(92198),P=o(88914),Z=o(14499),S=o(37425),C=o(36144);class I{constructor(s){this.id=s&&s.id||null,this.mean_id=s&&s.mean_id||null,this.user_id=s&&s.user_id||null,this.type_of_action=s&&s.type_of_action||null,this.timestamp=s&&s.timestamp||null,this.observations=s&&s.observations||""}}var f=o(84872),t=o(5e3),A=o(15702),U=o(66738),T=o(57261),B=o(39762),Y=o(53580),K=o(38932),G=o(19165),F=o(94927),w=o(47423),R=o(92181),H=o(25245),J=o(59968),N=o(36551),E=o(30277),Q=o(67322),$=o(77531),z=o(4834),j=o(24333),k=o(92081);function X(a,s){if(1&a&&(t.TgZ(0,"th",15),t._uU(1),t.qZA()),2&a){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",n.name,"")}}function V(a,s){if(1&a&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&a){const n=s.$implicit,i=t.oxw(2).$implicit,l=t.oxw();t.xp6(1),t.hij(" ",l.getLabel(i.name,n[i.property])," ")}}function q(a,s){if(1&a&&(t.ynx(0,12),t.YNc(1,X,2,1,"th",13),t.YNc(2,V,2,1,"td",14),t.BQk()),2&a){const n=t.oxw().$implicit;t.Q6J("matColumnDef",n.property)}}function tt(a,s){if(1&a&&(t.ynx(0),t.YNc(1,q,3,1,"ng-container",11),t.BQk()),2&a){const n=s.$implicit;t.xp6(1),t.Q6J("ngIf",n.isModelProperty)}}function et(a,s){1&a&&t._UZ(0,"th",17)}function nt(a,s){if(1&a){const n=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(n);const l=t.oxw().$implicit;return t.oxw().includeIntoIepsList(l)}),t.TgZ(1,"span"),t._uU(2,"Incluir en listado IEPS"),t.qZA(),t.qZA()}}function ot(a,s){if(1&a){const n=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(n);const l=t.oxw().$implicit;return t.oxw().excludeFromIepsList(l)}),t.TgZ(1,"span"),t._uU(2,"Excluir de listado IEPS"),t.qZA(),t.qZA()}}function at(a,s){if(1&a){const n=t.EpF();t.TgZ(0,"td",18),t.TgZ(1,"button",19),t.NdJ("click",function(l){return l.stopPropagation()}),t.TgZ(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA(),t.qZA(),t.TgZ(4,"mat-menu",20,21),t.YNc(6,nt,3,0,"button",22),t.YNc(7,ot,3,0,"button",22),t.TgZ(8,"button",23),t.NdJ("click",function(){const M=t.CHM(n).$implicit;return t.oxw().showMeanIepsHistory(M)}),t.TgZ(9,"span"),t._uU(10,"Mostrar bit\xe1cora de inclusi\xf3n"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const n=s.$implicit,i=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("ngIf",0==n.ieps_report),t.xp6(1),t.Q6J("ngIf",1==n.ieps_report)}}function it(a,s){1&a&&t._UZ(0,"tr",24)}function rt(a,s){if(1&a){const n=t.EpF();t.TgZ(0,"tr",25),t.NdJ("click",function(){const M=t.CHM(n).$implicit;return t.oxw().showMeanIepsHistory(M)}),t.qZA()}}const st=function(){return["Tables"]};function lt(a,s){1&a&&t._uU(0,"Historia de asignaci\xf3n de IEPS de dispositivo")}function ct(a,s){if(1&a&&(t.TgZ(0,"th",15),t._uU(1),t.qZA()),2&a){const n=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",n.name,"")}}function ut(a,s){if(1&a&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&a){const n=s.$implicit,i=t.oxw(2).$implicit,l=t.oxw();t.xp6(1),t.hij("",l.getLabel(i.name,n[i.property])," ")}}function pt(a,s){if(1&a&&(t.ynx(0,12),t.YNc(1,ct,2,1,"th",13),t.YNc(2,ut,2,1,"td",14),t.BQk()),2&a){const n=t.oxw().$implicit;t.Q6J("matColumnDef",n.property)}}function mt(a,s){if(1&a&&(t.ynx(0),t.YNc(1,pt,3,1,"ng-container",11),t.BQk()),2&a){const n=s.$implicit;t.xp6(1),t.Q6J("ngIf",n.isModelProperty)}}function dt(a,s){1&a&&t._UZ(0,"tr",17)}function gt(a,s){1&a&&t._UZ(0,"tr",18)}let _t=(()=>{class a{constructor(n,i,l,M,O){this.dialog=n,this.dialogConfirmAction=i,this._meansService=l,this._meansIepsHistoryService=M,this.snackbar=O,this.subject$=new D.t(1),this.data$=this.subject$.asObservable(),this.means=[],this.columns=[{name:"MeanId",property:"id",visible:!0,isModelProperty:!0},{name:"Veh\xedculo",property:"NAME",visible:!0,isModelProperty:!0},{name:"\xc1rea",property:"area_path",visible:!0,isModelProperty:!0},{name:"Incluido en IEPS",property:"ieps_report",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getLabel(n,i){if(null!=n)return"Incluido en IEPS"===n?0==i?"Excluido":"Incluido":i}get visibleColumns(){return this.columns.filter(n=>n.visible).map(n=>n.property)}ngOnInit(){return(0,p.mG)(this,void 0,void 0,function*(){this.dataSource=new m.by,this.getData().then(n=>{this.means=n,this.dataSource=new m.by(this.means),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.data$.pipe((0,L.h)(i=>!!i)).subscribe(i=>{this.means=i,this.dataSource.data=this.means})}).finally(()=>{console.log("fin de proceso",this.means)})})}getData(){return(0,p.mG)(this,void 0,void 0,function*(){return yield this._meansService.getAll().toPromise()})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}showMeanIepsHistory(n){this.dialog.open(ft,{data:n}).afterClosed().subscribe(()=>{this.ngOnInit(),this.ngAfterViewInit()})}includeIntoIepsList(n){this.dialogConfirmAction.open(W,{data:{mean_id:n.id,type_of_action:1}}).afterClosed().subscribe(i=>{if(i){var l=new I;l.mean_id=i.mean_id,l.type_of_action=1,l.observations=i.observations,this._meansIepsHistoryService.create(i).subscribe(M=>{this.ngOnInit(),this.snackbar.open(M.message,null,{duration:5e3,panelClass:["green-snackbar"]})})}})}excludeFromIepsList(n){this.dialogConfirmAction.open(W,{data:{mean_id:n.id,type_of_action:0}}).afterClosed().subscribe(i=>{if(i){var l=new I;l.mean_id=i.mean_id,l.type_of_action=0,l.observations=i.observations,this._meansIepsHistoryService.create(i).subscribe(M=>{this.ngOnInit(),this.snackbar.open(M.message,null,{duration:5e3,panelClass:["green-snackbar"]})})}})}onFilterChange(n){!this.dataSource||(n=(n=n.trim()).toLowerCase(),this.dataSource.filter=n)}ngOnDestroy(){}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(u.uw),t.Y36(u.uw),t.Y36(A._),t.Y36(U.J),t.Y36(T.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["means-ieps-table"]],viewQuery:function(n,i){if(1&n&&(t.Gf(v.NW,7),t.Gf(y.YE,7)),2&n){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first)}},inputs:{columns:"columns"},decls:13,vars:10,consts:[["mode","card"],["current","IEPS vehicular",3,"crumbs"],["name","IEPS vehicular",3,"columns","filterChange"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"fury-page-layout",0),t.TgZ(1,"fury-page-layout-header"),t._UZ(2,"fury-breadcrumbs",1),t.qZA(),t.TgZ(3,"fury-page-layout-content"),t.TgZ(4,"fury-list",2),t.NdJ("filterChange",function(M){return i.onFilterChange(M)}),t.TgZ(5,"table",3),t.YNc(6,tt,2,1,"ng-container",4),t.ynx(7,5),t.YNc(8,et,1,0,"th",6),t.YNc(9,at,11,3,"td",7),t.BQk(),t.YNc(10,it,1,0,"tr",8),t.YNc(11,rt,1,0,"tr",9),t.qZA(),t._UZ(12,"mat-paginator",10),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("@fadeInRight",void 0)("crumbs",t.DdM(9,st)),t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(1),t.Q6J("columns",i.columns),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(1),t.Q6J("ngForOf",i.columns),t.xp6(4),t.Q6J("matHeaderRowDef",i.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.visibleColumns),t.xp6(1),t.Q6J("pageSize",i.pageSize))},directives:[B.N,Y.U,K.n,G.d,F.n,m.BZ,y.YE,e.sg,m.w1,m.fO,m.Dz,m.as,m.nj,v.NW,e.O5,m.ge,y.nU,m.ev,w.lW,R.p6,H.Hw,R.VK,R.OP,m.XQ,m.Gk],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[P.M,Z.X]}}),a})(),W=(()=>{class a{constructor(n,i){this.mean_ieps_history=n,this.dialogRef=i,this.meanIepsHistoryFormGroup=new r.cw({mean_id:new r.NI("",[r.kI.required]),type_of_action:new r.NI("",[r.kI.required]),observations:new r.NI("")}),i.disableClose=!0}ngOnInit(){this.header=1==this.mean_ieps_history.type_of_action?"Incluir en reporte IEPS":"Excluir del reporte IEPS",this.meanIepsHistoryFormGroup.patchValue({mean_id:this.mean_ieps_history.mean_id,type_of_action:this.mean_ieps_history.type_of_action,observations:""})}onAddClick(){var n=new I;n.mean_id=this.mean_ieps_history.mean_id,n.type_of_action=this.mean_ieps_history.type_of_action,n.observations=this.meanIepsHistoryFormGroup.controls.observations.value,this.dialogRef.close(n)}onCancelClick(){this.dialogRef.close()}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(u.WI),t.Y36(u.so))},a.\u0275cmp=t.Xpm({type:a,selectors:[["dialog-confirm-action"]],decls:20,vars:5,consts:[[1,"title"],["svgIcon","update_content",2,"height","30px !important","width","30px !important"],["fxLayout","column","fxLayoutAlign","start center"],[3,"formGroup"],[1,"card"],["fxLayout","row","fxLayoutGap","8px",1,"content",2,"margin-top","6px"],["fxFlex","auto","appearance","outline"],["formControlName","observations","matInput","","rows","3"],["fxLayout","column","fxLayoutGap","8px",1,"content",2,"margin-top","6px"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","24px",2,"margin-top","20px"],["color","primary","mat-raised-button","",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"fury-page"),t.TgZ(1,"fury-title",0),t._UZ(2,"mat-icon",1),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"form",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"mat-form-field",6),t.TgZ(10,"mat-label"),t._uU(11,"Observaciones:"),t.qZA(),t._UZ(12,"textarea",7),t.qZA(),t.qZA(),t.TgZ(13,"div",8),t._UZ(14,"mat-divider"),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"button",10),t.NdJ("click",function(){return i.onCancelClick()}),t._uU(17,"CANCELAR"),t.qZA(),t.TgZ(18,"button",10),t.NdJ("click",function(){return i.onAddClick()}),t._uU(19,"GUARDAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("@scaleIn",void 0),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(1),t.Oqu(i.header),t.xp6(2),t.Q6J("formGroup",i.meanIepsHistoryFormGroup),t.xp6(1),t.Q6J("@fadeInUp",void 0))},directives:[J.i,N.M,H.Hw,E.xw,E.Wh,r._Y,r.JL,r.sg,E.SQ,Q.KE,E.yH,Q.hX,r.Fj,$.Nt,r.JJ,r.u,z.d,w.lW],encapsulation:2,data:{animation:[Z.X,P.M,S.K]}}),a})(),ft=(()=>{class a{constructor(n,i,l,M,O){this.data=n,this.dialogRef=i,this.snackbar=l,this._meansIepsHistoryService=M,this._usersService=O,this.subject$=new D.t(1),this.data$=this.subject$.asObservable(),this.mean=new C.q,this.user=new f.n,this.users=[],this.columns=[{name:"Id",property:"means_ieps_history_id",visible:!0,isModelProperty:!0},{name:"Dispositivo",property:"mean_id",visible:!0,isModelProperty:!0},{name:"Usuario",property:"user_id",visible:!0,isModelProperty:!0},{name:"Tipo de acci\xf3n",property:"type_of_action",visible:!0,isModelProperty:!0},{name:"Observaciones",property:"observations",visible:!0,isModelProperty:!0},{name:"Fecha y hora",property:"timestamp",visible:!0,isModelProperty:!0}],this.pageSize=10,this.dialogRef.disableClose=!0}getLabel(n,i){if(null!=n){if("Usuario"==n){for(var l=0;l<this.users.length;l++)if(i==this.users[l].user_id)return this.users[l].user;return"Regla no definida"}return"Dispositivo"==n?this.data.NAME:"Tipo de acci\xf3n"==n?1==i?"Incluido en reporte":"Excluido del reporte":i}}get visibleColumns(){return this.columns.filter(n=>n.visible).map(n=>n.property)}getData(){this._meansIepsHistoryService.getAllByMeanId(this.data.id).subscribe(n=>{this.means_ieps_history=n,this.dataSource=new m.by(n),this.dataSource=new m.by(this.means_ieps_history),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},n=>{console.log(n)})}ngOnInit(){return(0,p.mG)(this,void 0,void 0,function*(){this.dataSource=new m.by,this.getUsers(),this.getData(),this.data$.pipe((0,L.h)(n=>!!n)).subscribe(n=>{this.means_ieps_history=n,this.dataSource.data=this.means_ieps_history})})}getUsers(){this._usersService.getAll().subscribe(n=>{this.users=n},n=>{console.log(n)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onFilterChange(n){!this.dataSource||(n=(n=n.trim()).toLowerCase(),this.dataSource.filter=n)}ngOnDestroy(){}close(){this.dialogRef.close()}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(u.WI),t.Y36(u.so),t.Y36(T.ux),t.Y36(U.J),t.Y36(j.f))},a.\u0275cmp=t.Xpm({type:a,selectors:[["means-ieps-history-modal"]],viewQuery:function(n,i){if(1&n&&(t.Gf(v.NW,7),t.Gf(y.YE,7)),2&n){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first)}},inputs:{columns:"columns"},decls:18,vars:9,consts:[[1,"title"],[1,"card",2,"overflow","scroll","height","500px","width","99%"],["matStepLabel","","style","margin-bottom: 15px;"],["name","Historial de Ieps",3,"columns","filterChange"],["mat-table","","matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["class","route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["fxLayout","row","fxLayoutAlign","end center",1,"actions"],["color","primary","mat-raised-button","","type","button",2,"margin-bottom","20px",3,"click"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"route-animations-elements"]],template:function(n,i){1&n&&(t.TgZ(0,"fury-page"),t.TgZ(1,"fury-title",0),t.TgZ(2,"mat-icon"),t._uU(3,"history"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t._UZ(6,"br"),t.qZA(),t.TgZ(7,"div",1),t.YNc(8,lt,1,0,"ng-template",2),t.TgZ(9,"fury-list",3),t.NdJ("filterChange",function(M){return i.onFilterChange(M)}),t.TgZ(10,"table",4),t.YNc(11,mt,2,1,"ng-container",5),t.YNc(12,dt,1,0,"tr",6),t.YNc(13,gt,1,0,"tr",7),t.qZA(),t._UZ(14,"mat-paginator",8),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"button",10),t.NdJ("click",function(){return i.close()}),t._uU(17,"CERRAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(4),t.Q6J("@fadeInRight",void 0),t.xp6(1),t.hij("Historia de IEPS para ",i.data.NAME,""),t.xp6(2),t.Q6J("@fadeInUp",void 0),t.xp6(2),t.Q6J("columns",i.columns),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(1),t.Q6J("ngForOf",i.columns),t.xp6(1),t.Q6J("matHeaderRowDef",i.visibleColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.visibleColumns),t.xp6(1),t.Q6J("pageSize",i.pageSize))},directives:[J.i,N.M,H.Hw,k.VY,F.n,m.BZ,y.YE,e.sg,m.as,m.nj,v.NW,E.xw,E.Wh,w.lW,e.O5,m.w1,m.fO,m.Dz,m.ge,y.nU,m.ev,m.XQ,m.Gk],styles:[".title[_ngcontent-%COMP%]{color:#000}.card[_ngcontent-%COMP%]{max-width:100%;border-radius:8px;overflow:hidden;box-shadow:0 10px 13px -6px #0003,0 20px 31px 3px #00000024,0 8px 38px 7px #0000001f}.card[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font:var(--font-title)}.card[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{font:var(--font-subheading-1)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:12px 0}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{margin-top:12px;width:50%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-top:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:0;padding:24px 8px 0}.readonly-wrapper[_ngcontent-%COMP%]{cursor:not-allowed!important}.readonly-wrapper[_ngcontent-%COMP%]   .readonly-block[_ngcontent-%COMP%]{pointer-events:none!important}"],data:{animation:[Z.X,P.M,S.K]}}),a})();const ht=[{path:"",component:_t}];let yt=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[x.Bz.forChild(ht)],x.Bz]}),a})(),vt=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[e.ez,r.u5,r.UX,c.J,h.p,_.q,g.Z,yt]]}),a})()},15702:(b,d,o)=>{o.d(d,{_:()=>_});var e=o(40520),r=o(98545),c=o(5e3),h=o(33344);let _=(()=>{class g{constructor(p,u){this.http=p,this.tokenStorage=u}getHeaders(){var p=new e.WM,u=this.tokenStorage.getToken();return p.set("token",u||"{}")}getFromId(p){var u=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS+"/"+p,{headers:u})}getFiltered(p){var u=this.getHeaders();const v=(new e.LE).appendAll(p);return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS,{params:v,headers:u})}getAll(){var p=this.getHeaders();return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS,{headers:p})}getEfficiencies(p){var u=this.getHeaders();const v=(new e.LE).appendAll(p);return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS_EFFICIENCIES,{params:v,headers:u})}getEfficienciesFromId(p,u){var v=this.getHeaders();const y=(new e.LE).appendAll(u);return this.http.get(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS_EFFICIENCIES+"/"+p,{params:y,headers:v})}create(p){var u=this.getHeaders();return this.http.post(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS,p,{headers:u})}update(p){var u=this.getHeaders();return this.http.put(r._.settings.apiServer.API_URL_BASE+r._.settings.apiServer.MEANS+"/"+p.id,p,{headers:u})}}return g.\u0275fac=function(p){return new(p||g)(c.LFG(e.eN),c.LFG(h.i))},g.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);